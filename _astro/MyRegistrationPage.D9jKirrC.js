import{c as et,o as P,n as ce,s as w,e as Be,d as De,u as He,l as ie,q as oe,f as bn,g as Sn,h as Ht,i as se,B as p,j as me,p as Et,N as At,r as _n,b as ue,k as Ye,I as zt,m as Se,S as Rt,t as ht,v as Je,w as vn,x as kn,y as yn,z as xn}from"./utils.e6z2UOng.js";import{g,a as $,i as u,c as l,t as h,r as Mt,h as X,j as jt,k as ft,l as Kt,e as re,b as K,n as bt,p as St,q as Dn,w as pn,x as En,y as An,z as Rn,A as z,S as D,B as wn,C as Wt,D as rt,E as _t,m as wt,G as Tn,H as Un,I as vt,s as Ae,J as Cn,M as he,F as V,f as ze,K as Ee,L as it,N as Me,O as Pn,u as Fn,d as fe,P as Zt,Q as Vt,R as Ze}from"./web.BGDrlDKA.js";import{c as ve,u as Ln}from"./store.XlVLhlw3.js";import{E as $e}from"./ExitSpa.B46xHIx7.js";import{T as In}from"./Textarea.Df3zblOd.js";const[Ie,Ge]=ve([]);function qt(e,t){if(t?.uuid!==void 0&&Ie.find(o=>o.uuid===t.uuid)!==void 0)return mt(t.uuid,e,t);const n=t?.uuid??crypto.randomUUID(),r=t?.duration??5e3,i=t?.kind??"gray",a=t?.dismissable??!0,s=setTimeout(()=>{Ge(Ie.filter(o=>o.uuid!==n))},r);return Ge(Ie.length,{uuid:n,kind:i,message:e,duration:r,dismissable:a,cleanup:()=>clearTimeout(s)}),n}function mt(e,t,n){const r=Ie.find(c=>c.uuid===e);if(r===void 0)return e;r.cleanup();const i=n.duration??r.duration,a=n.kind??r.kind,s=n?.dismissable??r.dismissable,o=setTimeout(()=>{Ge(Ie.filter(c=>c.uuid!==e))},i);return Ge(c=>c.uuid===e,{uuid:e,kind:a,message:t,duration:i,dismissable:s,cleanup:()=>clearTimeout(o)}),e}const Nn=et(["SATURDAY","SUNDAY"]);P({uuid:w().uuid(),day:Nn,from:ce(),to:ce()}).refine(e=>e.from<e.to,{message:"A TimeSlot can't end before it starts."});P({name:w(),label:w(),description:w()});const Jt=et(["draft","published","archived"]);async function Yn(e){const t=new URL(Be("/lst26/load"));t.searchParams.append("secret",e);const n=await fetch(t);if(!n.ok)return{kind:"FAILURE"};const r=await n.json();return typeof r=="object"&&r!==null?{kind:"SUCCESS",data:r}:(console.error("`last_save` not found on ",r),{kind:"FAILURE"})}async function On(e,t){try{const n=await fetch(Be("/lst26/save"),{method:"POST",body:JSON.stringify({secret:t,save:e}),headers:{"Content-Type":"application/json"}});return n.ok?{kind:"SUCCESS",data:t}:(console.error(await n.text()),{kind:"FAILURE"})}catch(n){return console.error(n),{kind:"FAILURE"}}}async function Bn(){try{const e=new URL(Be("/lst26/public")),t=await fetch(e,{headers:{"Content-Type":"application/json"}});return t.ok?{kind:"SUCCESS",data:await t.json()}:(console.error(await t.text()),{kind:"FAILURE"})}catch(e){return console.error(e),{kind:"FAILURE"}}}async function Hn(e){try{const t=new URL(Be("/lst26/public/admin"));t.searchParams.append("secret",e);const n=await fetch(t,{headers:{"Content-Type":"application/json"}});return n.ok?{kind:"SUCCESS",data:await n.json()}:(console.error(await n.text()),{kind:"FAILURE"})}catch(t){return console.error(t),{kind:"FAILURE"}}}et(["SAVING","IDLE","ERROR"]);const zn=De(He([ie("admin"),ie("erklaerbaer")])),Qe=et(["FRIDAY","SATURDAY","SUNDAY"]),Mn=P({from:ce(),to:ce()}),jn=Mn.extend({day:Qe});function We(e,t){const{startTime:n,endTime:r}=Kn(t);return!(n.hour>=e.hour||n.hour===e.hour&&n.minute>e.minute||r.hour<=e.hour||r.hour===e.hour&&r.minute<e.minute)}function Kn(e){const{startTime:t,endTime:n}=e;return{startTime:t.hour===0&&t.minute===0?oe.PlainTime.from({hour:23,minute:59}):t,endTime:n.hour===0&&n.minute===0?oe.PlainTime.from({hour:23,minute:59}):n}}function Wn(e,t){const{startTime:n,endTime:r}=e,{startTime:i,endTime:a}=t;return We(n,t)||We(r,t)||We(i,e)||We(a,e)||n===i&&r===a}function Zn(e,t=!1){const{from:n,to:r}=e;if(n>r)return[];const i=r-n;return Gt(t?i+1:i,n)}function Gt(e,t=0){return[...Array(e)].map((n,r)=>r+t)}function Te(e,t){const{minutes:n}=t??{minutes:!0};return n?`${e.hour}.${e.minute.toString().padStart(2,"0")}`:`${e.hour}`}function Vn(e,t){const n=e.minute+e.hour*60,r=t.minute+t.hour*60,i=Math.abs(r-n),a=i%60,s=Math.round((i-a)/60);return a===0?`${s} ${s===1?"Stunde":"Stunden"}`:s===0?`${a} ${a===1?"Minute":"Minuten"}`:`${s},${a} Stunden`}const qn=P({name:w(),email:w(),mobile:w()}),Jn=P({kind:ie("ERKLAERBAER"),uuid:w().uuid(),slot:jn}),Gn=He([P({kind:ie("SELF"),helpEntryUuid:w().uuid(),uuid:w().uuid()}),P({kind:ie("FRIEND"),helpEntryUuid:w().uuid(),name:w(),uuid:w().uuid()}),Jn]),Qn=P({uuid:w(),start:P({day:Qe,time:w()}),end:P({day:Qe,time:w()})}),Xn=He([P({kind:ie("NONE"),maxSeats:ce()}),P({kind:ie("LIMITED"),maxSeats:ce()})]),er=P({uuid:w().uuid(),status:Jt,title:w(),organizer:w(),shortDescription:w(),longDescription:w(),participating:Xn,timeSlots:De(Qn),tagNames:w()}),tr=P({}),nr=P({version:ie(9),contact:qn,config:P({wantsUpdates:bn()}),helping:De(Gn),program:P({organising:De(er),participating:De(tr)})}),rr=P({kind:ie("SUCCESS"),status:Jt,roles:zn,data:nr});async function ir(e){if(e.length!==36&&e.length!==4)return{kind:"FAILURE",reason:"SECRET_INVALID"};const t=await Yn(e);if(t.kind==="FAILURE")return console.error("Unexpected error. Maybe network, maybe server error."),{kind:"FAILURE",reason:"GENERAL"};const n=rr.safeParse(t.data);return n.success?{kind:"SUCCESS",data:n.data}:(console.error(n.error),{kind:"FAILURE",reason:"PARSE_ERROR"})}const lt=crypto.randomUUID();async function lr(e,t,n){const[r,i]=ve(e);i("saveState","SAVING"),qt("Am Speichern...",{uuid:lt,dismissable:!1});const a=new Date;try{if((await On(t,n)).kind==="FAILURE")throw Error("")}catch(s){return i("saveState","ERROR"),console.error(s),mt(lt,"Speichern war nicht möglich!",{kind:"danger",duration:1e4,dismissable:!0}),{kind:"FAILURE"}}return mt(lt,`Zuletzt gespeichert um: ${Ht(a)} Uhr`,{kind:"success",dismissable:!0}),i("saveState","IDLE"),{kind:"SUCCESS",data:a}}const ar=Sn(lr,1e3);var Tt=h("<br>"),sr=h("<strong>Donnerstag, 21. August 2025"),ur=h("<p>Deine Anmeldung wird geladen..."),or=h("<p>Das Programm wird geladen..."),cr=h("<p>Leider ist ein unerwarteter Fehler passiert. Versuche deine Anmeldung erneut zu laden. Wiederholt sich dieser Fehler, bitte kontaktiere uns sobald als möglich über das <!$><!/>, da dies nicht passieren sollte."),dr=h("<p>Wir konnten leider keine Anmeldung finden. Wenn du bereits eine Anmeldung begonnen hast, solltest du den korrekten Link per E-Mail erhalten haben.<br><br> Falls du noch keine Anmeldung begonnen hast, kannst du <!$><!/> deine persönliche Anmeldung beginnen. <br><br>Für generelle Fragen oder Probleme, schreibe uns doch bitte über unser <!$><!/>."),gr=h("<p>Wir konnten leider keine Spielrunde unter diesem Link finden.<br><br>Vermutlich liegt es an uns. Bitte kontaktiere uns sobald als möglich über das "),hr=h("<p>Leider ist ein unerwarteter Fehler passiert. Vermutlich liegt es an uns. Bitte kontaktiere uns sobald als möglich über das <!$><!/>."),mr=h("<p>Leider ist ein unerwarteter Fehler passiert beim Laden des Programmes. Vermutlich liegt es an uns. Bitte kontaktiere uns sobald als möglich über das <!$><!/>."),$r=h("<p>Leider ist ein unerwarteter Fehler passiert beim Laden von Daten. Vermutlich liegt es an uns. Bitte kontaktiere uns sobald als möglich über das <!$><!/>."),fr=h("<p>Leider ist das keine gültige Seite. Versuche deine Anmeldung erneut zu laden. Wiederholt sich dieser Fehler, bitte kontaktiere uns sobald als möglich über das <!$><!/>, da dies nicht passieren sollte."),br=h("<p>Leider hast du keinen Zugriff auf diese Seite. Sollte dies ein Fehler sein, dann kontaktiere uns sobald als möglich über das <!$><!/>.");g(Tt),g(Tt),g(sr);const Sr={registration:g(ur),program:g(or)},_r={general:(()=>{var e=g(cr),t=e.firstChild,n=t.nextSibling,[r,i]=$(n.nextSibling);return r.nextSibling,u(e,l($e,{href:"/kontakt",children:"Kontaktformular"}),r,i),e})(),secretError:(()=>{var e=g(dr),t=e.firstChild,n=t.nextSibling,r=n.nextSibling,i=r.nextSibling,a=i.nextSibling,[s,o]=$(a.nextSibling),c=s.nextSibling,d=c.nextSibling,m=d.nextSibling,b=m.nextSibling,v=b.nextSibling,[S,k]=$(v.nextSibling);return S.nextSibling,u(e,l($e,{href:"/anmeldung",children:"hier"}),s,o),u(e,l($e,{href:"/kontakt",children:"Kontaktformular"}),S,k),e})(),gameroundUuidError:g(gr),ourMistake:(()=>{var e=g(hr),t=e.firstChild,n=t.nextSibling,[r,i]=$(n.nextSibling);return r.nextSibling,u(e,l($e,{href:"/kontakt",children:"Kontaktformular"}),r,i),e})(),program:(()=>{var e=g(mr),t=e.firstChild,n=t.nextSibling,[r,i]=$(n.nextSibling);return r.nextSibling,u(e,l($e,{href:"/kontakt",children:"Kontaktformular"}),r,i),e})(),help:(()=>{var e=g($r),t=e.firstChild,n=t.nextSibling,[r,i]=$(n.nextSibling);return r.nextSibling,u(e,l($e,{href:"/kontakt",children:"Kontaktformular"}),r,i),e})(),siteNotFound:(()=>{var e=g(fr),t=e.firstChild,n=t.nextSibling,[r,i]=$(n.nextSibling);return r.nextSibling,u(e,l($e,{href:"/kontakt",children:"Kontaktformular"}),r,i),e})(),noAccess:(()=>{var e=g(br),t=e.firstChild,n=t.nextSibling,[r,i]=$(n.nextSibling);return r.nextSibling,u(e,l($e,{href:"/kontakt",children:"Kontaktformular"}),r,i),e})()},vr="Neue Spielrunde erstellen",kr="Neuer Eintrag erstellen",yr="kein Zeitslot ausgewählt",xr="Die Eingabe scheint keine gültige E-Mail-Adresse zu sein.",Dr="Dies ist ein Pflichtfeld.",pr="Dieses Feld ist auf {} Zeichen limitiert.",Er={FRIDAY:"Freitag",SATURDAY:"Samstag",SUNDAY:"Sonntag"},Ar={draft:"Entwurf",published:"Veröffentlicht",archived:"Gelöscht"},T={loading:Sr,error:_r,createNewGameRound:vr,createNewEntry:kr,missingSlot:yr,invalidEmail:xr,mandatoryField:Dr,charLimitBy:pr,days:Er,publishingSteps:Ar};function Qt(){let e=new Set;function t(i){return e.add(i),()=>e.delete(i)}let n=!1;function r(i,a){if(n)return!(n=!1);const s={to:i,options:a,defaultPrevented:!1,preventDefault:()=>s.defaultPrevented=!0};for(const o of e)o.listener({...s,from:o.location,retry:c=>{c&&(n=!0),o.navigate(i,{...a,resolve:!1})}});return!s.defaultPrevented}return{subscribe:t,confirm:r}}let $t;function kt(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),$t=window.history.state._depth}kt();function Rr(e){return{...e,_depth:window.history.state&&window.history.state._depth}}function wr(e,t){let n=!1;return()=>{const r=$t;kt();const i=r==null?null:$t-r;if(n){n=!1;return}i&&t(i)?(n=!0,window.history.go(-i)):e()}}const Tr=/^(?:[a-z0-9]+:)?\/\//i,Ur=/^\/+|(\/)\/+$/g,Xt="http://sr";function pe(e,t=!1){const n=e.replace(Ur,"$1");return n?t||/^[?#]/.test(n)?n:"/"+n:""}function Ve(e,t,n){if(Tr.test(t))return;const r=pe(e),i=n&&pe(n);let a="";return!i||t.startsWith("/")?a=r:i.toLowerCase().indexOf(r.toLowerCase())!==0?a=r+i:a=i,(a||"/")+pe(t,!a)}function Cr(e,t){if(e==null)throw new Error(t);return e}function Pr(e,t){return pe(e).replace(/\/*(\*.*)?$/g,"")+pe(t)}function en(e){const t={};return e.searchParams.forEach((n,r)=>{r in t?Array.isArray(t[r])?t[r].push(n):t[r]=[t[r],n]:t[r]=n}),t}function Fr(e,t,n){const[r,i]=e.split("/*",2),a=r.split("/").filter(Boolean),s=a.length;return o=>{const c=o.split("/").filter(Boolean),d=c.length-s;if(d<0||d>0&&i===void 0&&!t)return null;const m={path:s?"":"/",params:{}},b=v=>n===void 0?void 0:n[v];for(let v=0;v<s;v++){const S=a[v],k=S[0]===":",f=k?c[v]:c[v].toLowerCase(),_=k?S.slice(1):S.toLowerCase();if(k&&at(f,b(_)))m.params[_]=f;else if(k||!at(f,_))return null;m.path+=`/${f}`}if(i){const v=d?c.slice(-d).join("/"):"";if(at(v,b(i)))m.params[i]=v;else return null}return m}}function at(e,t){const n=r=>r===e;return t===void 0?!0:typeof t=="string"?n(t):typeof t=="function"?t(e):Array.isArray(t)?t.some(n):t instanceof RegExp?t.test(e):!1}function Lr(e){const[t,n]=e.pattern.split("/*",2),r=t.split("/").filter(Boolean);return r.reduce((i,a)=>i+(a.startsWith(":")?2:3),r.length-(n===void 0?0:1))}function tn(e){const t=new Map,n=jt();return new Proxy({},{get(r,i){return t.has(i)||Mt(n,()=>t.set(i,X(()=>e()[i]))),t.get(i)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())},has(r,i){return i in e()}})}function Ir(e,t){const n=new URLSearchParams(e);Object.entries(t).forEach(([i,a])=>{a==null||a===""||a instanceof Array&&!a.length?n.delete(i):a instanceof Array?(n.delete(i),a.forEach(s=>{n.append(i,String(s))})):n.set(i,String(a))});const r=n.toString();return r?`?${r}`:""}function nn(e){let t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];let n=e.slice(0,t.index),r=e.slice(t.index+t[0].length);const i=[n,n+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(r);)i.push(n+=t[1]),r=r.slice(t[0].length);return nn(r).reduce((a,s)=>[...a,...i.map(o=>o+s)],[])}const Nr=100,rn=Kt(),yt=Kt(),je=()=>Cr(ft(rn),"<A> and 'use' router primitives can be only used inside a Route."),Yr=()=>ft(yt)||je().base,Or=e=>{const t=Yr();return X(()=>t.resolvePath(e()))},Br=e=>{const t=je();return X(()=>{const n=e();return n!==void 0?t.renderPath(n):n})},xt=()=>je().navigatorFactory(),ln=()=>je().location,an=()=>je().params,Hr=()=>{const e=ln(),t=xt(),n=(r,i)=>{const a=St(()=>Ir(e.search,r)+e.hash);t(a,{scroll:!1,resolve:!1,...i})};return[e.query,n]};function zr(e,t=""){const{component:n,preload:r,load:i,children:a,info:s}=e,o=!a||Array.isArray(a)&&!a.length,c={key:e,component:n,preload:r||i,info:s};return sn(e.path).reduce((d,m)=>{for(const b of nn(m)){const v=Pr(t,b);let S=o?v:v.split("/*",1)[0];S=S.split("/").map(k=>k.startsWith(":")||k.startsWith("*")?k:encodeURIComponent(k)).join("/"),d.push({...c,originalPath:m,pattern:S,matcher:Fr(S,!o,e.matchFilters)})}return d},[])}function Mr(e,t=0){return{routes:e,score:Lr(e[e.length-1])*1e4-t,matcher(n){const r=[];for(let i=e.length-1;i>=0;i--){const a=e[i],s=a.matcher(n);if(!s)return null;r.unshift({...s,route:a})}return r}}}function sn(e){return Array.isArray(e)?e:[e]}function un(e,t="",n=[],r=[]){const i=sn(e);for(let a=0,s=i.length;a<s;a++){const o=i[a];if(o&&typeof o=="object"){o.hasOwnProperty("path")||(o.path="");const c=zr(o,t);for(const d of c){n.push(d);const m=Array.isArray(o.children)&&o.children.length===0;if(o.children&&!m)un(o.children,d.pattern,n,r);else{const b=Mr([...n],r.length);r.push(b)}n.pop()}}}return n.length?r:r.sort((a,s)=>s.score-a.score)}function st(e,t){for(let n=0,r=e.length;n<r;n++){const i=e[n].matcher(t);if(i)return i}return[]}function jr(e,t,n){const r=new URL(Xt),i=X(m=>{const b=e();try{return new URL(b,r)}catch{return console.error(`Invalid path ${b}`),m}},r,{equals:(m,b)=>m.href===b.href}),a=X(()=>i().pathname),s=X(()=>i().search,!0),o=X(()=>i().hash),c=()=>"",d=bt(s,()=>en(i()));return{get pathname(){return a()},get search(){return s()},get hash(){return o()},get state(){return t()},get key(){return c()},query:n?n(d):tn(d)}}let xe;function Kr(){return xe}function Wr(e,t,n,r={}){const{signal:[i,a],utils:s={}}=e,o=s.parsePath||(E=>E),c=s.renderPath||(E=>E),d=s.beforeLeave||Qt(),m=Ve("",r.base||"");if(m===void 0)throw new Error(`${m} is not a valid base path`);m&&!i().value&&a({value:m,replace:!0,scroll:!1});const[b,v]=re(!1);let S;const k=(E,A)=>{A.value===f()&&A.state===y()||(S===void 0&&v(!0),xe=E,S=A,pn(()=>{S===A&&(_(S.value),x(S.state),An(),F[1](B=>B.filter(G=>G.pending)))}).finally(()=>{S===A&&En(()=>{xe=void 0,E==="navigate"&&de(S),v(!1),S=void 0})}))},[f,_]=re(i().value),[y,x]=re(i().state),C=jr(f,y,s.queryWrapper),U=[],F=re([]),I=X(()=>typeof r.transformUrl=="function"?st(t(),r.transformUrl(C.pathname)):st(t(),C.pathname)),O=()=>{const E=I(),A={};for(let B=0;B<E.length;B++)Object.assign(A,E[B].params);return A},W=s.paramsWrapper?s.paramsWrapper(O,t):tn(O),N={pattern:m,path:()=>m,outlet:()=>null,resolvePath(E){return Ve(m,E)}};return K(bt(i,E=>k("native",E),{defer:!0})),{base:N,location:C,params:W,isRouting:b,renderPath:c,parsePath:o,navigatorFactory:te,matches:I,beforeLeave:d,preloadRoute:q,singleFlight:r.singleFlight===void 0?!0:r.singleFlight,submissions:F};function ee(E,A,B){St(()=>{if(typeof A=="number"){A&&(s.go?s.go(A):console.warn("Router integration does not support relative routing"));return}const G=!A||A[0]==="?",{replace:ge,resolve:Z,scroll:H,state:Q}={replace:!1,resolve:!G,scroll:!0,...B},L=Z?E.resolvePath(A):Ve(G&&C.pathname||"",A);if(L===void 0)throw new Error(`Path '${A}' is not a routable path`);if(U.length>=Nr)throw new Error("Too many redirects");const J=f();(L!==J||Q!==y())&&(Dn||d.confirm(L,B)&&(U.push({value:J,replace:ge,scroll:H,state:y()}),k("navigate",{value:L,state:Q})))})}function te(E){return E=E||ft(yt)||N,(A,B)=>ee(E,A,B)}function de(E){const A=U[0];A&&(a({...E,replace:A.replace,scroll:A.scroll}),U.length=0)}function q(E,A){const B=st(t(),E.pathname),G=xe;xe="preload";for(let ge in B){const{route:Z,params:H}=B[ge];Z.component&&Z.component.preload&&Z.component.preload();const{preload:Q}=Z;A&&Q&&Mt(n(),()=>Q({params:H,location:{pathname:E.pathname,search:E.search,hash:E.hash,query:en(E),state:null,key:""},intent:"preload"}))}xe=G}}function Zr(e,t,n,r){const{base:i,location:a,params:s}=e,{pattern:o,component:c,preload:d}=r().route,m=X(()=>r().path);c&&c.preload&&c.preload();const b=d?d({params:s,location:a,intent:xe||"initial"}):void 0;return{parent:t,pattern:o,path:m,outlet:()=>c?l(c,{params:s,location:a,data:b,get children(){return n()}}):n(),resolvePath(S){return Ve(i.path(),S,m())}}}const Vr=e=>t=>{const{base:n}=t,r=Rn(()=>t.children),i=X(()=>un(r(),t.base||""));let a;const s=Wr(e,i,()=>a,{base:n,singleFlight:t.singleFlight,transformUrl:t.transformUrl});return e.create&&e.create(s),l(rn.Provider,{value:s,get children(){return l(qr,{routerState:s,get root(){return t.root},get preload(){return t.rootPreload||t.rootLoad},get children(){return[z(()=>(a=jt())&&null),l(Jr,{routerState:s,get branches(){return i()}})]}})}})};function qr(e){const t=e.routerState.location,n=e.routerState.params,r=X(()=>e.preload&&St(()=>{e.preload({params:n,location:t,intent:Kr()||"initial"})}));return l(D,{get when(){return e.root},keyed:!0,get fallback(){return e.children},children:i=>l(i,{params:n,location:t,get data(){return r()},get children(){return e.children}})})}function Jr(e){const t=[];let n;const r=X(bt(e.routerState.matches,(i,a,s)=>{let o=a&&i.length===a.length;const c=[];for(let d=0,m=i.length;d<m;d++){const b=a&&a[d],v=i[d];s&&b&&v.route.key===b.route.key?c[d]=s[d]:(o=!1,t[d]&&t[d](),wn(S=>{t[d]=S,c[d]=Zr(e.routerState,c[d-1]||e.routerState.base,Ut(()=>r()[d+1]),()=>{const k=e.routerState.matches();return k[d]??k[0]})}))}return t.splice(i.length).forEach(d=>d()),s&&o?s:(n=c[0],c)}));return Ut(()=>r()&&n)()}const Ut=e=>()=>l(D,{get when(){return e()},keyed:!0,children:t=>l(yt.Provider,{value:t,get children(){return t.outlet()}})});function Gr([e,t],n,r){return[e,r?i=>t(r(i)):t]}function Qr(e){let t=!1;const n=i=>typeof i=="string"?{value:i}:i,r=Gr(re(n(e.get()),{equals:(i,a)=>i.value===a.value&&i.state===a.state}),void 0,i=>(!t&&e.set(i),rt.registry&&!rt.done&&(rt.done=!0),i));return e.init&&Wt(e.init((i=e.get())=>{t=!0,r[1](n(i)),t=!1})),Vr({signal:r,create:e.create,utils:e.utils})}function Xr(e,t,n){return e.addEventListener(t,n),()=>e.removeEventListener(t,n)}function ei(e,t){const n=e&&document.getElementById(e);n?n.scrollIntoView():t&&window.scrollTo(0,0)}const ti=new Map;function ni(e=!0,t=!1,n="/_server",r){return i=>{const a=i.base.path(),s=i.navigatorFactory(i.base);let o,c;function d(f){return f.namespaceURI==="http://www.w3.org/2000/svg"}function m(f){if(f.defaultPrevented||f.button!==0||f.metaKey||f.altKey||f.ctrlKey||f.shiftKey)return;const _=f.composedPath().find(I=>I instanceof Node&&I.nodeName.toUpperCase()==="A");if(!_||t&&!_.hasAttribute("link"))return;const y=d(_),x=y?_.href.baseVal:_.href;if((y?_.target.baseVal:_.target)||!x&&!_.hasAttribute("state"))return;const U=(_.getAttribute("rel")||"").split(/\s+/);if(_.hasAttribute("download")||U&&U.includes("external"))return;const F=y?new URL(x,document.baseURI):new URL(x);if(!(F.origin!==window.location.origin||a&&F.pathname&&!F.pathname.toLowerCase().startsWith(a.toLowerCase())))return[_,F]}function b(f){const _=m(f);if(!_)return;const[y,x]=_,C=i.parsePath(x.pathname+x.search+x.hash),U=y.getAttribute("state");f.preventDefault(),s(C,{resolve:!1,replace:y.hasAttribute("replace"),scroll:!y.hasAttribute("noscroll"),state:U?JSON.parse(U):void 0})}function v(f){const _=m(f);if(!_)return;const[y,x]=_;i.preloadRoute(x,y.getAttribute("preload")!=="false")}function S(f){clearTimeout(o);const _=m(f);if(!_)return c=null;const[y,x]=_;c!==y&&(o=setTimeout(()=>{i.preloadRoute(x,y.getAttribute("preload")!=="false"),c=y},20))}function k(f){if(f.defaultPrevented)return;let _=f.submitter&&f.submitter.hasAttribute("formaction")?f.submitter.getAttribute("formaction"):f.target.getAttribute("action");if(!_)return;if(!_.startsWith("https://action/")){const x=new URL(_,Xt);if(_=i.parsePath(x.pathname+x.search),!_.startsWith(n))return}if(f.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const y=ti.get(_);if(y){f.preventDefault();const x=new FormData(f.target,f.submitter);y.call({r:i,f:f.target},f.target.enctype==="multipart/form-data"?x:new URLSearchParams(x))}}_t(["click","submit"]),document.addEventListener("click",b),e&&(document.addEventListener("mousemove",S,{passive:!0}),document.addEventListener("focusin",v,{passive:!0}),document.addEventListener("touchstart",v,{passive:!0})),document.addEventListener("submit",k),Wt(()=>{document.removeEventListener("click",b),e&&(document.removeEventListener("mousemove",S),document.removeEventListener("focusin",v),document.removeEventListener("touchstart",v)),document.removeEventListener("submit",k)})}}function ri(e){const t=e.replace(/^.*?#/,"");if(!t.startsWith("/")){const[,n="/"]=window.location.hash.split("#",2);return`${n}#${t}`}return t}function ii(e){const t=()=>window.location.hash.slice(1),n=Qt();return Qr({get:t,set({value:r,replace:i,scroll:a,state:s}){i?window.history.replaceState(Rr(s),"","#"+r):window.history.pushState(s,"","#"+r);const o=r.indexOf("#"),c=o>=0?r.slice(o+1):"";ei(c,a),kt()},init:r=>Xr(window,"hashchange",wr(r,i=>!n.confirm(i&&i<0?i:t()))),create:ni(e.preload,e.explicitLinks,e.actionBase),utils:{go:r=>window.history.go(r),renderPath:r=>`#${r}`,parsePath:ri,beforeLeave:n}})(e)}var li=h("<a>");function j(e){e=wt({inactiveClass:"inactive",activeClass:"active"},e);const[,t]=Tn(e,["href","state","class","activeClass","inactiveClass","end"]),n=Or(()=>e.href),r=Br(n),i=ln(),a=X(()=>{const s=n();if(s===void 0)return[!1,!1];const o=pe(s.split(/[?#]/,1)[0]).toLowerCase(),c=decodeURI(pe(i.pathname).toLowerCase());return[e.end?o===c:c.startsWith(o+"/")||c===o,o===c]});return(()=>{var s=g(li);return Un(s,wt(t,{get href(){return r()||e.href},get state(){return JSON.stringify(e.state)},get classList(){return{...e.class&&{[e.class]:!0},[e.inactiveClass]:!a()[0],[e.activeClass]:a()[0],...t.classList}},link:"",get"aria-current"(){return a()[1]?"page":void 0}}),!1,!1),vt(),s})()}var ai=h("<div class=grid><!$><!/><div>"),si=h("<div class=boxLink>");function _e(e){const t=e.type??"special";return(()=>{var n=g(si);return u(n,l(p,{type:t,get onClick(){return e.onClick},get children(){var r=g(ai),i=r.firstChild,[a,s]=$(i.nextSibling),o=a.nextSibling;return u(r,l(se,{get icon(){return e.icon}}),a,s),u(o,()=>e.children),r}})),n})()}var ui=h("<h3>Programm ansehen"),oi=h("<p>Melde dich (und deine Freunde) für diverse Spielrunden an."),Ct=h("<br>"),ci=h("<h3>Programmpunkte erstellen"),di=h("<p>Erstelle und editiere Programmpunkte."),gi=h("<h3>Helfen"),hi=h("<p>Beim Kiosk und der Essensausgabe können wir immer ein paar helfende Hände gebrauchen."),mi=h("<h3>Zusammenfassung"),$i=h("<p>Erhalte einen Überblick über dein gesamtes Programm."),fi=h("<div><!$><!/><!$><!/><br><!$><!/>");function bi(e){return(()=>{var t=g(fi),n=t.firstChild,[r,i]=$(n.nextSibling),a=r.nextSibling,[s,o]=$(a.nextSibling),c=s.nextSibling,d=c.nextSibling,[m,b]=$(d.nextSibling);return u(t,l(D,{get when(){return e.roles.includes("admin")},get children(){return[l(j,{get href(){return e.link("/programm")},class:"button-link",get children(){return l(_e,{icon:"dice-d20",get children(){return[g(ui),g(oi)]}})}}),g(Ct),l(j,{get href(){return e.link("/erstellen")},class:"button-link",get children(){return l(_e,{icon:"grid-2-plus",get children(){return[g(ci),g(di)]}})}}),g(Ct)]}}),r,i),u(t,l(j,{get href(){return e.link("/helfen")},class:"button-link",get children(){return l(_e,{icon:"hand-heart",get children(){return[g(gi),g(hi)]}})}}),s,o),u(t,l(j,{get href(){return e.link("/zusammenfassung")},class:"button-link",get children(){return l(_e,{icon:"list",get children(){return[g(mi),g($i)]}})}}),m,b),t})()}var Si=h("<a class=header-anchor>");function _i(e){return encodeURIComponent(e.replaceAll(/\s/g,"-").replaceAll("&","").replaceAll(/-{1,}/g,"-").toLocaleLowerCase())}function Ke(e){const t=_i("title"in e?e.id??e.title:e.id);return l(Cn,{get component(){return`h${e.level}`},id:t,get children(){var n=g(Si);return Ae(n,"href",`#${t}`),u(n,(()=>{var r=z(()=>"title"in e);return()=>r()?e.title:e.children})()),n}})}var vi=h("<div style=display:grid;gap:1rem><!$><!/><!$><!/><!$><!/>"),ki=h("<div><div style=margin-block-end:1.5rem></div><!$><!/>"),yi=h("<p>Konflikte gefunden! Bitte stelle sicher, dass du nicht zeitlich überlappende Spielrunden eingetragen hast:"),xi=h('<div style="display:grid;grid-template-columns:1fr max-content 1fr;gap:1rem;margin-block:0.5rem"><!$><!/><span style=color:var(--clr-warning-10);align-self:center;font-size:2rem></span><!$><!/>'),Di=h("<div><!$><!/><div class=entries></div><div class=after-hour><div class=annotation>"),pi=h("<div><div class=annotation></div><div class=background>"),Ei=h("<div class=entry>");function on(e){const t=e.exclude??[];return(()=>{var n=g(vi),r=n.firstChild,[i,a]=$(r.nextSibling),s=i.nextSibling,[o,c]=$(s.nextSibling),d=o.nextSibling,[m,b]=$(d.nextSibling);return u(n,l(D,{get when(){return z(()=>!t.includes("FRIDAY")&&e.openingHours.FRIDAY.open.from!==e.openingHours.FRIDAY.open.to)()&&(e.dayFilter===null||e.dayFilter==="FRIDAY")},get children(){return l(ut,{get programEntries(){return e.programEntries.FRIDAY},get openingHoursOfDay(){return e.openingHours.FRIDAY},day:"FRIDAY",get conflictsAllowed(){return e.conflictsAllowed??!1},get columns(){return e.columns}})}}),i,a),u(n,l(D,{get when(){return z(()=>!t.includes("SATURDAY"))()&&e.dayFilter===null||e.dayFilter==="SATURDAY"},get children(){return l(ut,{get programEntries(){return e.programEntries.SATURDAY},get openingHoursOfDay(){return e.openingHours.SATURDAY},day:"SATURDAY",get conflictsAllowed(){return e.conflictsAllowed??!1},get columns(){return e.columns}})}}),o,c),u(n,l(D,{get when(){return z(()=>!t.includes("SUNDAY"))()&&e.dayFilter===null||e.dayFilter==="SUNDAY"},get children(){return l(ut,{get programEntries(){return e.programEntries.SUNDAY},get openingHoursOfDay(){return e.openingHours.SUNDAY},day:"SUNDAY",get conflictsAllowed(){return e.conflictsAllowed??!1},get columns(){return e.columns}})}}),m,b),n})()}function ut(e){const t=e.conflictsAllowed?[]:Ri(e.programEntries);return(()=>{var n=g(ki),r=n.firstChild,i=r.nextSibling,[a,s]=$(i.nextSibling);return u(r,l(Ke,{level:4,get title(){return T.days[e.day]}})),u(n,l(ze,{get fallback(){return[l(p,{type:"danger",get children(){return g(yi)}}),l(V,{each:t,children:([o,c])=>(()=>{var d=g(xi),m=d.firstChild,[b,v]=$(m.nextSibling),S=b.nextSibling,k=S.nextSibling,[f,_]=$(k.nextSibling);return u(d,()=>o.component(),b,v),u(S,l(se,{icon:"triangle-exclamation"})),u(d,()=>c.component(),f,_),d})()})]},get children(){return l(he,{get when(){return t.length===0},get children(){return l(Ai,{get programEntries(){return e.programEntries},get openingHoursOfDay(){return e.openingHoursOfDay},get day(){return e.day},get conflictsAllowed(){return e.conflictsAllowed},get columns(){return e.columns}})}})}}),a,s),n})()}function Ai(e){const t=Zn(e.openingHoursOfDay.open),n=e.openingHoursOfDay.breaks.flatMap(({from:s,to:o})=>{me(s<o,`Break is not valid, as from '${s}' is not smaller than to '${o}'`);const c=[s];let d=o-s;for(;d>1;)c.push(s+--d);return c}),r=(t[0]??0)-1,i=t.at(-1)??0,a=()=>{const s=["timetable"];return e.conflictsAllowed&&s.push(e.columns===2?"two-columns":e.columns===4?"four-columns":""),s.join(" ")};return(()=>{var s=g(Di),o=s.firstChild,[c,d]=$(o.nextSibling),m=c.nextSibling,b=m.nextSibling,v=b.firstChild;return u(s,l(V,{each:t,children:S=>{const k=n.includes(S);return(()=>{var f=g(pi),_=f.firstChild;return Ee(f,`hour ${k?"break":""}`),u(_,S),K(y=>it(f,Pt({startTime:oe.PlainTime.from({hour:S,minute:0}),endTime:oe.PlainTime.from({hour:S,minute:0})},r,e.day,e.openingHoursOfDay),y)),f})()}}),c,d),u(m,l(V,{get each(){return e.programEntries},children:S=>(()=>{var k=g(Ei);return u(k,()=>S.component()),K(f=>it(k,Pt(S.range,r,e.day,e.openingHoursOfDay),f)),k})()})),u(v,i+1),K(S=>{var k=a(),f=`grid-row: 1 / ${i-r+1};`;return k!==S.e&&Ee(s,S.e=k),S.t=it(m,f,S.t),S},{e:void 0,t:void 0}),s})()}function Pt(e,t,n,r){const{startTime:i,endTime:a}=e,s=i.hour-t,o=a.hour===0?24-t:a.hour-t,c=r.open.to;return me(s>0,`[${JSON.stringify(e)}] Entry can't start at '${i.hour}'.`),me(o>0,`[${JSON.stringify(e)}] Entry can't end at '${a.hour}'.`),me(a.hour<=c,`[${JSON.stringify(e)}] Entry can't end at '${a.hour}'. Closing hour set to '${c}' on day '${n}'`),`grid-row: ${s} / ${o};`}function Ri(e){const t=[];return e.forEach((n,r)=>{e.slice(r+1).forEach(i=>{Wn(n.range,i.range)&&t.push([n,i])})}),t}const ke=oe.PlainDate.from({year:2026,month:3,day:13}),Y=oe.PlainDate.from({year:2026,month:3,day:14}),M=oe.PlainDate.from({year:2026,month:3,day:15}),Xe={FRIDAY:ke,SATURDAY:Y,SUNDAY:M};function Re(e){const{year:t,month:n,day:r}=e;return ke.year===t&&ke.month===n&&ke.day===r?"FRIDAY":Y.year===t&&Y.month===n&&Y.day===r?"SATURDAY":M.year===t&&M.month===n&&M.day===r?"SUNDAY":null}const cn={FRIDAY:{open:{from:0,to:0},breaks:[]},SATURDAY:{open:{from:10,to:24},breaks:[]},SUNDAY:{open:{from:10,to:18},breaks:[]}},Oe={kitchen:{title:"Küche",description:"Mahlzeit vorbereiten, unterstützen beim Kochen und Abwaschen."},service:{title:"Essensausgabe",description:""},cleaning:{title:"Reinigung",description:"Unterstützen beim Küche aufräumen und putzen."},kiosk:{title:"Kiosk",description:"Am Kiosk Getränke (inkl. Kaffee) und Snacks verkaufen."},flohmarkt:{title:"Flohmarkt",description:"Hilf uns beim Auf- oder Abbau des Flohmarkt und der Annahme oder Abgabe von Spielen."},checkout:{title:"Kiosk oder Flohmarkt",description:"Am Kiosk Getränke und Snacks verkaufen oder am Flohmarkt die Kasse bedienen."},setup:{title:"Menü-Vorbereitung / Aufbau",description:"Hilf uns beim Zubereiten der Menüs und Aufstellen von Tischen, Stühle und der Bibliothek."},breakdown:{title:"Abbau",description:"Hilf uns beim Zusammenräumen von Tischen, Stühle, der Bibliothek und dem Flohmarkt."}},we=[{uuid:"eb443040-0674-429c-a3ad-48634a323b76",count:4,kind:"setup",dateTime:{startDate:ke.toPlainDateTime({hour:16,minute:0}),endDate:ke.toPlainDateTime({hour:21,minute:0})}},{uuid:"91699a72-78d0-4dc9-bfe1-ece55b15db7d",count:1,kind:"flohmarkt",dateTime:{startDate:ke.toPlainDateTime({hour:19,minute:0}),endDate:ke.toPlainDateTime({hour:22,minute:0})}},{uuid:"9ebca7e9-f44a-4cc9-8961-73539f17d5d6",count:2,kind:"checkout",dateTime:{startDate:Y.toPlainDateTime({hour:10,minute:0}),endDate:Y.toPlainDateTime({hour:12,minute:0})}},{uuid:"6303bd52-cd10-4dd0-b760-b71ab971ad3b",count:4,kind:"flohmarkt",dateTime:{startDate:Y.toPlainDateTime({hour:9,minute:0}),endDate:Y.toPlainDateTime({hour:11,minute:0})}},{uuid:"804c379d-c747-4d7c-9f0c-a53f8548216e",count:1,kind:"kitchen",dateTime:{startDate:Y.toPlainDateTime({hour:11,minute:0}),endDate:Y.toPlainDateTime({hour:13,minute:0})}},{uuid:"bfec6f59-14eb-45b9-a21c-d33ee2205b64",count:2,kind:"checkout",dateTime:{startDate:Y.toPlainDateTime({hour:12,minute:0}),endDate:Y.toPlainDateTime({hour:14,minute:0})}},{uuid:"8db23dfd-616e-4f1d-9a07-deb6e519d35a",count:1,kind:"kitchen",dateTime:{startDate:Y.toPlainDateTime({hour:13,minute:0}),endDate:Y.toPlainDateTime({hour:15,minute:0})}},{uuid:"477a1c27-b660-4221-9be0-de34de910f4b",count:2,kind:"checkout",dateTime:{startDate:Y.toPlainDateTime({hour:14,minute:0}),endDate:Y.toPlainDateTime({hour:16,minute:0})}},{uuid:"490c799f-ced5-461e-a483-ad6a90df221b",count:2,kind:"checkout",dateTime:{startDate:Y.toPlainDateTime({hour:16,minute:0}),endDate:Y.toPlainDateTime({hour:18,minute:0})}},{uuid:"c9f79536-225a-41ee-93e6-ef1741b511f7",count:1,kind:"kitchen",dateTime:{startDate:Y.toPlainDateTime({hour:17,minute:0}),endDate:Y.toPlainDateTime({hour:19,minute:0})}},{uuid:"c6c3f0f7-04c6-4819-95e6-aa8476e4392c",count:2,kind:"checkout",dateTime:{startDate:Y.toPlainDateTime({hour:18,minute:0}),endDate:Y.toPlainDateTime({hour:20,minute:0})}},{uuid:"9748b1e6-1712-449b-8dda-eb44f172071e",count:1,kind:"kitchen",dateTime:{startDate:Y.toPlainDateTime({hour:19,minute:0}),endDate:Y.toPlainDateTime({hour:21,minute:0})}},{uuid:"e1a9b252-628c-4c01-b8e1-e1964b51e646",count:2,kind:"checkout",dateTime:{startDate:M.toPlainDateTime({hour:10,minute:0}),endDate:M.toPlainDateTime({hour:12,minute:0})}},{uuid:"873a1308-57bc-46bc-bdfc-a82213364c77",count:1,kind:"kitchen",dateTime:{startDate:M.toPlainDateTime({hour:11,minute:0}),endDate:M.toPlainDateTime({hour:13,minute:0})}},{uuid:"2e9864a9-0208-4e56-b232-dcd258e31545",count:2,kind:"checkout",dateTime:{startDate:M.toPlainDateTime({hour:12,minute:0}),endDate:M.toPlainDateTime({hour:14,minute:0})}},{uuid:"caef5fea-8458-4b65-b699-9c4e5ee6589d",count:1,kind:"kitchen",dateTime:{startDate:M.toPlainDateTime({hour:13,minute:0}),endDate:M.toPlainDateTime({hour:15,minute:0})}},{uuid:"0da24180-0269-4206-adf7-4b9faeefa091",count:2,kind:"checkout",dateTime:{startDate:M.toPlainDateTime({hour:14,minute:0}),endDate:M.toPlainDateTime({hour:16,minute:0})}},{uuid:"40eaef18-d6a0-46e8-b3e5-a98be09cef57",count:2,kind:"checkout",dateTime:{startDate:M.toPlainDateTime({hour:16,minute:0}),endDate:M.toPlainDateTime({hour:18,minute:0})}},{uuid:"b9da7047-c359-49fa-b558-53207ac5255a",count:2,kind:"flohmarkt",dateTime:{startDate:M.toPlainDateTime({hour:17,minute:0}),endDate:M.toPlainDateTime({hour:19,minute:0})}},{uuid:"c0e1d54c-0832-4147-9054-082208dab2f2",count:4,kind:"breakdown",dateTime:{startDate:M.toPlainDateTime({hour:17,minute:0}),endDate:M.toPlainDateTime({hour:20,minute:0})}}],wi=we.map(e=>e.uuid),Ft=Object.entries(Object.groupBy(wi,e=>e)).reduce((e,[t,n])=>[...e,{uuid:t,count:n?.length??0}],[]).filter(({count:e})=>e!==1);if(Ft.length>0)throw Error(`duplicate uuids found:  ${Ft.map(({uuid:e})=>e).join(", ")}`);function Ti(e){return we.find(t=>t.uuid===e)??null}const qe={FRIDAY:{open:{from:16,to:22},breaks:[{from:16,to:22}]},SATURDAY:{open:{from:9,to:24},breaks:[{from:9,to:10}]},SUNDAY:{open:{from:10,to:20},breaks:[{from:18,to:20}]}};var Ui=h("<span>");function tt(e){const t=()=>{const n=["chip"];return n.push(e.kind??"gray"),e.inverted&&n.push("inverted"),e.size==="small"&&n.push("small"),n.join(" ")};return(()=>{var n=g(Ui);return u(n,()=>e.children),K(r=>{var i=t(),a=e.title;return i!==r.e&&Ee(n,r.e=i),a!==r.t&&Ae(n,"title",r.t=a),r},{e:void 0,t:void 0}),n})()}const Ci=P({start:w(),end:w()}).transform((e,t)=>{const{start:n,end:r}=e,i=Et(n),a=Et(r);return i.kind==="ERROR"?(t.addIssue({code:"custom",message:i.message}),At):a.kind==="ERROR"?(t.addIssue({code:"custom",message:a.message}),At):{startDate:oe.PlainDateTime.from({year:i.value.year,month:i.value.month,day:i.value.day,hour:i.value.hour,minute:i.value.minute}),endDate:oe.PlainDateTime.from({year:a.value.year,month:a.value.month,day:a.value.day,hour:a.value.hour,minute:a.value.minute})}}),Pi=P({uuid:w(),title:w(),organizer:w(),timeSlot:Ci,shortDescription:w(),longDescription:w(),participating:He([P({kind:ie("NONE"),maxSeats:ce()}),P({kind:ie("LIMITED"),maxSeats:ce()})]),tagNames:w()}),Fi=_n(w(),ce()),Li=P({programEntries:De(Pi),reservations:Fi});async function Ii(){const e=await Bn();if(e.kind==="FAILURE")return console.error("Unexpected error. Maybe network, maybe server error."),{kind:"FAILURE"};const t=Li.safeParse(e.data);return t.success?{kind:"SUCCESS",data:t.data}:{kind:"FAILURE"}}var Ni=h("<div style=display:flex;flex-wrap:wrap;gap:1rem;justify-content:space-between><h5 style=margin:0>Filter"),Yi=h("<div style=display:flex;flex-wrap:wrap;gap:0.5rem><!$><!/><!$><!/><!$><!/><!$><!/>");function dn(e){const t=e.exclude??[];return l(p,{get children(){return[g(Ni),(()=>{var n=g(Yi),r=n.firstChild,[i,a]=$(r.nextSibling),s=i.nextSibling,[o,c]=$(s.nextSibling),d=o.nextSibling,[m,b]=$(d.nextSibling),v=m.nextSibling,[S,k]=$(v.nextSibling);return u(n,l(ue,{label:"Alle Tage",get kind(){return e.dayFilter()===null?"success":"gray"},onClick:()=>e.setDayFilter(null)}),i,a),u(n,l(D,{get when(){return!t.includes("FRIDAY")},get children(){return l(ue,{label:"Freitag",get kind(){return e.dayFilter()==="FRIDAY"?"success":"gray"},onClick:()=>e.setDayFilter("FRIDAY")})}}),o,c),u(n,l(D,{get when(){return!t.includes("SATURDAY")},get children(){return l(ue,{label:"Samstag",get kind(){return e.dayFilter()==="SATURDAY"?"success":"gray"},onClick:()=>e.setDayFilter("SATURDAY")})}}),m,b),u(n,l(D,{get when(){return!t.includes("SUNDAY")},get children(){return l(ue,{label:"Sonntag",get kind(){return e.dayFilter()==="SUNDAY"?"success":"gray"},onClick:()=>e.setDayFilter("SUNDAY")})}}),S,k),n})()]}})}var Oi=h("<p>Beim Kiosk und der Essensausgabe können wir immer ein paar helfende Hände gebrauchen. Wenn du bereit bist zu helfen, klicke in der jeweiligen Stunde auf das Handsymbol <!$><!/>."),Fe=h("<br>"),Bi=h("<h4>Zur Anmeldung für Erklärbären"),Hi=h("<div class=dynamic-columns><p>Eines der Hauptziele der Luzerner Spieltage ist es, dass die Besucher/-innen noch nicht gespielte Spiele ausprobieren können. Dazu unterstützen uns jedes Jahr Freiwillige und erklären die ihnen bekannten Spiele aus der Spiele-Bibliothek. Diese Erklärbären sind durch ihr rotes T-Shirt erkennbar.</p><!$><!/>"),zi=h("<p>Plan konnte nicht geladen werden."),Mi=h("<div><!$><!/><!$><!/><h5></h5><p class=duration><span><!$><!/>-<!$><!/>&nbsp;Uhr | </span><em><!$><!/>&nbsp;/&nbsp;<!$><!/>");function ji(e){const[t,n]=re(null);return[(()=>{var r=g(Oi),i=r.firstChild,a=i.nextSibling,[s,o]=$(a.nextSibling);return s.nextSibling,u(r,l(se,{icon:"hand-heart"}),s,o),r})(),g(Fe),l(p,{type:"special",get children(){return["Melde bitte 15 Minuten vor Schichtbeginn bei einem OK-Mitglied, beim"," ",l($e,{href:"/adresse",children:"Eingang zum Würzenbachsaal."})]}}),g(Fe),l(Ke,{level:3,title:"Erklärbären"}),g(Fe),(()=>{var r=g(Hi),i=r.firstChild,a=i.nextSibling,[s,o]=$(a.nextSibling);return u(r,l(j,{get href(){return e.link("/erklaerbaer")},class:"button-link",style:"margin-block-end: 1rem; padding: 0;",get children(){return l(_e,{icon:"forward",type:"success",get children(){return g(Bi)}})}}),s,o),r})(),g(Fe),l(dn,{dayFilter:t,setDayFilter:n}),g(Fe),l(Me,{get fallback(){return l(p,{get children(){return T.loading.program}})},get children(){return l(D,{get when(){return e.publicResource()},get fallback(){return l(p,{type:"danger",get children(){return T.error.help}})},children:r=>l(D,{get when(){return r().kind==="SUCCESS"},get fallback(){return l(p,{type:"danger",get children(){return g(zi)}})},get children(){return l(Ki,{get myHelpReservations(){return e.reservations$.get()},get allReservations(){return r().data.reservations},get isEditable(){return e.isEditable},get link(){return e.link},get dayFilter(){return t()}})}})})}})]}function Ki(e){const t=()=>Object.keys(e.allReservations),n=()=>({FRIDAY:ot({day:"FRIDAY",entries:we,alreadyReservedUuids:t(),myReservations:e.myHelpReservations,link:e.link}),SATURDAY:ot({day:"SATURDAY",entries:we,alreadyReservedUuids:t(),myReservations:e.myHelpReservations,link:e.link}),SUNDAY:ot({day:"SUNDAY",entries:we,alreadyReservedUuids:t(),myReservations:e.myHelpReservations,link:e.link})});return l(on,{get programEntries(){return n()},openingHours:qe,conflictsAllowed:!0,columns:4,get dayFilter(){return e.dayFilter}})}function ot(e){const t=xt(),n=[],r=Wi(e.alreadyReservedUuids);return Object.groupBy(e.entries,a=>Re(a.dateTime.startDate)??"empty")[e.day]?.forEach(a=>{const s=()=>a.count-(r[a.uuid]??0),o=()=>e.myReservations.filter(m=>"helpEntryUuid"in m&&m.helpEntryUuid===a.uuid).length>0,c=()=>{const m=["box-simple","timeview-entry"];return o()&&m.push("success"),m.join(" ")},d={startTime:oe.PlainTime.from({hour:a.dateTime.startDate.hour,minute:a.dateTime.startDate.minute}),endTime:a.dateTime.startDate.day!==a.dateTime.endDate.day?oe.PlainTime.from({hour:a.dateTime.endDate.hour,minute:a.dateTime.endDate.minute}):oe.PlainTime.from({hour:a.dateTime.endDate.hour,minute:a.dateTime.endDate.minute})};n.push({range:d,component:()=>(()=>{var m=g(Mi),b=m.firstChild,[v,S]=$(b.nextSibling),k=v.nextSibling,[f,_]=$(k.nextSibling),y=f.nextSibling,x=y.nextSibling,C=x.firstChild,U=C.firstChild,[F,I]=$(U.nextSibling),O=F.nextSibling,W=O.nextSibling,[N,ee]=$(W.nextSibling);N.nextSibling;var te=C.nextSibling,de=te.firstChild,[q,E]=$(de.nextSibling),A=q.nextSibling,B=A.nextSibling,[G,ge]=$(B.nextSibling);return m.$$click=()=>t(e.link(`/helfen/${a.uuid}`)),u(m,l(tt,{title:"Helfer:innen gesucht",get inverted(){return o()},size:"small",children:"HL"}),v,S),u(m,l(Ye,{icon:"hand-heart",kind:"ghost",onClick:()=>t(e.link(`/helfen/${a.uuid}`)),title:"Helfen"}),f,_),u(y,()=>Oe[a.kind].title),u(C,()=>d.startTime.hour,F,I),u(C,()=>d.endTime.hour,N,ee),u(te,()=>a.count-s(),q,E),u(te,()=>a.count,G,ge),K(Z=>{var H=c(),Q=Oe[a.kind].title;return H!==Z.e&&Ee(m,Z.e=H),Q!==Z.t&&Ae(y,"title",Z.t=Q),Z},{e:void 0,t:void 0}),vt(),m})()})}),n}function Wi(e){const t=Object.groupBy(e,r=>r),n={};for(const r of e)n[r]=t[r]?.length??0;return n}_t(["click"]);var Zi=h("<dialog closedby=any><!$><!/><!$><!/><!$><!/>"),Vi=h("<h4>");function qi(e=!1){return{open:e}}function Ji(e){let t;const[n,r]=ve(e.store);Pn(()=>{n.open?t.showModal():t.close()});function i(){r({open:!1}),e.onClose?.()}const a=()=>{const s=[];return e.type!==void 0&&s.push(e.type),e.size!==void 0&&s.push(e.size),e.onClose!==void 0&&s.push("dialog-with-close"),s};return(()=>{var s=g(Zi),o=s.firstChild,[c,d]=$(o.nextSibling),m=c.nextSibling,[b,v]=$(m.nextSibling),S=b.nextSibling,[k,f]=$(S.nextSibling);s.addEventListener("close",i);var _=t;return typeof _=="function"?Fn(_,s):t=s,u(s,l(D,{get when(){return e.onClose},get children(){return l(Ye,{onClick:i,icon:"circle-xmark",kind:"gray"})}}),c,d),u(s,l(D,{get when(){return e.title},children:y=>(()=>{var x=g(Vi);return u(x,y),x})()}),b,v),u(s,()=>e.children,k,f),K(()=>Ee(s,a().join(" "))),s})()}var Gi=h("<p>");function ct(e){const[t,n]=ve(e.store),r=e.showErrors==="ALWAYS",i=()=>r||t.isDirty?e.errors??[]:[];return[l(zt,{get label(){return e.label},get name(){return e.name},get value(){return t.value},onValueUpdate:a=>{n("value",a),e.onUpdate?.()},onBlur:()=>n("isDirty",!0),get type(){return e.type},get required(){return e.required},get isHoneypot(){return e.isHoneypot},get disabled(){return e.disabled}}),l(D,{get when(){return i().length>0},get children(){return l(p,{type:"danger",get children(){return l(V,{get each(){return i()},children:a=>(()=>{var s=g(Gi);return u(s,a),s})()})}})}})]}w().transform(e=>({value:e,isDirty:!1}));function dt(e){return{value:e,isDirty:!1}}ce().transform(e=>({value:e,isDirty:!1}));var Qi=h("<div><!$><!/><br><!$><!/><br><!$><!/>"),Xi=h("<h5>"),el=h("<p class=duration>von <!$><!/> bis <!$><!/> Uhr <em><small>(<!$><!/>)"),tl=h("<div>");function nl(e){const[t,n]=re(null),r=rl(e.save,e.publicState,e.link),i=ll(r),a=al(r);return(()=>{var s=g(Qi),o=s.firstChild,[c,d]=$(o.nextSibling),m=c.nextSibling,b=m.nextSibling,[v,S]=$(b.nextSibling),k=v.nextSibling,f=k.nextSibling,[_,y]=$(f.nextSibling);return u(s,l(Ke,{level:3,title:"Mein Programm"}),c,d),u(s,l(dn,{dayFilter:t,setDayFilter:n,exclude:i}),v,S),u(s,l(on,{get dayFilter(){return t()},programEntries:r,openingHours:a,conflictsAllowed:!1,columns:1,exclude:i}),_,y),s})()}function rl(e,t,n){const{helping:r}=e,i={FRIDAY:[],SATURDAY:[],SUNDAY:[]},a=r.map(o=>{if(o.kind==="ERKLAERBAER"){const d={startDate:Xe[o.slot.day].toPlainDateTime({hour:o.slot.from,minute:0}),endDate:Xe[o.slot.day].toPlainDateTime({hour:o.slot.to,minute:0})};return{...o,meta:{dateTime:d}}}const c=we.find(d=>d.uuid===o.helpEntryUuid);return me(c!==void 0,`Help UUID is invalid: '${o.helpEntryUuid}'`),{...o,meta:c}}),s=Object.groupBy(a,o=>{const{startDate:c,endDate:d}=o.meta.dateTime;return`${c.year}-${c.month}-${c.day}-${c.hour}-${c.minute}--${d.year}-${d.month}-${d.day}-${d.hour}-${d.minute}`});return Object.values(s).forEach(o=>{if(o===void 0)return;const c=o[0];if(c===void 0)return;let d=!0;const m=o.map(f=>f.kind==="ERKLAERBAER"?["Erklärbär","ME"]:f.kind==="SELF"?[Oe[f.meta.kind].title,"ME"]:(d=!1,[Oe[f.meta.kind].title,f.name])),b=d?m.map(([f])=>f).join(", "):m.map(([f,_])=>_==="ME"?f:`${f} (${_})`).join("; "),v=Re(c.meta.dateTime.startDate);me(v!==null,`Date '${JSON.stringify(c.meta.dateTime.startDate)}' is not a valid event date.`);const S={startTime:c.meta.dateTime.startDate.toPlainTime(),endTime:c.meta.dateTime.endDate.toPlainTime()},k=c.kind==="ERKLAERBAER"?"/erklaerbaer":`/helfen/${c.helpEntryUuid}`;i[v].push({range:S,component:()=>l(il,{title:b,range:S,kind:"help",path:k,link:n})})}),a.forEach(o=>{switch(o.kind){case"SELF":{const c=Re(o.meta.dateTime.startDate);me(c!==null,`Date '${JSON.stringify(o.meta.dateTime.startDate)}' is not a valid event date.`);break}case"FRIEND":{const c=Re(o.meta.dateTime.startDate);me(c!==null,`Date '${JSON.stringify(o.meta.dateTime.startDate)}' is not a valid event date.`);break}}}),i}function il(e){const t={"master-draft":{label:"SL",help:"Spielleitung",link:{icon:"pencil",label:"Spielrunde bearbeiten"}},master:{label:"SL",help:"Spielleitung",link:{icon:"pencil",label:"Spielrunde bearbeiten"}},play:{label:"TN",help:"Teilnehmer:in",link:{icon:"link",label:"Zur Spielrunde"}},help:{label:"HL",help:"Helfen",link:{icon:"link",label:"Zum Eintrag"}}}[e.kind],n=()=>{const r=["timeview-entry","box-simple"];return e.kind==="master-draft"&&r.push("gray"),e.kind==="master"&&r.push("special"),e.kind==="play"&&r.push("danger"),r.join(" ")};return(()=>{var r=g(tl);return u(r,l(j,{get href(){return e.link(e.path)},class:"button-link",style:"display: contents;",get children(){return[l(tt,{get title(){return t.help},get inverted(){return e.kind!=="help"},size:"small",get children(){return t.label}}),l(Ye,{get icon(){return t.link.icon},kind:"ghost",get title(){return t.link.label}}),(()=>{var i=g(Xi);return u(i,()=>e.title),K(()=>Ae(i,"title",e.title)),i})(),(()=>{var i=g(el),a=i.firstChild,s=a.nextSibling,[o,c]=$(s.nextSibling),d=o.nextSibling,m=d.nextSibling,[b,v]=$(m.nextSibling),S=b.nextSibling,k=S.nextSibling,f=k.firstChild,_=f.firstChild,y=_.nextSibling,[x,C]=$(y.nextSibling);return x.nextSibling,u(i,()=>Te(e.range.startTime),o,c),u(i,()=>Te(e.range.endTime),b,v),u(f,()=>Vn(e.range.startTime,e.range.endTime),x,C),i})()]}})),K(()=>Ee(r,n())),r})()}function ll(e){const t=[];return e.FRIDAY.length===0&&t.push("FRIDAY"),e.SATURDAY.length===0&&t.push("SATURDAY"),e.SUNDAY.length===0&&t.push("SUNDAY"),t.length===3?["FRIDAY"]:t}function al(e){const t=cn;e.FRIDAY.length>0&&(t.FRIDAY=qe.FRIDAY);let n=!1;e.SATURDAY.forEach(i=>{i.range.startTime.hour<t.SATURDAY.open.from&&(n=!0),i.range.endTime.hour>t.SATURDAY.open.to&&(n=!0)}),n&&(t.SATURDAY=qe.SATURDAY);let r=!1;return e.SUNDAY.forEach(i=>{i.range.startTime.hour<t.SUNDAY.open.from&&(r=!0),i.range.endTime.hour>t.SUNDAY.open.to&&(r=!0)}),r&&(t.SUNDAY=qe.SUNDAY),t}function Dt(e,t){const n={get:e,set:r=>t(()=>r),update:t,pipe:r=>r(n)};return n}function sl(e){const[t,n]=ve({value:e});return Dt(()=>t.value,r=>n("value",r(t.value)))}const R={sub:e=>t=>Dt(()=>t.get()[e],n=>t.update(r=>({...r,[e]:n(t.get()[e])})))},ne={push:(e,t)=>{e.update(n=>[...n,t])},update:(e,t,n)=>{e.update(r=>r.map(i=>t(i)?n:i))},remove:(e,t)=>{e.update(n=>n.filter(t))},findExact:(e,t)=>(gt(e.get(),t),Dt(()=>gt(e.get(),t),n=>{const r=gt(e.get(),t);ne.update(e,t,n(r))}))};function gt(e,t){const[n,...r]=e.filter(t);return me(n!==void 0,"No element found with predicate"),me(r.length===0,"Predicate does not result in unique element"),n}var ul=h("<label class=input-checkbox><input type=checkbox><div><!$><!/><!$><!/>"),ol=h("<div class=checkbox-description>");function cl(e){return(()=>{var t=g(ul),n=t.firstChild,r=n.nextSibling,i=r.firstChild,[a,s]=$(i.nextSibling),o=a.nextSibling,[c,d]=$(o.nextSibling);return n.addEventListener("change",m=>e.checked$.set(m.target.checked)),u(r,()=>e.label,a,s),u(r,l(D,{get when(){return e.description},children:m=>(()=>{var b=g(ol);return u(b,m),b})()}),c,d),K(m=>{var b=e.name,v=e.disabled===!0;return b!==m.e&&Ae(n,"name",m.e=b),v!==m.t&&fe(n,"disabled",m.t=v),m},{e:void 0,t:void 0}),K(()=>fe(n,"value",e.value)),K(()=>fe(n,"checked",e.checked$.get())),t})()}var dl=h("<div style=display:grid;gap:1rem><!$><!/><!$><!/><!$><!/>"),gl=h("<div>"),hl=h("<div style=display:grid;gap:1rem><h3>Meine Kontaktdaten</h3><p><strong>Name:</strong> <!$><!/></p><p><strong>E-Mail:</strong> <!$><!/></p><p><strong>Handynummer:</strong> <!$><!/></p><!$><!/>"),ml=h("<form novalidate><!$><!/><!$><!/><!$><!/><!$><!/>");function $l(e){return(()=>{var t=g(dl),n=t.firstChild,[r,i]=$(n.nextSibling),a=r.nextSibling,[s,o]=$(a.nextSibling),c=s.nextSibling,[d,m]=$(c.nextSibling);return u(t,l(fl,{get contact$(){return e.save$.pipe(R.sub("contact"))},get isEditable(){return e.isEditable}}),r,i),u(t,l(cl,{label:"Schickt mir bitte E-Mails, wenn neue Programmpunkte veröffentlicht werden.",get checked$(){return e.save$.pipe(R.sub("config")).pipe(R.sub("wantsUpdates"))},name:"wantsUpdates",value:"wantsUpdates"}),s,o),u(t,l(Me,{get fallback(){return l(p,{get children(){return T.loading.program}})},get children(){return l(D,{get when(){return e.publicResource()},get fallback(){return l(p,{type:"danger",get children(){return T.error.help}})},children:b=>l(D,{get when(){return b().kind==="SUCCESS"},get fallback(){return l(p,{type:"danger",get children(){return T.loading.program}})},get children(){return l(nl,{get save(){return e.save$.get()},get publicState(){return b().data},get link(){return e.link}})}})})}}),d,m),t})()}function fl(e){const[t,n]=ve(qi()),{name:r,email:i,mobile:a}=e.contact$.get();return l(p,{get children(){return[l(D,{get when(){return t.open},get children(){return l(bl,{get contact$(){return e.contact$},dialogStore:t})}}),(()=>{var s=g(hl),o=s.firstChild,c=o.nextSibling,d=c.firstChild,m=d.nextSibling,b=m.nextSibling,[v,S]=$(b.nextSibling),k=c.nextSibling,f=k.firstChild,_=f.nextSibling,y=_.nextSibling,[x,C]=$(y.nextSibling),U=k.nextSibling,F=U.firstChild,I=F.nextSibling,O=I.nextSibling,[W,N]=$(O.nextSibling),ee=U.nextSibling,[te,de]=$(ee.nextSibling);return u(c,r,v,S),u(k,i,x,C),u(U,a,W,N),u(s,l(D,{get when(){return e.isEditable},get children(){var q=g(gl);return u(q,l(Se,{icon:"pencil",label:"Kontaktdaten editieren",onClick:()=>n("open",!0)})),q}}),te,de),s})()]}})}function bl(e){const[t]=Hr(),[n]=ve({name:dt(e.contact$.get().name),email:dt(e.contact$.get().email),mobile:dt(e.contact$.get().mobile)}),[r,i]=ve({kind:"IDLE",isDuplicate:!1}),a=X(()=>{const c={name:[],email:[]};return n.name.value.trim().length===0&&c.name.push(T.mandatoryField),n.email.value.trim().length===0?c.email.push(T.mandatoryField):n.email.value.includes("@")||c.email.push(T.invalidEmail),r.kind==="IDLE"&&r.isDuplicate&&c.email.push("Diese E-Mail wird bereits verwendet."),{...c,hasErrors:c.name.length+c.email.length>0}}),[s,o]=ve(e.dialogStore);return l(Ji,{get store(){return e.dialogStore},title:"Kontaktdaten editieren",onClose:()=>{},size:"medium",get children(){var c=g(ml),d=c.firstChild,[m,b]=$(d.nextSibling),v=m.nextSibling,[S,k]=$(v.nextSibling),f=S.nextSibling,[_,y]=$(f.nextSibling),x=_.nextSibling,[C,U]=$(x.nextSibling);return u(c,l(ct,{get store(){return n.name},label:"Name",name:"name",showErrors:"ON_BLUR",get errors(){return a().name}}),m,b),u(c,l(ct,{get store(){return n.email},label:"E-Mail",name:"email",showErrors:"ALWAYS",get errors(){return a().email},onUpdate:()=>i({kind:"IDLE",isDuplicate:!1})}),S,k),u(c,l(ct,{get store(){return n.mobile},label:"Handynummer",name:"mobile"}),_,y),u(c,l(ue,{label:"Speichern",get disabled(){return a().hasErrors||r.kind==="CHECKING"},onClick:async()=>{if(!a().hasErrors){i({kind:"CHECKING"});const F=t.secret,I=await fetch(Be(`/lst26/check-email?email=${n.email.value}&secret=${F}`));if(!I.ok){i({kind:"IDLE",isDuplicate:!0});return}const O=await I.json(),W=Sl.safeParse(O);if(!W.success){i({kind:"IDLE",isDuplicate:!0});return}if(W.data.kind==="FAILURE"){i({kind:"IDLE",isDuplicate:!0});return}i({kind:"IDLE",isDuplicate:!1}),e.contact$.set({name:n.name.value,email:n.email.value,mobile:n.mobile.value}),o("open",!1)}}}),C,U),c}})}const Sl=He([P({kind:ie("SUCCESS")}),P({kind:ie("FAILURE")})]);var _l=h("<div class=tooltip-wrapper><div class=tooltip></div><!$><!/>");function Le(e){return(()=>{var t=g(_l),n=t.firstChild,r=n.nextSibling,[i,a]=$(r.nextSibling);return u(n,()=>e.tooltip),u(t,()=>e.children,i,a),t})()}var vl=h("<div class=quickmenu-wrapper><div class=quickmenu><!$><!/><!$><!/><!$><!/><!$><!/>"),kl=h('<div class="quickmenu extended"><!$><!/><!$><!/><!$><!/><!$><!/>'),yl=h("<div style=margin-block-start:1rem;display:flex;gap:0.5rem;align-items:center><!$><!/><em>Zuletzt gespeichert um: <!$><!/> Uhr"),xl=h("<div style=margin-block-start:1rem;display:flex;gap:0.5rem;align-items:center><!$><!/><em>Am Speichern..."),Dl=h("<div style=margin-block-start:1rem;display:flex;gap:0.5rem;align-items:center><!$><!/><em>Speichern war nicht möglich!");function pl(e){return(()=>{var t=g(vl),n=t.firstChild,r=n.firstChild,[i,a]=$(r.nextSibling),s=i.nextSibling,[o,c]=$(s.nextSibling),d=o.nextSibling,[m,b]=$(d.nextSibling),v=m.nextSibling,[S,k]=$(v.nextSibling);return u(n,l(Le,{tooltip:"Zur Übersicht",get children(){return l(j,{get href(){return e.link(e.parentPath)},class:"button-link",get children(){return l(ue,{get label(){return l(se,{icon:"backward"})}})}})}}),i,a),u(n,l(D,{get when(){return e.roles.includes("admin")},get children(){return[l(Le,{tooltip:"Zum Programm",get children(){return l(j,{get href(){return e.link("/programm")},class:"button-link",get children(){return l(ue,{get label(){return l(se,{icon:"dice-d20"})}})}})}}),l(Le,{tooltip:"Zu deinen Programmpunkten",get children(){return l(j,{get href(){return e.link("/erstellen")},class:"button-link",get children(){return l(ue,{get label(){return l(se,{icon:"grid-2-plus"})}})}})}})]}}),o,c),u(n,l(Le,{tooltip:"Zum Helferplan",get children(){return l(j,{get href(){return e.link("/helfen")},class:"button-link",get children(){return l(ue,{get label(){return l(se,{icon:"hand-heart"})}})}})}}),m,b),u(n,l(Le,{tooltip:"Zur Zusammenfassung",get children(){return l(j,{get href(){return e.link("/zusammenfassung")},class:"button-link",get children(){return l(ue,{get label(){return l(se,{icon:"list"})}})}})}}),S,k),t})()}function El(e){return[l(p,{type:"gray",get children(){var t=g(kl),n=t.firstChild,[r,i]=$(n.nextSibling),a=r.nextSibling,[s,o]=$(a.nextSibling),c=s.nextSibling,[d,m]=$(c.nextSibling),b=d.nextSibling,[v,S]=$(b.nextSibling);return u(t,l(j,{get href(){return e.link(e.parentPath)},class:"button-link",get children(){return l(Se,{icon:"backward",label:"Zur Übersicht"})}}),r,i),u(t,l(D,{get when(){return e.roles.includes("admin")},get children(){return[l(j,{get href(){return e.link("/programm")},class:"button-link",get children(){return l(Se,{icon:"dice-d20",label:"Zum Programm"})}}),l(j,{get href(){return e.link("/erstellen")},class:"button-link",get children(){return l(Se,{icon:"grid-2-plus",label:"Zu deinen Programmpunkten"})}})]}}),s,o),u(t,l(j,{get href(){return e.link("/helfen")},class:"button-link",get children(){return l(Se,{icon:"hand-heart",label:"Zum Helferplan"})}}),d,m),u(t,l(j,{get href(){return e.link("/zusammenfassung")},class:"button-link",get children(){return l(Se,{icon:"list",label:"Zur Zusammenfassung"})}}),v,S),t}}),l(Al,{get saveState(){return e.saveState},get lastSaved(){return e.lastSaved}})]}function Al(e){return l(ze,{get children(){return[l(he,{get when(){return e.saveState==="IDLE"},get children(){var t=g(yl),n=t.firstChild,[r,i]=$(n.nextSibling),a=r.nextSibling,s=a.firstChild,o=s.nextSibling,[c,d]=$(o.nextSibling);return c.nextSibling,u(t,l(se,{icon:"circle-check"}),r,i),u(a,()=>Ht(e.lastSaved),c,d),t}}),l(he,{get when(){return e.saveState==="SAVING"},get children(){var t=g(xl),n=t.firstChild,[r,i]=$(n.nextSibling);return r.nextSibling,u(t,l(se,{icon:"floppy-disk-circle-arrow-right"}),r,i),t}}),l(he,{get when(){return e.saveState==="ERROR"},get children(){var t=g(Dl),n=t.firstChild,[r,i]=$(n.nextSibling);return r.nextSibling,u(t,l(se,{icon:"triangle-exclamation"}),r,i),t}})]}})}var Rl=h("<div class=page><!$><!/><div class=page-content><!$><!/><!$><!/></div><!$><!/>"),wl=h("<h2>"),Tl=h("<br>"),Ul=h("<div class=extended-wrapper style=margin-block-start:1rem>");function be(e){return(()=>{var t=g(Rl),n=t.firstChild,[r,i]=$(n.nextSibling),a=r.nextSibling,s=a.firstChild,[o,c]=$(s.nextSibling),d=o.nextSibling,[m,b]=$(d.nextSibling),v=a.nextSibling,[S,k]=$(v.nextSibling);return u(t,(()=>{var f=z(()=>e.showQuickmenu!==!1);return()=>f()?l(pl,{get roles(){return e.roles},get link(){return e.link},get saveState(){return e.saveState},get lastSaved(){return e.lastSaved},get parentPath(){return e.parentPath??"/"}}):null})(),r,i),u(a,(()=>{var f=z(()=>e.title===void 0);return()=>f()?null:[(()=>{var _=g(wl);return u(_,()=>e.title),_})(),g(Tl)]})(),o,c),u(a,()=>e.children,m,b),u(t,(()=>{var f=z(()=>e.showQuickmenu!==!1);return()=>f()?(()=>{var _=g(Ul);return u(_,l(El,{get roles(){return e.roles},get link(){return e.link},get saveState(){return e.saveState},get lastSaved(){return e.lastSaved},get parentPath(){return e.parentPath??"/"}})),_})():null})(),S,k),t})()}var Cl=h('<form class=input-button style="display:grid;gap:0rem;grid-template-columns:1fr max-content"><input type=text style=border-color:var(--clr-special-9)><!$><!/>');function Lt(e){const[t,n]=re("");return(()=>{var r=g(Cl),i=r.firstChild,a=i.nextSibling,[s,o]=$(a.nextSibling);return r.addEventListener("submit",c=>{c.preventDefault();const d=t();d.trim().length>0&&e.addFriend(d)}),fe(r,"noValidate",!0),i.$$input=c=>n(c.target.value),u(r,l(Se,{icon:"arrow-right",type:"submit",label:"Begleitperson anmelden",kind:"special"}),s,o),K(()=>fe(i,"value",t())),vt(),r})()}_t(["input"]);var Pl=h("<p>Details konnten nicht geladen werden."),Fl=h("<div style=display:flex;gap:1rem;flex-wrap:wrap;justify-content:space-between><h3></h3><!$><!/>"),Ll=h("<div class=game-dialog><ul role=list style=display:grid;gap:0.5rem><li><strong style=color:var(--clr-accent-1)>Tag, Zeit:</strong> <br><!$><!/>, <!$><!/> - <!$><!/> Uhr</li><li><strong style=color:var(--clr-accent-1)>Beschreibung:</strong> <br><!$><!/></li></ul><div class=reservations><h5 style=margin-block-start:0>Plätze reservieren</h5><div class=reservation-table>"),Il=h("<div class=count>"),Nl=h("<div class=reservation-table-entry><p>Reserviert für mich </p><!$><!/>"),Yl=h('<div class=reservation-table-entry><p>Reserviert für "<!$><!/>"</p><!$><!/>'),Ol=h('<div style="display:grid;gap:1rem;grid-template-columns:max-content 1fr"><!$><!/><!$><!/>');function Bl(e){const t=an().uuid??"no-uuid-found",n=Ti(t);return l(Me,{get fallback(){return l(p,{get children(){return T.loading.program}})},get children(){return l(D,{get when(){return e.publicResource()},get fallback(){return l(p,{type:"danger",get children(){return T.error.help}})},children:r=>l(D,{get when(){return r().kind==="SUCCESS"},get fallback(){return l(p,{type:"danger",get children(){return T.loading.program}})},get children(){return l(D,{when:n,get fallback(){return l(p,{type:"danger",get children(){return g(Pl)}})},children:i=>l(Hl,{get entry(){return i()},get myHelpReservations(){return e.reservations$.get()},get allReservations(){return r().data.reservations},get isEditable(){return e.isEditable},addReservation:a=>ne.push(e.reservations$,{...a,uuid:crypto.randomUUID()}),removeReservation:a=>{ne.remove(e.reservations$,s=>s.uuid!==a)},get link(){return e.link}})})}})})}})}function Hl(e){const{dateTime:t,kind:n}=e.entry,r=Oe[n],i=Re(t.startDate);me(i!==null,`Date '${JSON.stringify(t.startDate)}' is not a valid event date.`);const a=()=>e.myHelpReservations.filter(d=>"helpEntryUuid"in d&&d.helpEntryUuid===e.entry.uuid),s=(e.allReservations[e.entry.uuid]??0)-a().length,o=()=>Gt(e.entry.count).map(d=>{const m=a()[d];return m!==void 0?m:e.entry.count-s<=d?{kind:"RESERVED_OTHER"}:{kind:"FREE"}}),c=()=>a().find(d=>d.kind==="SELF")!==void 0;return[(()=>{var d=g(Fl),m=d.firstChild,b=m.nextSibling,[v,S]=$(b.nextSibling);return u(m,()=>r.title),u(d,l(j,{get href(){return e.link("/helfen")},class:"button-link",get children(){return l(Se,{icon:"backward",label:"Zurück zur Helfer-Übersicht"})}}),v,S),d})(),(()=>{var d=g(Ll),m=d.firstChild,b=m.firstChild,v=b.firstChild,S=v.nextSibling,k=S.nextSibling,f=k.nextSibling,[_,y]=$(f.nextSibling),x=_.nextSibling,C=x.nextSibling,[U,F]=$(C.nextSibling),I=U.nextSibling,O=I.nextSibling,[W,N]=$(O.nextSibling);W.nextSibling;var ee=b.nextSibling,te=ee.firstChild,de=te.nextSibling,q=de.nextSibling,E=q.nextSibling,[A,B]=$(E.nextSibling),G=m.nextSibling,ge=G.firstChild,Z=ge.nextSibling;return u(b,()=>T.days[i],_,y),u(b,()=>Te(t.startDate.toPlainTime(),{minutes:!1}),U,F),u(b,()=>Te(t.endDate.toPlainTime(),{minutes:!1}),W,N),u(ee,()=>r.description,A,B),u(Z,l(V,{get each(){return o()},children:(H,Q)=>[(()=>{var L=g(Il);return u(L,()=>Q()+1),L})(),l(ze,{get children(){return[l(he,{get when(){return H.kind==="RESERVED_OTHER"},get children(){return l(p,{children:"Bereits reserviert"})}}),l(he,{get when(){return!e.isEditable},get children(){return l(p,{children:"Freier Platz"})}}),l(he,{get when(){return H.kind==="SELF"},get children(){return l(Rt,{type:"success",get children(){var L=g(Nl),J=L.firstChild,le=J.nextSibling,[ye,ae]=$(le.nextSibling);return u(L,l(Ye,{icon:"trash",onClick:()=>e.removeReservation(H.kind==="SELF"?H.uuid:"should not happen")}),ye,ae),L}})}}),l(he,{get when(){return H.kind==="FRIEND"},get children(){return l(Rt,{type:"success",get children(){var L=g(Yl),J=L.firstChild,le=J.firstChild,ye=le.nextSibling,[ae,Ue]=$(ye.nextSibling);ae.nextSibling;var Ce=J.nextSibling,[Pe,nt]=$(Ce.nextSibling);return u(J,(()=>{var fn=z(()=>H.kind==="FRIEND");return()=>fn()?H.name:"[Fehler beim Laden]"})(),ae,Ue),u(L,l(Ye,{icon:"trash",onClick:()=>e.removeReservation(H.kind==="FRIEND"?H.uuid:"should not happen")}),Pe,nt),L}})}}),l(he,{get when(){return H.kind==="FREE"},get children(){return l(D,{get when(){return c()},get fallback(){return(()=>{var L=g(Ol),J=L.firstChild,[le,ye]=$(J.nextSibling),ae=le.nextSibling,[Ue,Ce]=$(ae.nextSibling);return u(L,l(Se,{icon:"person-to-portal",label:"Mich anmelden",kind:"success",onClick:()=>e.addReservation({kind:"SELF",helpEntryUuid:e.entry.uuid,uuid:crypto.randomUUID()})}),le,ye),u(L,l(Lt,{addFriend:Pe=>e.addReservation({kind:"FRIEND",helpEntryUuid:e.entry.uuid,name:Pe,uuid:crypto.randomUUID()})}),Ue,Ce),L})()},get children(){return l(Lt,{addFriend:L=>e.addReservation({kind:"FRIEND",helpEntryUuid:e.entry.uuid,name:L,uuid:crypto.randomUUID()})})}})}})]}})]})),d})()]}var zl=h("<ul role=list>"),Ml=h("<li>"),jl=h("<label class=input-radio><input type=radio><!$><!/>");function Kl(e){const t=e.layout??"vertical";return(()=>{var n=g(zl);return Ee(n,`radio-list ${t}`),u(n,l(V,{get each(){return e.items},children:r=>(()=>{var i=g(Ml);return u(i,l(Wl,{get label(){return r.label},get name(){return`${r.value}-${e.name}`},get value(){return r.value},get checked(){return r.checked},onValueUpdate:()=>e.onValueUpdate(r.value)})),i})()})),n})()}function Wl(e){return(()=>{var t=g(jl),n=t.firstChild,r=n.nextSibling,[i,a]=$(r.nextSibling);return Zt(n,"change",e.onValueUpdate),u(t,()=>e.label,i,a),K(()=>Ae(n,"name",e.name)),K(()=>fe(n,"value",e.value)),K(()=>fe(n,"checked",e.checked)),t})()}var Zl=h("<p>Eines der Hauptziele der Luzerner Spieltage ist es, dass die Besucher/-innen noch nicht gespielte Spiele ausprobieren können. Dazu unterstützen uns jedes Jahr Freiwillige und erklären die ihnen bekannten Spiele aus der Spiele-Bibliothek. Diese Erklärbären sind durch ihr rotes T-Shirt erkennbar."),pt=h("<br>"),Vl=h("<div class=dynamic-columns><div></div><div><!$><!/><ul><li>Sie müssen nicht alle Spiele der Spiele-Bibliothek kennen!</li><li>Sie erklären Spiele während der eingeplanten Zeit<ul><li>Grundsätzlich spielen die Erklärbären nicht mit</li><li>Sobald die Spieler/-innen die Regeln verstanden haben (z.B. nach den ersten paar Runden) verlassen sie den Tisch</li><li>Sie stehen weiterhin für Fragen zur Verfügung und kommen allenfalls periodisch zum Tisch zurück</li></ul></li><li>Sie bringen Spiele für die Spiele-Bibliothek mit welche sie erklären können<ul><li>Diese Spiele sollen ein breites Spektrum, von einfach bis komplex, abdecken</li><li>Eine Liste der mitgebrachten Spiele (Spiele-Bibliothek) wird vor dem Event von allen Erklärbären zusammen erstellt</li><li>Vor dem Event notieren die Erklärbären, was sie aus der Spiele-Bibliothek erklären können - (Mitbringen eigener Spiele ist nicht Pflicht, falls genügend Spiele aus der Liste erklärt werden können)</li></ul></li><li>Sie erarbeiten gemeinsam vor dem Event eine Empfehlungsliste aus ca.&nbsp;6&nbsp;Spielen<ul><li>Alle Erklärbären sollen die Regeln dieser Spiele vor dem Event lesen"),ql=h("<h3>"),Jl=h("<div style=display:grid;gap:1rem><!$><!/><!$><!/>"),Gl=h("<p>Bitte nimm mit uns <!$><!/> auf, damit wir uns kurz mit dir absprechen und dir diesen Bereich freischalten können."),Ql=h("<em>Noch keine Einsätze eingetragen"),Xl=h("<h4>Tag"),ea=h("<h4>Uhrzeit"),ta=h('<div style="display:grid;grid-template-columns:repeat(2, 1fr);gap:1rem"><!$><!/><!$><!/>'),na=h("<h5>Warnungen"),ra=h("<ul>"),ia=h("<li>"),la=h("<h4>Übersicht über alle Erklärbären"),aa=h("<div class=dynamic-columns><div><h5>Samstag</h5><table><thead><tr><th>Name</th><th>Zeit</th></tr></thead><tbody></tbody></table></div><div><h5>Sonntag</h5><table><thead><tr><th>Name</th><th>Zeit</th></tr></thead><tbody>"),It=h("<tr><td></td><td><!$><!/> - <!$><!/> Uhr");function sa(e){return[g(Zl),g(pt),(()=>{var t=g(Vl),n=t.firstChild,r=n.nextSibling,i=r.firstChild,[a,s]=$(i.nextSibling);return a.nextSibling,u(n,l(ua,{get reservations$(){return e.save$.pipe(R.sub("helping"))},get roles(){return e.roles},get isEditable(){return e.isEditable}})),u(r,l(Ke,{level:3,title:"Was machen die Erklärbären"}),a,s),t})(),l(D,{get when(){return e.adminResource()},children:t=>l(ca,{get adminResource(){return t()}})})]}function ua(e){function t(){return e.reservations$.get().filter(n=>n.kind==="ERKLAERBAER")}return[l(Ke,{level:3,title:"Meine Einsätze"}),g(pt),l(ze,{get fallback(){return l(p,{get children(){var n=g(Gl),r=n.firstChild,i=r.nextSibling,[a,s]=$(i.nextSibling);return a.nextSibling,u(n,l($e,{href:"/kontakt",children:"Kontakt"}),a,s),n}})},get children(){return l(he,{get when(){return e.roles.includes("erklaerbaer")},get children(){var n=g(Jl),r=n.firstChild,[i,a]=$(r.nextSibling),s=i.nextSibling,[o,c]=$(s.nextSibling);return u(n,l(V,{get each(){return t()},get fallback(){return g(Ql)},children:d=>l(oa,{job:d,updateJob:m=>{ne.update(e.reservations$,b=>b.uuid===d.uuid,m)},removeJob:()=>{ne.remove(e.reservations$,m=>m.uuid!==d.uuid)},get isEditable(){return e.isEditable}})}),i,a),u(n,l(D,{get when(){return e.isEditable},get children(){return l(_e,{icon:"grid-2-plus",type:"success",onClick:()=>{ne.push(e.reservations$,{kind:"ERKLAERBAER",uuid:crypto.randomUUID(),slot:{day:"SATURDAY",from:10,to:18}})},get children(){var d=g(ql);return u(d,()=>T.createNewEntry),d}})}}),o,c),n}})}})]}function oa(e){function t(){const n=[],{day:r,from:i,to:a}=e.job.slot;i>=a&&n.push("Das Ende muss grösser sein als der Start.");const s=cn[r],{from:o,to:c}=s.open;return o>i&&n.push(`Die Spieltage öffnen am ${T.days[r]} erst um ${o} Uhr.`),c<a&&n.push(`Die Spieltage schliessen am ${T.days[r]} um ${c} Uhr.`),n}return l(p,{get onClose(){return z(()=>!!e.isEditable)()?e.removeJob:void 0},get children(){return[g(Xl),l(Kl,{get items(){return[{label:T.days.SATURDAY,checked:e.job.slot.day==="SATURDAY",value:"SATURDAY"},{label:T.days.SUNDAY,checked:e.job.slot.day==="SUNDAY",value:"SUNDAY"}]},onValueUpdate:n=>{e.updateJob({...e.job,slot:{...e.job.slot,day:n}})},get name(){return`day-entry-${e.job.uuid}`},layout:"horizontal",get disabled(){return!e.isEditable}}),g(pt),g(ea),(()=>{var n=g(ta),r=n.firstChild,[i,a]=$(r.nextSibling),s=i.nextSibling,[o,c]=$(s.nextSibling);return u(n,l(ht,{label:"Start",name:"from",get value(){return e.job.slot.from},onValueUpdate:d=>e.updateJob({...e.job,slot:{...e.job.slot,from:d}}),get disabled(){return!e.isEditable}}),i,a),u(n,l(ht,{label:"Ende",name:"to",get value(){return e.job.slot.to},onValueUpdate:d=>e.updateJob({...e.job,slot:{...e.job.slot,to:d}}),get disabled(){return!e.isEditable}}),o,c),n})(),l(D,{get when(){return t().length>0},get children(){return[g(na),(()=>{var n=g(ra);return u(n,l(V,{get each(){return t()},children:r=>(()=>{var i=g(ia);return u(i,r),i})()})),n})()]}})]}})}function ca(e){if(e.adminResource.kind==="FAILURE"||e.adminResource.data.erklaerbaer===null)return null;const t=da(e.adminResource.data.erklaerbaer.entries);return[g(la),(()=>{var n=g(aa),r=n.firstChild,i=r.firstChild,a=i.nextSibling,s=a.firstChild,o=s.nextSibling,c=r.nextSibling,d=c.firstChild,m=d.nextSibling,b=m.firstChild,v=b.nextSibling;return u(o,l(V,{get each(){return t.SATURDAY},children:S=>(()=>{var k=g(It),f=k.firstChild,_=f.nextSibling,y=_.firstChild,[x,C]=$(y.nextSibling),U=x.nextSibling,F=U.nextSibling,[I,O]=$(F.nextSibling);return I.nextSibling,u(f,()=>S.name),u(_,()=>S.slot.from,x,C),u(_,()=>S.slot.to,I,O),k})()})),u(v,l(V,{get each(){return t.SUNDAY},children:S=>(()=>{var k=g(It),f=k.firstChild,_=f.nextSibling,y=_.firstChild,[x,C]=$(y.nextSibling),U=x.nextSibling,F=U.nextSibling,[I,O]=$(F.nextSibling);return I.nextSibling,u(f,()=>S.name),u(_,()=>S.slot.from,x,C),u(_,()=>S.slot.to,I,O),k})()})),n})()]}function da(e){const{FRIDAY:t,SATURDAY:n,SUNDAY:r}=Object.groupBy(e,i=>i.slot.day);return{FRIDAY:(t??[]).toSorted((i,a)=>i.slot.from-a.slot.from||i.slot.to-a.slot.to),SATURDAY:(n??[]).toSorted((i,a)=>i.slot.from-a.slot.from||i.slot.to-a.slot.to),SUNDAY:(r??[]).toSorted((i,a)=>i.slot.from-a.slot.from||i.slot.to-a.slot.to)}}function ga(){return l(p,{children:"Inhalt folgt."})}const Nt=200,Yt=500;function gn(e){const t={};e.title.trim().length===0&&(t.title=[...t.title??[],"Titel ist ein Pflichtfeld"]),e.organizer.trim().length===0&&(t.organizer=[...t.organizer??[],"'Organisiert durch' ist ein Pflichtfeld"]),e.shortDescription.trim().length===0&&(t.shortDescription=[...t.shortDescription??[],"'Kurze Beschreibung' ist ein Pflichtfeld"]),e.shortDescription.trim().length>Nt&&(t.shortDescription=[...t.shortDescription??[],T.charLimitBy.replace("{}",String(Nt))]),e.longDescription.trim().length>Yt&&(t.longDescription=[...t.longDescription??[],T.charLimitBy.replace("{}",String(Yt))]),e.timeSlots.length===0?t.timeSlots=[...t.timeSlots??[],T.missingSlot]:e.timeSlots.forEach(r=>{const i=Je(r.start.time);i.kind==="ERROR"&&(t.timeSlots=[...t.timeSlots??[],"Fehler im Zeitslot, 'Start'"]);const a=Je(r.end.time);a.kind==="ERROR"&&(t.timeSlots=[...t.timeSlots??[],"Fehler im Zeitslot, 'Ende'"]),i.kind==="TIME"&&a.kind==="TIME"&&a.value.since(i.value).hours<0&&(t.timeSlots=[...t.timeSlots??[],"Zeitfenster fehlerhaft ('Ende' vor 'Start')"])});const n=Object.values(t).flat();return{allErrors:n,byField:t,hasErrors:n.length>0}}var ha=h("<ul class=link-list role=list>"),ma=h("<br>"),Ot=h("<h3>"),$a=h("<li>"),fa=h("<span> mit Fehlern");function ba(e){const t=xt();return[(()=>{var n=g(ha);return u(n,l(V,{get each(){return e.programEntries$.get()},children:r=>{const i=gn(r);return(()=>{var a=g($a);return u(a,l(j,{get href(){return e.link(`/erstellen/${r.uuid}`)},class:"button-link",get children(){return l(_e,{get icon(){return i.hasErrors?"triangle-exclamation":"arrow-right"},get type(){return i.hasErrors?"danger":"special"},get children(){return[(()=>{var s=g(Ot);return u(s,(()=>{var o=z(()=>r.title.trim().length===0);return()=>o()?"[Titel fehlt noch]":r.title})()),s})(),l(tt,{get kind(){return i.hasErrors?"danger":"special"},get children(){return["Status: ",z(()=>T.publishingSteps[r.status]),z(()=>z(()=>!!i.hasErrors)()?g(fa):"")]}})]}})}})),a})()}})),n})(),g(ma),l(D,{get when(){return e.isEditable},get children(){return l(_e,{icon:"grid-2-plus",type:"success",onClick:()=>{const n=crypto.randomUUID();ne.push(e.programEntries$,{uuid:n,status:"draft",title:"",organizer:"",shortDescription:"",longDescription:"",participating:{kind:"LIMITED",maxSeats:6},timeSlots:[],tagNames:""}),t(e.link(`/erstellen/${n}`))},get children(){var n=g(Ot);return u(n,()=>T.createNewGameRound),n}})}})]}var hn=h("<p>");function Ne(e){const[t,n]=re(!1),r=e.showErrors==="ALWAYS",i=()=>r||t()?e.errors??[]:[];return[l(zt,{get label(){return e.label},get name(){return e.name},get value(){return e.value$.get()},onValueUpdate:a=>e.value$.set(a),onBlur:()=>n(!0),get type(){return e.type},get required(){return e.required},get disabled(){return e.disabled}}),l(D,{get when(){return i().length>0},get children(){return l(p,{type:"danger",get children(){return l(V,{get each(){return i()},children:a=>(()=>{var s=g(hn);return u(s,a),s})()})}})}})]}function Sa(e){const[t,n]=re(!1),r=e.showErrors==="ALWAYS",i=()=>r||t()?e.errors??[]:[];return[l(ht,{get label(){return e.label},get name(){return e.name},get value(){return e.value$.get()},onValueUpdate:a=>e.value$.set(a),onBlur:()=>n(!0),get required(){return e.required},get min(){return e.min},get max(){return e.max},get disabled(){return e.disabled}}),l(D,{get when(){return i().length>0},get children(){return l(p,{type:"danger",get children(){return l(V,{get each(){return i()},children:a=>(()=>{var s=g(hn);return u(s,a),s})()})}})}})]}const _a=200;var va=h("<button class=event-link><span>Details & Teilnahme"),ka=h('<li class=event-entry><h3 class=event-title></h3><div class=event-details><div class=event-tags><strong>Organisiert durch:</strong><!$><!/></div><div class=event-tags><strong>Tag, Zeit:</strong><span><!$><!/>, <!$><!/> - <!$><!/> Uhr</span></div><div class=event-tags></div><div class=event-tags><strong>Kategorien:</strong> <!$><!/></div></div><div class="event-description content"><p><strong>Kurzbeschreibung:</strong><br><!$><!/></p></div><ul role=list class=event-links><li>'),ya=h("<em>Teilnahme ohne Anmeldung möglich."),xa=h("<strong>Freie Plätze:"),Da=h("<em>keine Kategorien");function pa(e){return(()=>{var t=g(ka),n=t.firstChild,r=n.nextSibling,i=r.firstChild,a=i.firstChild,s=a.nextSibling,[o,c]=$(s.nextSibling),d=i.nextSibling,m=d.firstChild,b=m.nextSibling,v=b.firstChild,[S,k]=$(v.nextSibling),f=S.nextSibling,_=f.nextSibling,[y,x]=$(_.nextSibling),C=y.nextSibling,U=C.nextSibling,[F,I]=$(U.nextSibling);F.nextSibling;var O=d.nextSibling,W=O.nextSibling,N=W.firstChild,ee=N.nextSibling,te=ee.nextSibling,[de,q]=$(te.nextSibling),E=r.nextSibling,A=E.firstChild,B=A.firstChild,G=B.nextSibling,ge=G.nextSibling,[Z,H]=$(ge.nextSibling),Q=E.nextSibling,L=Q.firstChild;return u(n,()=>e.entry.title),u(i,()=>e.entry.organizer,o,c),u(b,()=>T.days[Re(e.entry.timeSlot.startDate)??"FRIDAY"],S,k),u(b,()=>Te(e.entry.timeSlot.startDate.toPlainTime()),y,x),u(b,()=>Te(e.entry.timeSlot.endDate.toPlainTime()),F,I),u(O,(()=>{var J=z(()=>e.entry.participating.kind==="NONE");return()=>J()?g(ya):[g(xa)," ",z(()=>Math.max(e.entry.participating.maxSeats-e.reservations,0))," ","(von ",z(()=>e.entry.participating.maxSeats),")"]})()),u(W,(()=>{var J=z(()=>e.entry.tagNames.trim().length>0);return()=>J()?e.entry.tagNames.split(",").map(le=>le.trim()).filter(le=>le.length>0).join(", "):g(Da)})(),de,q),u(A,()=>vn(e.entry.shortDescription,_a),Z,H),u(L,l(j,{get href(){return e.link(`${e.basePath}/${e.entry.uuid}`)},class:"button-link",get children(){return g(va)}})),t})()}var Ea=h("<p>");function Bt(e){const[t,n]=re(!1),r=e.showErrors==="ALWAYS",i=()=>r||t()?e.errors??[]:[];return[l(In,{get label(){return e.label},get name(){return e.name},get value(){return e.value$.get()},onValueUpdate:a=>e.value$.set(a),onBlur:()=>n(!0),get required(){return e.required},get size(){return e.size},get disabled(){return e.disabled}}),l(D,{get when(){return i().length>0},get children(){return l(p,{type:"danger",get children(){return l(V,{get each(){return i()},children:a=>(()=>{var s=g(Ea);return u(s,a),s})()})}})}})]}var Aa=h("<label class=input-checkbox><!$><!/><input type=checkbox><!$><!/>");function Ra(e){return(()=>{var t=g(Aa),n=t.firstChild,[r,i]=$(n.nextSibling),a=r.nextSibling,s=a.nextSibling,[o,c]=$(s.nextSibling);return u(t,()=>e.labels.left,r,i),Zt(a,"blur",e.onBlur),a.addEventListener("change",d=>e.onChange(d.target.checked)),u(t,()=>e.labels.right,o,c),K(d=>{var m=e.name,b=e.disabled;return m!==d.e&&Ae(a,"name",d.e=m),b!==d.t&&fe(a,"disabled",d.t=b),d},{e:void 0,t:void 0}),K(()=>fe(a,"value",e.value)),K(()=>fe(a,"checked",e.checked)),t})()}var wa=h("<p>");function mn(e){const[t,n]=re(!1),r=e.showErrors==="ALWAYS",i=()=>r||t()?e.errors??[]:[];return[l(Ra,{get labels(){return{left:e.options.left.label,right:e.options.right.label}},get name(){return e.name},get checked(){return e.value$.get()===e.options.right.value},onChange:a=>e.value$.set(a?e.options.right.value:e.options.left.value),onBlur:()=>n(!0),get value(){return e.name},get disabled(){return e.disabled===!0}}),l(D,{get when(){return i().length>0},get children(){return l(p,{type:"danger",get children(){return l(V,{get each(){return i()},children:a=>(()=>{var s=g(wa);return u(s,a),s})()})}})}})]}var Ta=h("<p>Details konnten nicht geladen werden."),Ua=h("<h2>"),Ca=h("<div class=dynamic-columns><div><form novalidate><!$><!/><!$><!/><!$><!/><!$><!/><!$><!/><!$><!/><!$><!/></form></div><div><h3>Vorschau</h3><br><div style=display:flex;gap:1rem;flex-wrap:wrap;align-items:center;justify-content:space-between><!$><!/><!$><!/></div><br><!$><!/><br><ul role=list class=link-list>"),Pa=h("<span> mit Fehlern <!$><!/>"),Fa=h("<em>Keine (gültigen) Zeitslots gefunden"),La=h("<h4>Spielrunde inkomplett"),Ia=h("<p>Du hast noch einen oder mehre Fehler/fehlende Informationen in dieser Spielrunde:"),Na=h("<ul>"),$n=h("<li>"),Ya=h("<label>Zeitfenster"),Oa=h("<h3>Neues Zeitfenster"),Ba=h("<ul role=list class=link-list><!$><!/><li>"),Ha=h("<div style=display:grid;gap:1rem><div><label>Tag</label><div style=display:flex;flex-wrap:wrap;gap:0.5rem><!$><!/><!$><!/></div></div><!$><!/><!$><!/>");function za(e){const t=an().uuid??"no-uuid-found";return l(Me,{get fallback(){return l(p,{get children(){return T.loading.program}})},get children(){return l(D,{get when(){return e.publicResource()},get fallback(){return l(p,{type:"danger",get children(){return T.error.help}})},children:n=>l(D,{get when(){return n().kind==="SUCCESS"},get fallback(){return l(p,{type:"danger",get children(){return T.loading.program}})},get children(){return l(Vt,{get fallback(){return l(p,{type:"danger",get children(){return g(Ta)}})},get children(){return l(Ma,{get entry$(){return ne.findExact(e.programEntries$,r=>r.uuid===t)},get isEditable(){return e.isEditable},get link(){return e.link}})}})}})})}})}function Ma(e){const t=()=>gn(e.entry$.get());return[(()=>{var n=g(Ua);return u(n,()=>e.entry$.get().title),n})(),(()=>{var n=g(Ca),r=n.firstChild,i=r.firstChild,a=i.firstChild,[s,o]=$(a.nextSibling),c=s.nextSibling,[d,m]=$(c.nextSibling),b=d.nextSibling,[v,S]=$(b.nextSibling),k=v.nextSibling,[f,_]=$(k.nextSibling),y=f.nextSibling,[x,C]=$(y.nextSibling),U=x.nextSibling,[F,I]=$(U.nextSibling),O=F.nextSibling,[W,N]=$(O.nextSibling),ee=r.nextSibling,te=ee.firstChild,de=te.nextSibling,q=de.nextSibling,E=q.firstChild,[A,B]=$(E.nextSibling),G=A.nextSibling,[ge,Z]=$(G.nextSibling),H=q.nextSibling,Q=H.nextSibling,[L,J]=$(Q.nextSibling),le=L.nextSibling,ye=le.nextSibling;return u(i,l(Ne,{get value$(){return e.entry$.pipe(R.sub("title"))},label:"Titel",name:"title",get showErrors(){return e.entry$.get().status==="published"?"ALWAYS":"ON_BLUR"},get errors(){return t().byField.title??[]},get disabled(){return!e.isEditable}}),s,o),u(i,l(Ne,{get value$(){return e.entry$.pipe(R.sub("organizer"))},label:"Organisiert durch",name:"organizer",get showErrors(){return e.entry$.get().status==="published"?"ALWAYS":"ON_BLUR"},get errors(){return t().byField.organizer??[]},get disabled(){return!e.isEditable}}),d,m),u(i,l(Bt,{get value$(){return e.entry$.pipe(R.sub("shortDescription"))},label:"kurze Beschreibung",name:"descriptionShort",size:"small",get showErrors(){return e.entry$.get().status==="published"?"ALWAYS":"ON_BLUR"},get errors(){return t().byField.shortDescription??[]},get disabled(){return!e.isEditable}}),v,S),u(i,l(Bt,{get value$(){return e.entry$.pipe(R.sub("longDescription"))},label:"lange Beschreibung (optional)",name:"descriptionLong",get showErrors(){return e.entry$.get().status==="published"?"ALWAYS":"ON_BLUR"},get errors(){return t().byField.longDescription??[]},get disabled(){return!e.isEditable}}),f,_),u(i,l(Wa,{get value$(){return e.entry$.pipe(R.sub("participating"))}}),x,C),u(i,l(Za,{get slots$(){return e.entry$.pipe(R.sub("timeSlots"))}}),F,I),u(i,l(Ne,{get value$(){return e.entry$.pipe(R.sub("tagNames"))},label:"Tags",name:"tags",get showErrors(){return e.entry$.get().status==="published"?"ALWAYS":"ON_BLUR"},get errors(){return t().byField.tags??[]},get disabled(){return!e.isEditable}}),W,N),u(q,l(tt,{get kind(){return t().hasErrors?"danger":"special"},get children(){return["Status: ",z(()=>T.publishingSteps[e.entry$.get().status]),z(()=>z(()=>!!t().hasErrors)()?(()=>{var ae=g(Pa),Ue=ae.firstChild,Ce=Ue.nextSibling,[Pe,nt]=$(Ce.nextSibling);return u(ae,l(se,{icon:"triangle-exclamation"}),Pe,nt),ae})():"")]}}),A,B),u(q,l(mn,{get value$(){return e.entry$.pipe(R.sub("status"))},options:{left:{label:"Entwurf",value:"draft"},right:{label:"Veröffentlicht",value:"published"}},name:"status"}),ge,Z),u(ee,l(D,{get when(){return e.entry$.get().status==="published"},get children(){return l(ja,{get errors(){return t()}})}}),L,J),u(ye,l(V,{get each(){return Ka(e.entry$.get())},get fallback(){return g(Fa)},children:ae=>l(pa,{entry:ae,basePath:"/programm",get link(){return e.link},reservations:0})})),n})()]}function ja(e){return l(D,{get when(){return e.errors.hasErrors},get children(){return l(p,{type:"danger",get children(){return[g(La),g(Ia),(()=>{var t=g(Na);return u(t,l(V,{get each(){return e.errors.allErrors},children:n=>(()=>{var r=g($n);return u(r,n),r})()})),t})()]}})}})}function Ka(e){const t=[];return e.timeSlots.forEach(n=>{const r=Je(n.start.time),i=Je(n.end.time);r.kind==="ERROR"||i.kind==="ERROR"||t.push({uuid:n.uuid,title:e.title,organizer:e.organizer,timeSlot:{startDate:Xe[n.start.day].toPlainDateTime({hour:r.value.hour,minute:r.value.minute}),endDate:Xe[n.end.day].toPlainDateTime({hour:i.value.hour,minute:i.value.minute})},shortDescription:e.shortDescription,longDescription:e.longDescription,participating:e.participating,tagNames:e.tagNames})}),t}function Wa(e){return[l(mn,{get value$(){return e.value$.pipe(R.sub("kind"))},options:{left:{label:"Keine Anmeldung",value:"NONE"},right:{label:"Limitierte Plätze",value:"LIMITED"}},name:"participating"}),l(D,{get when(){return e.value$.get().kind==="LIMITED"},get children(){return l(Sa,{get value$(){return e.value$.pipe(R.sub("maxSeats"))},label:"Maximale Plätze",name:"maxSeats"})}})]}function Za(e){return[g(Ya),(()=>{var t=g(Ba),n=t.firstChild,[r,i]=$(n.nextSibling),a=r.nextSibling;return u(t,l(V,{get each(){return e.slots$.get()},children:s=>{const o=ne.findExact(e.slots$,c=>c.uuid===s.uuid);return(()=>{var c=g($n);return u(c,l(p,{onClose:()=>ne.remove(e.slots$,d=>d.uuid!==s.uuid),get children(){var d=g(Ha),m=d.firstChild,b=m.firstChild,v=b.nextSibling,S=v.firstChild,[k,f]=$(S.nextSibling),_=k.nextSibling,[y,x]=$(_.nextSibling),C=m.nextSibling,[U,F]=$(C.nextSibling),I=U.nextSibling,[O,W]=$(I.nextSibling);return u(v,l(ue,{label:"Samstag",get kind(){return s.start.day==="SATURDAY"?"success":"gray"},onClick:()=>{ne.findExact(e.slots$,N=>N.uuid===s.uuid).update(N=>({...N,start:{...N.start,day:"SATURDAY"},end:{...N.end,day:"SATURDAY"}}))}}),k,f),u(v,l(ue,{label:"Sonntag",get kind(){return s.start.day==="SUNDAY"?"success":"gray"},onClick:()=>{ne.findExact(e.slots$,N=>N.uuid===s.uuid).update(N=>({...N,start:{...N.start,day:"SUNDAY"},end:{...N.end,day:"SUNDAY"}}))}}),y,x),u(d,l(Ne,{get value$(){return o.pipe(R.sub("start")).pipe(R.sub("time"))},label:"Start",name:"start"}),U,F),u(d,l(Ne,{get value$(){return o.pipe(R.sub("end")).pipe(R.sub("time"))},label:"Ende",name:"end"}),O,W),d}})),c})()}}),r,i),u(a,l(_e,{icon:"circle-plus",type:"success",onClick:()=>ne.push(e.slots$,{uuid:crypto.randomUUID(),start:{day:"SATURDAY",time:"10:00"},end:{day:"SATURDAY",time:"12:00"}}),get children(){return g(Oa)}})),t})()]}const Va=P({name:w(),slot:P({day:Qe,from:ce(),to:ce()})}),qa=kn(),Ja=P({entries:De(Va)}),Ga=P({admin:qa,erklaerbaer:yn(Ja)});async function Qa(e){const t=await Hn(e);if(t.kind==="FAILURE")return console.error("Unexpected error. Maybe network, maybe server error."),{kind:"FAILURE"};const n=Ga.safeParse(t.data);return n.success?{kind:"SUCCESS",data:n.data}:{kind:"FAILURE"}}function Xa(e){const[t]=Ze(Ii),[n]=Ze(()=>Qa(e.secret)),r=sl({meta:{saveState:"IDLE",lastSaved:new Date,roles:e.initState.roles},save:e.initState.data}),i=crypto.randomUUID(),[a,s]=re(!1);Ze(()=>JSON.stringify(r.get().save),async()=>{if(!a()){s(!0);return}if(e.initState.status!=="published"){qt("Diese Anmeldung wurde deaktiviert und kann nicht editiert werden.",{kind:"danger",uuid:i});return}const c=Ln(r.get().save);try{const d=await ar(r.get().meta,c,e.secret);d.kind==="FAILURE"?console.error(d):r.pipe(R.sub("meta")).pipe(R.sub("lastSaved")).set(d.data)}catch(d){console.error(d),r.pipe(R.sub("meta")).pipe(R.sub("saveState")).set("ERROR")}});function o(c){return`${c}?secret=${e.secret}`}return l(ii,{explicitLinks:!0,children:[{path:"/",component:()=>l(be,{title:"Wo möchtest du starten?",get roles(){return r.get().meta.roles},link:o,get saveState(){return r.get().meta.saveState},get lastSaved(){return r.get().meta.lastSaved},get children(){return l(bi,{get roles(){return r.get().meta.roles},link:o})}})},{path:"/programm",component:()=>l(be,{title:"Programm",get roles(){return r.get().meta.roles},link:o,get saveState(){return r.get().meta.saveState},get lastSaved(){return r.get().meta.lastSaved},get children(){return l(ga,{})}})},{path:"/erstellen",component:()=>l(be,{title:"Programmpunkte erstellen und editieren",get roles(){return r.get().meta.roles},link:o,get saveState(){return r.get().meta.saveState},get lastSaved(){return r.get().meta.lastSaved},get children(){return l(ba,{get programEntries$(){return r.pipe(R.sub("save")).pipe(R.sub("program")).pipe(R.sub("organising"))},link:o,get isEditable(){return e.initState.status==="published"}})}})},{path:"/erstellen/:uuid",component:()=>l(be,{get roles(){return r.get().meta.roles},link:o,get saveState(){return r.get().meta.saveState},get lastSaved(){return r.get().meta.lastSaved},parentPath:"/erstellen",get children(){return l(za,{get programEntries$(){return r.pipe(R.sub("save")).pipe(R.sub("program")).pipe(R.sub("organising"))},publicResource:t,link:o,get isEditable(){return e.initState.status==="published"}})}})},{path:"/helfen",component:()=>l(be,{title:"Helfen",get roles(){return r.get().meta.roles},link:o,get saveState(){return r.get().meta.saveState},get lastSaved(){return r.get().meta.lastSaved},showQuickmenu:!0,get children(){return l(ji,{get reservations$(){return r.pipe(R.sub("save")).pipe(R.sub("helping"))},publicResource:t,get isEditable(){return e.initState.status==="published"},link:o,get roles(){return r.get().meta.roles}})}})},{path:"/helfen/:uuid",component:()=>l(be,{link:o,get roles(){return r.get().meta.roles},get saveState(){return r.get().meta.saveState},get lastSaved(){return r.get().meta.lastSaved},showQuickmenu:!0,parentPath:"/helfen",get children(){return l(Bl,{get reservations$(){return r.pipe(R.sub("save")).pipe(R.sub("helping"))},publicResource:t,link:o,get isEditable(){return e.initState.status==="published"}})}})},{path:"/erklaerbaer",component:()=>l(be,{title:"Helfen: Erklärbären",get roles(){return r.get().meta.roles},link:o,get saveState(){return r.get().meta.saveState},get lastSaved(){return r.get().meta.lastSaved},showQuickmenu:!0,parentPath:"/helfen",get children(){return l(sa,{get save$(){return r.pipe(R.sub("save"))},adminResource:n,get roles(){return r.get().meta.roles},get isEditable(){return e.initState.status==="published"}})}})},{path:"/zusammenfassung",component:()=>l(be,{title:"Zusammenfassung",get roles(){return r.get().meta.roles},link:o,get saveState(){return r.get().meta.saveState},get lastSaved(){return r.get().meta.lastSaved},showQuickmenu:!0,get children(){return l($l,{get save$(){return r.pipe(R.sub("save"))},publicResource:t,link:o,get isEditable(){return e.initState.status==="published"}})}})},{path:"*",component:()=>l(be,{title:"Seite nicht gefunden",get roles(){return r.get().meta.roles},link:o,get saveState(){return r.get().meta.saveState},get lastSaved(){return r.get().meta.lastSaved},showQuickmenu:!0,get children(){return l(p,{type:"danger",get children(){return T.error.siteNotFound}})}})}]})}function es(){return l(p,{get children(){return T.loading.registration}})}function ss(){const t=URL.parse(location.toString().replace("#/",""))?.searchParams.get("secret")??"no-secret-found",[n]=Ze(()=>ir(t));return l(Vt,{fallback:r=>(console.error(r),l(p,{type:"danger",get children(){return T.error.general}})),get children(){return l(Me,{get fallback(){return l(es,{})},get children(){return l(ze,{get children(){return l(he,{get when(){return n()},children:r=>{const{kind:i,value:a}=xn(r());return i==="FAILURE"?a.reason==="SECRET_INVALID"?l(p,{type:"danger",get children(){return T.error.secretError}}):(console.error(a),l(p,{type:"danger",get children(){return T.error.ourMistake}})):l(Xa,{get initState(){return a.data},secret:t})}})}})}})}})}export{ss as MeineAnmeldungWrapper};
