import{c as Je,o as O,n as ye,s as A,e as Ge,d as ve,u as mt,l as $e,f as hn,g as mn,h as Ot,i as re,B as R,j as le,q as oe,p as pt,N as xt,r as $n,b as ue,k as Ue,I as Bt,m as he,S as Et,t as Rt,v as fn,w as wt,x as bn}from"./utils.CCIogvG7.js";import{g,a as $,i as o,c as l,t as m,r as zt,h as G,j as Mt,k as $t,l as jt,e as ae,b as V,n as ft,p as bt,q as _n,w as Sn,x as vn,y as kn,z as yn,A as K,S as x,B as Dn,C as Kt,D as et,E as _t,m as Tt,G as pn,H as xn,I as Ve,s as we,J as En,M as ie,F as Q,f as He,K as De,L as tt,N as Oe,O as Rn,u as wn,d as Ee,P as Tn,Q as Wt,R as ct}from"./web.BGDrlDKA.js";import{c as me,u as An}from"./store.XlVLhlw3.js";import{E as ge}from"./ExitSpa.B46xHIx7.js";import{T as Un}from"./Textarea.Df3zblOd.js";const[Ne,Ze]=me([]);function Vt(e,n){if(n?.uuid!==void 0&&Ne.find(c=>c.uuid===n.uuid)!==void 0)return dt(n.uuid,e,n);const t=n?.uuid??crypto.randomUUID(),r=n?.duration??5e3,i=n?.kind??"gray",a=n?.dismissable??!0,s=setTimeout(()=>{Ze(Ne.filter(c=>c.uuid!==t))},r);return Ze(Ne.length,{uuid:t,kind:i,message:e,duration:r,dismissable:a,cleanup:()=>clearTimeout(s)}),t}function dt(e,n,t){const r=Ne.find(u=>u.uuid===e);if(r===void 0)return e;r.cleanup();const i=t.duration??r.duration,a=t.kind??r.kind,s=t?.dismissable??r.dismissable,c=setTimeout(()=>{Ze(Ne.filter(u=>u.uuid!==e))},i);return Ze(u=>u.uuid===e,{uuid:e,kind:a,message:n,duration:i,dismissable:s,cleanup:()=>clearTimeout(c)}),e}const Cn=Je(["SATURDAY","SUNDAY"]);O({uuid:A().uuid(),day:Cn,from:ye(),to:ye()}).refine(e=>e.from<e.to,{message:"A TimeSlot can't end before it starts."});O({name:A(),label:A(),description:A()});const Zt=Je(["draft","published","archived"]);async function Pn(e){const n=new URL(Ge("/lst26/load"));n.searchParams.append("secret",e);const t=await fetch(n);if(!t.ok)return{kind:"FAILURE"};const r=await t.json();return typeof r=="object"&&r!==null?{kind:"SUCCESS",data:r}:(console.error("`last_save` not found on ",r),{kind:"FAILURE"})}async function Fn(e,n){try{const t=await fetch(Ge("/lst26/save"),{method:"POST",body:JSON.stringify({secret:n,save:e}),headers:{"Content-Type":"application/json"}});return t.ok?{kind:"SUCCESS",data:n}:(console.error(await t.text()),{kind:"FAILURE"})}catch(t){return console.error(t),{kind:"FAILURE"}}}async function Ln(){try{const e=new URL(Ge("/lst26/public")),n=await fetch(e,{headers:{"Content-Type":"application/json"}});return n.ok?{kind:"SUCCESS",data:await n.json()}:(console.error(await n.text()),{kind:"FAILURE"})}catch(e){return console.error(e),{kind:"FAILURE"}}}Je(["SAVING","IDLE","ERROR"]);const In=ve(mt([$e("admin"),$e("erklaerbaer")])),gt=Je(["FRIDAY","SATURDAY","SUNDAY"]),Nn=O({from:ye(),to:ye()}),Yn=Nn.extend({day:gt});function Me(e,n){const{startTime:t,endTime:r}=n;return!(t.hour>e.hour||t.hour===e.hour&&t.minute>e.minute||r.hour<e.hour||r.hour===e.hour&&r.minute<e.minute)}function Hn(e,n){const{startTime:t,endTime:r}=e,{startTime:i,endTime:a}=n;return Me(t,n)||Me(r,n)||Me(i,e)||Me(a,e)||t===i&&r===a}function On(e,n=!1){const{from:t,to:r}=e;if(t>r)return[];const i=r-t;return qt(n?i+1:i,t)}function qt(e,n=0){return[...Array(e)].map((t,r)=>r+n)}function Ce(e,n){const{minutes:t}=n??{minutes:!0};return t?`${e.hour}.${e.minute.toString().padStart(2,"0")}`:`${e.hour}`}function Bn(e,n){const t=e.minute+e.hour*60,r=n.minute+n.hour*60,i=Math.abs(r-t),a=i%60,s=Math.round((i-a)/60);return a===0?`${s} ${s===1?"Stunde":"Stunden"}`:s===0?`${a} ${a===1?"Minute":"Minuten"}`:`${s},${a} Stunden`}const zn=O({name:A(),email:A(),mobile:A()}),Mn=O({kind:$e("ERKLAERBAER"),uuid:A().uuid(),slot:Yn}),jn=mt([O({kind:$e("SELF"),helpEntryUuid:A().uuid(),uuid:A().uuid()}),O({kind:$e("FRIEND"),helpEntryUuid:A().uuid(),name:A(),uuid:A().uuid()}),Mn]),Kn=O({uuid:A(),start:O({day:gt,time:A()}),end:O({day:gt,time:A()})}),Wn=O({uuid:A().uuid(),status:Zt,title:A(),shortDescription:A(),longDescription:A(),slots:ve(Kn),playerMax:ye(),tagNames:ve(A())}),Vn=O({}),Zn=O({version:$e(7),contact:zn,config:O({wantsUpdates:hn()}),helping:ve(jn),program:O({organising:ve(Wn),participating:ve(Vn)})}),qn=O({kind:$e("SUCCESS"),status:Zt,roles:In,data:Zn});async function Jn(e){if(e.length!==36&&e.length!==4)return{kind:"FAILURE",reason:"SECRET_INVALID"};const n=await Pn(e);if(n.kind==="FAILURE")return console.error("Unexpected error. Maybe network, maybe server error."),{kind:"FAILURE",reason:"GENERAL"};const t=qn.safeParse(n.data);return t.success?{kind:"SUCCESS",data:t.data}:(console.error(t.error),{kind:"FAILURE",reason:"PARSE_ERROR"})}const nt=crypto.randomUUID();async function Gn(e,n,t){const[r,i]=me(e);i("saveState","SAVING"),Vt("Am Speichern...",{uuid:nt,dismissable:!1});const a=new Date;try{if((await Fn(n,t)).kind==="FAILURE")throw Error("")}catch(s){return i("saveState","ERROR"),console.error(s),dt(nt,"Speichern war nicht möglich!",{kind:"danger",duration:1e4,dismissable:!0}),{kind:"FAILURE"}}return dt(nt,`Zuletzt gespeichert um: ${Ot(a)} Uhr`,{kind:"success",dismissable:!0}),i("saveState","IDLE"),{kind:"SUCCESS",data:a}}const Qn=mn(Gn,1e3);var At=m("<br>"),Xn=m("<strong>Donnerstag, 21. August 2025"),er=m("<p>Deine Anmeldung wird geladen..."),tr=m("<p>Das Programm wird geladen..."),nr=m("<p>Leider ist ein unerwarteter Fehler passiert. Versuche deine Anmeldung erneut zu laden. Wiederholt sich dieser Fehler, bitte kontaktiere uns sobald als möglich über das <!$><!/>, da dies nicht passieren sollte."),rr=m("<p>Wir konnten leider keine Anmeldung finden. Wenn du bereits eine Anmeldung begonnen hast, solltest du den korrekten Link per E-Mail erhalten haben.<br><br> Falls du noch keine Anmeldung begonnen hast, kannst du <!$><!/> deine persönliche Anmeldung beginnen. <br><br>Für generelle Fragen oder Probleme, schreibe uns doch bitte über unser <!$><!/>."),ir=m("<p>Wir konnten leider keine Spielrunde unter diesem Link finden.<br><br>Vermutlich liegt es an uns. Bitte kontaktiere uns sobald als möglich über das "),lr=m("<p>Leider ist ein unerwarteter Fehler passiert. Vermutlich liegt es an uns. Bitte kontaktiere uns sobald als möglich über das <!$><!/>."),ar=m("<p>Leider ist ein unerwarteter Fehler passiert beim Laden des Programmes. Vermutlich liegt es an uns. Bitte kontaktiere uns sobald als möglich über das <!$><!/>."),sr=m("<p>Leider ist ein unerwarteter Fehler passiert beim Laden von Daten. Vermutlich liegt es an uns. Bitte kontaktiere uns sobald als möglich über das <!$><!/>."),ur=m("<p>Leider ist das keine gültige Seite. Versuche deine Anmeldung erneut zu laden. Wiederholt sich dieser Fehler, bitte kontaktiere uns sobald als möglich über das <!$><!/>, da dies nicht passieren sollte."),or=m("<p>Leider hast du keinen Zugriff auf diese Seite. Sollte dies ein Fehler sein, dann kontaktiere uns sobald als möglich über das <!$><!/>.");g(At),g(At),g(Xn);const cr={registration:g(er),program:g(tr)},dr={general:(()=>{var e=g(nr),n=e.firstChild,t=n.nextSibling,[r,i]=$(t.nextSibling);return r.nextSibling,o(e,l(ge,{href:"/kontakt",children:"Kontaktformular"}),r,i),e})(),secretError:(()=>{var e=g(rr),n=e.firstChild,t=n.nextSibling,r=t.nextSibling,i=r.nextSibling,a=i.nextSibling,[s,c]=$(a.nextSibling),u=s.nextSibling,d=u.nextSibling,h=d.nextSibling,b=h.nextSibling,S=b.nextSibling,[_,k]=$(S.nextSibling);return _.nextSibling,o(e,l(ge,{href:"/anmeldung",children:"hier"}),s,c),o(e,l(ge,{href:"/kontakt",children:"Kontaktformular"}),_,k),e})(),gameroundUuidError:g(ir),ourMistake:(()=>{var e=g(lr),n=e.firstChild,t=n.nextSibling,[r,i]=$(t.nextSibling);return r.nextSibling,o(e,l(ge,{href:"/kontakt",children:"Kontaktformular"}),r,i),e})(),program:(()=>{var e=g(ar),n=e.firstChild,t=n.nextSibling,[r,i]=$(t.nextSibling);return r.nextSibling,o(e,l(ge,{href:"/kontakt",children:"Kontaktformular"}),r,i),e})(),help:(()=>{var e=g(sr),n=e.firstChild,t=n.nextSibling,[r,i]=$(t.nextSibling);return r.nextSibling,o(e,l(ge,{href:"/kontakt",children:"Kontaktformular"}),r,i),e})(),siteNotFound:(()=>{var e=g(ur),n=e.firstChild,t=n.nextSibling,[r,i]=$(t.nextSibling);return r.nextSibling,o(e,l(ge,{href:"/kontakt",children:"Kontaktformular"}),r,i),e})(),noAccess:(()=>{var e=g(or),n=e.firstChild,t=n.nextSibling,[r,i]=$(t.nextSibling);return r.nextSibling,o(e,l(ge,{href:"/kontakt",children:"Kontaktformular"}),r,i),e})()},gr="Neue Spielrunde erstellen",hr="Neuer Eintrag erstellen",mr="Die Eingabe scheint keine gültige E-Mail-Adresse zu sein.",$r="Dies ist ein Pflichtfeld.",fr="Dieses Feld ist auf {} Zeichen limitiert.",br={FRIDAY:"Freitag",SATURDAY:"Samstag",SUNDAY:"Sonntag"},_r={draft:"Entwurf",published:"Veröffentlicht",archived:"Gelöscht"},T={loading:cr,error:dr,createNewGameRound:gr,createNewEntry:hr,invalidEmail:mr,mandatoryField:$r,charLimitBy:fr,days:br,publishingSteps:_r};function Jt(){let e=new Set;function n(i){return e.add(i),()=>e.delete(i)}let t=!1;function r(i,a){if(t)return!(t=!1);const s={to:i,options:a,defaultPrevented:!1,preventDefault:()=>s.defaultPrevented=!0};for(const c of e)c.listener({...s,from:c.location,retry:u=>{u&&(t=!0),c.navigate(i,{...a,resolve:!1})}});return!s.defaultPrevented}return{subscribe:n,confirm:r}}let ht;function St(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),ht=window.history.state._depth}St();function Sr(e){return{...e,_depth:window.history.state&&window.history.state._depth}}function vr(e,n){let t=!1;return()=>{const r=ht;St();const i=r==null?null:ht-r;if(t){t=!1;return}i&&n(i)?(t=!0,window.history.go(-i)):e()}}const kr=/^(?:[a-z0-9]+:)?\/\//i,yr=/^\/+|(\/)\/+$/g,Gt="http://sr";function Re(e,n=!1){const t=e.replace(yr,"$1");return t?n||/^[?#]/.test(t)?t:"/"+t:""}function Ke(e,n,t){if(kr.test(n))return;const r=Re(e),i=t&&Re(t);let a="";return!i||n.startsWith("/")?a=r:i.toLowerCase().indexOf(r.toLowerCase())!==0?a=r+i:a=i,(a||"/")+Re(n,!a)}function Dr(e,n){if(e==null)throw new Error(n);return e}function pr(e,n){return Re(e).replace(/\/*(\*.*)?$/g,"")+Re(n)}function Qt(e){const n={};return e.searchParams.forEach((t,r)=>{r in n?Array.isArray(n[r])?n[r].push(t):n[r]=[n[r],t]:n[r]=t}),n}function xr(e,n,t){const[r,i]=e.split("/*",2),a=r.split("/").filter(Boolean),s=a.length;return c=>{const u=c.split("/").filter(Boolean),d=u.length-s;if(d<0||d>0&&i===void 0&&!n)return null;const h={path:s?"":"/",params:{}},b=S=>t===void 0?void 0:t[S];for(let S=0;S<s;S++){const _=a[S],k=_[0]===":",f=k?u[S]:u[S].toLowerCase(),v=k?_.slice(1):_.toLowerCase();if(k&&rt(f,b(v)))h.params[v]=f;else if(k||!rt(f,v))return null;h.path+=`/${f}`}if(i){const S=d?u.slice(-d).join("/"):"";if(rt(S,b(i)))h.params[i]=S;else return null}return h}}function rt(e,n){const t=r=>r===e;return n===void 0?!0:typeof n=="string"?t(n):typeof n=="function"?n(e):Array.isArray(n)?n.some(t):n instanceof RegExp?n.test(e):!1}function Er(e){const[n,t]=e.pattern.split("/*",2),r=n.split("/").filter(Boolean);return r.reduce((i,a)=>i+(a.startsWith(":")?2:3),r.length-(t===void 0?0:1))}function Xt(e){const n=new Map,t=Mt();return new Proxy({},{get(r,i){return n.has(i)||zt(t,()=>n.set(i,G(()=>e()[i]))),n.get(i)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())},has(r,i){return i in e()}})}function Rr(e,n){const t=new URLSearchParams(e);Object.entries(n).forEach(([i,a])=>{a==null||a===""||a instanceof Array&&!a.length?t.delete(i):a instanceof Array?(t.delete(i),a.forEach(s=>{t.append(i,String(s))})):t.set(i,String(a))});const r=t.toString();return r?`?${r}`:""}function en(e){let n=/(\/?\:[^\/]+)\?/.exec(e);if(!n)return[e];let t=e.slice(0,n.index),r=e.slice(n.index+n[0].length);const i=[t,t+=n[1]];for(;n=/^(\/\:[^\/]+)\?/.exec(r);)i.push(t+=n[1]),r=r.slice(n[0].length);return en(r).reduce((a,s)=>[...a,...i.map(c=>c+s)],[])}const wr=100,tn=jt(),vt=jt(),Be=()=>Dr($t(tn),"<A> and 'use' router primitives can be only used inside a Route."),Tr=()=>$t(vt)||Be().base,Ar=e=>{const n=Tr();return G(()=>n.resolvePath(e()))},Ur=e=>{const n=Be();return G(()=>{const t=e();return t!==void 0?n.renderPath(t):t})},kt=()=>Be().navigatorFactory(),nn=()=>Be().location,rn=()=>Be().params,Cr=()=>{const e=nn(),n=kt(),t=(r,i)=>{const a=bt(()=>Rr(e.search,r)+e.hash);n(a,{scroll:!1,resolve:!1,...i})};return[e.query,t]};function Pr(e,n=""){const{component:t,preload:r,load:i,children:a,info:s}=e,c=!a||Array.isArray(a)&&!a.length,u={key:e,component:t,preload:r||i,info:s};return ln(e.path).reduce((d,h)=>{for(const b of en(h)){const S=pr(n,b);let _=c?S:S.split("/*",1)[0];_=_.split("/").map(k=>k.startsWith(":")||k.startsWith("*")?k:encodeURIComponent(k)).join("/"),d.push({...u,originalPath:h,pattern:_,matcher:xr(_,!c,e.matchFilters)})}return d},[])}function Fr(e,n=0){return{routes:e,score:Er(e[e.length-1])*1e4-n,matcher(t){const r=[];for(let i=e.length-1;i>=0;i--){const a=e[i],s=a.matcher(t);if(!s)return null;r.unshift({...s,route:a})}return r}}}function ln(e){return Array.isArray(e)?e:[e]}function an(e,n="",t=[],r=[]){const i=ln(e);for(let a=0,s=i.length;a<s;a++){const c=i[a];if(c&&typeof c=="object"){c.hasOwnProperty("path")||(c.path="");const u=Pr(c,n);for(const d of u){t.push(d);const h=Array.isArray(c.children)&&c.children.length===0;if(c.children&&!h)an(c.children,d.pattern,t,r);else{const b=Fr([...t],r.length);r.push(b)}t.pop()}}}return t.length?r:r.sort((a,s)=>s.score-a.score)}function it(e,n){for(let t=0,r=e.length;t<r;t++){const i=e[t].matcher(n);if(i)return i}return[]}function Lr(e,n,t){const r=new URL(Gt),i=G(h=>{const b=e();try{return new URL(b,r)}catch{return console.error(`Invalid path ${b}`),h}},r,{equals:(h,b)=>h.href===b.href}),a=G(()=>i().pathname),s=G(()=>i().search,!0),c=G(()=>i().hash),u=()=>"",d=ft(s,()=>Qt(i()));return{get pathname(){return a()},get search(){return s()},get hash(){return c()},get state(){return n()},get key(){return u()},query:t?t(d):Xt(d)}}let pe;function Ir(){return pe}function Nr(e,n,t,r={}){const{signal:[i,a],utils:s={}}=e,c=s.parsePath||(p=>p),u=s.renderPath||(p=>p),d=s.beforeLeave||Jt(),h=Ke("",r.base||"");if(h===void 0)throw new Error(`${h} is not a valid base path`);h&&!i().value&&a({value:h,replace:!0,scroll:!1});const[b,S]=ae(!1);let _;const k=(p,E)=>{E.value===f()&&E.state===y()||(_===void 0&&S(!0),pe=p,_=E,Sn(()=>{_===E&&(v(_.value),D(_.state),kn(),L[1](H=>H.filter(X=>X.pending)))}).finally(()=>{_===E&&vn(()=>{pe=void 0,p==="navigate"&&B(_),S(!1),_=void 0})}))},[f,v]=ae(i().value),[y,D]=ae(i().state),U=Lr(f,y,s.queryWrapper),P=[],L=ae([]),Y=G(()=>typeof r.transformUrl=="function"?it(n(),r.transformUrl(U.pathname)):it(n(),U.pathname)),z=()=>{const p=Y(),E={};for(let H=0;H<p.length;H++)Object.assign(E,p[H].params);return E},W=s.paramsWrapper?s.paramsWrapper(z,n):Xt(z),J={pattern:h,path:()=>h,outlet:()=>null,resolvePath(p){return Ke(h,p)}};return V(ft(i,p=>k("native",p),{defer:!0})),{base:J,location:U,params:W,isRouting:b,renderPath:u,parsePath:c,navigatorFactory:j,matches:Y,beforeLeave:d,preloadRoute:q,singleFlight:r.singleFlight===void 0?!0:r.singleFlight,submissions:L};function Z(p,E,H){bt(()=>{if(typeof E=="number"){E&&(s.go?s.go(E):console.warn("Router integration does not support relative routing"));return}const X=!E||E[0]==="?",{replace:se,resolve:ee,scroll:N,state:te}={replace:!1,resolve:!X,scroll:!0,...H},F=ee?p.resolvePath(E):Ke(X&&U.pathname||"",E);if(F===void 0)throw new Error(`Path '${E}' is not a routable path`);if(P.length>=wr)throw new Error("Too many redirects");const ne=f();(F!==ne||te!==y())&&(_n||d.confirm(F,H)&&(P.push({value:ne,replace:se,scroll:N,state:y()}),k("navigate",{value:F,state:te})))})}function j(p){return p=p||$t(vt)||J,(E,H)=>Z(p,E,H)}function B(p){const E=P[0];E&&(a({...p,replace:E.replace,scroll:E.scroll}),P.length=0)}function q(p,E){const H=it(n(),p.pathname),X=pe;pe="preload";for(let se in H){const{route:ee,params:N}=H[se];ee.component&&ee.component.preload&&ee.component.preload();const{preload:te}=ee;E&&te&&zt(t(),()=>te({params:N,location:{pathname:p.pathname,search:p.search,hash:p.hash,query:Qt(p),state:null,key:""},intent:"preload"}))}pe=X}}function Yr(e,n,t,r){const{base:i,location:a,params:s}=e,{pattern:c,component:u,preload:d}=r().route,h=G(()=>r().path);u&&u.preload&&u.preload();const b=d?d({params:s,location:a,intent:pe||"initial"}):void 0;return{parent:n,pattern:c,path:h,outlet:()=>u?l(u,{params:s,location:a,data:b,get children(){return t()}}):t(),resolvePath(_){return Ke(i.path(),_,h())}}}const Hr=e=>n=>{const{base:t}=n,r=yn(()=>n.children),i=G(()=>an(r(),n.base||""));let a;const s=Nr(e,i,()=>a,{base:t,singleFlight:n.singleFlight,transformUrl:n.transformUrl});return e.create&&e.create(s),l(tn.Provider,{value:s,get children(){return l(Or,{routerState:s,get root(){return n.root},get preload(){return n.rootPreload||n.rootLoad},get children(){return[K(()=>(a=Mt())&&null),l(Br,{routerState:s,get branches(){return i()}})]}})}})};function Or(e){const n=e.routerState.location,t=e.routerState.params,r=G(()=>e.preload&&bt(()=>{e.preload({params:t,location:n,intent:Ir()||"initial"})}));return l(x,{get when(){return e.root},keyed:!0,get fallback(){return e.children},children:i=>l(i,{params:t,location:n,get data(){return r()},get children(){return e.children}})})}function Br(e){const n=[];let t;const r=G(ft(e.routerState.matches,(i,a,s)=>{let c=a&&i.length===a.length;const u=[];for(let d=0,h=i.length;d<h;d++){const b=a&&a[d],S=i[d];s&&b&&S.route.key===b.route.key?u[d]=s[d]:(c=!1,n[d]&&n[d](),Dn(_=>{n[d]=_,u[d]=Yr(e.routerState,u[d-1]||e.routerState.base,Ut(()=>r()[d+1]),()=>{const k=e.routerState.matches();return k[d]??k[0]})}))}return n.splice(i.length).forEach(d=>d()),s&&c?s:(t=u[0],u)}));return Ut(()=>r()&&t)()}const Ut=e=>()=>l(x,{get when(){return e()},keyed:!0,children:n=>l(vt.Provider,{value:n,get children(){return n.outlet()}})});function zr([e,n],t,r){return[e,r?i=>n(r(i)):n]}function Mr(e){let n=!1;const t=i=>typeof i=="string"?{value:i}:i,r=zr(ae(t(e.get()),{equals:(i,a)=>i.value===a.value&&i.state===a.state}),void 0,i=>(!n&&e.set(i),et.registry&&!et.done&&(et.done=!0),i));return e.init&&Kt(e.init((i=e.get())=>{n=!0,r[1](t(i)),n=!1})),Hr({signal:r,create:e.create,utils:e.utils})}function jr(e,n,t){return e.addEventListener(n,t),()=>e.removeEventListener(n,t)}function Kr(e,n){const t=e&&document.getElementById(e);t?t.scrollIntoView():n&&window.scrollTo(0,0)}const Wr=new Map;function Vr(e=!0,n=!1,t="/_server",r){return i=>{const a=i.base.path(),s=i.navigatorFactory(i.base);let c,u;function d(f){return f.namespaceURI==="http://www.w3.org/2000/svg"}function h(f){if(f.defaultPrevented||f.button!==0||f.metaKey||f.altKey||f.ctrlKey||f.shiftKey)return;const v=f.composedPath().find(Y=>Y instanceof Node&&Y.nodeName.toUpperCase()==="A");if(!v||n&&!v.hasAttribute("link"))return;const y=d(v),D=y?v.href.baseVal:v.href;if((y?v.target.baseVal:v.target)||!D&&!v.hasAttribute("state"))return;const P=(v.getAttribute("rel")||"").split(/\s+/);if(v.hasAttribute("download")||P&&P.includes("external"))return;const L=y?new URL(D,document.baseURI):new URL(D);if(!(L.origin!==window.location.origin||a&&L.pathname&&!L.pathname.toLowerCase().startsWith(a.toLowerCase())))return[v,L]}function b(f){const v=h(f);if(!v)return;const[y,D]=v,U=i.parsePath(D.pathname+D.search+D.hash),P=y.getAttribute("state");f.preventDefault(),s(U,{resolve:!1,replace:y.hasAttribute("replace"),scroll:!y.hasAttribute("noscroll"),state:P?JSON.parse(P):void 0})}function S(f){const v=h(f);if(!v)return;const[y,D]=v;i.preloadRoute(D,y.getAttribute("preload")!=="false")}function _(f){clearTimeout(c);const v=h(f);if(!v)return u=null;const[y,D]=v;u!==y&&(c=setTimeout(()=>{i.preloadRoute(D,y.getAttribute("preload")!=="false"),u=y},20))}function k(f){if(f.defaultPrevented)return;let v=f.submitter&&f.submitter.hasAttribute("formaction")?f.submitter.getAttribute("formaction"):f.target.getAttribute("action");if(!v)return;if(!v.startsWith("https://action/")){const D=new URL(v,Gt);if(v=i.parsePath(D.pathname+D.search),!v.startsWith(t))return}if(f.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const y=Wr.get(v);if(y){f.preventDefault();const D=new FormData(f.target,f.submitter);y.call({r:i,f:f.target},f.target.enctype==="multipart/form-data"?D:new URLSearchParams(D))}}_t(["click","submit"]),document.addEventListener("click",b),e&&(document.addEventListener("mousemove",_,{passive:!0}),document.addEventListener("focusin",S,{passive:!0}),document.addEventListener("touchstart",S,{passive:!0})),document.addEventListener("submit",k),Kt(()=>{document.removeEventListener("click",b),e&&(document.removeEventListener("mousemove",_),document.removeEventListener("focusin",S),document.removeEventListener("touchstart",S)),document.removeEventListener("submit",k)})}}function Zr(e){const n=e.replace(/^.*?#/,"");if(!n.startsWith("/")){const[,t="/"]=window.location.hash.split("#",2);return`${t}#${n}`}return n}function qr(e){const n=()=>window.location.hash.slice(1),t=Jt();return Mr({get:n,set({value:r,replace:i,scroll:a,state:s}){i?window.history.replaceState(Sr(s),"","#"+r):window.history.pushState(s,"","#"+r);const c=r.indexOf("#"),u=c>=0?r.slice(c+1):"";Kr(u,a),St()},init:r=>jr(window,"hashchange",vr(r,i=>!t.confirm(i&&i<0?i:n()))),create:Vr(e.preload,e.explicitLinks,e.actionBase),utils:{go:r=>window.history.go(r),renderPath:r=>`#${r}`,parsePath:Zr,beforeLeave:t}})(e)}var Jr=m("<a>");function M(e){e=Tt({inactiveClass:"inactive",activeClass:"active"},e);const[,n]=pn(e,["href","state","class","activeClass","inactiveClass","end"]),t=Ar(()=>e.href),r=Ur(t),i=nn(),a=G(()=>{const s=t();if(s===void 0)return[!1,!1];const c=Re(s.split(/[?#]/,1)[0]).toLowerCase(),u=decodeURI(Re(i.pathname).toLowerCase());return[e.end?c===u:u.startsWith(c+"/")||u===c,c===u]});return(()=>{var s=g(Jr);return xn(s,Tt(n,{get href(){return r()||e.href},get state(){return JSON.stringify(e.state)},get classList(){return{...e.class&&{[e.class]:!0},[e.inactiveClass]:!a()[0],[e.activeClass]:a()[0],...n.classList}},link:"",get"aria-current"(){return a()[1]?"page":void 0}}),!1,!1),Ve(),s})()}var Gr=m("<div class=grid><!$><!/><div>"),Qr=m("<div class=boxLink>");function _e(e){const n=e.type??"special";return(()=>{var t=g(Qr);return o(t,l(R,{type:n,get onClick(){return e.onClick},get children(){var r=g(Gr),i=r.firstChild,[a,s]=$(i.nextSibling),c=a.nextSibling;return o(r,l(re,{get icon(){return e.icon}}),a,s),o(c,()=>e.children),r}})),t})()}var Xr=m("<h3>Programm ansehen"),ei=m("<p>Melde dich (und deine Freunde) für diverse Spielrunden an."),Ct=m("<br>"),ti=m("<h3>Programmpunkte erstellen"),ni=m("<p>Erstelle und editiere Programmpunkte."),ri=m("<h3>Helfen"),ii=m("<p>Beim Kiosk und der Essensausgabe können wir immer ein paar helfende Hände gebrauchen."),li=m("<h3>Zusammenfassung"),ai=m("<p>Erhalte einen Überblick über dein gesamtes Programm."),si=m("<div><!$><!/><!$><!/><br><!$><!/>");function ui(e){return(()=>{var n=g(si),t=n.firstChild,[r,i]=$(t.nextSibling),a=r.nextSibling,[s,c]=$(a.nextSibling),u=s.nextSibling,d=u.nextSibling,[h,b]=$(d.nextSibling);return o(n,l(x,{get when(){return e.roles.includes("admin")},get children(){return[l(M,{get href(){return e.link("/programm")},class:"button-link",get children(){return l(_e,{icon:"dice-d20",get children(){return[g(Xr),g(ei)]}})}}),g(Ct),l(M,{get href(){return e.link("/erstellen")},class:"button-link",get children(){return l(_e,{icon:"grid-2-plus",get children(){return[g(ti),g(ni)]}})}}),g(Ct)]}}),r,i),o(n,l(M,{get href(){return e.link("/helfen")},class:"button-link",get children(){return l(_e,{icon:"hand-heart",get children(){return[g(ri),g(ii)]}})}}),s,c),o(n,l(M,{get href(){return e.link("/zusammenfassung")},class:"button-link",get children(){return l(_e,{icon:"list",get children(){return[g(li),g(ai)]}})}}),h,b),n})()}var oi=m("<a class=header-anchor>");function ci(e){return encodeURIComponent(e.replaceAll(/\s/g,"-").replaceAll("&","").replaceAll(/-{1,}/g,"-").toLocaleLowerCase())}function ze(e){const n=ci("title"in e?e.id??e.title:e.id);return l(En,{get component(){return`h${e.level}`},id:n,get children(){var t=g(oi);return we(t,"href",`#${n}`),o(t,(()=>{var r=K(()=>"title"in e);return()=>r()?e.title:e.children})()),t}})}var di=m("<div style=display:grid;gap:1rem><!$><!/><!$><!/><!$><!/>"),gi=m("<div><div style=margin-block-end:1.5rem></div><!$><!/>"),hi=m("<p>Konflikte gefunden! Bitte stelle sicher, dass du nicht zeitlich überlappende Spielrunden eingetragen hast:"),mi=m('<div style="display:grid;grid-template-columns:1fr max-content 1fr;gap:1rem;margin-block:0.5rem"><!$><!/><span style=color:var(--clr-warning-10);align-self:center;font-size:2rem></span><!$><!/>'),$i=m("<div><!$><!/><div class=entries></div><div class=after-hour><div class=annotation>"),fi=m("<div><div class=annotation></div><div class=background>"),bi=m("<div class=entry>");function sn(e){const n=e.exclude??[];return(()=>{var t=g(di),r=t.firstChild,[i,a]=$(r.nextSibling),s=i.nextSibling,[c,u]=$(s.nextSibling),d=c.nextSibling,[h,b]=$(d.nextSibling);return o(t,l(x,{get when(){return K(()=>!n.includes("FRIDAY")&&e.openingHours.FRIDAY.open.from!==e.openingHours.FRIDAY.open.to)()&&(e.dayFilter===null||e.dayFilter==="FRIDAY")},get children(){return l(lt,{get programEntries(){return e.programEntries.FRIDAY},get openingHoursOfDay(){return e.openingHours.FRIDAY},day:"FRIDAY",get conflictsAllowed(){return e.conflictsAllowed??!1},get columns(){return e.columns}})}}),i,a),o(t,l(x,{get when(){return K(()=>!n.includes("SATURDAY"))()&&e.dayFilter===null||e.dayFilter==="SATURDAY"},get children(){return l(lt,{get programEntries(){return e.programEntries.SATURDAY},get openingHoursOfDay(){return e.openingHours.SATURDAY},day:"SATURDAY",get conflictsAllowed(){return e.conflictsAllowed??!1},get columns(){return e.columns}})}}),c,u),o(t,l(x,{get when(){return K(()=>!n.includes("SUNDAY"))()&&e.dayFilter===null||e.dayFilter==="SUNDAY"},get children(){return l(lt,{get programEntries(){return e.programEntries.SUNDAY},get openingHoursOfDay(){return e.openingHours.SUNDAY},day:"SUNDAY",get conflictsAllowed(){return e.conflictsAllowed??!1},get columns(){return e.columns}})}}),h,b),t})()}function lt(e){const n=e.conflictsAllowed?[]:Si(e.programEntries);return(()=>{var t=g(gi),r=t.firstChild,i=r.nextSibling,[a,s]=$(i.nextSibling);return o(r,l(ze,{level:4,get title(){return T.days[e.day]}})),o(t,l(He,{get fallback(){return[l(R,{type:"danger",get children(){return g(hi)}}),l(Q,{each:n,children:([c,u])=>(()=>{var d=g(mi),h=d.firstChild,[b,S]=$(h.nextSibling),_=b.nextSibling,k=_.nextSibling,[f,v]=$(k.nextSibling);return o(d,()=>c.component(),b,S),o(_,l(re,{icon:"triangle-exclamation"})),o(d,()=>u.component(),f,v),d})()})]},get children(){return l(ie,{get when(){return n.length===0},get children(){return l(_i,{get programEntries(){return e.programEntries},get openingHoursOfDay(){return e.openingHoursOfDay},get day(){return e.day},get conflictsAllowed(){return e.conflictsAllowed},get columns(){return e.columns}})}})}}),a,s),t})()}function _i(e){const n=On(e.openingHoursOfDay.open),t=e.openingHoursOfDay.breaks.flatMap(({from:s,to:c})=>{le(s<c,`Break is not valid, as from '${s}' is not smaller than to '${c}'`);const u=[s];let d=c-s;for(;d>1;)u.push(s+--d);return u}),r=(n[0]??0)-1,i=n.at(-1)??0,a=()=>{const s=["timetable"];return e.conflictsAllowed&&s.push(e.columns===2?"two-columns":e.columns===4?"four-columns":""),s.join(" ")};return(()=>{var s=g($i),c=s.firstChild,[u,d]=$(c.nextSibling),h=u.nextSibling,b=h.nextSibling,S=b.firstChild;return o(s,l(Q,{each:n,children:_=>{const k=t.includes(_);return(()=>{var f=g(fi),v=f.firstChild;return De(f,`hour ${k?"break":""}`),o(v,_),V(y=>tt(f,Pt({startTime:oe.PlainTime.from({hour:_,minute:0}),endTime:oe.PlainTime.from({hour:_,minute:0})},r,e.day,e.openingHoursOfDay),y)),f})()}}),u,d),o(h,l(Q,{get each(){return e.programEntries},children:_=>(()=>{var k=g(bi);return o(k,()=>_.component()),V(f=>tt(k,Pt(_.range,r,e.day,e.openingHoursOfDay),f)),k})()})),o(S,i+1),V(_=>{var k=a(),f=`grid-row: 1 / ${i-r+1};`;return k!==_.e&&De(s,_.e=k),_.t=tt(h,f,_.t),_},{e:void 0,t:void 0}),s})()}function Pt(e,n,t,r){const{startTime:i,endTime:a}=e,s=i.hour-n,c=a.hour-n,u=r.open.to;return le(s>0,`[${JSON.stringify(e)}] Entry can't start at '${i.hour}'.`),le(c>0,`[${JSON.stringify(e)}] Entry can't end at '${a.hour}'.`),le(a.hour<=u,`[${JSON.stringify(e)}] Entry can't end at '${a.hour}'. Closing hour set to '${u}' on day '${t}'`),`grid-row: ${s} / ${c};`}function Si(e){const n=[];return e.forEach((t,r)=>{e.slice(r+1).forEach(i=>{Hn(t.range,i.range)&&n.push([t,i])})}),n}const Se=oe.PlainDate.from({year:2026,month:3,day:13}),w=oe.PlainDate.from({year:2026,month:3,day:14}),C=oe.PlainDate.from({year:2026,month:3,day:15}),qe={FRIDAY:Se,SATURDAY:w,SUNDAY:C};function Te(e){const{year:n,month:t,day:r}=e;return Se.year===n&&Se.month===t&&Se.day===r?"FRIDAY":w.year===n&&w.month===t&&w.day===r?"SATURDAY":C.year===n&&C.month===t&&C.day===r?"SUNDAY":null}const un={FRIDAY:{open:{from:0,to:0},breaks:[]},SATURDAY:{open:{from:10,to:24},breaks:[]},SUNDAY:{open:{from:10,to:18},breaks:[]}},xe={kitchen:{title:"Küche",description:"Mahlzeit vorbereiten, unterstützen beim Kochen und Abwaschen."},service:{title:"Essensausgabe",description:""},cleaning:{title:"Reinigung",description:"Unterstützen beim Küche aufräumen und putzen."},kiosk:{title:"Kiosk",description:"Am Kiosk Getränke (inkl. Kaffee) und Snacks verkaufen."},flohmarkt:{title:"Flohmarkt",description:"Hilf uns beim Auf- oder Abbau des Flohmarkt und der Annahme oder Abgabe von Spielen."},checkout:{title:"Kiosk / Flohmarkt",description:"Am Kiosk Getränke und Snacks verkaufen oder am Flohmarkt die Kasse bedienen."},setup:{title:"Menü-Vorbereitung / Aufbau",description:"Hilf uns beim Zubereiten der Menüs und Aufstellen von Tischen, Stühle und der Bibliothek."},breakdown:{title:"Abbau",description:"Hilf uns beim Zusammenräumen von Tischen, Stühle, der Bibliothek und dem Flohmarkt."}},Ae=[{uuid:"eb443040-0674-429c-a3ad-48634a323b76",count:4,kind:"setup",dateTime:{startDate:Se.toPlainDateTime({hour:16,minute:0}),endDate:Se.toPlainDateTime({hour:21,minute:0})}},{uuid:"91699a72-78d0-4dc9-bfe1-ece55b15db7d",count:1,kind:"flohmarkt",dateTime:{startDate:Se.toPlainDateTime({hour:19,minute:0}),endDate:Se.toPlainDateTime({hour:22,minute:0})}},{uuid:"6303bd52-cd10-4dd0-b760-b71ab971ad3b",count:4,kind:"flohmarkt",dateTime:{startDate:w.toPlainDateTime({hour:9,minute:0}),endDate:w.toPlainDateTime({hour:11,minute:0})}},{uuid:"9ebca7e9-f44a-4cc9-8961-73539f17d5d6",count:2,kind:"checkout",dateTime:{startDate:w.toPlainDateTime({hour:10,minute:0}),endDate:w.toPlainDateTime({hour:12,minute:0})}},{uuid:"804c379d-c747-4d7c-9f0c-a53f8548216e",count:2,kind:"checkout",dateTime:{startDate:w.toPlainDateTime({hour:11,minute:0}),endDate:w.toPlainDateTime({hour:13,minute:0})}},{uuid:"bfec6f59-14eb-45b9-a21c-d33ee2205b64",count:2,kind:"checkout",dateTime:{startDate:w.toPlainDateTime({hour:12,minute:0}),endDate:w.toPlainDateTime({hour:14,minute:0})}},{uuid:"8db23dfd-616e-4f1d-9a07-deb6e519d35a",count:2,kind:"checkout",dateTime:{startDate:w.toPlainDateTime({hour:13,minute:0}),endDate:w.toPlainDateTime({hour:15,minute:0})}},{uuid:"477a1c27-b660-4221-9be0-de34de910f4b",count:2,kind:"checkout",dateTime:{startDate:w.toPlainDateTime({hour:14,minute:0}),endDate:w.toPlainDateTime({hour:16,minute:0})}},{uuid:"516de07b-bc06-45b5-94f6-be5de186d4d5b",count:2,kind:"checkout",dateTime:{startDate:w.toPlainDateTime({hour:15,minute:0}),endDate:w.toPlainDateTime({hour:17,minute:0})}},{uuid:"490c799f-ced5-461e-a483-ad6a90df221b",count:2,kind:"checkout",dateTime:{startDate:w.toPlainDateTime({hour:16,minute:0}),endDate:w.toPlainDateTime({hour:18,minute:0})}},{uuid:"c9f79536-225a-41ee-93e6-ef1741b511f7",count:2,kind:"checkout",dateTime:{startDate:w.toPlainDateTime({hour:17,minute:0}),endDate:w.toPlainDateTime({hour:19,minute:0})}},{uuid:"c6c3f0f7-04c6-4819-95e6-aa8476e4392c",count:2,kind:"checkout",dateTime:{startDate:w.toPlainDateTime({hour:18,minute:0}),endDate:w.toPlainDateTime({hour:20,minute:0})}},{uuid:"9748b1e6-1712-449b-8dda-eb44f172071e",count:2,kind:"checkout",dateTime:{startDate:w.toPlainDateTime({hour:19,minute:0}),endDate:w.toPlainDateTime({hour:21,minute:0})}},{uuid:"04f724ea-4a78-4363-ba0a-75a71ab22598",count:2,kind:"checkout",dateTime:{startDate:w.toPlainDateTime({hour:20,minute:0}),endDate:w.toPlainDateTime({hour:22,minute:0})}},{uuid:"62d5af53-5e3e-4d59-b574-261e33b0a872",count:2,kind:"checkout",dateTime:{startDate:w.toPlainDateTime({hour:21,minute:0}),endDate:w.toPlainDateTime({hour:23,minute:0})}},{uuid:"98fef052-02ba-4a33-ba2a-13ccad6834c7",count:2,kind:"checkout",dateTime:{startDate:w.toPlainDateTime({hour:22,minute:0}),endDate:C.toPlainDateTime({hour:0,minute:0})}},{uuid:"e4700acc-7192-4063-b03d-cb4009cbe6f2",count:2,kind:"checkout",dateTime:{startDate:w.toPlainDateTime({hour:23,minute:0}),endDate:C.toPlainDateTime({hour:0,minute:0})}},{uuid:"d30340e1-e49f-44aa-bf1b-d90839b0f1aa",count:2,kind:"checkout",dateTime:{startDate:C.toPlainDateTime({hour:10,minute:0}),endDate:C.toPlainDateTime({hour:11,minute:0})}},{uuid:"e1a9b252-628c-4c01-b8e1-e1964b51e646",count:2,kind:"checkout",dateTime:{startDate:C.toPlainDateTime({hour:10,minute:0}),endDate:C.toPlainDateTime({hour:12,minute:0})}},{uuid:"873a1308-57bc-46bc-bdfc-a82213364c77",count:2,kind:"checkout",dateTime:{startDate:C.toPlainDateTime({hour:11,minute:0}),endDate:C.toPlainDateTime({hour:13,minute:0})}},{uuid:"2e9864a9-0208-4e56-b232-dcd258e31545",count:2,kind:"checkout",dateTime:{startDate:C.toPlainDateTime({hour:12,minute:0}),endDate:C.toPlainDateTime({hour:14,minute:0})}},{uuid:"caef5fea-8458-4b65-b699-9c4e5ee6589d",count:2,kind:"checkout",dateTime:{startDate:C.toPlainDateTime({hour:13,minute:0}),endDate:C.toPlainDateTime({hour:15,minute:0})}},{uuid:"0da24180-0269-4206-adf7-4b9faeefa091",count:2,kind:"checkout",dateTime:{startDate:C.toPlainDateTime({hour:14,minute:0}),endDate:C.toPlainDateTime({hour:16,minute:0})}},{uuid:"6c0430dd-9968-456d-bf68-d893040f73fa",count:2,kind:"checkout",dateTime:{startDate:C.toPlainDateTime({hour:15,minute:0}),endDate:C.toPlainDateTime({hour:17,minute:0})}},{uuid:"40eaef18-d6a0-46e8-b3e5-a98be09cef57",count:2,kind:"checkout",dateTime:{startDate:C.toPlainDateTime({hour:16,minute:0}),endDate:C.toPlainDateTime({hour:18,minute:0})}},{uuid:"3c6468ad-fdb8-432d-92ce-a52fae471206",count:2,kind:"checkout",dateTime:{startDate:C.toPlainDateTime({hour:17,minute:0}),endDate:C.toPlainDateTime({hour:19,minute:0})}},{uuid:"b9da7047-c359-49fa-b558-53207ac5255a",count:2,kind:"flohmarkt",dateTime:{startDate:C.toPlainDateTime({hour:17,minute:0}),endDate:C.toPlainDateTime({hour:19,minute:0})}},{uuid:"c0e1d54c-0832-4147-9054-082208dab2f2",count:4,kind:"breakdown",dateTime:{startDate:C.toPlainDateTime({hour:17,minute:0}),endDate:C.toPlainDateTime({hour:20,minute:0})}}],vi=Ae.map(e=>e.uuid),Ft=Object.entries(Object.groupBy(vi,e=>e)).reduce((e,[n,t])=>[...e,{uuid:n,count:t?.length??0}],[]).filter(({count:e})=>e!==1);if(Ft.length>0)throw Error(`duplicate uuids found:  ${Ft.map(({uuid:e})=>e).join(", ")}`);function ki(e){return Ae.find(n=>n.uuid===e)??null}const We={FRIDAY:{open:{from:16,to:22},breaks:[{from:16,to:22}]},SATURDAY:{open:{from:9,to:24},breaks:[{from:9,to:10}]},SUNDAY:{open:{from:10,to:20},breaks:[{from:18,to:20}]}};var yi=m("<span>");function Ye(e){const n=()=>{const t=["chip"];return t.push(e.kind??"gray"),e.inverted&&t.push("inverted"),e.size==="small"&&t.push("small"),t.join(" ")};return(()=>{var t=g(yi);return o(t,()=>e.children),V(r=>{var i=n(),a=e.title;return i!==r.e&&De(t,r.e=i),a!==r.t&&we(t,"title",r.t=a),r},{e:void 0,t:void 0}),t})()}const Di=O({start:A(),end:A()}).transform((e,n)=>{const{start:t,end:r}=e,i=pt(t),a=pt(r);return i.kind==="ERROR"?(n.addIssue({code:"custom",message:i.message}),xt):a.kind==="ERROR"?(n.addIssue({code:"custom",message:a.message}),xt):{startDate:oe.PlainDateTime.from({year:i.value.year,month:i.value.month,day:i.value.day,hour:i.value.hour,minute:i.value.minute}),endDate:oe.PlainDateTime.from({year:a.value.year,month:a.value.month,day:a.value.day,hour:a.value.hour,minute:a.value.minute})}}),pi=O({uuid:A(),title:A(),organizer:A(),slot:Di,shortDescription:A(),longDescription:A(),playerMax:ye(),tagNames:ve(A())}),xi=$n(A(),ye()),Ei=O({programEntries:ve(pi),reservations:xi});async function Ri(){const e=await Ln();if(e.kind==="FAILURE")return console.error("Unexpected error. Maybe network, maybe server error."),{kind:"FAILURE"};const n=Ei.safeParse(e.data);return n.success?{kind:"SUCCESS",data:n.data}:{kind:"FAILURE"}}var wi=m("<div style=display:flex;flex-wrap:wrap;gap:1rem;justify-content:space-between><h5 style=margin:0>Filter"),Ti=m("<div style=display:flex;flex-wrap:wrap;gap:0.5rem><!$><!/><!$><!/><!$><!/><!$><!/>");function on(e){const n=e.exclude??[];return l(R,{get children(){return[g(wi),(()=>{var t=g(Ti),r=t.firstChild,[i,a]=$(r.nextSibling),s=i.nextSibling,[c,u]=$(s.nextSibling),d=c.nextSibling,[h,b]=$(d.nextSibling),S=h.nextSibling,[_,k]=$(S.nextSibling);return o(t,l(ue,{label:"Alle Tage",get kind(){return e.dayFilter()===null?"success":"gray"},onClick:()=>e.setDayFilter(null)}),i,a),o(t,l(x,{get when(){return!n.includes("FRIDAY")},get children(){return l(ue,{label:"Freitag",get kind(){return e.dayFilter()==="FRIDAY"?"success":"gray"},onClick:()=>e.setDayFilter("FRIDAY")})}}),c,u),o(t,l(x,{get when(){return!n.includes("SATURDAY")},get children(){return l(ue,{label:"Samstag",get kind(){return e.dayFilter()==="SATURDAY"?"success":"gray"},onClick:()=>e.setDayFilter("SATURDAY")})}}),h,b),o(t,l(x,{get when(){return!n.includes("SUNDAY")},get children(){return l(ue,{label:"Sonntag",get kind(){return e.dayFilter()==="SUNDAY"?"success":"gray"},onClick:()=>e.setDayFilter("SUNDAY")})}}),_,k),t})()]}})}var Ai=m("<p>Beim Kiosk und der Essensausgabe können wir immer ein paar helfende Hände gebrauchen. Wenn du bereit bist zu helfen, klicke in der jeweiligen Stunde auf das Handsymbol <!$><!/>."),je=m("<br>"),Ui=m("<h4>Zur Anmeldung für Erklärbären"),Ci=m("<div class=dynamic-columns><p>Eines der Hauptziele der Luzerner Spieltage ist es, dass die Besucher/-innen noch nicht gespielte Spiele ausprobieren können. Dazu unterstützen uns jedes Jahr Freiwillige und erklären die ihnen bekannten Spiele aus der Spiele-Bibliothek. Diese Erklärbären sind durch ihr rotes T-Shirt erkennbar.</p><!$><!/>"),Pi=m("<p>Plan konnte nicht geladen werden."),Fi=m("<div><!$><!/><!$><!/><h5></h5><p class=duration><em><!$><!/> / <!$><!/>"),Li=m("<div><!$><!/><!$><!/><h5></h5><p class=duration><span>von <!$><!/>&nbsp;bis <!$><!/>&nbsp;Uhr | </span><em><!$><!/>&nbsp;/&nbsp;<!$><!/>");function Ii(e){const[n,t]=ae(null);return[(()=>{var r=g(Ai),i=r.firstChild,a=i.nextSibling,[s,c]=$(a.nextSibling);return s.nextSibling,o(r,l(re,{icon:"hand-heart"}),s,c),r})(),g(je),l(ze,{level:3,title:"Erklärbären"}),g(je),(()=>{var r=g(Ci),i=r.firstChild,a=i.nextSibling,[s,c]=$(a.nextSibling);return o(r,l(M,{get href(){return e.link("/erklaerbaer")},class:"button-link",style:"margin-block-end: 1rem; padding: 0;",get children(){return l(_e,{icon:"forward",type:"success",get children(){return g(Ui)}})}}),s,c),r})(),g(je),l(on,{dayFilter:n,setDayFilter:t}),g(je),l(Oe,{get fallback(){return l(R,{get children(){return T.loading.program}})},get children(){return l(x,{get when(){return e.publicResource()},get fallback(){return l(R,{type:"danger",get children(){return T.error.help}})},children:r=>l(x,{get when(){return r().kind==="SUCCESS"},get fallback(){return l(R,{type:"danger",get children(){return g(Pi)}})},get children(){return l(Ni,{get myHelpReservations(){return e.reservations$.get()},get allReservations(){return r().data.reservations},get isEditable(){return e.isEditable},get link(){return e.link},get dayFilter(){return n()}})}})})}})]}function Ni(e){const n=()=>Object.keys(e.allReservations),t=()=>({FRIDAY:at({day:"FRIDAY",entries:Ae,alreadyReservedUuids:n(),myReservations:e.myHelpReservations,link:e.link}),SATURDAY:at({day:"SATURDAY",entries:Ae,alreadyReservedUuids:n(),myReservations:e.myHelpReservations,link:e.link}),SUNDAY:at({day:"SUNDAY",entries:Ae,alreadyReservedUuids:n(),myReservations:e.myHelpReservations,link:e.link})});return l(sn,{get programEntries(){return t()},openingHours:We,conflictsAllowed:!0,columns:4,get dayFilter(){return e.dayFilter}})}function at(e){const n=kt(),t=[],r=Yi(e.alreadyReservedUuids);return Object.groupBy(e.entries,a=>Te(a.dateTime.startDate)??"empty")[e.day]?.forEach(a=>{const s=()=>a.count-(r[a.uuid]??0),c=()=>e.myReservations.filter(h=>"helpEntryUuid"in h&&h.helpEntryUuid===a.uuid).length>0,u=()=>{const h=["box-simple","timeview-entry"];return c()&&h.push("success"),h.join(" ")},d={startTime:oe.PlainTime.from({hour:a.dateTime.startDate.hour,minute:a.dateTime.startDate.minute}),endTime:a.dateTime.startDate.day!==a.dateTime.endDate.day?oe.PlainTime.from({hour:a.dateTime.endDate.hour+24,minute:a.dateTime.endDate.minute}):oe.PlainTime.from({hour:a.dateTime.endDate.hour,minute:a.dateTime.endDate.minute})};s()===0?t.push({range:d,component:()=>(()=>{var h=g(Fi),b=h.firstChild,[S,_]=$(b.nextSibling),k=S.nextSibling,[f,v]=$(k.nextSibling),y=f.nextSibling,D=y.nextSibling,U=D.firstChild,P=U.firstChild,[L,Y]=$(P.nextSibling),z=L.nextSibling,W=z.nextSibling,[J,Z]=$(W.nextSibling);return h.$$click=()=>n(e.link(`/helfen/${a.uuid}`)),o(h,l(Ye,{title:"Helfer:innen gesucht",get inverted(){return c()},size:"small",children:"HL"}),S,_),o(h,l(x,{get when(){return c()},get children(){return l(Ue,{icon:"hand-heart",kind:"ghost",onClick:()=>n(e.link(`/helfen/${a.uuid}`)),title:"Helfen"})}}),f,v),o(y,()=>xe[a.kind].title),o(U,s,L,Y),o(U,()=>a.count,J,Z),V(j=>{var B=u(),q=xe[a.kind].title;return B!==j.e&&De(h,j.e=B),q!==j.t&&we(y,"title",j.t=q),j},{e:void 0,t:void 0}),Ve(),h})()}):t.push({range:d,component:()=>(()=>{var h=g(Li),b=h.firstChild,[S,_]=$(b.nextSibling),k=S.nextSibling,[f,v]=$(k.nextSibling),y=f.nextSibling,D=y.nextSibling,U=D.firstChild,P=U.firstChild,L=P.nextSibling,[Y,z]=$(L.nextSibling),W=Y.nextSibling,J=W.nextSibling,[Z,j]=$(J.nextSibling);Z.nextSibling;var B=U.nextSibling,q=B.firstChild,[p,E]=$(q.nextSibling),H=p.nextSibling,X=H.nextSibling,[se,ee]=$(X.nextSibling);return h.$$click=()=>n(e.link(`/helfen/${a.uuid}`)),o(h,l(Ye,{title:"Helfer:innen gesucht",get inverted(){return c()},size:"small",children:"HL"}),S,_),o(h,l(Ue,{icon:"hand-heart",kind:"ghost",onClick:()=>n(e.link(`/helfen/${a.uuid}`)),title:"Helfen"}),f,v),o(y,()=>xe[a.kind].title),o(U,()=>d.startTime.hour,Y,z),o(U,()=>d.endTime.hour,Z,j),o(B,()=>a.count-s(),p,E),o(B,()=>a.count,se,ee),V(N=>{var te=u(),F=xe[a.kind].title;return te!==N.e&&De(h,N.e=te),F!==N.t&&we(y,"title",N.t=F),N},{e:void 0,t:void 0}),Ve(),h})()})}),t}function Yi(e){const n=Object.groupBy(e,r=>r),t={};for(const r of e)t[r]=n[r]?.length??0;return t}_t(["click"]);var Hi=m("<dialog closedby=any><!$><!/><!$><!/><!$><!/>"),Oi=m("<h4>");function Bi(e=!1){return{open:e}}function zi(e){let n;const[t,r]=me(e.store);Rn(()=>{t.open?n.showModal():n.close()});function i(){r({open:!1}),e.onClose?.()}const a=()=>{const s=[];return e.type!==void 0&&s.push(e.type),e.size!==void 0&&s.push(e.size),e.onClose!==void 0&&s.push("dialog-with-close"),s};return(()=>{var s=g(Hi),c=s.firstChild,[u,d]=$(c.nextSibling),h=u.nextSibling,[b,S]=$(h.nextSibling),_=b.nextSibling,[k,f]=$(_.nextSibling);s.addEventListener("close",i);var v=n;return typeof v=="function"?wn(v,s):n=s,o(s,l(x,{get when(){return e.onClose},get children(){return l(Ue,{onClick:i,icon:"circle-xmark",kind:"gray"})}}),u,d),o(s,l(x,{get when(){return e.title},children:y=>(()=>{var D=g(Oi);return o(D,y),D})()}),b,S),o(s,()=>e.children,k,f),V(()=>De(s,a().join(" "))),s})()}var Mi=m("<p>");function st(e){const[n,t]=me(e.store),r=e.showErrors==="ALWAYS",i=()=>r||n.isDirty?e.errors??[]:[];return[l(Bt,{get label(){return e.label},get name(){return e.name},get value(){return n.value},onValueUpdate:a=>{t("value",a),e.onUpdate?.()},onBlur:()=>t("isDirty",!0),get type(){return e.type},get required(){return e.required},get isHoneypot(){return e.isHoneypot},get disabled(){return e.disabled}}),l(x,{get when(){return i().length>0},get children(){return l(R,{type:"danger",get children(){return l(Q,{get each(){return i()},children:a=>(()=>{var s=g(Mi);return o(s,a),s})()})}})}})]}A().transform(e=>({value:e,isDirty:!1}));function ut(e){return{value:e,isDirty:!1}}ye().transform(e=>({value:e,isDirty:!1}));var ji=m("<div><!$><!/><br><!$><!/><br><!$><!/>"),Ki=m("<h5>"),Wi=m("<p class=duration>von <!$><!/> bis <!$><!/> Uhr <em><small>(<!$><!/>)"),Vi=m("<div>");function Zi(e){const[n,t]=ae(null),r=qi(e.save,e.publicState,e.link),i=Gi(r),a=Qi(r);return(()=>{var s=g(ji),c=s.firstChild,[u,d]=$(c.nextSibling),h=u.nextSibling,b=h.nextSibling,[S,_]=$(b.nextSibling),k=S.nextSibling,f=k.nextSibling,[v,y]=$(f.nextSibling);return o(s,l(ze,{level:3,title:"Mein Programm"}),u,d),o(s,l(on,{dayFilter:n,setDayFilter:t,exclude:i}),S,_),o(s,l(sn,{get dayFilter(){return n()},programEntries:r,openingHours:a,conflictsAllowed:!1,columns:1,exclude:i}),v,y),s})()}function qi(e,n,t){const{helping:r}=e,i={FRIDAY:[],SATURDAY:[],SUNDAY:[]},a=r.map(c=>{if(c.kind==="ERKLAERBAER"){const d={startDate:qe[c.slot.day].toPlainDateTime({hour:c.slot.from,minute:0}),endDate:qe[c.slot.day].toPlainDateTime({hour:c.slot.to,minute:0})};return{...c,meta:{dateTime:d}}}const u=Ae.find(d=>d.uuid===c.helpEntryUuid);return le(u!==void 0,`Help UUID is invalid: '${c.helpEntryUuid}'`),{...c,meta:u}}),s=Object.groupBy(a,c=>{const{startDate:u,endDate:d}=c.meta.dateTime;return`${u.year}-${u.month}-${u.day}-${u.hour}-${u.minute}--${d.year}-${d.month}-${d.day}-${d.hour}-${d.minute}`});return Object.values(s).forEach(c=>{if(c===void 0)return;const u=c[0];if(u===void 0)return;let d=!0;const h=c.map(f=>f.kind==="ERKLAERBAER"?["Erklärbär","ME"]:f.kind==="SELF"?[xe[f.meta.kind].title,"ME"]:(d=!1,[xe[f.meta.kind].title,f.name])),b=d?h.map(([f])=>f).join(", "):h.map(([f,v])=>v==="ME"?f:`${f} (${v})`).join("; "),S=Te(u.meta.dateTime.startDate);le(S!==null,`Date '${JSON.stringify(u.meta.dateTime.startDate)}' is not a valid event date.`);const _={startTime:u.meta.dateTime.startDate.toPlainTime(),endTime:u.meta.dateTime.endDate.toPlainTime()},k=u.kind==="ERKLAERBAER"?"/erklaerbaer":`/helfen/${u.helpEntryUuid}`;i[S].push({range:_,component:()=>l(Ji,{title:b,range:_,kind:"help",path:k,link:t})})}),a.forEach(c=>{switch(c.kind){case"SELF":{const u=Te(c.meta.dateTime.startDate);le(u!==null,`Date '${JSON.stringify(c.meta.dateTime.startDate)}' is not a valid event date.`);break}case"FRIEND":{const u=Te(c.meta.dateTime.startDate);le(u!==null,`Date '${JSON.stringify(c.meta.dateTime.startDate)}' is not a valid event date.`);break}}}),i}function Ji(e){const n={"master-draft":{label:"SL",help:"Spielleitung",link:{icon:"pencil",label:"Spielrunde bearbeiten"}},master:{label:"SL",help:"Spielleitung",link:{icon:"pencil",label:"Spielrunde bearbeiten"}},play:{label:"TN",help:"Teilnehmer:in",link:{icon:"link",label:"Zur Spielrunde"}},help:{label:"HL",help:"Helfen",link:{icon:"link",label:"Zum Eintrag"}}}[e.kind],t=()=>{const r=["timeview-entry","box-simple"];return e.kind==="master-draft"&&r.push("gray"),e.kind==="master"&&r.push("special"),e.kind==="play"&&r.push("danger"),r.join(" ")};return(()=>{var r=g(Vi);return o(r,l(M,{get href(){return e.link(e.path)},class:"button-link",style:"display: contents;",get children(){return[l(Ye,{get title(){return n.help},get inverted(){return e.kind!=="help"},size:"small",get children(){return n.label}}),l(Ue,{get icon(){return n.link.icon},kind:"ghost",get title(){return n.link.label}}),(()=>{var i=g(Ki);return o(i,()=>e.title),V(()=>we(i,"title",e.title)),i})(),(()=>{var i=g(Wi),a=i.firstChild,s=a.nextSibling,[c,u]=$(s.nextSibling),d=c.nextSibling,h=d.nextSibling,[b,S]=$(h.nextSibling),_=b.nextSibling,k=_.nextSibling,f=k.firstChild,v=f.firstChild,y=v.nextSibling,[D,U]=$(y.nextSibling);return D.nextSibling,o(i,()=>Ce(e.range.startTime),c,u),o(i,()=>Ce(e.range.endTime),b,S),o(f,()=>Bn(e.range.startTime,e.range.endTime),D,U),i})()]}})),V(()=>De(r,t())),r})()}function Gi(e){const n=[];return e.FRIDAY.length===0&&n.push("FRIDAY"),e.SATURDAY.length===0&&n.push("SATURDAY"),e.SUNDAY.length===0&&n.push("SUNDAY"),n.length===3?["FRIDAY"]:n}function Qi(e){const n=un;e.FRIDAY.length>0&&(n.FRIDAY=We.FRIDAY);let t=!1;e.SATURDAY.forEach(i=>{i.range.startTime.hour<n.SATURDAY.open.from&&(t=!0),i.range.endTime.hour>n.SATURDAY.open.to&&(t=!0)}),t&&(n.SATURDAY=We.SATURDAY);let r=!1;return e.SUNDAY.forEach(i=>{i.range.startTime.hour<n.SUNDAY.open.from&&(r=!0),i.range.endTime.hour>n.SUNDAY.open.to&&(r=!0)}),r&&(n.SUNDAY=We.SUNDAY),n}function yt(e,n){const t={get:e,set:r=>n(()=>r),update:n,pipe:r=>r(t)};return t}function Xi(e){const[n,t]=me({value:e});return yt(()=>n.value,r=>t("value",r(n.value)))}const I={sub:e=>n=>yt(()=>n.get()[e],t=>n.update(r=>({...r,[e]:t(n.get()[e])})))},ke={push:(e,n)=>{e.update(t=>[...t,n])},update:(e,n,t)=>{e.update(r=>r.map(i=>n(i)?t:i))},remove:(e,n)=>{e.update(t=>t.filter(n))},findExact:(e,n)=>(ot(e.get(),n),yt(()=>ot(e.get(),n),t=>{const r=ot(e.get(),n);ke.update(e,n,t(r))}))};function ot(e,n){const[t,...r]=e.filter(n);return le(t!==void 0,"No element found with predicate"),le(r.length===0,"Predicate does not result in unique element"),t}var el=m("<label class=input-checkbox><input type=checkbox><div><!$><!/><!$><!/>"),tl=m("<div class=checkbox-description>");function nl(e){return(()=>{var n=g(el),t=n.firstChild,r=t.nextSibling,i=r.firstChild,[a,s]=$(i.nextSibling),c=a.nextSibling,[u,d]=$(c.nextSibling);return t.addEventListener("change",h=>e.checked$.set(h.target.checked)),o(r,()=>e.label,a,s),o(r,l(x,{get when(){return e.description},children:h=>(()=>{var b=g(tl);return o(b,h),b})()}),u,d),V(h=>{var b=e.name,S=e.disabled===!0;return b!==h.e&&we(t,"name",h.e=b),S!==h.t&&Ee(t,"disabled",h.t=S),h},{e:void 0,t:void 0}),V(()=>Ee(t,"value",e.value)),V(()=>Ee(t,"checked",e.checked$.get())),n})()}var rl=m("<div style=display:grid;gap:1rem><!$><!/><!$><!/><!$><!/>"),il=m("<div>"),ll=m("<div style=display:grid;gap:1rem><h3>Meine Kontaktdaten</h3><p><strong>Name:</strong> <!$><!/></p><p><strong>E-Mail:</strong> <!$><!/></p><p><strong>Handynummer:</strong> <!$><!/></p><!$><!/>"),al=m("<form novalidate><!$><!/><!$><!/><!$><!/><!$><!/>");function sl(e){return(()=>{var n=g(rl),t=n.firstChild,[r,i]=$(t.nextSibling),a=r.nextSibling,[s,c]=$(a.nextSibling),u=s.nextSibling,[d,h]=$(u.nextSibling);return o(n,l(ul,{get contact$(){return e.save$.pipe(I.sub("contact"))},get isEditable(){return e.isEditable}}),r,i),o(n,l(nl,{label:"Schickt mir bitte E-Mails, wenn neue Programmpunkte veröffentlicht werden.",get checked$(){return e.save$.pipe(I.sub("config")).pipe(I.sub("wantsUpdates"))},name:"wantsUpdates",value:"wantsUpdates"}),s,c),o(n,l(Oe,{get fallback(){return l(R,{get children(){return T.loading.program}})},get children(){return l(x,{get when(){return e.publicResource()},get fallback(){return l(R,{type:"danger",get children(){return T.error.help}})},children:b=>l(x,{get when(){return b().kind==="SUCCESS"},get fallback(){return l(R,{type:"danger",get children(){return T.loading.program}})},get children(){return l(Zi,{get save(){return e.save$.get()},get publicState(){return b().data},get link(){return e.link}})}})})}}),d,h),n})()}function ul(e){const[n,t]=me(Bi()),{name:r,email:i,mobile:a}=e.contact$.get();return l(R,{get children(){return[l(x,{get when(){return n.open},get children(){return l(ol,{get contact$(){return e.contact$},dialogStore:n})}}),(()=>{var s=g(ll),c=s.firstChild,u=c.nextSibling,d=u.firstChild,h=d.nextSibling,b=h.nextSibling,[S,_]=$(b.nextSibling),k=u.nextSibling,f=k.firstChild,v=f.nextSibling,y=v.nextSibling,[D,U]=$(y.nextSibling),P=k.nextSibling,L=P.firstChild,Y=L.nextSibling,z=Y.nextSibling,[W,J]=$(z.nextSibling),Z=P.nextSibling,[j,B]=$(Z.nextSibling);return o(u,r,S,_),o(k,i,D,U),o(P,a,W,J),o(s,l(x,{get when(){return e.isEditable},get children(){var q=g(il);return o(q,l(he,{icon:"pencil",label:"Kontaktdaten editieren",onClick:()=>t("open",!0)})),q}}),j,B),s})()]}})}function ol(e){const[n]=Cr(),[t]=me({name:ut(e.contact$.get().name),email:ut(e.contact$.get().email),mobile:ut(e.contact$.get().mobile)}),[r,i]=me({kind:"IDLE",isDuplicate:!1}),a=G(()=>{const u={name:[],email:[]};return t.name.value.trim().length===0&&u.name.push(T.mandatoryField),t.email.value.trim().length===0?u.email.push(T.mandatoryField):t.email.value.includes("@")||u.email.push(T.invalidEmail),r.kind==="IDLE"&&r.isDuplicate&&u.email.push("Diese E-Mail wird bereits verwendet."),{...u,hasErrors:u.name.length+u.email.length>0}}),[s,c]=me(e.dialogStore);return l(zi,{get store(){return e.dialogStore},title:"Kontaktdaten editieren",onClose:()=>{},size:"medium",get children(){var u=g(al),d=u.firstChild,[h,b]=$(d.nextSibling),S=h.nextSibling,[_,k]=$(S.nextSibling),f=_.nextSibling,[v,y]=$(f.nextSibling),D=v.nextSibling,[U,P]=$(D.nextSibling);return o(u,l(st,{get store(){return t.name},label:"Name",name:"name",showErrors:"ON_BLUR",get errors(){return a().name}}),h,b),o(u,l(st,{get store(){return t.email},label:"E-Mail",name:"email",showErrors:"ALWAYS",get errors(){return a().email},onUpdate:()=>i({kind:"IDLE",isDuplicate:!1})}),_,k),o(u,l(st,{get store(){return t.mobile},label:"Handynummer",name:"mobile"}),v,y),o(u,l(ue,{label:"Speichern",get disabled(){return a().hasErrors||r.kind==="CHECKING"},onClick:async()=>{if(!a().hasErrors){i({kind:"CHECKING"});const L=n.secret,Y=await fetch(Ge(`/lst26/check-email?email=${t.email.value}&secret=${L}`));if(!Y.ok){i({kind:"IDLE",isDuplicate:!0});return}const z=await Y.json(),W=cl.safeParse(z);if(!W.success){i({kind:"IDLE",isDuplicate:!0});return}if(W.data.kind==="FAILURE"){i({kind:"IDLE",isDuplicate:!0});return}i({kind:"IDLE",isDuplicate:!1}),e.contact$.set({name:t.name.value,email:t.email.value,mobile:t.mobile.value}),c("open",!1)}}}),U,P),u}})}const cl=mt([O({kind:$e("SUCCESS")}),O({kind:$e("FAILURE")})]);var dl=m("<div class=tooltip-wrapper><div class=tooltip></div><!$><!/>");function Ie(e){return(()=>{var n=g(dl),t=n.firstChild,r=t.nextSibling,[i,a]=$(r.nextSibling);return o(t,()=>e.tooltip),o(n,()=>e.children,i,a),n})()}var gl=m("<div class=quickmenu-wrapper><div class=quickmenu><!$><!/><!$><!/><!$><!/><!$><!/>"),hl=m('<div class="quickmenu extended"><!$><!/><!$><!/><!$><!/><!$><!/>'),ml=m("<div style=margin-block-start:1rem;display:flex;gap:0.5rem;align-items:center><!$><!/><em>Zuletzt gespeichert um: <!$><!/> Uhr"),$l=m("<div style=margin-block-start:1rem;display:flex;gap:0.5rem;align-items:center><!$><!/><em>Am Speichern..."),fl=m("<div style=margin-block-start:1rem;display:flex;gap:0.5rem;align-items:center><!$><!/><em>Speichern war nicht möglich!");function bl(e){return(()=>{var n=g(gl),t=n.firstChild,r=t.firstChild,[i,a]=$(r.nextSibling),s=i.nextSibling,[c,u]=$(s.nextSibling),d=c.nextSibling,[h,b]=$(d.nextSibling),S=h.nextSibling,[_,k]=$(S.nextSibling);return o(t,l(Ie,{tooltip:"Zur Übersicht",get children(){return l(M,{get href(){return e.link(e.parentPath)},class:"button-link",get children(){return l(ue,{get label(){return l(re,{icon:"backward"})}})}})}}),i,a),o(t,l(x,{get when(){return e.roles.includes("admin")},get children(){return[l(Ie,{tooltip:"Zum Programm",get children(){return l(M,{get href(){return e.link("/programm")},class:"button-link",get children(){return l(ue,{get label(){return l(re,{icon:"dice-d20"})}})}})}}),l(Ie,{tooltip:"Zu deinen Programmpunkten",get children(){return l(M,{get href(){return e.link("/erstellen")},class:"button-link",get children(){return l(ue,{get label(){return l(re,{icon:"grid-2-plus"})}})}})}})]}}),c,u),o(t,l(Ie,{tooltip:"Zum Helferplan",get children(){return l(M,{get href(){return e.link("/helfen")},class:"button-link",get children(){return l(ue,{get label(){return l(re,{icon:"hand-heart"})}})}})}}),h,b),o(t,l(Ie,{tooltip:"Zur Zusammenfassung",get children(){return l(M,{get href(){return e.link("/zusammenfassung")},class:"button-link",get children(){return l(ue,{get label(){return l(re,{icon:"list"})}})}})}}),_,k),n})()}function _l(e){return[l(R,{type:"gray",get children(){var n=g(hl),t=n.firstChild,[r,i]=$(t.nextSibling),a=r.nextSibling,[s,c]=$(a.nextSibling),u=s.nextSibling,[d,h]=$(u.nextSibling),b=d.nextSibling,[S,_]=$(b.nextSibling);return o(n,l(M,{get href(){return e.link(e.parentPath)},class:"button-link",get children(){return l(he,{icon:"backward",label:"Zur Übersicht"})}}),r,i),o(n,l(x,{get when(){return e.roles.includes("admin")},get children(){return[l(M,{get href(){return e.link("/programm")},class:"button-link",get children(){return l(he,{icon:"dice-d20",label:"Zum Programm"})}}),l(M,{get href(){return e.link("/erstellen")},class:"button-link",get children(){return l(he,{icon:"grid-2-plus",label:"Zu deinen Programmpunkten"})}})]}}),s,c),o(n,l(M,{get href(){return e.link("/helfen")},class:"button-link",get children(){return l(he,{icon:"hand-heart",label:"Zum Helferplan"})}}),d,h),o(n,l(M,{get href(){return e.link("/zusammenfassung")},class:"button-link",get children(){return l(he,{icon:"list",label:"Zur Zusammenfassung"})}}),S,_),n}}),l(Sl,{get saveState(){return e.saveState},get lastSaved(){return e.lastSaved}})]}function Sl(e){return l(He,{get children(){return[l(ie,{get when(){return e.saveState==="IDLE"},get children(){var n=g(ml),t=n.firstChild,[r,i]=$(t.nextSibling),a=r.nextSibling,s=a.firstChild,c=s.nextSibling,[u,d]=$(c.nextSibling);return u.nextSibling,o(n,l(re,{icon:"circle-check"}),r,i),o(a,()=>Ot(e.lastSaved),u,d),n}}),l(ie,{get when(){return e.saveState==="SAVING"},get children(){var n=g($l),t=n.firstChild,[r,i]=$(t.nextSibling);return r.nextSibling,o(n,l(re,{icon:"floppy-disk-circle-arrow-right"}),r,i),n}}),l(ie,{get when(){return e.saveState==="ERROR"},get children(){var n=g(fl),t=n.firstChild,[r,i]=$(t.nextSibling);return r.nextSibling,o(n,l(re,{icon:"triangle-exclamation"}),r,i),n}})]}})}var vl=m("<div class=page><!$><!/><div class=page-content><!$><!/><!$><!/></div><!$><!/>"),kl=m("<h2>"),yl=m("<br>"),Dl=m("<div class=extended-wrapper style=margin-block-start:1rem>");function de(e){return(()=>{var n=g(vl),t=n.firstChild,[r,i]=$(t.nextSibling),a=r.nextSibling,s=a.firstChild,[c,u]=$(s.nextSibling),d=c.nextSibling,[h,b]=$(d.nextSibling),S=a.nextSibling,[_,k]=$(S.nextSibling);return o(n,(()=>{var f=K(()=>e.showQuickmenu!==!1);return()=>f()?l(bl,{get roles(){return e.roles},get link(){return e.link},get saveState(){return e.saveState},get lastSaved(){return e.lastSaved},get parentPath(){return e.parentPath??"/"}}):null})(),r,i),o(a,(()=>{var f=K(()=>e.title===void 0);return()=>f()?null:[(()=>{var v=g(kl);return o(v,()=>e.title),v})(),g(yl)]})(),c,u),o(a,()=>e.children,h,b),o(n,(()=>{var f=K(()=>e.showQuickmenu!==!1);return()=>f()?(()=>{var v=g(Dl);return o(v,l(_l,{get roles(){return e.roles},get link(){return e.link},get saveState(){return e.saveState},get lastSaved(){return e.lastSaved},get parentPath(){return e.parentPath??"/"}})),v})():null})(),_,k),n})()}var pl=m('<form class=input-button style="display:grid;gap:0rem;grid-template-columns:1fr max-content"><input type=text style=border-color:var(--clr-special-9)><!$><!/>');function Lt(e){const[n,t]=ae("");return(()=>{var r=g(pl),i=r.firstChild,a=i.nextSibling,[s,c]=$(a.nextSibling);return r.addEventListener("submit",u=>{u.preventDefault();const d=n();d.trim().length>0&&e.addFriend(d)}),Ee(r,"noValidate",!0),i.$$input=u=>t(u.target.value),o(r,l(he,{icon:"arrow-right",type:"submit",label:"Begleitperson anmelden",kind:"special"}),s,c),V(()=>Ee(i,"value",n())),Ve(),r})()}_t(["input"]);var xl=m("<p>Details konnten nicht geladen werden."),El=m("<div style=display:flex;gap:1rem;flex-wrap:wrap;justify-content:space-between><h3></h3><!$><!/>"),Rl=m("<div class=game-dialog><ul role=list style=display:grid;gap:0.5rem><li><strong style=color:var(--clr-accent-1)>Tag, Zeit:</strong> <br><!$><!/>, <!$><!/> - <!$><!/> Uhr</li><li><strong style=color:var(--clr-accent-1)>Beschreibung:</strong> <br><!$><!/></li></ul><div class=reservations><h5 style=margin-block-start:0>Plätze reservieren</h5><div class=reservation-table>"),wl=m("<div class=count>"),Tl=m("<div class=reservation-table-entry><p>Reserviert für mich </p><!$><!/>"),Al=m('<div class=reservation-table-entry><p>Reserviert für "<!$><!/>"</p><!$><!/>'),Ul=m('<div style="display:grid;gap:1rem;grid-template-columns:max-content 1fr"><!$><!/><!$><!/>');function Cl(e){const n=rn().uuid??"no-uuid-found",t=ki(n);return l(Oe,{get fallback(){return l(R,{get children(){return T.loading.program}})},get children(){return l(x,{get when(){return e.publicResource()},get fallback(){return l(R,{type:"danger",get children(){return T.error.help}})},children:r=>l(x,{get when(){return r().kind==="SUCCESS"},get fallback(){return l(R,{type:"danger",get children(){return T.loading.program}})},get children(){return l(x,{when:t,get fallback(){return l(R,{type:"danger",get children(){return g(xl)}})},children:i=>l(Pl,{get entry(){return i()},get myHelpReservations(){return e.reservations$.get()},get allReservations(){return r().data.reservations},get isEditable(){return e.isEditable},addReservation:a=>ke.push(e.reservations$,{...a,uuid:crypto.randomUUID()}),removeReservation:a=>{ke.remove(e.reservations$,s=>s.uuid!==a)},get link(){return e.link}})})}})})}})}function Pl(e){const{dateTime:n,kind:t}=e.entry,r=xe[t],i=Te(n.startDate);le(i!==null,`Date '${JSON.stringify(n.startDate)}' is not a valid event date.`);const a=()=>e.myHelpReservations.filter(d=>"helpEntryUuid"in d&&d.helpEntryUuid===e.entry.uuid),s=(e.allReservations[e.entry.uuid]??0)-a().length,c=()=>qt(e.entry.count).map(d=>{const h=a()[d];return h!==void 0?h:e.entry.count-s<=d?{kind:"RESERVED_OTHER"}:{kind:"FREE"}}),u=()=>a().find(d=>d.kind==="SELF")!==void 0;return[(()=>{var d=g(El),h=d.firstChild,b=h.nextSibling,[S,_]=$(b.nextSibling);return o(h,()=>r.title),o(d,l(M,{get href(){return e.link("/helfen")},class:"button-link",get children(){return l(he,{icon:"backward",label:"Zurück zur Helfer-Übersicht"})}}),S,_),d})(),(()=>{var d=g(Rl),h=d.firstChild,b=h.firstChild,S=b.firstChild,_=S.nextSibling,k=_.nextSibling,f=k.nextSibling,[v,y]=$(f.nextSibling),D=v.nextSibling,U=D.nextSibling,[P,L]=$(U.nextSibling),Y=P.nextSibling,z=Y.nextSibling,[W,J]=$(z.nextSibling);W.nextSibling;var Z=b.nextSibling,j=Z.firstChild,B=j.nextSibling,q=B.nextSibling,p=q.nextSibling,[E,H]=$(p.nextSibling),X=h.nextSibling,se=X.firstChild,ee=se.nextSibling;return o(b,()=>T.days[i],v,y),o(b,()=>Ce(n.startDate.toPlainTime(),{minutes:!1}),P,L),o(b,()=>Ce(n.endDate.toPlainTime(),{minutes:!1}),W,J),o(Z,()=>r.description,E,H),o(ee,l(Q,{get each(){return c()},children:(N,te)=>[(()=>{var F=g(wl);return o(F,()=>te()+1),F})(),l(He,{get children(){return[l(ie,{get when(){return N.kind==="RESERVED_OTHER"},get children(){return l(R,{children:"Bereits reserviert"})}}),l(ie,{get when(){return!e.isEditable},get children(){return l(R,{children:"Freier Platz"})}}),l(ie,{get when(){return N.kind==="SELF"},get children(){return l(Et,{type:"success",get children(){var F=g(Tl),ne=F.firstChild,ce=ne.nextSibling,[fe,be]=$(ce.nextSibling);return o(F,l(Ue,{icon:"trash",onClick:()=>e.removeReservation(N.kind==="SELF"?N.uuid:"should not happen")}),fe,be),F}})}}),l(ie,{get when(){return N.kind==="FRIEND"},get children(){return l(Et,{type:"success",get children(){var F=g(Al),ne=F.firstChild,ce=ne.firstChild,fe=ce.nextSibling,[be,Pe]=$(fe.nextSibling);be.nextSibling;var Fe=ne.nextSibling,[Le,Qe]=$(Fe.nextSibling);return o(ne,(()=>{var Xe=K(()=>N.kind==="FRIEND");return()=>Xe()?N.name:"[Fehler beim Laden]"})(),be,Pe),o(F,l(Ue,{icon:"trash",onClick:()=>e.removeReservation(N.kind==="FRIEND"?N.uuid:"should not happen")}),Le,Qe),F}})}}),l(ie,{get when(){return N.kind==="FREE"},get children(){return l(x,{get when(){return u()},get fallback(){return(()=>{var F=g(Ul),ne=F.firstChild,[ce,fe]=$(ne.nextSibling),be=ce.nextSibling,[Pe,Fe]=$(be.nextSibling);return o(F,l(he,{icon:"person-to-portal",label:"Mich anmelden",kind:"success",onClick:()=>e.addReservation({kind:"SELF",helpEntryUuid:e.entry.uuid,uuid:crypto.randomUUID()})}),ce,fe),o(F,l(Lt,{addFriend:Le=>e.addReservation({kind:"FRIEND",helpEntryUuid:e.entry.uuid,name:Le,uuid:crypto.randomUUID()})}),Pe,Fe),F})()},get children(){return l(Lt,{addFriend:F=>e.addReservation({kind:"FRIEND",helpEntryUuid:e.entry.uuid,name:F,uuid:crypto.randomUUID()})})}})}})]}})]})),d})()]}var Fl=m("<ul role=list>"),Ll=m("<li>"),Il=m("<label class=input-radio><input type=radio><!$><!/>");function Nl(e){const n=e.layout??"vertical";return(()=>{var t=g(Fl);return De(t,`radio-list ${n}`),o(t,l(Q,{get each(){return e.items},children:r=>(()=>{var i=g(Ll);return o(i,l(Yl,{get label(){return r.label},get name(){return`${r.value}-${e.name}`},get value(){return r.value},get checked(){return r.checked},onValueUpdate:()=>e.onValueUpdate(r.value)})),i})()})),t})()}function Yl(e){return(()=>{var n=g(Il),t=n.firstChild,r=t.nextSibling,[i,a]=$(r.nextSibling);return Tn(t,"change",e.onValueUpdate),o(n,()=>e.label,i,a),V(()=>we(t,"name",e.name)),V(()=>Ee(t,"value",e.value)),V(()=>Ee(t,"checked",e.checked)),n})()}var Hl=m("<p>Eines der Hauptziele der Luzerner Spieltage ist es, dass die Besucher/-innen noch nicht gespielte Spiele ausprobieren können. Dazu unterstützen uns jedes Jahr Freiwillige und erklären die ihnen bekannten Spiele aus der Spiele-Bibliothek. Diese Erklärbären sind durch ihr rotes T-Shirt erkennbar."),Dt=m("<br>"),Ol=m("<div class=dynamic-columns><div></div><div><!$><!/><ul><li>Sie müssen nicht alle Spiele der Spiele-Bibliothek kennen!</li><li>Sie erklären Spiele während der eingeplanten Zeit<ul><li>Grundsätzlich spielen die Erklärbären nicht mit</li><li>Sobald die Spieler/-innen die Regeln verstanden haben (z.B. nach den ersten paar Runden) verlassen sie den Tisch</li><li>Sie stehen weiterhin für Fragen zur Verfügung und kommen allenfalls periodisch zum Tisch zurück</li></ul></li><li>Sie bringen Spiele für die Spiele-Bibliothek mit welche sie erklären können<ul><li>Diese Spiele sollen ein breites Spektrum, von einfach bis komplex, abdecken</li><li>Eine Liste der mitgebrachten Spiele (Spiele-Bibliothek) wird vor dem Event von allen Erklärbären zusammen erstellt</li><li>Vor dem Event notieren die Erklärbären, was sie aus der Spiele-Bibliothek erklären können - (Mitbringen eigener Spiele ist nicht Pflicht, falls genügend Spiele aus der Liste erklärt werden können)</li></ul></li><li>Sie erarbeiten gemeinsam vor dem Event eine Empfehlungsliste aus ca.&nbsp;6&nbsp;Spielen<ul><li>Alle Erklärbären sollen die Regeln dieser Spiele vor dem Event lesen"),Bl=m("<h3>"),zl=m("<div style=display:grid;gap:1rem><!$><!/><!$><!/>"),Ml=m("<p>Bitte nimm mit uns <!$><!/> auf, damit wir uns kurz mit dir absprechen und dir diesen Bereich freischalten können."),jl=m("<em>Noch keine Einsätze eingetragen"),Kl=m("<h4>Tag"),Wl=m("<h4>Uhrzeit"),Vl=m('<div style="display:grid;grid-template-columns:repeat(2, 1fr);gap:1rem"><!$><!/><!$><!/>'),Zl=m("<h5>Warnungen"),ql=m("<ul>"),Jl=m("<li>");function Gl(e){return[g(Hl),g(Dt),(()=>{var n=g(Ol),t=n.firstChild,r=t.nextSibling,i=r.firstChild,[a,s]=$(i.nextSibling);return a.nextSibling,o(t,l(Ql,{get reservations$(){return e.save$.pipe(I.sub("helping"))},get roles(){return e.roles},get isEditable(){return e.isEditable}})),o(r,l(ze,{level:3,title:"Was machen die Erklärbären"}),a,s),n})()]}function Ql(e){function n(){return e.reservations$.get().filter(t=>t.kind==="ERKLAERBAER")}return[l(ze,{level:3,title:"Meine Einsätze"}),g(Dt),l(He,{get fallback(){return l(R,{get children(){var t=g(Ml),r=t.firstChild,i=r.nextSibling,[a,s]=$(i.nextSibling);return a.nextSibling,o(t,l(ge,{href:"/kontakt",children:"Kontakt"}),a,s),t}})},get children(){return l(ie,{get when(){return e.roles.includes("erklaerbaer")},get children(){var t=g(zl),r=t.firstChild,[i,a]=$(r.nextSibling),s=i.nextSibling,[c,u]=$(s.nextSibling);return o(t,l(Q,{get each(){return n()},get fallback(){return g(jl)},children:d=>l(Xl,{job:d,updateJob:h=>{ke.update(e.reservations$,b=>b.uuid===d.uuid,h)},removeJob:()=>{ke.remove(e.reservations$,h=>h.uuid!==d.uuid)},get isEditable(){return e.isEditable}})}),i,a),o(t,l(x,{get when(){return e.isEditable},get children(){return l(_e,{icon:"grid-2-plus",type:"success",onClick:()=>{ke.push(e.reservations$,{kind:"ERKLAERBAER",uuid:crypto.randomUUID(),slot:{day:"SATURDAY",from:10,to:18}})},get children(){var d=g(Bl);return o(d,()=>T.createNewEntry),d}})}}),c,u),t}})}})]}function Xl(e){function n(){const t=[],{day:r,from:i,to:a}=e.job.slot;i>=a&&t.push("Das Ende muss grösser sein als der Start.");const s=un[r],{from:c,to:u}=s.open;return c>i&&t.push(`Die Spieltage öffnen am ${T.days[r]} erst um ${c} Uhr.`),u<a&&t.push(`Die Spieltage schliessen am ${T.days[r]} um ${u} Uhr.`),t}return l(R,{get onClose(){return K(()=>!!e.isEditable)()?e.removeJob:void 0},get children(){return[g(Kl),l(Nl,{get items(){return[{label:T.days.SATURDAY,checked:e.job.slot.day==="SATURDAY",value:"SATURDAY"},{label:T.days.SUNDAY,checked:e.job.slot.day==="SUNDAY",value:"SUNDAY"}]},onValueUpdate:t=>{e.updateJob({...e.job,slot:{...e.job.slot,day:t}})},get name(){return`day-entry-${e.job.uuid}`},layout:"horizontal",get disabled(){return!e.isEditable}}),g(Dt),g(Wl),(()=>{var t=g(Vl),r=t.firstChild,[i,a]=$(r.nextSibling),s=i.nextSibling,[c,u]=$(s.nextSibling);return o(t,l(Rt,{label:"Start",name:"from",get value(){return e.job.slot.from},onValueUpdate:d=>e.updateJob({...e.job,slot:{...e.job.slot,from:d}}),get disabled(){return!e.isEditable}}),i,a),o(t,l(Rt,{label:"Ende",name:"to",get value(){return e.job.slot.to},onValueUpdate:d=>e.updateJob({...e.job,slot:{...e.job.slot,to:d}}),get disabled(){return!e.isEditable}}),c,u),t})(),l(x,{get when(){return n().length>0},get children(){return[g(Zl),(()=>{var t=g(ql);return o(t,l(Q,{get each(){return n()},children:r=>(()=>{var i=g(Jl);return o(i,r),i})()})),t})()]}})]}})}function ea(){return l(R,{children:"Inhalt folgt."})}const It=200,Nt=500;function cn(e){const n={};e.title.trim().length===0&&(n.title=[...n.title??[],"Titel ist ein Pflichtfeld"]),e.shortDescription.trim().length===0&&(n.shortDescription=[...n.shortDescription??[],"'Kurze Beschreibung' ist ein Pflichtfeld"]),e.shortDescription.trim().length>It&&(n.shortDescription=[...n.shortDescription??[],T.charLimitBy.replace("{}",String(It))]),e.longDescription.trim().length>Nt&&(n.longDescription=[...n.longDescription??[],T.charLimitBy.replace("{}",String(Nt))]);const t=Object.values(n).flat();return{allErrors:t,byField:n,hasErrors:t.length>0}}var ta=m("<ul class=link-list role=list>"),na=m("<br>"),Yt=m("<h3>"),ra=m("<li>"),ia=m("<span> mit Fehlern");function la(e){const n=kt();return[(()=>{var t=g(ta);return o(t,l(Q,{get each(){return e.programEntries$.get()},children:r=>{const i=cn(r);return(()=>{var a=g(ra);return o(a,l(M,{get href(){return e.link(`/erstellen/${r.uuid}`)},class:"button-link",get children(){return l(_e,{get icon(){return i.hasErrors?"triangle-exclamation":"arrow-right"},get type(){return i.hasErrors?"danger":"special"},get children(){return[(()=>{var s=g(Yt);return o(s,(()=>{var c=K(()=>r.title.trim().length===0);return()=>c()?"[Titel fehlt noch]":r.title})()),s})(),l(Ye,{get kind(){return i.hasErrors?"danger":"special"},get children(){return["Status: ",K(()=>T.publishingSteps[r.status]),K(()=>K(()=>!!i.hasErrors)()?g(ia):"")]}})]}})}})),a})()}})),t})(),g(na),l(x,{get when(){return e.isEditable},get children(){return l(_e,{icon:"grid-2-plus",type:"success",onClick:()=>{const t=crypto.randomUUID();ke.push(e.programEntries$,{uuid:t,status:"draft",title:"",shortDescription:"",longDescription:"",playerMax:6,slots:[],tagNames:[]}),n(e.link(`/erstellen/${t}`))},get children(){var t=g(Yt);return o(t,()=>T.createNewGameRound),t}})}})]}var aa=m("<p>");function sa(e){const[n,t]=ae(!1),r=e.showErrors==="ALWAYS",i=()=>r||n()?e.errors??[]:[];return[l(Bt,{get label(){return e.label},get name(){return e.name},get value(){return e.value$.get()},onValueUpdate:a=>e.value$.set(a),onBlur:()=>t(!0),get type(){return e.type},get required(){return e.required},get disabled(){return e.disabled}}),l(x,{get when(){return i().length>0},get children(){return l(R,{type:"danger",get children(){return l(Q,{get each(){return i()},children:a=>(()=>{var s=g(aa);return o(s,a),s})()})}})}})]}const ua=200;var oa=m("<button class=event-link><span>Details & Teilnahme"),ca=m('<li class=event-entry><h3 class=event-title></h3><div class=event-details><div class=event-tags><strong>Organisiert durch:</strong><!$><!/></div><div class=event-tags><strong>Tag, Zeit:</strong><span><!$><!/>, <!$><!/>: - <!$><!/> Uhr</span></div><div class=event-tags><strong>Freie Plätze:</strong> <!$><!/> (von <!$><!/>)</div> <div class=event-tags><strong>Kategorien:</strong> <!$><!/></div></div><div class="event-description content"><p><strong>Kurzbeschreibung:</strong><br><!$><!/></p></div><ul role=list class=event-links><li>'),da=m("<em>keine Kategorien");function ga(e){return(()=>{var n=g(ca),t=n.firstChild,r=t.nextSibling,i=r.firstChild,a=i.firstChild,s=a.nextSibling,[c,u]=$(s.nextSibling),d=i.nextSibling,h=d.firstChild,b=h.nextSibling,S=b.firstChild,[_,k]=$(S.nextSibling),f=_.nextSibling,v=f.nextSibling,[y,D]=$(v.nextSibling),U=y.nextSibling,P=U.nextSibling,[L,Y]=$(P.nextSibling);L.nextSibling;var z=d.nextSibling,W=z.firstChild,J=W.nextSibling,Z=J.nextSibling,[j,B]=$(Z.nextSibling),q=j.nextSibling,p=q.nextSibling,[E,H]=$(p.nextSibling);E.nextSibling;var X=z.nextSibling,se=X.nextSibling,ee=se.firstChild,N=ee.nextSibling,te=N.nextSibling,[F,ne]=$(te.nextSibling),ce=r.nextSibling,fe=ce.firstChild,be=fe.firstChild,Pe=be.nextSibling,Fe=Pe.nextSibling,[Le,Qe]=$(Fe.nextSibling),Xe=ce.nextSibling,dn=Xe.firstChild;return o(t,()=>e.entry.title),o(i,()=>e.entry.organizer,c,u),o(b,()=>T.days[Te(e.entry.slot.startDate)??"FRIDAY"],_,k),o(b,()=>Ce(e.entry.slot.startDate.toPlainTime()),y,D),o(b,()=>Ce(e.entry.slot.endDate.toPlainTime()),L,Y),o(z,()=>Math.max(e.entry.playerMax-e.reservations,0),j,B),o(z,()=>e.entry.playerMax,E,H),o(se,(()=>{var gn=K(()=>e.entry.tagNames.length>0);return()=>gn()?e.entry.tagNames.join(", "):g(da)})(),F,ne),o(fe,()=>fn(e.entry.shortDescription,ua),Le,Qe),o(dn,l(M,{get href(){return e.link(`${e.basePath}/${e.entry.uuid}`)},class:"button-link",get children(){return g(oa)}})),n})()}var ha=m("<p>");function Ht(e){const[n,t]=ae(!1),r=e.showErrors==="ALWAYS",i=()=>r||n()?e.errors??[]:[];return[l(Un,{get label(){return e.label},get name(){return e.name},get value(){return e.value$.get()},onValueUpdate:a=>e.value$.set(a),onBlur:()=>t(!0),get required(){return e.required},get size(){return e.size},get disabled(){return e.disabled}}),l(x,{get when(){return i().length>0},get children(){return l(R,{type:"danger",get children(){return l(Q,{get each(){return i()},children:a=>(()=>{var s=g(ha);return o(s,a),s})()})}})}})]}var ma=m("<p>Details konnten nicht geladen werden."),$a=m("<h2>"),fa=m("<div class=dynamic-columns><div><form novalidate><!$><!/><!$><!/><!$><!/><!$><!/></form></div><div><h3>Vorschau</h3><br><!$><!/><br><br><!$><!/>"),ba=m("<span> mit Fehlern <!$><!/>"),_a=m("<em>Keine (gültigen) Zeitslots gefunden"),Sa=m("<h4>Spielrunde inkomplett"),va=m("<p>Du hast noch einen oder mehre Fehler/fehlende Informationen in dieser Spielrunde:"),ka=m("<ul>"),ya=m("<li>");function Da(e){const n=rn().uuid??"no-uuid-found";return l(Oe,{get fallback(){return l(R,{get children(){return T.loading.program}})},get children(){return l(x,{get when(){return e.publicResource()},get fallback(){return l(R,{type:"danger",get children(){return T.error.help}})},children:t=>l(x,{get when(){return t().kind==="SUCCESS"},get fallback(){return l(R,{type:"danger",get children(){return T.loading.program}})},get children(){return l(Wt,{get fallback(){return l(R,{type:"danger",get children(){return g(ma)}})},get children(){return l(pa,{get entry$(){return ke.findExact(e.programEntries$,r=>r.uuid===n)},get isEditable(){return e.isEditable},get link(){return e.link}})}})}})})}})}function pa(e){const n=()=>cn(e.entry$.get());return[(()=>{var t=g($a);return o(t,()=>e.entry$.get().title),t})(),(()=>{var t=g(fa),r=t.firstChild,i=r.firstChild,a=i.firstChild,[s,c]=$(a.nextSibling),u=s.nextSibling,[d,h]=$(u.nextSibling),b=d.nextSibling,[S,_]=$(b.nextSibling),k=S.nextSibling,[f,v]=$(k.nextSibling),y=r.nextSibling,D=y.firstChild,U=D.nextSibling,P=U.nextSibling,[L,Y]=$(P.nextSibling),z=L.nextSibling,W=z.nextSibling,J=W.nextSibling,[Z,j]=$(J.nextSibling);return o(i,l(x,{get when(){return e.entry$.get().status==="published"},get children(){return l(xa,{get errors(){return n()}})}}),s,c),o(i,l(sa,{get value$(){return e.entry$.pipe(I.sub("title"))},label:"Titel",name:"title",get showErrors(){return e.entry$.get().status==="published"?"ALWAYS":"ON_BLUR"},get errors(){return n().byField.title??[]},get disabled(){return!e.isEditable}}),d,h),o(i,l(Ht,{get value$(){return e.entry$.pipe(I.sub("shortDescription"))},label:"kurze Beschreibung",name:"descriptionShort",size:"small",get showErrors(){return e.entry$.get().status==="published"?"ALWAYS":"ON_BLUR"},get errors(){return n().byField.shortDescription??[]},get disabled(){return!e.isEditable}}),S,_),o(i,l(Ht,{get value$(){return e.entry$.pipe(I.sub("longDescription"))},label:"lange Beschreibung (optional)",name:"descriptionLong",get showErrors(){return e.entry$.get().status==="published"?"ALWAYS":"ON_BLUR"},get errors(){return n().byField.longDescription??[]},get disabled(){return!e.isEditable}}),f,v),o(y,l(Ye,{get kind(){return n().hasErrors?"danger":"special"},get children(){return["Status: ",K(()=>T.publishingSteps[e.entry$.get().status]),K(()=>K(()=>!!n().hasErrors)()?(()=>{var B=g(ba),q=B.firstChild,p=q.nextSibling,[E,H]=$(p.nextSibling);return o(B,l(re,{icon:"triangle-exclamation"}),E,H),B})():"")]}}),L,Y),o(y,l(Q,{get each(){return Ea(e.entry$.get())},get fallback(){return g(_a)},children:B=>l(ga,{entry:B,basePath:"/programm",get link(){return e.link},reservations:0})}),Z,j),t})()]}function xa(e){return l(x,{get when(){return e.errors.hasErrors},get children(){return l(R,{type:"danger",get children(){return[g(Sa),g(va),(()=>{var n=g(ka);return o(n,l(Q,{get each(){return e.errors.allErrors},children:t=>(()=>{var r=g(ya);return o(r,t),r})()})),n})()]}})}})}function Ea(e){const n=[];return e.slots.forEach(t=>{const r=wt(t.start.time),i=wt(t.end.time);r.kind==="ERROR"||i.kind==="ERROR"||n.push({uuid:t.uuid,title:e.title,organizer:"",slot:{startDate:qe[t.start.day].toPlainDateTime({hour:r.value.hour,minute:r.value.minute}),endDate:qe[t.end.day].toPlainDateTime({hour:i.value.hour,minute:i.value.minute})},shortDescription:e.shortDescription,longDescription:e.longDescription,playerMax:e.playerMax,tagNames:e.tagNames})}),n}function Ra(e){const[n]=ct(Ri),t=Xi({meta:{saveState:"IDLE",lastSaved:new Date,roles:e.initState.roles},save:e.initState.data}),r=crypto.randomUUID(),[i,a]=ae(!1);ct(()=>JSON.stringify(t.get().save),async()=>{if(!i()){a(!0);return}if(e.initState.status!=="published"){Vt("Diese Anmeldung wurde deaktiviert und kann nicht editiert werden.",{kind:"danger",uuid:r});return}const c=An(t.get().save);try{const u=await Qn(t.get().meta,c,e.secret);u.kind==="FAILURE"?console.error(u):t.pipe(I.sub("meta")).pipe(I.sub("lastSaved")).set(u.data)}catch(u){console.error(u),t.pipe(I.sub("meta")).pipe(I.sub("saveState")).set("ERROR")}});function s(c){return`${c}?secret=${e.secret}`}return l(qr,{children:[{path:"/",component:()=>l(de,{title:"Wo möchtest du starten?",get roles(){return t.get().meta.roles},link:s,get saveState(){return t.get().meta.saveState},get lastSaved(){return t.get().meta.lastSaved},get children(){return l(ui,{get roles(){return t.get().meta.roles},link:s})}})},{path:"/programm",component:()=>l(de,{title:"Programm",get roles(){return t.get().meta.roles},link:s,get saveState(){return t.get().meta.saveState},get lastSaved(){return t.get().meta.lastSaved},get children(){return l(ea,{})}})},{path:"/erstellen",component:()=>l(de,{title:"Programmpunkte erstellen und editieren",get roles(){return t.get().meta.roles},link:s,get saveState(){return t.get().meta.saveState},get lastSaved(){return t.get().meta.lastSaved},get children(){return l(la,{get programEntries$(){return t.pipe(I.sub("save")).pipe(I.sub("program")).pipe(I.sub("organising"))},publicResource:n,link:s,get isEditable(){return e.initState.status==="published"}})}})},{path:"/erstellen/:uuid",component:()=>l(de,{get roles(){return t.get().meta.roles},link:s,get saveState(){return t.get().meta.saveState},get lastSaved(){return t.get().meta.lastSaved},parentPath:"/erstellen",get children(){return l(Da,{get programEntries$(){return t.pipe(I.sub("save")).pipe(I.sub("program")).pipe(I.sub("organising"))},publicResource:n,link:s,get isEditable(){return e.initState.status==="published"}})}})},{path:"/helfen",component:()=>l(de,{title:"Helfen",get roles(){return t.get().meta.roles},link:s,get saveState(){return t.get().meta.saveState},get lastSaved(){return t.get().meta.lastSaved},showQuickmenu:!0,get children(){return l(Ii,{get reservations$(){return t.pipe(I.sub("save")).pipe(I.sub("helping"))},publicResource:n,get isEditable(){return e.initState.status==="published"},link:s,get roles(){return t.get().meta.roles}})}})},{path:"/helfen/:uuid",component:()=>l(de,{link:s,get roles(){return t.get().meta.roles},get saveState(){return t.get().meta.saveState},get lastSaved(){return t.get().meta.lastSaved},showQuickmenu:!0,parentPath:"/helfen",get children(){return l(Cl,{get reservations$(){return t.pipe(I.sub("save")).pipe(I.sub("helping"))},publicResource:n,link:s,get isEditable(){return e.initState.status==="published"}})}})},{path:"/erklaerbaer",component:()=>l(de,{title:"Helfen: Erklärbären",get roles(){return t.get().meta.roles},link:s,get saveState(){return t.get().meta.saveState},get lastSaved(){return t.get().meta.lastSaved},showQuickmenu:!0,parentPath:"/helfen",get children(){return l(Gl,{get save$(){return t.pipe(I.sub("save"))},get roles(){return t.get().meta.roles},get isEditable(){return e.initState.status==="published"}})}})},{path:"/zusammenfassung",component:()=>l(de,{title:"Zusammenfassung",get roles(){return t.get().meta.roles},link:s,get saveState(){return t.get().meta.saveState},get lastSaved(){return t.get().meta.lastSaved},showQuickmenu:!0,get children(){return l(sl,{get save$(){return t.pipe(I.sub("save"))},publicResource:n,link:s,get isEditable(){return e.initState.status==="published"}})}})},{path:"*",component:()=>l(de,{title:"Seite nicht gefunden",get roles(){return t.get().meta.roles},link:s,get saveState(){return t.get().meta.saveState},get lastSaved(){return t.get().meta.lastSaved},showQuickmenu:!0,get children(){return l(R,{type:"danger",get children(){return T.error.siteNotFound}})}})}]})}function wa(){return l(R,{get children(){return T.loading.registration}})}function La(){const n=URL.parse(location.toString().replace("#/",""))?.searchParams.get("secret")??"no-secret-found",[t]=ct(()=>Jn(n));return l(Wt,{fallback:r=>(console.error(r),l(R,{type:"danger",get children(){return T.error.general}})),get children(){return l(Oe,{get fallback(){return l(wa,{})},get children(){return l(He,{get children(){return l(ie,{get when(){return t()},children:r=>{const{kind:i,value:a}=bn(r());return i==="FAILURE"?a.reason==="SECRET_INVALID"?l(R,{type:"danger",get children(){return T.error.secretError}}):(console.error(a),l(R,{type:"danger",get children(){return T.error.ourMistake}})):l(Ra,{get initState(){return a.data},secret:n})}})}})}})}})}export{La as MeineAnmeldungWrapper};
