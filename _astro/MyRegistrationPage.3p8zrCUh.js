import{c as et,o as R,n as de,s as p,e as ze,d as ye,u as Pe,l as te,q as ce,f as _n,g as vn,h as Mt,i as se,B as E,j as oe,p as Rt,N as At,r as kn,b as ue,k as Be,I as jt,m as _e,S as wt,t as ht,v as Ge,w as yn,x as Tt,y as xn}from"./utils.BW2yGd44.js";import{g,a as $,i as u,c as l,t as h,r as Kt,h as X,j as Wt,k as ft,l as Zt,e as ee,b as K,n as bt,p as St,q as pn,w as Dn,x as En,y as Rn,z as An,A as O,S as D,B as wn,C as Vt,D as rt,E as _t,m as Ut,G as Tn,H as Un,I as vt,s as Ue,J as Cn,M as me,F as W,f as Me,K as we,L as it,N as je,O as Pn,u as Fn,d as Se,P as qt,Q as Jt,R as Ve}from"./web.BGDrlDKA.js";import{c as ve,u as Ln}from"./store.XlVLhlw3.js";import{E as fe}from"./ExitSpa.B46xHIx7.js";import{T as In}from"./Textarea.Df3zblOd.js";const[Oe,Qe]=ve([]);function Gt(e,t){if(t?.uuid!==void 0&&Oe.find(o=>o.uuid===t.uuid)!==void 0)return mt(t.uuid,e,t);const n=t?.uuid??crypto.randomUUID(),r=t?.duration??5e3,i=t?.kind??"gray",a=t?.dismissable??!0,s=setTimeout(()=>{Qe(Oe.filter(o=>o.uuid!==n))},r);return Qe(Oe.length,{uuid:n,kind:i,message:e,duration:r,dismissable:a,cleanup:()=>clearTimeout(s)}),n}function mt(e,t,n){const r=Oe.find(c=>c.uuid===e);if(r===void 0)return e;r.cleanup();const i=n.duration??r.duration,a=n.kind??r.kind,s=n?.dismissable??r.dismissable,o=setTimeout(()=>{Qe(Oe.filter(c=>c.uuid!==e))},i);return Qe(c=>c.uuid===e,{uuid:e,kind:a,message:t,duration:i,dismissable:s,cleanup:()=>clearTimeout(o)}),e}const Nn=et(["SATURDAY","SUNDAY"]);R({uuid:p().uuid(),day:Nn,from:de(),to:de()}).refine(e=>e.from<e.to,{message:"A TimeSlot can't end before it starts."});R({name:p(),label:p(),description:p()});const Qt=et(["draft","published","archived"]);async function Yn(e){const t=new URL(ze("/lst26/load"));t.searchParams.append("secret",e);const n=await fetch(t);if(!n.ok)return{kind:"FAILURE"};const r=await n.json();return typeof r=="object"&&r!==null?{kind:"SUCCESS",data:r}:(console.error("`last_save` not found on ",r),{kind:"FAILURE"})}async function On(e,t){try{const n=await fetch(ze("/lst26/save"),{method:"POST",body:JSON.stringify({secret:t,save:e}),headers:{"Content-Type":"application/json"}});return n.ok?{kind:"SUCCESS",data:t}:(console.error(await n.text()),{kind:"FAILURE"})}catch(n){return console.error(n),{kind:"FAILURE"}}}async function Hn(){try{const e=new URL(ze("/lst26/public")),t=await fetch(e,{headers:{"Content-Type":"application/json"}});return t.ok?{kind:"SUCCESS",data:await t.json()}:(console.error(await t.text()),{kind:"FAILURE"})}catch(e){return console.error(e),{kind:"FAILURE"}}}async function Bn(e){try{const t=new URL(ze("/lst26/public/admin"));t.searchParams.append("secret",e);const n=await fetch(t,{headers:{"Content-Type":"application/json"}});return n.ok?{kind:"SUCCESS",data:await n.json()}:(console.error(await n.text()),{kind:"FAILURE"})}catch(t){return console.error(t),{kind:"FAILURE"}}}et(["SAVING","IDLE","ERROR"]);const zn=ye(Pe([te("admin"),te("erklaerbaer")])),pe=et(["FRIDAY","SATURDAY","SUNDAY"]),Mn=R({from:de(),to:de()}),jn=Mn.extend({day:pe});function Ze(e,t){const{startTime:n,endTime:r}=Kn(t);return!(n.hour>=e.hour||n.hour===e.hour&&n.minute>e.minute||r.hour<=e.hour||r.hour===e.hour&&r.minute<e.minute)}function Kn(e){const{startTime:t,endTime:n}=e;return{startTime:t.hour===0&&t.minute===0?ce.PlainTime.from({hour:23,minute:59}):t,endTime:n.hour===0&&n.minute===0?ce.PlainTime.from({hour:23,minute:59}):n}}function Wn(e,t){const{startTime:n,endTime:r}=e,{startTime:i,endTime:a}=t;return Ze(n,t)||Ze(r,t)||Ze(i,e)||Ze(a,e)||n===i&&r===a}function Zn(e,t=!1){const{from:n,to:r}=e;if(n>r)return[];const i=r-n;return Xt(t?i+1:i,n)}function Xt(e,t=0){return[...Array(e)].map((n,r)=>r+t)}function Ce(e,t){const{minutes:n}=t??{minutes:!0};return n?`${e.hour}.${e.minute.toString().padStart(2,"0")}`:`${e.hour}`}function Vn(e,t){const n=e.minute+e.hour*60,r=t.minute+t.hour*60,i=Math.abs(r-n),a=i%60,s=Math.round((i-a)/60);return a===0?`${s} ${s===1?"Stunde":"Stunden"}`:s===0?`${a} ${a===1?"Minute":"Minuten"}`:`${s},${a} Stunden`}const qn=R({name:p(),email:p(),mobile:p()}),Jn=R({kind:te("ERKLAERBAER"),uuid:p().uuid(),slot:jn}),Gn=R({start:R({day:pe,time:p()}),end:R({day:pe,time:p()})});R({kind:te("FREEFORM"),uuid:p().uuid(),tag:p(),name:p(),slot:Gn});const Qn=Pe([R({kind:te("SELF"),helpEntryUuid:p().uuid(),uuid:p().uuid()}),R({kind:te("FRIEND"),helpEntryUuid:p().uuid(),name:p(),uuid:p().uuid()}),Jn]),Xn=R({uuid:p(),start:R({day:pe,time:p()}),end:R({day:pe,time:p()})}),er=Pe([R({kind:te("NONE"),maxSeats:de()}),R({kind:te("LIMITED"),maxSeats:de()})]),tr=R({uuid:p().uuid(),status:Qt,title:p(),organizer:p(),shortDescription:p(),longDescription:p(),participating:er,timeSlots:ye(Xn),tagNames:p()}),nr=R({}),rr=R({version:te(9),contact:qn,config:R({wantsUpdates:_n()}),helping:ye(Qn),program:R({organising:ye(tr),participating:ye(nr)})}),ir=R({kind:te("SUCCESS"),status:Qt,roles:zn,data:rr});async function lr(e){if(e.length!==36&&e.length!==4)return{kind:"FAILURE",reason:"SECRET_INVALID"};const t=await Yn(e);if(t.kind==="FAILURE")return console.error("Unexpected error. Maybe network, maybe server error."),{kind:"FAILURE",reason:"GENERAL"};const n=ir.safeParse(t.data);return n.success?{kind:"SUCCESS",data:n.data}:(console.error(n.error),{kind:"FAILURE",reason:"PARSE_ERROR"})}const lt=crypto.randomUUID();async function ar(e,t,n){const[r,i]=ve(e);i("saveState","SAVING"),Gt("Am Speichern...",{uuid:lt,dismissable:!1});const a=new Date;try{if((await On(t,n)).kind==="FAILURE")throw Error("")}catch(s){return i("saveState","ERROR"),console.error(s),mt(lt,"Speichern war nicht möglich!",{kind:"danger",duration:1e4,dismissable:!0}),{kind:"FAILURE"}}return mt(lt,`Zuletzt gespeichert um: ${Mt(a)} Uhr`,{kind:"success",dismissable:!0}),i("saveState","IDLE"),{kind:"SUCCESS",data:a}}const sr=vn(ar,1e3);var Ct=h("<br>"),ur=h("<strong>Donnerstag, 21. August 2025"),or=h("<p>Deine Anmeldung wird geladen..."),cr=h("<p>Das Programm wird geladen..."),dr=h("<p>Leider ist ein unerwarteter Fehler passiert. Versuche deine Anmeldung erneut zu laden. Wiederholt sich dieser Fehler, bitte kontaktiere uns sobald als möglich über das <!$><!/>, da dies nicht passieren sollte."),gr=h("<p>Wir konnten leider keine Anmeldung finden. Wenn du bereits eine Anmeldung begonnen hast, solltest du den korrekten Link per E-Mail erhalten haben.<br><br> Falls du noch keine Anmeldung begonnen hast, kannst du <!$><!/> deine persönliche Anmeldung beginnen. <br><br>Für generelle Fragen oder Probleme, schreibe uns doch bitte über unser <!$><!/>."),hr=h("<p>Wir konnten leider keine Spielrunde unter diesem Link finden.<br><br>Vermutlich liegt es an uns. Bitte kontaktiere uns sobald als möglich über das "),mr=h("<p>Leider ist ein unerwarteter Fehler passiert. Vermutlich liegt es an uns. Bitte kontaktiere uns sobald als möglich über das <!$><!/>."),$r=h("<p>Leider ist ein unerwarteter Fehler passiert beim Laden des Programmes. Vermutlich liegt es an uns. Bitte kontaktiere uns sobald als möglich über das <!$><!/>."),fr=h("<p>Leider ist ein unerwarteter Fehler passiert beim Laden von Daten. Vermutlich liegt es an uns. Bitte kontaktiere uns sobald als möglich über das <!$><!/>."),br=h("<p>Leider ist das keine gültige Seite. Versuche deine Anmeldung erneut zu laden. Wiederholt sich dieser Fehler, bitte kontaktiere uns sobald als möglich über das <!$><!/>, da dies nicht passieren sollte."),Sr=h("<p>Leider hast du keinen Zugriff auf diese Seite. Sollte dies ein Fehler sein, dann kontaktiere uns sobald als möglich über das <!$><!/>.");g(Ct),g(Ct),g(ur);const _r={registration:g(or),program:g(cr)},vr={general:(()=>{var e=g(dr),t=e.firstChild,n=t.nextSibling,[r,i]=$(n.nextSibling);return r.nextSibling,u(e,l(fe,{href:"/kontakt",children:"Kontaktformular"}),r,i),e})(),secretError:(()=>{var e=g(gr),t=e.firstChild,n=t.nextSibling,r=n.nextSibling,i=r.nextSibling,a=i.nextSibling,[s,o]=$(a.nextSibling),c=s.nextSibling,d=c.nextSibling,m=d.nextSibling,b=m.nextSibling,v=b.nextSibling,[S,k]=$(v.nextSibling);return S.nextSibling,u(e,l(fe,{href:"/anmeldung",children:"hier"}),s,o),u(e,l(fe,{href:"/kontakt",children:"Kontaktformular"}),S,k),e})(),gameroundUuidError:g(hr),ourMistake:(()=>{var e=g(mr),t=e.firstChild,n=t.nextSibling,[r,i]=$(n.nextSibling);return r.nextSibling,u(e,l(fe,{href:"/kontakt",children:"Kontaktformular"}),r,i),e})(),program:(()=>{var e=g($r),t=e.firstChild,n=t.nextSibling,[r,i]=$(n.nextSibling);return r.nextSibling,u(e,l(fe,{href:"/kontakt",children:"Kontaktformular"}),r,i),e})(),help:(()=>{var e=g(fr),t=e.firstChild,n=t.nextSibling,[r,i]=$(n.nextSibling);return r.nextSibling,u(e,l(fe,{href:"/kontakt",children:"Kontaktformular"}),r,i),e})(),siteNotFound:(()=>{var e=g(br),t=e.firstChild,n=t.nextSibling,[r,i]=$(n.nextSibling);return r.nextSibling,u(e,l(fe,{href:"/kontakt",children:"Kontaktformular"}),r,i),e})(),noAccess:(()=>{var e=g(Sr),t=e.firstChild,n=t.nextSibling,[r,i]=$(n.nextSibling);return r.nextSibling,u(e,l(fe,{href:"/kontakt",children:"Kontaktformular"}),r,i),e})()},kr="Neue Spielrunde erstellen",yr="Neuer Eintrag erstellen",xr="kein Zeitslot ausgewählt",pr="Die Eingabe scheint keine gültige E-Mail-Adresse zu sein.",Dr="Dies ist ein Pflichtfeld.",Er="Dieses Feld ist auf {} Zeichen limitiert.",Rr={FRIDAY:"Freitag",SATURDAY:"Samstag",SUNDAY:"Sonntag"},Ar={draft:"Entwurf",published:"Veröffentlicht",archived:"Gelöscht"},U={loading:_r,error:vr,createNewGameRound:kr,createNewEntry:yr,missingSlot:xr,invalidEmail:pr,mandatoryField:Dr,charLimitBy:Er,days:Rr,publishingSteps:Ar};function en(){let e=new Set;function t(i){return e.add(i),()=>e.delete(i)}let n=!1;function r(i,a){if(n)return!(n=!1);const s={to:i,options:a,defaultPrevented:!1,preventDefault:()=>s.defaultPrevented=!0};for(const o of e)o.listener({...s,from:o.location,retry:c=>{c&&(n=!0),o.navigate(i,{...a,resolve:!1})}});return!s.defaultPrevented}return{subscribe:t,confirm:r}}let $t;function kt(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),$t=window.history.state._depth}kt();function wr(e){return{...e,_depth:window.history.state&&window.history.state._depth}}function Tr(e,t){let n=!1;return()=>{const r=$t;kt();const i=r==null?null:$t-r;if(n){n=!1;return}i&&t(i)?(n=!0,window.history.go(-i)):e()}}const Ur=/^(?:[a-z0-9]+:)?\/\//i,Cr=/^\/+|(\/)\/+$/g,tn="http://sr";function Re(e,t=!1){const n=e.replace(Cr,"$1");return n?t||/^[?#]/.test(n)?n:"/"+n:""}function qe(e,t,n){if(Ur.test(t))return;const r=Re(e),i=n&&Re(n);let a="";return!i||t.startsWith("/")?a=r:i.toLowerCase().indexOf(r.toLowerCase())!==0?a=r+i:a=i,(a||"/")+Re(t,!a)}function Pr(e,t){if(e==null)throw new Error(t);return e}function Fr(e,t){return Re(e).replace(/\/*(\*.*)?$/g,"")+Re(t)}function nn(e){const t={};return e.searchParams.forEach((n,r)=>{r in t?Array.isArray(t[r])?t[r].push(n):t[r]=[t[r],n]:t[r]=n}),t}function Lr(e,t,n){const[r,i]=e.split("/*",2),a=r.split("/").filter(Boolean),s=a.length;return o=>{const c=o.split("/").filter(Boolean),d=c.length-s;if(d<0||d>0&&i===void 0&&!t)return null;const m={path:s?"":"/",params:{}},b=v=>n===void 0?void 0:n[v];for(let v=0;v<s;v++){const S=a[v],k=S[0]===":",f=k?c[v]:c[v].toLowerCase(),_=k?S.slice(1):S.toLowerCase();if(k&&at(f,b(_)))m.params[_]=f;else if(k||!at(f,_))return null;m.path+=`/${f}`}if(i){const v=d?c.slice(-d).join("/"):"";if(at(v,b(i)))m.params[i]=v;else return null}return m}}function at(e,t){const n=r=>r===e;return t===void 0?!0:typeof t=="string"?n(t):typeof t=="function"?t(e):Array.isArray(t)?t.some(n):t instanceof RegExp?t.test(e):!1}function Ir(e){const[t,n]=e.pattern.split("/*",2),r=t.split("/").filter(Boolean);return r.reduce((i,a)=>i+(a.startsWith(":")?2:3),r.length-(n===void 0?0:1))}function rn(e){const t=new Map,n=Wt();return new Proxy({},{get(r,i){return t.has(i)||Kt(n,()=>t.set(i,X(()=>e()[i]))),t.get(i)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())},has(r,i){return i in e()}})}function Nr(e,t){const n=new URLSearchParams(e);Object.entries(t).forEach(([i,a])=>{a==null||a===""||a instanceof Array&&!a.length?n.delete(i):a instanceof Array?(n.delete(i),a.forEach(s=>{n.append(i,String(s))})):n.set(i,String(a))});const r=n.toString();return r?`?${r}`:""}function ln(e){let t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];let n=e.slice(0,t.index),r=e.slice(t.index+t[0].length);const i=[n,n+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(r);)i.push(n+=t[1]),r=r.slice(t[0].length);return ln(r).reduce((a,s)=>[...a,...i.map(o=>o+s)],[])}const Yr=100,an=Zt(),yt=Zt(),Ke=()=>Pr(ft(an),"<A> and 'use' router primitives can be only used inside a Route."),Or=()=>ft(yt)||Ke().base,Hr=e=>{const t=Or();return X(()=>t.resolvePath(e()))},Br=e=>{const t=Ke();return X(()=>{const n=e();return n!==void 0?t.renderPath(n):n})},xt=()=>Ke().navigatorFactory(),sn=()=>Ke().location,un=()=>Ke().params,zr=()=>{const e=sn(),t=xt(),n=(r,i)=>{const a=St(()=>Nr(e.search,r)+e.hash);t(a,{scroll:!1,resolve:!1,...i})};return[e.query,n]};function Mr(e,t=""){const{component:n,preload:r,load:i,children:a,info:s}=e,o=!a||Array.isArray(a)&&!a.length,c={key:e,component:n,preload:r||i,info:s};return on(e.path).reduce((d,m)=>{for(const b of ln(m)){const v=Fr(t,b);let S=o?v:v.split("/*",1)[0];S=S.split("/").map(k=>k.startsWith(":")||k.startsWith("*")?k:encodeURIComponent(k)).join("/"),d.push({...c,originalPath:m,pattern:S,matcher:Lr(S,!o,e.matchFilters)})}return d},[])}function jr(e,t=0){return{routes:e,score:Ir(e[e.length-1])*1e4-t,matcher(n){const r=[];for(let i=e.length-1;i>=0;i--){const a=e[i],s=a.matcher(n);if(!s)return null;r.unshift({...s,route:a})}return r}}}function on(e){return Array.isArray(e)?e:[e]}function cn(e,t="",n=[],r=[]){const i=on(e);for(let a=0,s=i.length;a<s;a++){const o=i[a];if(o&&typeof o=="object"){o.hasOwnProperty("path")||(o.path="");const c=Mr(o,t);for(const d of c){n.push(d);const m=Array.isArray(o.children)&&o.children.length===0;if(o.children&&!m)cn(o.children,d.pattern,n,r);else{const b=jr([...n],r.length);r.push(b)}n.pop()}}}return n.length?r:r.sort((a,s)=>s.score-a.score)}function st(e,t){for(let n=0,r=e.length;n<r;n++){const i=e[n].matcher(t);if(i)return i}return[]}function Kr(e,t,n){const r=new URL(tn),i=X(m=>{const b=e();try{return new URL(b,r)}catch{return console.error(`Invalid path ${b}`),m}},r,{equals:(m,b)=>m.href===b.href}),a=X(()=>i().pathname),s=X(()=>i().search,!0),o=X(()=>i().hash),c=()=>"",d=bt(s,()=>nn(i()));return{get pathname(){return a()},get search(){return s()},get hash(){return o()},get state(){return t()},get key(){return c()},query:n?n(d):rn(d)}}let Ee;function Wr(){return Ee}function Zr(e,t,n,r={}){const{signal:[i,a],utils:s={}}=e,o=s.parsePath||(A=>A),c=s.renderPath||(A=>A),d=s.beforeLeave||en(),m=qe("",r.base||"");if(m===void 0)throw new Error(`${m} is not a valid base path`);m&&!i().value&&a({value:m,replace:!0,scroll:!1});const[b,v]=ee(!1);let S;const k=(A,T)=>{T.value===f()&&T.state===y()||(S===void 0&&v(!0),Ee=A,S=T,Dn(()=>{S===T&&(_(S.value),x(S.state),Rn(),F[1](B=>B.filter(G=>G.pending)))}).finally(()=>{S===T&&En(()=>{Ee=void 0,A==="navigate"&&ge(S),v(!1),S=void 0})}))},[f,_]=ee(i().value),[y,x]=ee(i().state),C=Kr(f,y,s.queryWrapper),P=[],F=ee([]),I=X(()=>typeof r.transformUrl=="function"?st(t(),r.transformUrl(C.pathname)):st(t(),C.pathname)),H=()=>{const A=I(),T={};for(let B=0;B<A.length;B++)Object.assign(T,A[B].params);return T},Z=s.paramsWrapper?s.paramsWrapper(H,t):rn(H),N={pattern:m,path:()=>m,outlet:()=>null,resolvePath(A){return qe(m,A)}};return K(bt(i,A=>k("native",A),{defer:!0})),{base:N,location:C,params:Z,isRouting:b,renderPath:c,parsePath:o,navigatorFactory:re,matches:I,beforeLeave:d,preloadRoute:q,singleFlight:r.singleFlight===void 0?!0:r.singleFlight,submissions:F};function ne(A,T,B){St(()=>{if(typeof T=="number"){T&&(s.go?s.go(T):console.warn("Router integration does not support relative routing"));return}const G=!T||T[0]==="?",{replace:he,resolve:V,scroll:z,state:Q}={replace:!1,resolve:!G,scroll:!0,...B},L=V?A.resolvePath(T):qe(G&&C.pathname||"",T);if(L===void 0)throw new Error(`Path '${T}' is not a routable path`);if(P.length>=Yr)throw new Error("Too many redirects");const J=f();(L!==J||Q!==y())&&(pn||d.confirm(L,B)&&(P.push({value:J,replace:he,scroll:z,state:y()}),k("navigate",{value:L,state:Q})))})}function re(A){return A=A||ft(yt)||N,(T,B)=>ne(A,T,B)}function ge(A){const T=P[0];T&&(a({...A,replace:T.replace,scroll:T.scroll}),P.length=0)}function q(A,T){const B=st(t(),A.pathname),G=Ee;Ee="preload";for(let he in B){const{route:V,params:z}=B[he];V.component&&V.component.preload&&V.component.preload();const{preload:Q}=V;T&&Q&&Kt(n(),()=>Q({params:z,location:{pathname:A.pathname,search:A.search,hash:A.hash,query:nn(A),state:null,key:""},intent:"preload"}))}Ee=G}}function Vr(e,t,n,r){const{base:i,location:a,params:s}=e,{pattern:o,component:c,preload:d}=r().route,m=X(()=>r().path);c&&c.preload&&c.preload();const b=d?d({params:s,location:a,intent:Ee||"initial"}):void 0;return{parent:t,pattern:o,path:m,outlet:()=>c?l(c,{params:s,location:a,data:b,get children(){return n()}}):n(),resolvePath(S){return qe(i.path(),S,m())}}}const qr=e=>t=>{const{base:n}=t,r=An(()=>t.children),i=X(()=>cn(r(),t.base||""));let a;const s=Zr(e,i,()=>a,{base:n,singleFlight:t.singleFlight,transformUrl:t.transformUrl});return e.create&&e.create(s),l(an.Provider,{value:s,get children(){return l(Jr,{routerState:s,get root(){return t.root},get preload(){return t.rootPreload||t.rootLoad},get children(){return[O(()=>(a=Wt())&&null),l(Gr,{routerState:s,get branches(){return i()}})]}})}})};function Jr(e){const t=e.routerState.location,n=e.routerState.params,r=X(()=>e.preload&&St(()=>{e.preload({params:n,location:t,intent:Wr()||"initial"})}));return l(D,{get when(){return e.root},keyed:!0,get fallback(){return e.children},children:i=>l(i,{params:n,location:t,get data(){return r()},get children(){return e.children}})})}function Gr(e){const t=[];let n;const r=X(bt(e.routerState.matches,(i,a,s)=>{let o=a&&i.length===a.length;const c=[];for(let d=0,m=i.length;d<m;d++){const b=a&&a[d],v=i[d];s&&b&&v.route.key===b.route.key?c[d]=s[d]:(o=!1,t[d]&&t[d](),wn(S=>{t[d]=S,c[d]=Vr(e.routerState,c[d-1]||e.routerState.base,Pt(()=>r()[d+1]),()=>{const k=e.routerState.matches();return k[d]??k[0]})}))}return t.splice(i.length).forEach(d=>d()),s&&o?s:(n=c[0],c)}));return Pt(()=>r()&&n)()}const Pt=e=>()=>l(D,{get when(){return e()},keyed:!0,children:t=>l(yt.Provider,{value:t,get children(){return t.outlet()}})});function Qr([e,t],n,r){return[e,r?i=>t(r(i)):t]}function Xr(e){let t=!1;const n=i=>typeof i=="string"?{value:i}:i,r=Qr(ee(n(e.get()),{equals:(i,a)=>i.value===a.value&&i.state===a.state}),void 0,i=>(!t&&e.set(i),rt.registry&&!rt.done&&(rt.done=!0),i));return e.init&&Vt(e.init((i=e.get())=>{t=!0,r[1](n(i)),t=!1})),qr({signal:r,create:e.create,utils:e.utils})}function ei(e,t,n){return e.addEventListener(t,n),()=>e.removeEventListener(t,n)}function ti(e,t){const n=e&&document.getElementById(e);n?n.scrollIntoView():t&&window.scrollTo(0,0)}const ni=new Map;function ri(e=!0,t=!1,n="/_server",r){return i=>{const a=i.base.path(),s=i.navigatorFactory(i.base);let o,c;function d(f){return f.namespaceURI==="http://www.w3.org/2000/svg"}function m(f){if(f.defaultPrevented||f.button!==0||f.metaKey||f.altKey||f.ctrlKey||f.shiftKey)return;const _=f.composedPath().find(I=>I instanceof Node&&I.nodeName.toUpperCase()==="A");if(!_||t&&!_.hasAttribute("link"))return;const y=d(_),x=y?_.href.baseVal:_.href;if((y?_.target.baseVal:_.target)||!x&&!_.hasAttribute("state"))return;const P=(_.getAttribute("rel")||"").split(/\s+/);if(_.hasAttribute("download")||P&&P.includes("external"))return;const F=y?new URL(x,document.baseURI):new URL(x);if(!(F.origin!==window.location.origin||a&&F.pathname&&!F.pathname.toLowerCase().startsWith(a.toLowerCase())))return[_,F]}function b(f){const _=m(f);if(!_)return;const[y,x]=_,C=i.parsePath(x.pathname+x.search+x.hash),P=y.getAttribute("state");f.preventDefault(),s(C,{resolve:!1,replace:y.hasAttribute("replace"),scroll:!y.hasAttribute("noscroll"),state:P?JSON.parse(P):void 0})}function v(f){const _=m(f);if(!_)return;const[y,x]=_;i.preloadRoute(x,y.getAttribute("preload")!=="false")}function S(f){clearTimeout(o);const _=m(f);if(!_)return c=null;const[y,x]=_;c!==y&&(o=setTimeout(()=>{i.preloadRoute(x,y.getAttribute("preload")!=="false"),c=y},20))}function k(f){if(f.defaultPrevented)return;let _=f.submitter&&f.submitter.hasAttribute("formaction")?f.submitter.getAttribute("formaction"):f.target.getAttribute("action");if(!_)return;if(!_.startsWith("https://action/")){const x=new URL(_,tn);if(_=i.parsePath(x.pathname+x.search),!_.startsWith(n))return}if(f.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const y=ni.get(_);if(y){f.preventDefault();const x=new FormData(f.target,f.submitter);y.call({r:i,f:f.target},f.target.enctype==="multipart/form-data"?x:new URLSearchParams(x))}}_t(["click","submit"]),document.addEventListener("click",b),e&&(document.addEventListener("mousemove",S,{passive:!0}),document.addEventListener("focusin",v,{passive:!0}),document.addEventListener("touchstart",v,{passive:!0})),document.addEventListener("submit",k),Vt(()=>{document.removeEventListener("click",b),e&&(document.removeEventListener("mousemove",S),document.removeEventListener("focusin",v),document.removeEventListener("touchstart",v)),document.removeEventListener("submit",k)})}}function ii(e){const t=e.replace(/^.*?#/,"");if(!t.startsWith("/")){const[,n="/"]=window.location.hash.split("#",2);return`${n}#${t}`}return t}function li(e){const t=()=>window.location.hash.slice(1),n=en();return Xr({get:t,set({value:r,replace:i,scroll:a,state:s}){i?window.history.replaceState(wr(s),"","#"+r):window.history.pushState(s,"","#"+r);const o=r.indexOf("#"),c=o>=0?r.slice(o+1):"";ti(c,a),kt()},init:r=>ei(window,"hashchange",Tr(r,i=>!n.confirm(i&&i<0?i:t()))),create:ri(e.preload,e.explicitLinks,e.actionBase),utils:{go:r=>window.history.go(r),renderPath:r=>`#${r}`,parsePath:ii,beforeLeave:n}})(e)}var ai=h("<a>");function j(e){e=Ut({inactiveClass:"inactive",activeClass:"active"},e);const[,t]=Tn(e,["href","state","class","activeClass","inactiveClass","end"]),n=Hr(()=>e.href),r=Br(n),i=sn(),a=X(()=>{const s=n();if(s===void 0)return[!1,!1];const o=Re(s.split(/[?#]/,1)[0]).toLowerCase(),c=decodeURI(Re(i.pathname).toLowerCase());return[e.end?o===c:c.startsWith(o+"/")||c===o,o===c]});return(()=>{var s=g(ai);return Un(s,Ut(t,{get href(){return r()||e.href},get state(){return JSON.stringify(e.state)},get classList(){return{...e.class&&{[e.class]:!0},[e.inactiveClass]:!a()[0],[e.activeClass]:a()[0],...t.classList}},link:"",get"aria-current"(){return a()[1]?"page":void 0}}),!1,!1),vt(),s})()}var si=h("<div class=grid><!$><!/><div>"),ui=h("<div class=boxLink>");function be(e){const t=e.type??"special";return(()=>{var n=g(ui);return u(n,l(E,{type:t,get onClick(){return e.onClick},get children(){var r=g(si),i=r.firstChild,[a,s]=$(i.nextSibling),o=a.nextSibling;return u(r,l(se,{get icon(){return e.icon}}),a,s),u(o,()=>e.children),r}})),n})()}var oi=h("<h3>Programm ansehen"),ci=h("<p>Melde dich (und deine Freunde) für diverse Spielrunden an."),Ft=h("<br>"),di=h("<h3>Programmpunkte erstellen"),gi=h("<p>Erstelle und editiere Programmpunkte."),hi=h("<h3>Helfen"),mi=h("<p>Beim Kiosk und der Essensausgabe können wir immer ein paar helfende Hände gebrauchen."),$i=h("<h3>Zusammenfassung"),fi=h("<p>Erhalte einen Überblick über dein gesamtes Programm."),bi=h("<div><!$><!/><!$><!/><br><!$><!/>");function Si(e){return(()=>{var t=g(bi),n=t.firstChild,[r,i]=$(n.nextSibling),a=r.nextSibling,[s,o]=$(a.nextSibling),c=s.nextSibling,d=c.nextSibling,[m,b]=$(d.nextSibling);return u(t,l(D,{get when(){return e.roles.includes("admin")},get children(){return[l(j,{get href(){return e.link("/programm")},class:"button-link",get children(){return l(be,{icon:"dice-d20",get children(){return[g(oi),g(ci)]}})}}),g(Ft),l(j,{get href(){return e.link("/erstellen")},class:"button-link",get children(){return l(be,{icon:"grid-2-plus",get children(){return[g(di),g(gi)]}})}}),g(Ft)]}}),r,i),u(t,l(j,{get href(){return e.link("/helfen")},class:"button-link",get children(){return l(be,{icon:"hand-heart",get children(){return[g(hi),g(mi)]}})}}),s,o),u(t,l(j,{get href(){return e.link("/zusammenfassung")},class:"button-link",get children(){return l(be,{icon:"list",get children(){return[g($i),g(fi)]}})}}),m,b),t})()}var _i=h("<a class=header-anchor>");function vi(e){return encodeURIComponent(e.replaceAll(/\s/g,"-").replaceAll("&","").replaceAll(/-{1,}/g,"-").toLocaleLowerCase())}function We(e){const t=vi("title"in e?e.id??e.title:e.id);return l(Cn,{get component(){return`h${e.level}`},id:t,get children(){var n=g(_i);return Ue(n,"href",`#${t}`),u(n,(()=>{var r=O(()=>"title"in e);return()=>r()?e.title:e.children})()),n}})}var ki=h("<div style=display:grid;gap:1rem><!$><!/><!$><!/><!$><!/>"),yi=h("<div><div style=margin-block-end:1.5rem></div><!$><!/>"),xi=h("<p>Konflikte gefunden! Bitte stelle sicher, dass du nicht zeitlich überlappende Spielrunden eingetragen hast:"),pi=h('<div style="display:grid;grid-template-columns:1fr max-content 1fr;gap:1rem;margin-block:0.5rem"><!$><!/><span style=color:var(--clr-warning-10);align-self:center;font-size:2rem></span><!$><!/>'),Di=h("<div><!$><!/><div class=entries></div><div class=after-hour><div class=annotation>"),Ei=h("<div><div class=annotation></div><div class=background>"),Ri=h("<div class=entry>");function dn(e){const t=e.exclude??[];return(()=>{var n=g(ki),r=n.firstChild,[i,a]=$(r.nextSibling),s=i.nextSibling,[o,c]=$(s.nextSibling),d=o.nextSibling,[m,b]=$(d.nextSibling);return u(n,l(D,{get when(){return O(()=>!t.includes("FRIDAY")&&e.openingHours.FRIDAY.open.from!==e.openingHours.FRIDAY.open.to)()&&(e.dayFilter===null||e.dayFilter==="FRIDAY")},get children(){return l(ut,{get programEntries(){return e.programEntries.FRIDAY},get openingHoursOfDay(){return e.openingHours.FRIDAY},day:"FRIDAY",get conflictsAllowed(){return e.conflictsAllowed??!1},get columns(){return e.columns}})}}),i,a),u(n,l(D,{get when(){return O(()=>!t.includes("SATURDAY"))()&&e.dayFilter===null||e.dayFilter==="SATURDAY"},get children(){return l(ut,{get programEntries(){return e.programEntries.SATURDAY},get openingHoursOfDay(){return e.openingHours.SATURDAY},day:"SATURDAY",get conflictsAllowed(){return e.conflictsAllowed??!1},get columns(){return e.columns}})}}),o,c),u(n,l(D,{get when(){return O(()=>!t.includes("SUNDAY"))()&&e.dayFilter===null||e.dayFilter==="SUNDAY"},get children(){return l(ut,{get programEntries(){return e.programEntries.SUNDAY},get openingHoursOfDay(){return e.openingHours.SUNDAY},day:"SUNDAY",get conflictsAllowed(){return e.conflictsAllowed??!1},get columns(){return e.columns}})}}),m,b),n})()}function ut(e){const t=e.conflictsAllowed?[]:wi(e.programEntries);return(()=>{var n=g(yi),r=n.firstChild,i=r.nextSibling,[a,s]=$(i.nextSibling);return u(r,l(We,{level:4,get title(){return U.days[e.day]}})),u(n,l(Me,{get fallback(){return[l(E,{type:"danger",get children(){return g(xi)}}),l(W,{each:t,children:([o,c])=>(()=>{var d=g(pi),m=d.firstChild,[b,v]=$(m.nextSibling),S=b.nextSibling,k=S.nextSibling,[f,_]=$(k.nextSibling);return u(d,()=>o.component(),b,v),u(S,l(se,{icon:"triangle-exclamation"})),u(d,()=>c.component(),f,_),d})()})]},get children(){return l(me,{get when(){return t.length===0},get children(){return l(Ai,{get programEntries(){return e.programEntries},get openingHoursOfDay(){return e.openingHoursOfDay},get day(){return e.day},get conflictsAllowed(){return e.conflictsAllowed},get columns(){return e.columns}})}})}}),a,s),n})()}function Ai(e){const t=Zn(e.openingHoursOfDay.open),n=e.openingHoursOfDay.breaks.flatMap(({from:s,to:o})=>{oe(s<o,`Break is not valid, as from '${s}' is not smaller than to '${o}'`);const c=[s];let d=o-s;for(;d>1;)c.push(s+--d);return c}),r=(t[0]??0)-1,i=t.at(-1)??0,a=()=>{const s=["timetable"];return e.conflictsAllowed&&s.push(e.columns===2?"two-columns":e.columns===4?"four-columns":""),s.join(" ")};return(()=>{var s=g(Di),o=s.firstChild,[c,d]=$(o.nextSibling),m=c.nextSibling,b=m.nextSibling,v=b.firstChild;return u(s,l(W,{each:t,children:S=>{const k=n.includes(S);return(()=>{var f=g(Ei),_=f.firstChild;return we(f,`hour ${k?"break":""}`),u(_,S),K(y=>it(f,Lt({startTime:ce.PlainTime.from({hour:S,minute:0}),endTime:ce.PlainTime.from({hour:S,minute:0})},r,e.day,e.openingHoursOfDay),y)),f})()}}),c,d),u(m,l(W,{get each(){return e.programEntries},children:S=>(()=>{var k=g(Ri);return u(k,()=>S.component()),K(f=>it(k,Lt(S.range,r,e.day,e.openingHoursOfDay),f)),k})()})),u(v,i+1),K(S=>{var k=a(),f=`grid-row: 1 / ${i-r+1};`;return k!==S.e&&we(s,S.e=k),S.t=it(m,f,S.t),S},{e:void 0,t:void 0}),s})()}function Lt(e,t,n,r){const{startTime:i,endTime:a}=e,s=i.hour-t,o=a.hour===0?24-t:a.hour-t,c=r.open.to;return oe(s>0,`[${JSON.stringify(e)}] Entry can't start at '${i.hour}'.`),oe(o>0,`[${JSON.stringify(e)}] Entry can't end at '${a.hour}'.`),oe(a.hour<=c,`[${JSON.stringify(e)}] Entry can't end at '${a.hour}'. Closing hour set to '${c}' on day '${n}'`),`grid-row: ${s} / ${o};`}function wi(e){const t=[];return e.forEach((n,r)=>{e.slice(r+1).forEach(i=>{Wn(n.range,i.range)&&t.push([n,i])})}),t}const ke=ce.PlainDate.from({year:2026,month:3,day:13}),Y=ce.PlainDate.from({year:2026,month:3,day:14}),M=ce.PlainDate.from({year:2026,month:3,day:15}),Xe={FRIDAY:ke,SATURDAY:Y,SUNDAY:M};function xe(e){const{year:t,month:n,day:r}=e;return ke.year===t&&ke.month===n&&ke.day===r?"FRIDAY":Y.year===t&&Y.month===n&&Y.day===r?"SATURDAY":M.year===t&&M.month===n&&M.day===r?"SUNDAY":null}const gn={FRIDAY:{open:{from:0,to:0},breaks:[]},SATURDAY:{open:{from:10,to:24},breaks:[]},SUNDAY:{open:{from:10,to:18},breaks:[]}},Te={kitchen:{title:"Küche",description:"Mahlzeit vorbereiten, unterstützen beim Kochen und Abwaschen."},service:{title:"Essensausgabe",description:""},cleaning:{title:"Reinigung",description:"Unterstützen beim Küche aufräumen und putzen."},kiosk:{title:"Kiosk",description:"Am Kiosk Getränke (inkl. Kaffee) und Snacks verkaufen."},flohmarkt:{title:"Flohmarkt",description:"Hilf uns beim Auf- oder Abbau des Flohmarkt und der Annahme oder Abgabe von Spielen."},checkout:{title:"Kiosk oder Flohmarkt",description:"Am Kiosk Getränke und Snacks verkaufen oder am Flohmarkt die Kasse bedienen."},setup:{title:"Menü-Vorbereitung / Aufbau",description:"Hilf uns beim Zubereiten der Menüs und Aufstellen von Tischen, Stühle und der Bibliothek."},breakdown:{title:"Abbau",description:"Hilf uns beim Zusammenräumen von Tischen, Stühle, der Bibliothek und dem Flohmarkt."}},Ae=[{uuid:"eb443040-0674-429c-a3ad-48634a323b76",count:4,kind:"setup",dateTime:{startDate:ke.toPlainDateTime({hour:16,minute:0}),endDate:ke.toPlainDateTime({hour:21,minute:0})}},{uuid:"91699a72-78d0-4dc9-bfe1-ece55b15db7d",count:1,kind:"flohmarkt",dateTime:{startDate:ke.toPlainDateTime({hour:19,minute:0}),endDate:ke.toPlainDateTime({hour:22,minute:0})}},{uuid:"9ebca7e9-f44a-4cc9-8961-73539f17d5d6",count:2,kind:"checkout",dateTime:{startDate:Y.toPlainDateTime({hour:10,minute:0}),endDate:Y.toPlainDateTime({hour:12,minute:0})}},{uuid:"6303bd52-cd10-4dd0-b760-b71ab971ad3b",count:4,kind:"flohmarkt",dateTime:{startDate:Y.toPlainDateTime({hour:9,minute:0}),endDate:Y.toPlainDateTime({hour:11,minute:0})}},{uuid:"804c379d-c747-4d7c-9f0c-a53f8548216e",count:1,kind:"kitchen",dateTime:{startDate:Y.toPlainDateTime({hour:11,minute:0}),endDate:Y.toPlainDateTime({hour:13,minute:0})}},{uuid:"bfec6f59-14eb-45b9-a21c-d33ee2205b64",count:2,kind:"checkout",dateTime:{startDate:Y.toPlainDateTime({hour:12,minute:0}),endDate:Y.toPlainDateTime({hour:14,minute:0})}},{uuid:"8db23dfd-616e-4f1d-9a07-deb6e519d35a",count:1,kind:"kitchen",dateTime:{startDate:Y.toPlainDateTime({hour:13,minute:0}),endDate:Y.toPlainDateTime({hour:15,minute:0})}},{uuid:"477a1c27-b660-4221-9be0-de34de910f4b",count:2,kind:"checkout",dateTime:{startDate:Y.toPlainDateTime({hour:14,minute:0}),endDate:Y.toPlainDateTime({hour:16,minute:0})}},{uuid:"490c799f-ced5-461e-a483-ad6a90df221b",count:2,kind:"checkout",dateTime:{startDate:Y.toPlainDateTime({hour:16,minute:0}),endDate:Y.toPlainDateTime({hour:18,minute:0})}},{uuid:"c9f79536-225a-41ee-93e6-ef1741b511f7",count:1,kind:"kitchen",dateTime:{startDate:Y.toPlainDateTime({hour:17,minute:0}),endDate:Y.toPlainDateTime({hour:19,minute:0})}},{uuid:"c6c3f0f7-04c6-4819-95e6-aa8476e4392c",count:2,kind:"checkout",dateTime:{startDate:Y.toPlainDateTime({hour:18,minute:0}),endDate:Y.toPlainDateTime({hour:20,minute:0})}},{uuid:"9748b1e6-1712-449b-8dda-eb44f172071e",count:1,kind:"kitchen",dateTime:{startDate:Y.toPlainDateTime({hour:19,minute:0}),endDate:Y.toPlainDateTime({hour:21,minute:0})}},{uuid:"e1a9b252-628c-4c01-b8e1-e1964b51e646",count:2,kind:"checkout",dateTime:{startDate:M.toPlainDateTime({hour:10,minute:0}),endDate:M.toPlainDateTime({hour:12,minute:0})}},{uuid:"873a1308-57bc-46bc-bdfc-a82213364c77",count:1,kind:"kitchen",dateTime:{startDate:M.toPlainDateTime({hour:11,minute:0}),endDate:M.toPlainDateTime({hour:13,minute:0})}},{uuid:"2e9864a9-0208-4e56-b232-dcd258e31545",count:2,kind:"checkout",dateTime:{startDate:M.toPlainDateTime({hour:12,minute:0}),endDate:M.toPlainDateTime({hour:14,minute:0})}},{uuid:"caef5fea-8458-4b65-b699-9c4e5ee6589d",count:1,kind:"kitchen",dateTime:{startDate:M.toPlainDateTime({hour:13,minute:0}),endDate:M.toPlainDateTime({hour:15,minute:0})}},{uuid:"0da24180-0269-4206-adf7-4b9faeefa091",count:2,kind:"checkout",dateTime:{startDate:M.toPlainDateTime({hour:14,minute:0}),endDate:M.toPlainDateTime({hour:16,minute:0})}},{uuid:"40eaef18-d6a0-46e8-b3e5-a98be09cef57",count:2,kind:"checkout",dateTime:{startDate:M.toPlainDateTime({hour:16,minute:0}),endDate:M.toPlainDateTime({hour:18,minute:0})}},{uuid:"b9da7047-c359-49fa-b558-53207ac5255a",count:2,kind:"flohmarkt",dateTime:{startDate:M.toPlainDateTime({hour:17,minute:0}),endDate:M.toPlainDateTime({hour:19,minute:0})}},{uuid:"c0e1d54c-0832-4147-9054-082208dab2f2",count:4,kind:"breakdown",dateTime:{startDate:M.toPlainDateTime({hour:17,minute:0}),endDate:M.toPlainDateTime({hour:20,minute:0})}}],Ti=Ae.map(e=>e.uuid),It=Object.entries(Object.groupBy(Ti,e=>e)).reduce((e,[t,n])=>[...e,{uuid:t,count:n?.length??0}],[]).filter(({count:e})=>e!==1);if(It.length>0)throw Error(`duplicate uuids found:  ${It.map(({uuid:e})=>e).join(", ")}`);function Ui(e){return Ae.find(t=>t.uuid===e)??null}const Je={FRIDAY:{open:{from:16,to:22},breaks:[{from:16,to:22}]},SATURDAY:{open:{from:9,to:24},breaks:[{from:9,to:10}]},SUNDAY:{open:{from:10,to:20},breaks:[{from:18,to:20}]}};var Ci=h("<span>");function tt(e){const t=()=>{const n=["chip"];return n.push(e.kind??"gray"),e.inverted&&n.push("inverted"),e.size==="small"&&n.push("small"),n.join(" ")};return(()=>{var n=g(Ci);return u(n,()=>e.children),K(r=>{var i=t(),a=e.title;return i!==r.e&&we(n,r.e=i),a!==r.t&&Ue(n,"title",r.t=a),r},{e:void 0,t:void 0}),n})()}const Pi=R({start:p(),end:p()}).transform((e,t)=>{const{start:n,end:r}=e,i=Rt(n),a=Rt(r);return i.kind==="ERROR"?(t.addIssue({code:"custom",message:i.message}),At):a.kind==="ERROR"?(t.addIssue({code:"custom",message:a.message}),At):{startDate:ce.PlainDateTime.from({year:i.value.year,month:i.value.month,day:i.value.day,hour:i.value.hour,minute:i.value.minute}),endDate:ce.PlainDateTime.from({year:a.value.year,month:a.value.month,day:a.value.day,hour:a.value.hour,minute:a.value.minute})}}),Fi=R({uuid:p(),title:p(),organizer:p(),timeSlot:Pi,shortDescription:p(),longDescription:p(),participating:Pe([R({kind:te("NONE"),maxSeats:de()}),R({kind:te("LIMITED"),maxSeats:de()})]),tagNames:p()}),Li=kn(p(),de()),Ii=R({programEntries:ye(Fi),reservations:Li});async function Ni(){const e=await Hn();if(e.kind==="FAILURE")return console.error("Unexpected error. Maybe network, maybe server error."),{kind:"FAILURE"};const t=Ii.safeParse(e.data);return t.success?{kind:"SUCCESS",data:t.data}:{kind:"FAILURE"}}var Yi=h("<div style=display:flex;flex-wrap:wrap;gap:1rem;justify-content:space-between><h5 style=margin:0>Filter"),Oi=h("<div style=display:flex;flex-wrap:wrap;gap:0.5rem><!$><!/><!$><!/><!$><!/><!$><!/>");function pt(e){const t=e.exclude??[];return l(E,{get children(){return[g(Yi),(()=>{var n=g(Oi),r=n.firstChild,[i,a]=$(r.nextSibling),s=i.nextSibling,[o,c]=$(s.nextSibling),d=o.nextSibling,[m,b]=$(d.nextSibling),v=m.nextSibling,[S,k]=$(v.nextSibling);return u(n,l(ue,{label:"Alle Tage",get kind(){return e.dayFilter()===null?"success":"gray"},onClick:()=>e.setDayFilter(null)}),i,a),u(n,l(D,{get when(){return!t.includes("FRIDAY")},get children(){return l(ue,{label:"Freitag",get kind(){return e.dayFilter()==="FRIDAY"?"success":"gray"},onClick:()=>e.setDayFilter("FRIDAY")})}}),o,c),u(n,l(D,{get when(){return!t.includes("SATURDAY")},get children(){return l(ue,{label:"Samstag",get kind(){return e.dayFilter()==="SATURDAY"?"success":"gray"},onClick:()=>e.setDayFilter("SATURDAY")})}}),m,b),u(n,l(D,{get when(){return!t.includes("SUNDAY")},get children(){return l(ue,{label:"Sonntag",get kind(){return e.dayFilter()==="SUNDAY"?"success":"gray"},onClick:()=>e.setDayFilter("SUNDAY")})}}),S,k),n})()]}})}var Hi=h("<h4>Helfer-Übersicht (Admin)"),Bi=h("<div class=dynamic-columns><p>Beim Kiosk und der Essensausgabe können wir immer ein paar helfende Hände gebrauchen. Wenn du bereit bist zu helfen, klicke in der jeweiligen Stunde auf das Handsymbol <!$><!/>.</p><!$><!/>"),Ne=h("<br>"),zi=h("<h4>Zur Anmeldung für Erklärbären"),Mi=h("<div class=dynamic-columns><p>Eines der Hauptziele der Luzerner Spieltage ist es, dass die Besucher/-innen noch nicht gespielte Spiele ausprobieren können. Dazu unterstützen uns jedes Jahr Freiwillige und erklären die ihnen bekannten Spiele aus der Spiele-Bibliothek. Diese Erklärbären sind durch ihr rotes T-Shirt erkennbar.</p><!$><!/>"),ji=h("<p>Plan konnte nicht geladen werden."),Ki=h("<div><!$><!/><!$><!/><h5></h5><p class=duration><span><!$><!/>-<!$><!/>&nbsp;Uhr | </span><em><!$><!/>&nbsp;/&nbsp;<!$><!/>");function Wi(e){const[t,n]=ee(null);return[(()=>{var r=g(Bi),i=r.firstChild,a=i.firstChild,s=a.nextSibling,[o,c]=$(s.nextSibling);o.nextSibling;var d=i.nextSibling,[m,b]=$(d.nextSibling);return u(i,l(se,{icon:"hand-heart"}),o,c),u(r,l(D,{get when(){return e.roles.includes("admin")},get children(){return l(j,{get href(){return e.link("/helfen/admin")},class:"button-link",style:"margin-block-end: 1rem; padding: 0;",get children(){return l(be,{icon:"forward",type:"danger",get children(){return g(Hi)}})}})}}),m,b),r})(),g(Ne),l(E,{type:"special",get children(){return["Melde bitte 15 Minuten vor Schichtbeginn bei einem OK-Mitglied, beim"," ",l(fe,{href:"/adresse",children:"Eingang zum Würzenbachsaal."})]}}),g(Ne),l(We,{level:3,title:"Erklärbären"}),g(Ne),(()=>{var r=g(Mi),i=r.firstChild,a=i.nextSibling,[s,o]=$(a.nextSibling);return u(r,l(j,{get href(){return e.link("/erklaerbaer")},class:"button-link",style:"margin-block-end: 1rem; padding: 0;",get children(){return l(be,{icon:"forward",type:"success",get children(){return g(zi)}})}}),s,o),r})(),g(Ne),l(pt,{dayFilter:t,setDayFilter:n}),g(Ne),l(je,{get fallback(){return l(E,{get children(){return U.loading.program}})},get children(){return l(D,{get when(){return e.publicResource()},get fallback(){return l(E,{type:"danger",get children(){return U.error.help}})},children:r=>l(D,{get when(){return r().kind==="SUCCESS"},get fallback(){return l(E,{type:"danger",get children(){return g(ji)}})},get children(){return l(Zi,{get myHelpReservations(){return e.reservations$.get()},get allReservations(){return r().data.reservations},get isEditable(){return e.isEditable},get link(){return e.link},get dayFilter(){return t()}})}})})}})]}function Zi(e){const t=()=>Object.keys(e.allReservations),n=()=>({FRIDAY:ot({day:"FRIDAY",entries:Ae,alreadyReservedUuids:t(),myReservations:e.myHelpReservations,link:e.link}),SATURDAY:ot({day:"SATURDAY",entries:Ae,alreadyReservedUuids:t(),myReservations:e.myHelpReservations,link:e.link}),SUNDAY:ot({day:"SUNDAY",entries:Ae,alreadyReservedUuids:t(),myReservations:e.myHelpReservations,link:e.link})});return l(dn,{get programEntries(){return n()},openingHours:Je,conflictsAllowed:!0,columns:4,get dayFilter(){return e.dayFilter}})}function ot(e){const t=xt(),n=[],r=Vi(e.alreadyReservedUuids);return Object.groupBy(e.entries,a=>xe(a.dateTime.startDate)??"empty")[e.day]?.forEach(a=>{const s=()=>a.count-(r[a.uuid]??0),o=()=>e.myReservations.filter(m=>"helpEntryUuid"in m&&m.helpEntryUuid===a.uuid).length>0,c=()=>{const m=["box-simple","timeview-entry"];return o()&&m.push("success"),m.join(" ")},d={startTime:ce.PlainTime.from({hour:a.dateTime.startDate.hour,minute:a.dateTime.startDate.minute}),endTime:a.dateTime.startDate.day!==a.dateTime.endDate.day?ce.PlainTime.from({hour:a.dateTime.endDate.hour,minute:a.dateTime.endDate.minute}):ce.PlainTime.from({hour:a.dateTime.endDate.hour,minute:a.dateTime.endDate.minute})};n.push({range:d,component:()=>(()=>{var m=g(Ki),b=m.firstChild,[v,S]=$(b.nextSibling),k=v.nextSibling,[f,_]=$(k.nextSibling),y=f.nextSibling,x=y.nextSibling,C=x.firstChild,P=C.firstChild,[F,I]=$(P.nextSibling),H=F.nextSibling,Z=H.nextSibling,[N,ne]=$(Z.nextSibling);N.nextSibling;var re=C.nextSibling,ge=re.firstChild,[q,A]=$(ge.nextSibling),T=q.nextSibling,B=T.nextSibling,[G,he]=$(B.nextSibling);return m.$$click=()=>t(e.link(`/helfen/${a.uuid}`)),u(m,l(tt,{title:"Helfer:innen gesucht",get inverted(){return o()},size:"small",children:"HL"}),v,S),u(m,l(Be,{icon:"hand-heart",kind:"ghost",onClick:()=>t(e.link(`/helfen/${a.uuid}`)),title:"Helfen"}),f,_),u(y,()=>Te[a.kind].title),u(C,()=>d.startTime.hour,F,I),u(C,()=>d.endTime.hour,N,ne),u(re,()=>a.count-s(),q,A),u(re,()=>a.count,G,he),K(V=>{var z=c(),Q=Te[a.kind].title;return z!==V.e&&we(m,V.e=z),Q!==V.t&&Ue(y,"title",V.t=Q),V},{e:void 0,t:void 0}),vt(),m})()})}),n}function Vi(e){const t=Object.groupBy(e,r=>r),n={};for(const r of e)n[r]=t[r]?.length??0;return n}_t(["click"]);var qi=h("<dialog closedby=any><!$><!/><!$><!/><!$><!/>"),Ji=h("<h4>");function Gi(e=!1){return{open:e}}function Qi(e){let t;const[n,r]=ve(e.store);Pn(()=>{n.open?t.showModal():t.close()});function i(){r({open:!1}),e.onClose?.()}const a=()=>{const s=[];return e.type!==void 0&&s.push(e.type),e.size!==void 0&&s.push(e.size),e.onClose!==void 0&&s.push("dialog-with-close"),s};return(()=>{var s=g(qi),o=s.firstChild,[c,d]=$(o.nextSibling),m=c.nextSibling,[b,v]=$(m.nextSibling),S=b.nextSibling,[k,f]=$(S.nextSibling);s.addEventListener("close",i);var _=t;return typeof _=="function"?Fn(_,s):t=s,u(s,l(D,{get when(){return e.onClose},get children(){return l(Be,{onClick:i,icon:"circle-xmark",kind:"gray"})}}),c,d),u(s,l(D,{get when(){return e.title},children:y=>(()=>{var x=g(Ji);return u(x,y),x})()}),b,v),u(s,()=>e.children,k,f),K(()=>we(s,a().join(" "))),s})()}var Xi=h("<p>");function ct(e){const[t,n]=ve(e.store),r=e.showErrors==="ALWAYS",i=()=>r||t.isDirty?e.errors??[]:[];return[l(jt,{get label(){return e.label},get name(){return e.name},get value(){return t.value},onValueUpdate:a=>{n("value",a),e.onUpdate?.()},onBlur:()=>n("isDirty",!0),get type(){return e.type},get required(){return e.required},get isHoneypot(){return e.isHoneypot},get disabled(){return e.disabled}}),l(D,{get when(){return i().length>0},get children(){return l(E,{type:"danger",get children(){return l(W,{get each(){return i()},children:a=>(()=>{var s=g(Xi);return u(s,a),s})()})}})}})]}p().transform(e=>({value:e,isDirty:!1}));function dt(e){return{value:e,isDirty:!1}}de().transform(e=>({value:e,isDirty:!1}));var el=h("<div><!$><!/><br><!$><!/><br><!$><!/>"),tl=h("<h5>"),nl=h("<p class=duration>von <!$><!/> bis <!$><!/> Uhr <em><small>(<!$><!/>)"),rl=h("<div>");function il(e){const[t,n]=ee(null),r=ll(e.save,e.publicState,e.link),i=sl(r),a=ul(r);return(()=>{var s=g(el),o=s.firstChild,[c,d]=$(o.nextSibling),m=c.nextSibling,b=m.nextSibling,[v,S]=$(b.nextSibling),k=v.nextSibling,f=k.nextSibling,[_,y]=$(f.nextSibling);return u(s,l(We,{level:3,title:"Mein Programm"}),c,d),u(s,l(pt,{dayFilter:t,setDayFilter:n,exclude:i}),v,S),u(s,l(dn,{get dayFilter(){return t()},programEntries:r,openingHours:a,conflictsAllowed:!1,columns:1,exclude:i}),_,y),s})()}function ll(e,t,n){const{helping:r}=e,i={FRIDAY:[],SATURDAY:[],SUNDAY:[]},a=r.map(o=>{if(o.kind==="ERKLAERBAER"){const d={startDate:Xe[o.slot.day].toPlainDateTime({hour:o.slot.from,minute:0}),endDate:Xe[o.slot.day].toPlainDateTime({hour:o.slot.to,minute:0})};return{...o,meta:{dateTime:d}}}const c=Ae.find(d=>d.uuid===o.helpEntryUuid);return oe(c!==void 0,`Help UUID is invalid: '${o.helpEntryUuid}'`),{...o,meta:c}}),s=Object.groupBy(a,o=>{const{startDate:c,endDate:d}=o.meta.dateTime;return`${c.year}-${c.month}-${c.day}-${c.hour}-${c.minute}--${d.year}-${d.month}-${d.day}-${d.hour}-${d.minute}`});return Object.values(s).forEach(o=>{if(o===void 0)return;const c=o[0];if(c===void 0)return;let d=!0;const m=o.map(f=>f.kind==="ERKLAERBAER"?["Erklärbär","ME"]:f.kind==="SELF"?[Te[f.meta.kind].title,"ME"]:(d=!1,[Te[f.meta.kind].title,f.name])),b=d?m.map(([f])=>f).join(", "):m.map(([f,_])=>_==="ME"?f:`${f} (${_})`).join("; "),v=xe(c.meta.dateTime.startDate);oe(v!==null,`Date '${JSON.stringify(c.meta.dateTime.startDate)}' is not a valid event date.`);const S={startTime:c.meta.dateTime.startDate.toPlainTime(),endTime:c.meta.dateTime.endDate.toPlainTime()},k=c.kind==="ERKLAERBAER"?"/erklaerbaer":`/helfen/${c.helpEntryUuid}`;i[v].push({range:S,component:()=>l(al,{title:b,range:S,kind:"help",path:k,link:n})})}),a.forEach(o=>{switch(o.kind){case"SELF":{const c=xe(o.meta.dateTime.startDate);oe(c!==null,`Date '${JSON.stringify(o.meta.dateTime.startDate)}' is not a valid event date.`);break}case"FRIEND":{const c=xe(o.meta.dateTime.startDate);oe(c!==null,`Date '${JSON.stringify(o.meta.dateTime.startDate)}' is not a valid event date.`);break}}}),i}function al(e){const t={"master-draft":{label:"SL",help:"Spielleitung",link:{icon:"pencil",label:"Spielrunde bearbeiten"}},master:{label:"SL",help:"Spielleitung",link:{icon:"pencil",label:"Spielrunde bearbeiten"}},play:{label:"TN",help:"Teilnehmer:in",link:{icon:"link",label:"Zur Spielrunde"}},help:{label:"HL",help:"Helfen",link:{icon:"link",label:"Zum Eintrag"}}}[e.kind],n=()=>{const r=["timeview-entry","box-simple"];return e.kind==="master-draft"&&r.push("gray"),e.kind==="master"&&r.push("special"),e.kind==="play"&&r.push("danger"),r.join(" ")};return(()=>{var r=g(rl);return u(r,l(j,{get href(){return e.link(e.path)},class:"button-link",style:"display: contents;",get children(){return[l(tt,{get title(){return t.help},get inverted(){return e.kind!=="help"},size:"small",get children(){return t.label}}),l(Be,{get icon(){return t.link.icon},kind:"ghost",get title(){return t.link.label}}),(()=>{var i=g(tl);return u(i,()=>e.title),K(()=>Ue(i,"title",e.title)),i})(),(()=>{var i=g(nl),a=i.firstChild,s=a.nextSibling,[o,c]=$(s.nextSibling),d=o.nextSibling,m=d.nextSibling,[b,v]=$(m.nextSibling),S=b.nextSibling,k=S.nextSibling,f=k.firstChild,_=f.firstChild,y=_.nextSibling,[x,C]=$(y.nextSibling);return x.nextSibling,u(i,()=>Ce(e.range.startTime),o,c),u(i,()=>Ce(e.range.endTime),b,v),u(f,()=>Vn(e.range.startTime,e.range.endTime),x,C),i})()]}})),K(()=>we(r,n())),r})()}function sl(e){const t=[];return e.FRIDAY.length===0&&t.push("FRIDAY"),e.SATURDAY.length===0&&t.push("SATURDAY"),e.SUNDAY.length===0&&t.push("SUNDAY"),t.length===3?["FRIDAY"]:t}function ul(e){const t=gn;e.FRIDAY.length>0&&(t.FRIDAY=Je.FRIDAY);let n=!1;e.SATURDAY.forEach(i=>{i.range.startTime.hour<t.SATURDAY.open.from&&(n=!0),i.range.endTime.hour>t.SATURDAY.open.to&&(n=!0)}),n&&(t.SATURDAY=Je.SATURDAY);let r=!1;return e.SUNDAY.forEach(i=>{i.range.startTime.hour<t.SUNDAY.open.from&&(r=!0),i.range.endTime.hour>t.SUNDAY.open.to&&(r=!0)}),r&&(t.SUNDAY=Je.SUNDAY),t}function Dt(e,t){const n={get:e,set:r=>t(()=>r),update:t,pipe:r=>r(n)};return n}function ol(e){const[t,n]=ve({value:e});return Dt(()=>t.value,r=>n("value",r(t.value)))}const w={sub:e=>t=>Dt(()=>t.get()[e],n=>t.update(r=>({...r,[e]:n(t.get()[e])})))},ie={push:(e,t)=>{e.update(n=>[...n,t])},update:(e,t,n)=>{e.update(r=>r.map(i=>t(i)?n:i))},remove:(e,t)=>{e.update(n=>n.filter(t))},findExact:(e,t)=>(gt(e.get(),t),Dt(()=>gt(e.get(),t),n=>{const r=gt(e.get(),t);ie.update(e,t,n(r))}))};function gt(e,t){const[n,...r]=e.filter(t);return oe(n!==void 0,"No element found with predicate"),oe(r.length===0,"Predicate does not result in unique element"),n}var cl=h("<label class=input-checkbox><input type=checkbox><div><!$><!/><!$><!/>"),dl=h("<div class=checkbox-description>");function gl(e){return(()=>{var t=g(cl),n=t.firstChild,r=n.nextSibling,i=r.firstChild,[a,s]=$(i.nextSibling),o=a.nextSibling,[c,d]=$(o.nextSibling);return n.addEventListener("change",m=>e.checked$.set(m.target.checked)),u(r,()=>e.label,a,s),u(r,l(D,{get when(){return e.description},children:m=>(()=>{var b=g(dl);return u(b,m),b})()}),c,d),K(m=>{var b=e.name,v=e.disabled===!0;return b!==m.e&&Ue(n,"name",m.e=b),v!==m.t&&Se(n,"disabled",m.t=v),m},{e:void 0,t:void 0}),K(()=>Se(n,"value",e.value)),K(()=>Se(n,"checked",e.checked$.get())),t})()}var hl=h("<div style=display:grid;gap:1rem><!$><!/><!$><!/><!$><!/>"),ml=h("<div>"),$l=h("<div style=display:grid;gap:1rem><h3>Meine Kontaktdaten</h3><p><strong>Name:</strong> <!$><!/></p><p><strong>E-Mail:</strong> <!$><!/></p><p><strong>Handynummer:</strong> <!$><!/></p><!$><!/>"),fl=h("<form novalidate><!$><!/><!$><!/><!$><!/><!$><!/>");function bl(e){return(()=>{var t=g(hl),n=t.firstChild,[r,i]=$(n.nextSibling),a=r.nextSibling,[s,o]=$(a.nextSibling),c=s.nextSibling,[d,m]=$(c.nextSibling);return u(t,l(Sl,{get contact$(){return e.save$.pipe(w.sub("contact"))},get isEditable(){return e.isEditable}}),r,i),u(t,l(gl,{label:"Schickt mir bitte E-Mails, wenn neue Programmpunkte veröffentlicht werden.",get checked$(){return e.save$.pipe(w.sub("config")).pipe(w.sub("wantsUpdates"))},name:"wantsUpdates",value:"wantsUpdates"}),s,o),u(t,l(je,{get fallback(){return l(E,{get children(){return U.loading.program}})},get children(){return l(D,{get when(){return e.publicResource()},get fallback(){return l(E,{type:"danger",get children(){return U.error.help}})},children:b=>l(D,{get when(){return b().kind==="SUCCESS"},get fallback(){return l(E,{type:"danger",get children(){return U.loading.program}})},get children(){return l(il,{get save(){return e.save$.get()},get publicState(){return b().data},get link(){return e.link}})}})})}}),d,m),t})()}function Sl(e){const[t,n]=ve(Gi()),{name:r,email:i,mobile:a}=e.contact$.get();return l(E,{get children(){return[l(D,{get when(){return t.open},get children(){return l(_l,{get contact$(){return e.contact$},dialogStore:t})}}),(()=>{var s=g($l),o=s.firstChild,c=o.nextSibling,d=c.firstChild,m=d.nextSibling,b=m.nextSibling,[v,S]=$(b.nextSibling),k=c.nextSibling,f=k.firstChild,_=f.nextSibling,y=_.nextSibling,[x,C]=$(y.nextSibling),P=k.nextSibling,F=P.firstChild,I=F.nextSibling,H=I.nextSibling,[Z,N]=$(H.nextSibling),ne=P.nextSibling,[re,ge]=$(ne.nextSibling);return u(c,r,v,S),u(k,i,x,C),u(P,a,Z,N),u(s,l(D,{get when(){return e.isEditable},get children(){var q=g(ml);return u(q,l(_e,{icon:"pencil",label:"Kontaktdaten editieren",onClick:()=>n("open",!0)})),q}}),re,ge),s})()]}})}function _l(e){const[t]=zr(),[n]=ve({name:dt(e.contact$.get().name),email:dt(e.contact$.get().email),mobile:dt(e.contact$.get().mobile)}),[r,i]=ve({kind:"IDLE",isDuplicate:!1}),a=X(()=>{const c={name:[],email:[]};return n.name.value.trim().length===0&&c.name.push(U.mandatoryField),n.email.value.trim().length===0?c.email.push(U.mandatoryField):n.email.value.includes("@")||c.email.push(U.invalidEmail),r.kind==="IDLE"&&r.isDuplicate&&c.email.push("Diese E-Mail wird bereits verwendet."),{...c,hasErrors:c.name.length+c.email.length>0}}),[s,o]=ve(e.dialogStore);return l(Qi,{get store(){return e.dialogStore},title:"Kontaktdaten editieren",onClose:()=>{},size:"medium",get children(){var c=g(fl),d=c.firstChild,[m,b]=$(d.nextSibling),v=m.nextSibling,[S,k]=$(v.nextSibling),f=S.nextSibling,[_,y]=$(f.nextSibling),x=_.nextSibling,[C,P]=$(x.nextSibling);return u(c,l(ct,{get store(){return n.name},label:"Name",name:"name",showErrors:"ON_BLUR",get errors(){return a().name}}),m,b),u(c,l(ct,{get store(){return n.email},label:"E-Mail",name:"email",showErrors:"ALWAYS",get errors(){return a().email},onUpdate:()=>i({kind:"IDLE",isDuplicate:!1})}),S,k),u(c,l(ct,{get store(){return n.mobile},label:"Handynummer",name:"mobile"}),_,y),u(c,l(ue,{label:"Speichern",get disabled(){return a().hasErrors||r.kind==="CHECKING"},onClick:async()=>{if(!a().hasErrors){i({kind:"CHECKING"});const F=t.secret,I=await fetch(ze(`/lst26/check-email?email=${n.email.value}&secret=${F}`));if(!I.ok){i({kind:"IDLE",isDuplicate:!0});return}const H=await I.json(),Z=vl.safeParse(H);if(!Z.success){i({kind:"IDLE",isDuplicate:!0});return}if(Z.data.kind==="FAILURE"){i({kind:"IDLE",isDuplicate:!0});return}i({kind:"IDLE",isDuplicate:!1}),e.contact$.set({name:n.name.value,email:n.email.value,mobile:n.mobile.value}),o("open",!1)}}}),C,P),c}})}const vl=Pe([R({kind:te("SUCCESS")}),R({kind:te("FAILURE")})]);var kl=h("<div class=tooltip-wrapper><div class=tooltip></div><!$><!/>");function Ye(e){return(()=>{var t=g(kl),n=t.firstChild,r=n.nextSibling,[i,a]=$(r.nextSibling);return u(n,()=>e.tooltip),u(t,()=>e.children,i,a),t})()}var yl=h("<div class=quickmenu-wrapper><div class=quickmenu><!$><!/><!$><!/><!$><!/><!$><!/>"),xl=h('<div class="quickmenu extended"><!$><!/><!$><!/><!$><!/><!$><!/>'),pl=h("<div style=margin-block-start:1rem;display:flex;gap:0.5rem;align-items:center><!$><!/><em>Zuletzt gespeichert um: <!$><!/> Uhr"),Dl=h("<div style=margin-block-start:1rem;display:flex;gap:0.5rem;align-items:center><!$><!/><em>Am Speichern..."),El=h("<div style=margin-block-start:1rem;display:flex;gap:0.5rem;align-items:center><!$><!/><em>Speichern war nicht möglich!");function Rl(e){return(()=>{var t=g(yl),n=t.firstChild,r=n.firstChild,[i,a]=$(r.nextSibling),s=i.nextSibling,[o,c]=$(s.nextSibling),d=o.nextSibling,[m,b]=$(d.nextSibling),v=m.nextSibling,[S,k]=$(v.nextSibling);return u(n,l(Ye,{tooltip:"Zur Übersicht",get children(){return l(j,{get href(){return e.link(e.parentPath)},class:"button-link",get children(){return l(ue,{get label(){return l(se,{icon:"backward"})}})}})}}),i,a),u(n,l(D,{get when(){return e.roles.includes("admin")},get children(){return[l(Ye,{tooltip:"Zum Programm",get children(){return l(j,{get href(){return e.link("/programm")},class:"button-link",get children(){return l(ue,{get label(){return l(se,{icon:"dice-d20"})}})}})}}),l(Ye,{tooltip:"Zu deinen Programmpunkten",get children(){return l(j,{get href(){return e.link("/erstellen")},class:"button-link",get children(){return l(ue,{get label(){return l(se,{icon:"grid-2-plus"})}})}})}})]}}),o,c),u(n,l(Ye,{tooltip:"Zum Helferplan",get children(){return l(j,{get href(){return e.link("/helfen")},class:"button-link",get children(){return l(ue,{get label(){return l(se,{icon:"hand-heart"})}})}})}}),m,b),u(n,l(Ye,{tooltip:"Zur Zusammenfassung",get children(){return l(j,{get href(){return e.link("/zusammenfassung")},class:"button-link",get children(){return l(ue,{get label(){return l(se,{icon:"list"})}})}})}}),S,k),t})()}function Al(e){return[l(E,{type:"gray",get children(){var t=g(xl),n=t.firstChild,[r,i]=$(n.nextSibling),a=r.nextSibling,[s,o]=$(a.nextSibling),c=s.nextSibling,[d,m]=$(c.nextSibling),b=d.nextSibling,[v,S]=$(b.nextSibling);return u(t,l(j,{get href(){return e.link(e.parentPath)},class:"button-link",get children(){return l(_e,{icon:"backward",label:"Zur Übersicht"})}}),r,i),u(t,l(D,{get when(){return e.roles.includes("admin")},get children(){return[l(j,{get href(){return e.link("/programm")},class:"button-link",get children(){return l(_e,{icon:"dice-d20",label:"Zum Programm"})}}),l(j,{get href(){return e.link("/erstellen")},class:"button-link",get children(){return l(_e,{icon:"grid-2-plus",label:"Zu deinen Programmpunkten"})}})]}}),s,o),u(t,l(j,{get href(){return e.link("/helfen")},class:"button-link",get children(){return l(_e,{icon:"hand-heart",label:"Zum Helferplan"})}}),d,m),u(t,l(j,{get href(){return e.link("/zusammenfassung")},class:"button-link",get children(){return l(_e,{icon:"list",label:"Zur Zusammenfassung"})}}),v,S),t}}),l(wl,{get saveState(){return e.saveState},get lastSaved(){return e.lastSaved}})]}function wl(e){return l(Me,{get children(){return[l(me,{get when(){return e.saveState==="IDLE"},get children(){var t=g(pl),n=t.firstChild,[r,i]=$(n.nextSibling),a=r.nextSibling,s=a.firstChild,o=s.nextSibling,[c,d]=$(o.nextSibling);return c.nextSibling,u(t,l(se,{icon:"circle-check"}),r,i),u(a,()=>Mt(e.lastSaved),c,d),t}}),l(me,{get when(){return e.saveState==="SAVING"},get children(){var t=g(Dl),n=t.firstChild,[r,i]=$(n.nextSibling);return r.nextSibling,u(t,l(se,{icon:"floppy-disk-circle-arrow-right"}),r,i),t}}),l(me,{get when(){return e.saveState==="ERROR"},get children(){var t=g(El),n=t.firstChild,[r,i]=$(n.nextSibling);return r.nextSibling,u(t,l(se,{icon:"triangle-exclamation"}),r,i),t}})]}})}var Tl=h("<div class=page><!$><!/><div class=page-content><!$><!/><!$><!/></div><!$><!/>"),Ul=h("<h2>"),Cl=h("<br>"),Pl=h("<div class=extended-wrapper style=margin-block-start:1rem>");function $e(e){return(()=>{var t=g(Tl),n=t.firstChild,[r,i]=$(n.nextSibling),a=r.nextSibling,s=a.firstChild,[o,c]=$(s.nextSibling),d=o.nextSibling,[m,b]=$(d.nextSibling),v=a.nextSibling,[S,k]=$(v.nextSibling);return u(t,(()=>{var f=O(()=>e.showQuickmenu!==!1);return()=>f()?l(Rl,{get roles(){return e.roles},get link(){return e.link},get saveState(){return e.saveState},get lastSaved(){return e.lastSaved},get parentPath(){return e.parentPath??"/"}}):null})(),r,i),u(a,(()=>{var f=O(()=>e.title===void 0);return()=>f()?null:[(()=>{var _=g(Ul);return u(_,()=>e.title),_})(),g(Cl)]})(),o,c),u(a,()=>e.children,m,b),u(t,(()=>{var f=O(()=>e.showQuickmenu!==!1);return()=>f()?(()=>{var _=g(Pl);return u(_,l(Al,{get roles(){return e.roles},get link(){return e.link},get saveState(){return e.saveState},get lastSaved(){return e.lastSaved},get parentPath(){return e.parentPath??"/"}})),_})():null})(),S,k),t})()}var Fl=h('<form class=input-button style="display:grid;gap:0rem;grid-template-columns:1fr max-content"><input type=text style=border-color:var(--clr-special-9)><!$><!/>');function Nt(e){const[t,n]=ee("");return(()=>{var r=g(Fl),i=r.firstChild,a=i.nextSibling,[s,o]=$(a.nextSibling);return r.addEventListener("submit",c=>{c.preventDefault();const d=t();d.trim().length>0&&e.addFriend(d)}),Se(r,"noValidate",!0),i.$$input=c=>n(c.target.value),u(r,l(_e,{icon:"arrow-right",type:"submit",label:"Begleitperson anmelden",kind:"special"}),s,o),K(()=>Se(i,"value",t())),vt(),r})()}_t(["input"]);var Ll=h("<p>Details konnten nicht geladen werden."),Il=h("<div style=display:flex;gap:1rem;flex-wrap:wrap;justify-content:space-between><h3></h3><!$><!/>"),Nl=h("<div class=game-dialog><ul role=list style=display:grid;gap:0.5rem><li><strong style=color:var(--clr-accent-1)>Tag, Zeit:</strong> <br><!$><!/>, <!$><!/> - <!$><!/> Uhr</li><li><strong style=color:var(--clr-accent-1)>Beschreibung:</strong> <br><!$><!/></li></ul><div class=reservations><h5 style=margin-block-start:0>Plätze reservieren</h5><div class=reservation-table>"),Yl=h("<div class=count>"),Ol=h("<div class=reservation-table-entry><p>Reserviert für mich </p><!$><!/>"),Hl=h('<div class=reservation-table-entry><p>Reserviert für "<!$><!/>"</p><!$><!/>'),Bl=h('<div style="display:grid;gap:1rem;grid-template-columns:max-content 1fr"><!$><!/><!$><!/>');function zl(e){const t=un().uuid??"no-uuid-found",n=Ui(t);return l(je,{get fallback(){return l(E,{get children(){return U.loading.program}})},get children(){return l(D,{get when(){return e.publicResource()},get fallback(){return l(E,{type:"danger",get children(){return U.error.help}})},children:r=>l(D,{get when(){return r().kind==="SUCCESS"},get fallback(){return l(E,{type:"danger",get children(){return U.loading.program}})},get children(){return l(D,{when:n,get fallback(){return l(E,{type:"danger",get children(){return g(Ll)}})},children:i=>l(Ml,{get entry(){return i()},get myHelpReservations(){return e.reservations$.get()},get allReservations(){return r().data.reservations},get isEditable(){return e.isEditable},addReservation:a=>ie.push(e.reservations$,{...a,uuid:crypto.randomUUID()}),removeReservation:a=>{ie.remove(e.reservations$,s=>s.uuid!==a)},get link(){return e.link}})})}})})}})}function Ml(e){const{dateTime:t,kind:n}=e.entry,r=Te[n],i=xe(t.startDate);oe(i!==null,`Date '${JSON.stringify(t.startDate)}' is not a valid event date.`);const a=()=>e.myHelpReservations.filter(d=>"helpEntryUuid"in d&&d.helpEntryUuid===e.entry.uuid),s=(e.allReservations[e.entry.uuid]??0)-a().length,o=()=>Xt(e.entry.count).map(d=>{const m=a()[d];return m!==void 0?m:e.entry.count-s<=d?{kind:"RESERVED_OTHER"}:{kind:"FREE"}}),c=()=>a().find(d=>d.kind==="SELF")!==void 0;return[(()=>{var d=g(Il),m=d.firstChild,b=m.nextSibling,[v,S]=$(b.nextSibling);return u(m,()=>r.title),u(d,l(j,{get href(){return e.link("/helfen")},class:"button-link",get children(){return l(_e,{icon:"backward",label:"Zurück zur Helfer-Übersicht"})}}),v,S),d})(),(()=>{var d=g(Nl),m=d.firstChild,b=m.firstChild,v=b.firstChild,S=v.nextSibling,k=S.nextSibling,f=k.nextSibling,[_,y]=$(f.nextSibling),x=_.nextSibling,C=x.nextSibling,[P,F]=$(C.nextSibling),I=P.nextSibling,H=I.nextSibling,[Z,N]=$(H.nextSibling);Z.nextSibling;var ne=b.nextSibling,re=ne.firstChild,ge=re.nextSibling,q=ge.nextSibling,A=q.nextSibling,[T,B]=$(A.nextSibling),G=m.nextSibling,he=G.firstChild,V=he.nextSibling;return u(b,()=>U.days[i],_,y),u(b,()=>Ce(t.startDate.toPlainTime(),{minutes:!1}),P,F),u(b,()=>Ce(t.endDate.toPlainTime(),{minutes:!1}),Z,N),u(ne,()=>r.description,T,B),u(V,l(W,{get each(){return o()},children:(z,Q)=>[(()=>{var L=g(Yl);return u(L,()=>Q()+1),L})(),l(Me,{get children(){return[l(me,{get when(){return z.kind==="RESERVED_OTHER"},get children(){return l(E,{children:"Bereits reserviert"})}}),l(me,{get when(){return!e.isEditable},get children(){return l(E,{children:"Freier Platz"})}}),l(me,{get when(){return z.kind==="SELF"},get children(){return l(wt,{type:"success",get children(){var L=g(Ol),J=L.firstChild,le=J.nextSibling,[De,ae]=$(le.nextSibling);return u(L,l(Be,{icon:"trash",onClick:()=>e.removeReservation(z.kind==="SELF"?z.uuid:"should not happen")}),De,ae),L}})}}),l(me,{get when(){return z.kind==="FRIEND"},get children(){return l(wt,{type:"success",get children(){var L=g(Hl),J=L.firstChild,le=J.firstChild,De=le.nextSibling,[ae,Fe]=$(De.nextSibling);ae.nextSibling;var Le=J.nextSibling,[Ie,nt]=$(Le.nextSibling);return u(J,(()=>{var Sn=O(()=>z.kind==="FRIEND");return()=>Sn()?z.name:"[Fehler beim Laden]"})(),ae,Fe),u(L,l(Be,{icon:"trash",onClick:()=>e.removeReservation(z.kind==="FRIEND"?z.uuid:"should not happen")}),Ie,nt),L}})}}),l(me,{get when(){return z.kind==="FREE"},get children(){return l(D,{get when(){return c()},get fallback(){return(()=>{var L=g(Bl),J=L.firstChild,[le,De]=$(J.nextSibling),ae=le.nextSibling,[Fe,Le]=$(ae.nextSibling);return u(L,l(_e,{icon:"person-to-portal",label:"Mich anmelden",kind:"success",onClick:()=>e.addReservation({kind:"SELF",helpEntryUuid:e.entry.uuid,uuid:crypto.randomUUID()})}),le,De),u(L,l(Nt,{addFriend:Ie=>e.addReservation({kind:"FRIEND",helpEntryUuid:e.entry.uuid,name:Ie,uuid:crypto.randomUUID()})}),Fe,Le),L})()},get children(){return l(Nt,{addFriend:L=>e.addReservation({kind:"FRIEND",helpEntryUuid:e.entry.uuid,name:L,uuid:crypto.randomUUID()})})}})}})]}})]})),d})()]}var jl=h("<ul role=list>"),Kl=h("<li>"),Wl=h("<label class=input-radio><input type=radio><!$><!/>");function Zl(e){const t=e.layout??"vertical";return(()=>{var n=g(jl);return we(n,`radio-list ${t}`),u(n,l(W,{get each(){return e.items},children:r=>(()=>{var i=g(Kl);return u(i,l(Vl,{get label(){return r.label},get name(){return`${r.value}-${e.name}`},get value(){return r.value},get checked(){return r.checked},onValueUpdate:()=>e.onValueUpdate(r.value)})),i})()})),n})()}function Vl(e){return(()=>{var t=g(Wl),n=t.firstChild,r=n.nextSibling,[i,a]=$(r.nextSibling);return qt(n,"change",e.onValueUpdate),u(t,()=>e.label,i,a),K(()=>Ue(n,"name",e.name)),K(()=>Se(n,"value",e.value)),K(()=>Se(n,"checked",e.checked)),t})()}var ql=h("<p>Eines der Hauptziele der Luzerner Spieltage ist es, dass die Besucher/-innen noch nicht gespielte Spiele ausprobieren können. Dazu unterstützen uns jedes Jahr Freiwillige und erklären die ihnen bekannten Spiele aus der Spiele-Bibliothek. Diese Erklärbären sind durch ihr rotes T-Shirt erkennbar."),Et=h("<br>"),Jl=h("<div class=dynamic-columns><div></div><div><!$><!/><ul><li>Sie müssen nicht alle Spiele der Spiele-Bibliothek kennen!</li><li>Sie erklären Spiele während der eingeplanten Zeit<ul><li>Grundsätzlich spielen die Erklärbären nicht mit</li><li>Sobald die Spieler/-innen die Regeln verstanden haben (z.B. nach den ersten paar Runden) verlassen sie den Tisch</li><li>Sie stehen weiterhin für Fragen zur Verfügung und kommen allenfalls periodisch zum Tisch zurück</li></ul></li><li>Sie bringen Spiele für die Spiele-Bibliothek mit welche sie erklären können<ul><li>Diese Spiele sollen ein breites Spektrum, von einfach bis komplex, abdecken</li><li>Eine Liste der mitgebrachten Spiele (Spiele-Bibliothek) wird vor dem Event von allen Erklärbären zusammen erstellt</li><li>Vor dem Event notieren die Erklärbären, was sie aus der Spiele-Bibliothek erklären können - (Mitbringen eigener Spiele ist nicht Pflicht, falls genügend Spiele aus der Liste erklärt werden können)</li></ul></li><li>Sie erarbeiten gemeinsam vor dem Event eine Empfehlungsliste aus ca.&nbsp;6&nbsp;Spielen<ul><li>Alle Erklärbären sollen die Regeln dieser Spiele vor dem Event lesen"),Gl=h("<h3>"),Ql=h("<div style=display:grid;gap:1rem><!$><!/><!$><!/>"),Xl=h("<p>Bitte nimm mit uns <!$><!/> auf, damit wir uns kurz mit dir absprechen und dir diesen Bereich freischalten können."),ea=h("<em>Noch keine Einsätze eingetragen"),ta=h("<h4>Tag"),na=h("<h4>Uhrzeit"),ra=h('<div style="display:grid;grid-template-columns:repeat(2, 1fr);gap:1rem"><!$><!/><!$><!/>'),ia=h("<h5>Warnungen"),la=h("<ul>"),aa=h("<li>"),sa=h("<h4>Übersicht über alle Erklärbären"),ua=h("<div class=dynamic-columns><div><h5>Samstag</h5><table><thead><tr><th>Name</th><th>Zeit</th></tr></thead><tbody></tbody></table></div><div><h5>Sonntag</h5><table><thead><tr><th>Name</th><th>Zeit</th></tr></thead><tbody>"),Yt=h("<tr><td></td><td><!$><!/> - <!$><!/> Uhr");function oa(e){return[g(ql),g(Et),(()=>{var t=g(Jl),n=t.firstChild,r=n.nextSibling,i=r.firstChild,[a,s]=$(i.nextSibling);return a.nextSibling,u(n,l(ca,{get reservations$(){return e.save$.pipe(w.sub("helping"))},get roles(){return e.roles},get isEditable(){return e.isEditable}})),u(r,l(We,{level:3,title:"Was machen die Erklärbären"}),a,s),t})(),l(D,{get when(){return e.adminResource()},children:t=>l(ga,{get adminResource(){return t()}})})]}function ca(e){function t(){return e.reservations$.get().filter(n=>n.kind==="ERKLAERBAER")}return[l(We,{level:3,title:"Meine Einsätze"}),g(Et),l(Me,{get fallback(){return l(E,{get children(){var n=g(Xl),r=n.firstChild,i=r.nextSibling,[a,s]=$(i.nextSibling);return a.nextSibling,u(n,l(fe,{href:"/kontakt",children:"Kontakt"}),a,s),n}})},get children(){return l(me,{get when(){return e.roles.includes("erklaerbaer")},get children(){var n=g(Ql),r=n.firstChild,[i,a]=$(r.nextSibling),s=i.nextSibling,[o,c]=$(s.nextSibling);return u(n,l(W,{get each(){return t()},get fallback(){return g(ea)},children:d=>l(da,{job:d,updateJob:m=>{ie.update(e.reservations$,b=>b.uuid===d.uuid,m)},removeJob:()=>{ie.remove(e.reservations$,m=>m.uuid!==d.uuid)},get isEditable(){return e.isEditable}})}),i,a),u(n,l(D,{get when(){return e.isEditable},get children(){return l(be,{icon:"grid-2-plus",type:"success",onClick:()=>{ie.push(e.reservations$,{kind:"ERKLAERBAER",uuid:crypto.randomUUID(),slot:{day:"SATURDAY",from:10,to:18}})},get children(){var d=g(Gl);return u(d,()=>U.createNewEntry),d}})}}),o,c),n}})}})]}function da(e){function t(){const n=[],{day:r,from:i,to:a}=e.job.slot;i>=a&&n.push("Das Ende muss grösser sein als der Start.");const s=gn[r],{from:o,to:c}=s.open;return o>i&&n.push(`Die Spieltage öffnen am ${U.days[r]} erst um ${o} Uhr.`),c<a&&n.push(`Die Spieltage schliessen am ${U.days[r]} um ${c} Uhr.`),n}return l(E,{get onClose(){return O(()=>!!e.isEditable)()?e.removeJob:void 0},get children(){return[g(ta),l(Zl,{get items(){return[{label:U.days.SATURDAY,checked:e.job.slot.day==="SATURDAY",value:"SATURDAY"},{label:U.days.SUNDAY,checked:e.job.slot.day==="SUNDAY",value:"SUNDAY"}]},onValueUpdate:n=>{e.updateJob({...e.job,slot:{...e.job.slot,day:n}})},get name(){return`day-entry-${e.job.uuid}`},layout:"horizontal",get disabled(){return!e.isEditable}}),g(Et),g(na),(()=>{var n=g(ra),r=n.firstChild,[i,a]=$(r.nextSibling),s=i.nextSibling,[o,c]=$(s.nextSibling);return u(n,l(ht,{label:"Start",name:"from",get value(){return e.job.slot.from},onValueUpdate:d=>e.updateJob({...e.job,slot:{...e.job.slot,from:d}}),get disabled(){return!e.isEditable}}),i,a),u(n,l(ht,{label:"Ende",name:"to",get value(){return e.job.slot.to},onValueUpdate:d=>e.updateJob({...e.job,slot:{...e.job.slot,to:d}}),get disabled(){return!e.isEditable}}),o,c),n})(),l(D,{get when(){return t().length>0},get children(){return[g(ia),(()=>{var n=g(la);return u(n,l(W,{get each(){return t()},children:r=>(()=>{var i=g(aa);return u(i,r),i})()})),n})()]}})]}})}function ga(e){if(e.adminResource.kind==="FAILURE"||e.adminResource.data.erklaerbaer===null)return null;const t=ha(e.adminResource.data.erklaerbaer.entries);return[g(sa),(()=>{var n=g(ua),r=n.firstChild,i=r.firstChild,a=i.nextSibling,s=a.firstChild,o=s.nextSibling,c=r.nextSibling,d=c.firstChild,m=d.nextSibling,b=m.firstChild,v=b.nextSibling;return u(o,l(W,{get each(){return t.SATURDAY},children:S=>(()=>{var k=g(Yt),f=k.firstChild,_=f.nextSibling,y=_.firstChild,[x,C]=$(y.nextSibling),P=x.nextSibling,F=P.nextSibling,[I,H]=$(F.nextSibling);return I.nextSibling,u(f,()=>S.name),u(_,()=>S.slot.from,x,C),u(_,()=>S.slot.to,I,H),k})()})),u(v,l(W,{get each(){return t.SUNDAY},children:S=>(()=>{var k=g(Yt),f=k.firstChild,_=f.nextSibling,y=_.firstChild,[x,C]=$(y.nextSibling),P=x.nextSibling,F=P.nextSibling,[I,H]=$(F.nextSibling);return I.nextSibling,u(f,()=>S.name),u(_,()=>S.slot.from,x,C),u(_,()=>S.slot.to,I,H),k})()})),n})()]}function ha(e){const{FRIDAY:t,SATURDAY:n,SUNDAY:r}=Object.groupBy(e,i=>i.slot.day);return{FRIDAY:(t??[]).toSorted((i,a)=>i.slot.from-a.slot.from||i.slot.to-a.slot.to),SATURDAY:(n??[]).toSorted((i,a)=>i.slot.from-a.slot.from||i.slot.to-a.slot.to),SUNDAY:(r??[]).toSorted((i,a)=>i.slot.from-a.slot.from||i.slot.to-a.slot.to)}}function ma(){return l(E,{children:"Inhalt folgt."})}const Ot=200,Ht=500;function hn(e){const t={};e.title.trim().length===0&&(t.title=[...t.title??[],"Titel ist ein Pflichtfeld"]),e.organizer.trim().length===0&&(t.organizer=[...t.organizer??[],"'Organisiert durch' ist ein Pflichtfeld"]),e.shortDescription.trim().length===0&&(t.shortDescription=[...t.shortDescription??[],"'Kurze Beschreibung' ist ein Pflichtfeld"]),e.shortDescription.trim().length>Ot&&(t.shortDescription=[...t.shortDescription??[],U.charLimitBy.replace("{}",String(Ot))]),e.longDescription.trim().length>Ht&&(t.longDescription=[...t.longDescription??[],U.charLimitBy.replace("{}",String(Ht))]),e.timeSlots.length===0?t.timeSlots=[...t.timeSlots??[],U.missingSlot]:e.timeSlots.forEach(r=>{const i=Ge(r.start.time);i.kind==="ERROR"&&(t.timeSlots=[...t.timeSlots??[],"Fehler im Zeitslot, 'Start'"]);const a=Ge(r.end.time);a.kind==="ERROR"&&(t.timeSlots=[...t.timeSlots??[],"Fehler im Zeitslot, 'Ende'"]),i.kind==="TIME"&&a.kind==="TIME"&&a.value.since(i.value).hours<0&&(t.timeSlots=[...t.timeSlots??[],"Zeitfenster fehlerhaft ('Ende' vor 'Start')"])});const n=Object.values(t).flat();return{allErrors:n,byField:t,hasErrors:n.length>0}}var $a=h("<ul class=link-list role=list>"),fa=h("<br>"),Bt=h("<h3>"),ba=h("<li>"),Sa=h("<span> mit Fehlern");function _a(e){const t=xt();return[(()=>{var n=g($a);return u(n,l(W,{get each(){return e.programEntries$.get()},children:r=>{const i=hn(r);return(()=>{var a=g(ba);return u(a,l(j,{get href(){return e.link(`/erstellen/${r.uuid}`)},class:"button-link",get children(){return l(be,{get icon(){return i.hasErrors?"triangle-exclamation":"arrow-right"},get type(){return i.hasErrors?"danger":"special"},get children(){return[(()=>{var s=g(Bt);return u(s,(()=>{var o=O(()=>r.title.trim().length===0);return()=>o()?"[Titel fehlt noch]":r.title})()),s})(),l(tt,{get kind(){return i.hasErrors?"danger":"special"},get children(){return["Status: ",O(()=>U.publishingSteps[r.status]),O(()=>O(()=>!!i.hasErrors)()?g(Sa):"")]}})]}})}})),a})()}})),n})(),g(fa),l(D,{get when(){return e.isEditable},get children(){return l(be,{icon:"grid-2-plus",type:"success",onClick:()=>{const n=crypto.randomUUID();ie.push(e.programEntries$,{uuid:n,status:"draft",title:"",organizer:"",shortDescription:"",longDescription:"",participating:{kind:"LIMITED",maxSeats:6},timeSlots:[],tagNames:""}),t(e.link(`/erstellen/${n}`))},get children(){var n=g(Bt);return u(n,()=>U.createNewGameRound),n}})}})]}var mn=h("<p>");function He(e){const[t,n]=ee(!1),r=e.showErrors==="ALWAYS",i=()=>r||t()?e.errors??[]:[];return[l(jt,{get label(){return e.label},get name(){return e.name},get value(){return e.value$.get()},onValueUpdate:a=>e.value$.set(a),onBlur:()=>n(!0),get type(){return e.type},get required(){return e.required},get disabled(){return e.disabled}}),l(D,{get when(){return i().length>0},get children(){return l(E,{type:"danger",get children(){return l(W,{get each(){return i()},children:a=>(()=>{var s=g(mn);return u(s,a),s})()})}})}})]}function va(e){const[t,n]=ee(!1),r=e.showErrors==="ALWAYS",i=()=>r||t()?e.errors??[]:[];return[l(ht,{get label(){return e.label},get name(){return e.name},get value(){return e.value$.get()},onValueUpdate:a=>e.value$.set(a),onBlur:()=>n(!0),get required(){return e.required},get min(){return e.min},get max(){return e.max},get disabled(){return e.disabled}}),l(D,{get when(){return i().length>0},get children(){return l(E,{type:"danger",get children(){return l(W,{get each(){return i()},children:a=>(()=>{var s=g(mn);return u(s,a),s})()})}})}})]}const ka=200;var ya=h("<button class=event-link><span>Details & Teilnahme"),xa=h('<li class=event-entry><h3 class=event-title></h3><div class=event-details><div class=event-tags><strong>Organisiert durch:</strong><!$><!/></div><div class=event-tags><strong>Tag, Zeit:</strong><span><!$><!/>, <!$><!/> - <!$><!/> Uhr</span></div><div class=event-tags></div><div class=event-tags><strong>Kategorien:</strong> <!$><!/></div></div><div class="event-description content"><p><strong>Kurzbeschreibung:</strong><br><!$><!/></p></div><ul role=list class=event-links><li>'),pa=h("<em>Teilnahme ohne Anmeldung möglich."),Da=h("<strong>Freie Plätze:"),Ea=h("<em>keine Kategorien");function Ra(e){return(()=>{var t=g(xa),n=t.firstChild,r=n.nextSibling,i=r.firstChild,a=i.firstChild,s=a.nextSibling,[o,c]=$(s.nextSibling),d=i.nextSibling,m=d.firstChild,b=m.nextSibling,v=b.firstChild,[S,k]=$(v.nextSibling),f=S.nextSibling,_=f.nextSibling,[y,x]=$(_.nextSibling),C=y.nextSibling,P=C.nextSibling,[F,I]=$(P.nextSibling);F.nextSibling;var H=d.nextSibling,Z=H.nextSibling,N=Z.firstChild,ne=N.nextSibling,re=ne.nextSibling,[ge,q]=$(re.nextSibling),A=r.nextSibling,T=A.firstChild,B=T.firstChild,G=B.nextSibling,he=G.nextSibling,[V,z]=$(he.nextSibling),Q=A.nextSibling,L=Q.firstChild;return u(n,()=>e.entry.title),u(i,()=>e.entry.organizer,o,c),u(b,()=>U.days[xe(e.entry.timeSlot.startDate)??"FRIDAY"],S,k),u(b,()=>Ce(e.entry.timeSlot.startDate.toPlainTime()),y,x),u(b,()=>Ce(e.entry.timeSlot.endDate.toPlainTime()),F,I),u(H,(()=>{var J=O(()=>e.entry.participating.kind==="NONE");return()=>J()?g(pa):[g(Da)," ",O(()=>Math.max(e.entry.participating.maxSeats-e.reservations,0))," ","(von ",O(()=>e.entry.participating.maxSeats),")"]})()),u(Z,(()=>{var J=O(()=>e.entry.tagNames.trim().length>0);return()=>J()?e.entry.tagNames.split(",").map(le=>le.trim()).filter(le=>le.length>0).join(", "):g(Ea)})(),ge,q),u(T,()=>yn(e.entry.shortDescription,ka),V,z),u(L,l(j,{get href(){return e.link(`${e.basePath}/${e.entry.uuid}`)},class:"button-link",get children(){return g(ya)}})),t})()}var Aa=h("<p>");function zt(e){const[t,n]=ee(!1),r=e.showErrors==="ALWAYS",i=()=>r||t()?e.errors??[]:[];return[l(In,{get label(){return e.label},get name(){return e.name},get value(){return e.value$.get()},onValueUpdate:a=>e.value$.set(a),onBlur:()=>n(!0),get required(){return e.required},get size(){return e.size},get disabled(){return e.disabled}}),l(D,{get when(){return i().length>0},get children(){return l(E,{type:"danger",get children(){return l(W,{get each(){return i()},children:a=>(()=>{var s=g(Aa);return u(s,a),s})()})}})}})]}var wa=h("<label class=input-checkbox><!$><!/><input type=checkbox><!$><!/>");function Ta(e){return(()=>{var t=g(wa),n=t.firstChild,[r,i]=$(n.nextSibling),a=r.nextSibling,s=a.nextSibling,[o,c]=$(s.nextSibling);return u(t,()=>e.labels.left,r,i),qt(a,"blur",e.onBlur),a.addEventListener("change",d=>e.onChange(d.target.checked)),u(t,()=>e.labels.right,o,c),K(d=>{var m=e.name,b=e.disabled;return m!==d.e&&Ue(a,"name",d.e=m),b!==d.t&&Se(a,"disabled",d.t=b),d},{e:void 0,t:void 0}),K(()=>Se(a,"value",e.value)),K(()=>Se(a,"checked",e.checked)),t})()}var Ua=h("<p>");function $n(e){const[t,n]=ee(!1),r=e.showErrors==="ALWAYS",i=()=>r||t()?e.errors??[]:[];return[l(Ta,{get labels(){return{left:e.options.left.label,right:e.options.right.label}},get name(){return e.name},get checked(){return e.value$.get()===e.options.right.value},onChange:a=>e.value$.set(a?e.options.right.value:e.options.left.value),onBlur:()=>n(!0),get value(){return e.name},get disabled(){return e.disabled===!0}}),l(D,{get when(){return i().length>0},get children(){return l(E,{type:"danger",get children(){return l(W,{get each(){return i()},children:a=>(()=>{var s=g(Ua);return u(s,a),s})()})}})}})]}var Ca=h("<p>Details konnten nicht geladen werden."),Pa=h("<h2>"),Fa=h("<div class=dynamic-columns><div><form novalidate><!$><!/><!$><!/><!$><!/><!$><!/><!$><!/><!$><!/><!$><!/></form></div><div><h3>Vorschau</h3><br><div style=display:flex;gap:1rem;flex-wrap:wrap;align-items:center;justify-content:space-between><!$><!/><!$><!/></div><br><!$><!/><br><ul role=list class=link-list>"),La=h("<span> mit Fehlern <!$><!/>"),Ia=h("<em>Keine (gültigen) Zeitslots gefunden"),Na=h("<h4>Spielrunde inkomplett"),Ya=h("<p>Du hast noch einen oder mehre Fehler/fehlende Informationen in dieser Spielrunde:"),Oa=h("<ul>"),fn=h("<li>"),Ha=h("<label>Zeitfenster"),Ba=h("<h3>Neues Zeitfenster"),za=h("<ul role=list class=link-list><!$><!/><li>"),Ma=h("<div style=display:grid;gap:1rem><div><label>Tag</label><div style=display:flex;flex-wrap:wrap;gap:0.5rem><!$><!/><!$><!/></div></div><!$><!/><!$><!/>");function ja(e){const t=un().uuid??"no-uuid-found";return l(je,{get fallback(){return l(E,{get children(){return U.loading.program}})},get children(){return l(D,{get when(){return e.publicResource()},get fallback(){return l(E,{type:"danger",get children(){return U.error.help}})},children:n=>l(D,{get when(){return n().kind==="SUCCESS"},get fallback(){return l(E,{type:"danger",get children(){return U.loading.program}})},get children(){return l(Jt,{get fallback(){return l(E,{type:"danger",get children(){return g(Ca)}})},get children(){return l(Ka,{get entry$(){return ie.findExact(e.programEntries$,r=>r.uuid===t)},get isEditable(){return e.isEditable},get link(){return e.link}})}})}})})}})}function Ka(e){const t=()=>hn(e.entry$.get());return[(()=>{var n=g(Pa);return u(n,()=>e.entry$.get().title),n})(),(()=>{var n=g(Fa),r=n.firstChild,i=r.firstChild,a=i.firstChild,[s,o]=$(a.nextSibling),c=s.nextSibling,[d,m]=$(c.nextSibling),b=d.nextSibling,[v,S]=$(b.nextSibling),k=v.nextSibling,[f,_]=$(k.nextSibling),y=f.nextSibling,[x,C]=$(y.nextSibling),P=x.nextSibling,[F,I]=$(P.nextSibling),H=F.nextSibling,[Z,N]=$(H.nextSibling),ne=r.nextSibling,re=ne.firstChild,ge=re.nextSibling,q=ge.nextSibling,A=q.firstChild,[T,B]=$(A.nextSibling),G=T.nextSibling,[he,V]=$(G.nextSibling),z=q.nextSibling,Q=z.nextSibling,[L,J]=$(Q.nextSibling),le=L.nextSibling,De=le.nextSibling;return u(i,l(He,{get value$(){return e.entry$.pipe(w.sub("title"))},label:"Titel",name:"title",get showErrors(){return e.entry$.get().status==="published"?"ALWAYS":"ON_BLUR"},get errors(){return t().byField.title??[]},get disabled(){return!e.isEditable}}),s,o),u(i,l(He,{get value$(){return e.entry$.pipe(w.sub("organizer"))},label:"Organisiert durch",name:"organizer",get showErrors(){return e.entry$.get().status==="published"?"ALWAYS":"ON_BLUR"},get errors(){return t().byField.organizer??[]},get disabled(){return!e.isEditable}}),d,m),u(i,l(zt,{get value$(){return e.entry$.pipe(w.sub("shortDescription"))},label:"kurze Beschreibung",name:"descriptionShort",size:"small",get showErrors(){return e.entry$.get().status==="published"?"ALWAYS":"ON_BLUR"},get errors(){return t().byField.shortDescription??[]},get disabled(){return!e.isEditable}}),v,S),u(i,l(zt,{get value$(){return e.entry$.pipe(w.sub("longDescription"))},label:"lange Beschreibung (optional)",name:"descriptionLong",get showErrors(){return e.entry$.get().status==="published"?"ALWAYS":"ON_BLUR"},get errors(){return t().byField.longDescription??[]},get disabled(){return!e.isEditable}}),f,_),u(i,l(Va,{get value$(){return e.entry$.pipe(w.sub("participating"))}}),x,C),u(i,l(qa,{get slots$(){return e.entry$.pipe(w.sub("timeSlots"))}}),F,I),u(i,l(He,{get value$(){return e.entry$.pipe(w.sub("tagNames"))},label:"Tags",name:"tags",get showErrors(){return e.entry$.get().status==="published"?"ALWAYS":"ON_BLUR"},get errors(){return t().byField.tags??[]},get disabled(){return!e.isEditable}}),Z,N),u(q,l(tt,{get kind(){return t().hasErrors?"danger":"special"},get children(){return["Status: ",O(()=>U.publishingSteps[e.entry$.get().status]),O(()=>O(()=>!!t().hasErrors)()?(()=>{var ae=g(La),Fe=ae.firstChild,Le=Fe.nextSibling,[Ie,nt]=$(Le.nextSibling);return u(ae,l(se,{icon:"triangle-exclamation"}),Ie,nt),ae})():"")]}}),T,B),u(q,l($n,{get value$(){return e.entry$.pipe(w.sub("status"))},options:{left:{label:"Entwurf",value:"draft"},right:{label:"Veröffentlicht",value:"published"}},name:"status"}),he,V),u(ne,l(D,{get when(){return e.entry$.get().status==="published"},get children(){return l(Wa,{get errors(){return t()}})}}),L,J),u(De,l(W,{get each(){return Za(e.entry$.get())},get fallback(){return g(Ia)},children:ae=>l(Ra,{entry:ae,basePath:"/programm",get link(){return e.link},reservations:0})})),n})()]}function Wa(e){return l(D,{get when(){return e.errors.hasErrors},get children(){return l(E,{type:"danger",get children(){return[g(Na),g(Ya),(()=>{var t=g(Oa);return u(t,l(W,{get each(){return e.errors.allErrors},children:n=>(()=>{var r=g(fn);return u(r,n),r})()})),t})()]}})}})}function Za(e){const t=[];return e.timeSlots.forEach(n=>{const r=Ge(n.start.time),i=Ge(n.end.time);r.kind==="ERROR"||i.kind==="ERROR"||t.push({uuid:n.uuid,title:e.title,organizer:e.organizer,timeSlot:{startDate:Xe[n.start.day].toPlainDateTime({hour:r.value.hour,minute:r.value.minute}),endDate:Xe[n.end.day].toPlainDateTime({hour:i.value.hour,minute:i.value.minute})},shortDescription:e.shortDescription,longDescription:e.longDescription,participating:e.participating,tagNames:e.tagNames})}),t}function Va(e){return[l($n,{get value$(){return e.value$.pipe(w.sub("kind"))},options:{left:{label:"Keine Anmeldung",value:"NONE"},right:{label:"Limitierte Plätze",value:"LIMITED"}},name:"participating"}),l(D,{get when(){return e.value$.get().kind==="LIMITED"},get children(){return l(va,{get value$(){return e.value$.pipe(w.sub("maxSeats"))},label:"Maximale Plätze",name:"maxSeats"})}})]}function qa(e){return[g(Ha),(()=>{var t=g(za),n=t.firstChild,[r,i]=$(n.nextSibling),a=r.nextSibling;return u(t,l(W,{get each(){return e.slots$.get()},children:s=>{const o=ie.findExact(e.slots$,c=>c.uuid===s.uuid);return(()=>{var c=g(fn);return u(c,l(E,{onClose:()=>ie.remove(e.slots$,d=>d.uuid!==s.uuid),get children(){var d=g(Ma),m=d.firstChild,b=m.firstChild,v=b.nextSibling,S=v.firstChild,[k,f]=$(S.nextSibling),_=k.nextSibling,[y,x]=$(_.nextSibling),C=m.nextSibling,[P,F]=$(C.nextSibling),I=P.nextSibling,[H,Z]=$(I.nextSibling);return u(v,l(ue,{label:"Samstag",get kind(){return s.start.day==="SATURDAY"?"success":"gray"},onClick:()=>{ie.findExact(e.slots$,N=>N.uuid===s.uuid).update(N=>({...N,start:{...N.start,day:"SATURDAY"},end:{...N.end,day:"SATURDAY"}}))}}),k,f),u(v,l(ue,{label:"Sonntag",get kind(){return s.start.day==="SUNDAY"?"success":"gray"},onClick:()=>{ie.findExact(e.slots$,N=>N.uuid===s.uuid).update(N=>({...N,start:{...N.start,day:"SUNDAY"},end:{...N.end,day:"SUNDAY"}}))}}),y,x),u(d,l(He,{get value$(){return o.pipe(w.sub("start")).pipe(w.sub("time"))},label:"Start",name:"start"}),P,F),u(d,l(He,{get value$(){return o.pipe(w.sub("end")).pipe(w.sub("time"))},label:"Ende",name:"end"}),H,Z),d}})),c})()}}),r,i),u(a,l(be,{icon:"circle-plus",type:"success",onClick:()=>ie.push(e.slots$,{uuid:crypto.randomUUID(),start:{day:"SATURDAY",time:"10:00"},end:{day:"SATURDAY",time:"12:00"}}),get children(){return g(Ba)}})),t})()]}const Ja=R({name:p(),slot:R({day:pe,from:de(),to:de()})}),bn=R({uuid:p().uuid(),name:p()}),Ga=bn.extend({helpType:p(),slot:R({start:R({day:pe,time:p()}),end:R({day:pe,time:p()})})}),Qa=bn.extend({ref:p().uuid()}),Xa=Pe([Ga,Qa]),es=R({help:ye(Xa)}),ts=R({entries:ye(Ja)}),ns=R({admin:Tt(es),erklaerbaer:Tt(ts)});async function rs(e){const t=await Bn(e);if(t.kind==="FAILURE")return console.error("Unexpected error. Maybe network, maybe server error."),{kind:"FAILURE"};const n=ns.safeParse(t.data);return n.success?{kind:"SUCCESS",data:n.data}:{kind:"FAILURE"}}var is=h("<br>"),ls=h("<ul role=list class=link-list><!$><!/><li><h3>Erklärbären</h3><code><pre>"),as=h("<li><h3></h3><code><pre>");function ss(e){return l(D,{get when(){return e.roles.includes("admin")},get fallback(){return l(E,{type:"danger",children:"Du hast keinen Zugriff auf diesen Bereich."})},get children(){return l(D,{get when(){return e.adminResource()},children:t=>l(us,{get adminResource(){return t()}})})}})}function us(e){const[t,n]=ee(null);if(e.adminResource.kind==="FAILURE")return null;const{admin:r}=e.adminResource.data;if(r===null)return null;const{help:i}=r,a=os(i),s=Object.keys(Te);return[l(pt,{dayFilter:t,setDayFilter:n}),g(is),(()=>{var o=g(ls),c=o.firstChild,[d,m]=$(c.nextSibling),b=d.nextSibling,v=b.firstChild,S=v.nextSibling,k=S.firstChild;return u(o,l(W,{each:s,children:f=>l(D,{get when(){return O(()=>a[f]!==void 0)()&&a[f].length>0},get children(){var _=g(as),y=_.firstChild,x=y.nextSibling,C=x.firstChild;return u(y,()=>Te[f].title),u(C,()=>JSON.stringify(a[f],null,2)),_}})}),d,m),u(k,()=>JSON.stringify(a.erklaerbaer,null,2)),o})()]}function os(e){const t=e.map(n=>{if("ref"in n){const r=Ae.find(i=>i.uuid===n.ref);return oe(r!==void 0,`No help time found with uuid '${n.ref}'`),{meta:n,found:r}}else return n}).map(n=>"meta"in n?{uuid:n.meta.uuid,name:n.meta.name,helpType:n.found.kind,slot:{start:{day:xe(n.found.dateTime.startDate)??"FRIDAY",time:n.found.dateTime.startDate.toPlainTime().toJSON()},end:{day:xe(n.found.dateTime.endDate)??"FRIDAY",time:n.found.dateTime.endDate.toPlainTime().toJSON()}}}:n);return Object.groupBy(t,n=>n.helpType)}function cs(e){const[t]=Ve(Ni),[n]=Ve(()=>rs(e.secret)),r=ol({meta:{saveState:"IDLE",lastSaved:new Date,roles:e.initState.roles},save:e.initState.data}),i=crypto.randomUUID(),[a,s]=ee(!1);Ve(()=>JSON.stringify(r.get().save),async()=>{if(!a()){s(!0);return}if(e.initState.status!=="published"){Gt("Diese Anmeldung wurde deaktiviert und kann nicht editiert werden.",{kind:"danger",uuid:i});return}const c=Ln(r.get().save);try{const d=await sr(r.get().meta,c,e.secret);d.kind==="FAILURE"?console.error(d):r.pipe(w.sub("meta")).pipe(w.sub("lastSaved")).set(d.data)}catch(d){console.error(d),r.pipe(w.sub("meta")).pipe(w.sub("saveState")).set("ERROR")}});function o(c){return`${c}?secret=${e.secret}`}return l(li,{explicitLinks:!0,children:[{path:"/",component:()=>l($e,{title:"Wo möchtest du starten?",get roles(){return r.get().meta.roles},link:o,get saveState(){return r.get().meta.saveState},get lastSaved(){return r.get().meta.lastSaved},get children(){return l(Si,{get roles(){return r.get().meta.roles},link:o})}})},{path:"/programm",component:()=>l($e,{title:"Programm",get roles(){return r.get().meta.roles},link:o,get saveState(){return r.get().meta.saveState},get lastSaved(){return r.get().meta.lastSaved},get children(){return l(ma,{})}})},{path:"/erstellen",component:()=>l($e,{title:"Programmpunkte erstellen und editieren",get roles(){return r.get().meta.roles},link:o,get saveState(){return r.get().meta.saveState},get lastSaved(){return r.get().meta.lastSaved},get children(){return l(_a,{get programEntries$(){return r.pipe(w.sub("save")).pipe(w.sub("program")).pipe(w.sub("organising"))},link:o,get isEditable(){return e.initState.status==="published"}})}})},{path:"/erstellen/:uuid",component:()=>l($e,{get roles(){return r.get().meta.roles},link:o,get saveState(){return r.get().meta.saveState},get lastSaved(){return r.get().meta.lastSaved},parentPath:"/erstellen",get children(){return l(ja,{get programEntries$(){return r.pipe(w.sub("save")).pipe(w.sub("program")).pipe(w.sub("organising"))},publicResource:t,link:o,get isEditable(){return e.initState.status==="published"}})}})},{path:"/helfen",component:()=>l($e,{title:"Helfen",get roles(){return r.get().meta.roles},link:o,get saveState(){return r.get().meta.saveState},get lastSaved(){return r.get().meta.lastSaved},showQuickmenu:!0,get children(){return l(Wi,{get reservations$(){return r.pipe(w.sub("save")).pipe(w.sub("helping"))},publicResource:t,get isEditable(){return e.initState.status==="published"},link:o,get roles(){return r.get().meta.roles}})}})},{path:"/helfen/:uuid",component:()=>l($e,{link:o,get roles(){return r.get().meta.roles},get saveState(){return r.get().meta.saveState},get lastSaved(){return r.get().meta.lastSaved},showQuickmenu:!0,parentPath:"/helfen",get children(){return l(zl,{get reservations$(){return r.pipe(w.sub("save")).pipe(w.sub("helping"))},publicResource:t,link:o,get isEditable(){return e.initState.status==="published"}})}})},{path:"/erklaerbaer",component:()=>l($e,{title:"Helfen: Erklärbären",get roles(){return r.get().meta.roles},link:o,get saveState(){return r.get().meta.saveState},get lastSaved(){return r.get().meta.lastSaved},showQuickmenu:!0,parentPath:"/helfen",get children(){return l(oa,{get save$(){return r.pipe(w.sub("save"))},adminResource:n,get roles(){return r.get().meta.roles},get isEditable(){return e.initState.status==="published"}})}})},{path:"/helfen/admin",component:()=>l($e,{title:"Helfer-Übersicht",get roles(){return r.get().meta.roles},link:o,get saveState(){return r.get().meta.saveState},get lastSaved(){return r.get().meta.lastSaved},showQuickmenu:!0,parentPath:"/helfen",get children(){return l(ss,{get reservations$(){return r.pipe(w.sub("save")).pipe(w.sub("helping"))},adminResource:n,link:o,get roles(){return r.get().meta.roles}})}})},{path:"/zusammenfassung",component:()=>l($e,{title:"Zusammenfassung",get roles(){return r.get().meta.roles},link:o,get saveState(){return r.get().meta.saveState},get lastSaved(){return r.get().meta.lastSaved},showQuickmenu:!0,get children(){return l(bl,{get save$(){return r.pipe(w.sub("save"))},publicResource:t,link:o,get isEditable(){return e.initState.status==="published"}})}})},{path:"*",component:()=>l($e,{title:"Seite nicht gefunden",get roles(){return r.get().meta.roles},link:o,get saveState(){return r.get().meta.saveState},get lastSaved(){return r.get().meta.lastSaved},showQuickmenu:!0,get children(){return l(E,{type:"danger",get children(){return U.error.siteNotFound}})}})}]})}function ds(){return l(E,{get children(){return U.loading.registration}})}function Ss(){const t=URL.parse(location.toString().replace("#/",""))?.searchParams.get("secret")??"no-secret-found",[n]=Ve(()=>lr(t));return l(Jt,{fallback:r=>(console.error(r),l(E,{type:"danger",get children(){return U.error.general}})),get children(){return l(je,{get fallback(){return l(ds,{})},get children(){return l(Me,{get children(){return l(me,{get when(){return n()},children:r=>{const{kind:i,value:a}=xn(r());return i==="FAILURE"?a.reason==="SECRET_INVALID"?l(E,{type:"danger",get children(){return U.error.secretError}}):(console.error(a),l(E,{type:"danger",get children(){return U.error.ourMistake}})):l(cs,{get initState(){return a.data},secret:t})}})}})}})}})}export{Ss as MeineAnmeldungWrapper};
