import{e as we,d as Ft,f as ht,c as V,B as U,g as ve,h as fe,I as Pt,i as ae,b as _e,S as tt,u as Ht}from"./utils.CcLb823t.js";import{g as b,t as v,r as gt,h as T,j as ft,k as We,l as qe,n as mt,e as ne,b as G,p as Ze,q as Tt,w as Ot,x as Nt,y as Yt,c as s,z as Bt,A as le,S as P,B as jt,C as $t,D as Ue,E as Ve,m as nt,G as Kt,H as Mt,I as pe,i as d,a as S,s as ye,J as zt,M,F as me,f as xe,K as se,L as Le,N as Re,O as Ge,P as Wt,u as qt,d as rt,Q as Zt}from"./web.Dlx1uc1X.js";import{c as K,u as Vt}from"./store.mwRln7Ki.js";import{e as Je,o as Q,n as Ke,s as H,u as bt,l as oe,a as St}from"./types.BB3bk5F8.js";import"./Textarea.COdepdvQ.js";const[ge,Ee]=K([]);function vt(e,t){if(t?.uuid!==void 0&&ge.find(u=>u.uuid===t.uuid)!==void 0)return Me(t.uuid,e,t);const n=t?.uuid??crypto.randomUUID(),r=t?.duration??5e3,i=t?.kind??"gray",l=t?.dismissable??!0,a=setTimeout(()=>{Ee(ge.filter(u=>u.uuid!==n))},r);return Ee(ge.length,{uuid:n,kind:i,message:e,duration:r,dismissable:l,cleanup:()=>clearTimeout(a)}),n}function Me(e,t,n){const r=ge.find(o=>o.uuid===e);if(r===void 0)return e;r.cleanup();const i=n.duration??r.duration,l=n.kind??r.kind,a=n?.dismissable??r.dismissable,u=setTimeout(()=>{Ee(ge.filter(o=>o.uuid!==e))},i);return Ee(o=>o.uuid===e,{uuid:e,kind:l,message:t,duration:i,dismissable:a,cleanup:()=>clearTimeout(u)}),e}const Gt=Je(["SATURDAY","SUNDAY"]);Q({uuid:H().uuid(),day:Gt,from:Ke(),to:Ke()}).refine(e=>e.from<e.to,{message:"A TimeSlot can't end before it starts."});Q({name:H(),label:H(),description:H()});const Jt=Je(["draft","published","archived"]);async function Qt(e){const t=new URL(we("/lst26/load"));t.searchParams.append("secret",e);const n=await fetch(t);if(!n.ok)return{kind:"FAILURE"};const r=await n.json();return typeof r=="object"&&r!==null?{kind:"SUCCESS",data:r}:(console.error("`last_save` not found on ",r),{kind:"FAILURE"})}async function Xt(e,t){try{const n=await fetch(we("/lst26/save"),{method:"POST",body:JSON.stringify({secret:t,save:e}),headers:{"Content-Type":"application/json"}});return n.ok?{kind:"SUCCESS",data:t}:(console.error(await n.text()),{kind:"FAILURE"})}catch(n){return console.error(n),{kind:"FAILURE"}}}async function en(e){try{const t=new URL(we("/lst26/help"));t.searchParams.append("secret",e);const n=await fetch(t,{headers:{"Content-Type":"application/json"}});return n.ok?{kind:"SUCCESS",data:await n.json()}:(console.error(await n.text()),{kind:"FAILURE"})}catch(t){return console.error(t),{kind:"FAILURE"}}}const tn=Q({name:H(),email:H(),mobile:H()}),nn=bt([Q({kind:oe("SELF"),helpEntryUuid:H().uuid(),uuid:H().uuid()}),Q({kind:oe("FRIEND"),helpEntryUuid:H().uuid(),name:H(),uuid:H().uuid()})]),rn=Q({version:oe(3),contact:tn,helping:St(nn)}),an=Q({kind:oe("SUCCESS"),status:Jt,data:rn});async function ln(e){if(e.length!==36&&e.length!==4)return{kind:"FAILURE",reason:"SECRET_INVALID"};const t=await Qt(e);if(t.kind==="FAILURE")return console.error("Unexpected error. Maybe network, maybe server error."),{kind:"FAILURE",reason:"GENERAL"};const n=an.safeParse(t.data);return n.success?{kind:"SUCCESS",data:n.data}:(console.error(n.error),{kind:"FAILURE",reason:"PARSE_ERROR"})}const Ie=crypto.randomUUID();async function sn(e,t,n){const[r,i]=K(e);i("saveState","SAVING"),vt("Am Speichern...",{uuid:Ie,dismissable:!1});const l=new Date;try{if((await Xt(t,n)).kind==="FAILURE")throw Error("")}catch(a){return i("saveState","ERROR"),console.error(a),Me(Ie,"Speichern war nicht möglich!",{kind:"danger",duration:1e4,dismissable:!0}),{kind:"FAILURE"}}return Me(Ie,`Zuletzt gespeichert um: ${ht(l)} Uhr`,{kind:"success",dismissable:!0}),i("saveState","IDLE"),{kind:"SUCCESS",data:l}}const on=Ft(sn,1e3);var it=v("<br>"),un=v("<strong>Donnerstag, 21. August 2025"),cn=v("<p>Deine Anmeldung wird geladen..."),dn=v("<p>Das Programm wird geladen..."),hn=v("<p>Leider ist ein unerwarteter Fehler passiert. Versuche deine Anmeldung erneut zu laden. Wiederholt sich dieser Fehler, bitte kontaktiere uns sobald als möglich über das <a href=/kontakt>Kontaktformular</a>, da dies nicht passieren sollte."),gn=v("<p>Wir konnten leider keine Anmeldung finden. Wenn du bereits eine Anmeldung begonnen hast, solltest du den korrekten Link per E-Mail erhalten haben.<br><br> Falls du noch keine Anmeldung begonnen hast, kannst du <a href=/anmeldung>hier</a> deine persönliche Anmeldung beginnen. <br><br>Für generelle Fragen oder Probleme, schreibe uns doch bitte über unser <a href=/kontatk>Kontaktformular</a>."),fn=v("<p>Wir konnten leider keine Spielrunde unter diesem Link finden.<br><br>Vermutlich liegt es an uns. Bitte kontaktiere uns sobald als möglich über das "),mn=v("<p>Leider ist ein unerwarteter Fehler passiert. Vermutlich liegt es an uns. Bitte kontaktiere uns sobald als möglich über das <a href=/kontakt>Kontaktformular</a>."),$n=v("<p>Leider ist ein unerwarteter Fehler passiert beim Laden des Programmes. Vermutlich liegt es an uns. Bitte kontaktiere uns sobald als möglich über das <a href=/kontakt>Kontaktformular</a>."),bn=v("<p>Leider ist ein unerwarteter Fehler passiert beim Laden von Daten. Vermutlich liegt es an uns. Bitte kontaktiere uns sobald als möglich über das <a href=/kontakt>Kontaktformular</a>.");b(it),b(it),b(un);const Sn={registration:b(cn),program:b(dn)},vn={general:b(hn),secretError:b(gn),gameroundUuidError:b(fn),ourMistake:b(mn),program:b($n),help:b(bn)},_n="Die Eingabe scheint keine gültige E-Mail-Adresse zu sein.",kn="Dies ist ein Pflichtfeld.",pn={FRIDAY:"Freitag",SATURDAY:"Samstag",SUNDAY:"Sonntag"},N={loading:Sn,error:vn,invalidEmail:_n,mandatoryField:kn,days:pn};function _t(){let e=new Set;function t(i){return e.add(i),()=>e.delete(i)}let n=!1;function r(i,l){if(n)return!(n=!1);const a={to:i,options:l,defaultPrevented:!1,preventDefault:()=>a.defaultPrevented=!0};for(const u of e)u.listener({...a,from:u.location,retry:o=>{o&&(n=!0),u.navigate(i,{...l,resolve:!1})}});return!a.defaultPrevented}return{subscribe:t,confirm:r}}let ze;function Qe(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),ze=window.history.state._depth}Qe();function yn(e){return{...e,_depth:window.history.state&&window.history.state._depth}}function En(e,t){let n=!1;return()=>{const r=ze;Qe();const i=r==null?null:ze-r;if(n){n=!1;return}i&&t(i)?(n=!0,window.history.go(-i)):e()}}const wn=/^(?:[a-z0-9]+:)?\/\//i,xn=/^\/+|(\/)\/+$/g,kt="http://sr";function re(e,t=!1){const n=e.replace(xn,"$1");return n?t||/^[?#]/.test(n)?n:"/"+n:""}function ke(e,t,n){if(wn.test(t))return;const r=re(e),i=n&&re(n);let l="";return!i||t.startsWith("/")?l=r:i.toLowerCase().indexOf(r.toLowerCase())!==0?l=r+i:l=i,(l||"/")+re(t,!l)}function Rn(e,t){if(e==null)throw new Error(t);return e}function An(e,t){return re(e).replace(/\/*(\*.*)?$/g,"")+re(t)}function pt(e){const t={};return e.searchParams.forEach((n,r)=>{r in t?Array.isArray(t[r])?t[r].push(n):t[r]=[t[r],n]:t[r]=n}),t}function Cn(e,t,n){const[r,i]=e.split("/*",2),l=r.split("/").filter(Boolean),a=l.length;return u=>{const o=u.split("/").filter(Boolean),c=o.length-a;if(c<0||c>0&&i===void 0&&!t)return null;const g={path:a?"":"/",params:{}},$=_=>n===void 0?void 0:n[_];for(let _=0;_<a;_++){const f=l[_],k=f[0]===":",h=k?o[_]:o[_].toLowerCase(),m=k?f.slice(1):f.toLowerCase();if(k&&Fe(h,$(m)))g.params[m]=h;else if(k||!Fe(h,m))return null;g.path+=`/${h}`}if(i){const _=c?o.slice(-c).join("/"):"";if(Fe(_,$(i)))g.params[i]=_;else return null}return g}}function Fe(e,t){const n=r=>r===e;return t===void 0?!0:typeof t=="string"?n(t):typeof t=="function"?t(e):Array.isArray(t)?t.some(n):t instanceof RegExp?t.test(e):!1}function Dn(e){const[t,n]=e.pattern.split("/*",2),r=t.split("/").filter(Boolean);return r.reduce((i,l)=>i+(l.startsWith(":")?2:3),r.length-(n===void 0?0:1))}function yt(e){const t=new Map,n=ft();return new Proxy({},{get(r,i){return t.has(i)||gt(n,()=>t.set(i,T(()=>e()[i]))),t.get(i)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())},has(r,i){return i in e()}})}function Un(e,t){const n=new URLSearchParams(e);Object.entries(t).forEach(([i,l])=>{l==null||l===""||l instanceof Array&&!l.length?n.delete(i):l instanceof Array?(n.delete(i),l.forEach(a=>{n.append(i,String(a))})):n.set(i,String(l))});const r=n.toString();return r?`?${r}`:""}function Et(e){let t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];let n=e.slice(0,t.index),r=e.slice(t.index+t[0].length);const i=[n,n+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(r);)i.push(n+=t[1]),r=r.slice(t[0].length);return Et(r).reduce((l,a)=>[...l,...i.map(u=>u+a)],[])}const Ln=100,wt=mt(),Xe=mt(),$e=()=>Rn(qe(wt),"<A> and 'use' router primitives can be only used inside a Route."),In=()=>qe(Xe)||$e().base,Fn=e=>{const t=In();return T(()=>t.resolvePath(e()))},Pn=e=>{const t=$e();return T(()=>{const n=e();return n!==void 0?t.renderPath(n):n})},xt=()=>$e().navigatorFactory(),Rt=()=>$e().location,Hn=()=>$e().params,et=()=>{const e=Rt(),t=xt(),n=(r,i)=>{const l=We(()=>Un(e.search,r)+e.hash);t(l,{scroll:!1,resolve:!1,...i})};return[e.query,n]};function Tn(e,t=""){const{component:n,preload:r,load:i,children:l,info:a}=e,u=!l||Array.isArray(l)&&!l.length,o={key:e,component:n,preload:r||i,info:a};return At(e.path).reduce((c,g)=>{for(const $ of Et(g)){const _=An(t,$);let f=u?_:_.split("/*",1)[0];f=f.split("/").map(k=>k.startsWith(":")||k.startsWith("*")?k:encodeURIComponent(k)).join("/"),c.push({...o,originalPath:g,pattern:f,matcher:Cn(f,!u,e.matchFilters)})}return c},[])}function On(e,t=0){return{routes:e,score:Dn(e[e.length-1])*1e4-t,matcher(n){const r=[];for(let i=e.length-1;i>=0;i--){const l=e[i],a=l.matcher(n);if(!a)return null;r.unshift({...a,route:l})}return r}}}function At(e){return Array.isArray(e)?e:[e]}function Ct(e,t="",n=[],r=[]){const i=At(e);for(let l=0,a=i.length;l<a;l++){const u=i[l];if(u&&typeof u=="object"){u.hasOwnProperty("path")||(u.path="");const o=Tn(u,t);for(const c of o){n.push(c);const g=Array.isArray(u.children)&&u.children.length===0;if(u.children&&!g)Ct(u.children,c.pattern,n,r);else{const $=On([...n],r.length);r.push($)}n.pop()}}}return n.length?r:r.sort((l,a)=>a.score-l.score)}function Pe(e,t){for(let n=0,r=e.length;n<r;n++){const i=e[n].matcher(t);if(i)return i}return[]}function Nn(e,t,n){const r=new URL(kt),i=T(g=>{const $=e();try{return new URL($,r)}catch{return console.error(`Invalid path ${$}`),g}},r,{equals:(g,$)=>g.href===$.href}),l=T(()=>i().pathname),a=T(()=>i().search,!0),u=T(()=>i().hash),o=()=>"",c=Ze(a,()=>pt(i()));return{get pathname(){return l()},get search(){return a()},get hash(){return u()},get state(){return t()},get key(){return o()},query:n?n(c):yt(c)}}let te;function Yn(){return te}function Bn(e,t,n,r={}){const{signal:[i,l],utils:a={}}=e,u=a.parsePath||(E=>E),o=a.renderPath||(E=>E),c=a.beforeLeave||_t(),g=ke("",r.base||"");if(g===void 0)throw new Error(`${g} is not a valid base path`);g&&!i().value&&l({value:g,replace:!0,scroll:!1});const[$,_]=ne(!1);let f;const k=(E,w)=>{w.value===h()&&w.state===y()||(f===void 0&&_(!0),te=E,f=w,Ot(()=>{f===w&&(m(f.value),p(f.state),Yt(),L[1](F=>F.filter(X=>X.pending)))}).finally(()=>{f===w&&Nt(()=>{te=void 0,E==="navigate"&&D(f),_(!1),f=void 0})}))},[h,m]=ne(i().value),[y,p]=ne(i().state),A=Nn(h,y,a.queryWrapper),x=[],L=ne([]),C=T(()=>typeof r.transformUrl=="function"?Pe(t(),r.transformUrl(A.pathname)):Pe(t(),A.pathname)),O=()=>{const E=C(),w={};for(let F=0;F<E.length;F++)Object.assign(w,E[F].params);return w},Y=a.paramsWrapper?a.paramsWrapper(O,t):yt(O),j={pattern:g,path:()=>g,outlet:()=>null,resolvePath(E){return ke(g,E)}};return G(Ze(i,E=>k("native",E),{defer:!0})),{base:j,location:A,params:Y,isRouting:$,renderPath:o,parsePath:u,navigatorFactory:W,matches:C,beforeLeave:c,preloadRoute:q,singleFlight:r.singleFlight===void 0?!0:r.singleFlight,submissions:L};function z(E,w,F){We(()=>{if(typeof w=="number"){w&&(a.go?a.go(w):console.warn("Router integration does not support relative routing"));return}const X=!w||w[0]==="?",{replace:ue,resolve:I,scroll:ce,state:R}={replace:!1,resolve:!X,scroll:!0,...F},B=I?E.resolvePath(w):ke(X&&A.pathname||"",w);if(B===void 0)throw new Error(`Path '${w}' is not a routable path`);if(x.length>=Ln)throw new Error("Too many redirects");const Z=h();(B!==Z||R!==y())&&(Tt||c.confirm(B,F)&&(x.push({value:Z,replace:ue,scroll:ce,state:y()}),k("navigate",{value:B,state:R})))})}function W(E){return E=E||qe(Xe)||j,(w,F)=>z(E,w,F)}function D(E){const w=x[0];w&&(l({...E,replace:w.replace,scroll:w.scroll}),x.length=0)}function q(E,w){const F=Pe(t(),E.pathname),X=te;te="preload";for(let ue in F){const{route:I,params:ce}=F[ue];I.component&&I.component.preload&&I.component.preload();const{preload:R}=I;w&&R&&gt(n(),()=>R({params:ce,location:{pathname:E.pathname,search:E.search,hash:E.hash,query:pt(E),state:null,key:""},intent:"preload"}))}te=X}}function jn(e,t,n,r){const{base:i,location:l,params:a}=e,{pattern:u,component:o,preload:c}=r().route,g=T(()=>r().path);o&&o.preload&&o.preload();const $=c?c({params:a,location:l,intent:te||"initial"}):void 0;return{parent:t,pattern:u,path:g,outlet:()=>o?s(o,{params:a,location:l,data:$,get children(){return n()}}):n(),resolvePath(f){return ke(i.path(),f,g())}}}const Kn=e=>t=>{const{base:n}=t,r=Bt(()=>t.children),i=T(()=>Ct(r(),t.base||""));let l;const a=Bn(e,i,()=>l,{base:n,singleFlight:t.singleFlight,transformUrl:t.transformUrl});return e.create&&e.create(a),s(wt.Provider,{value:a,get children(){return s(Mn,{routerState:a,get root(){return t.root},get preload(){return t.rootPreload||t.rootLoad},get children(){return[le(()=>(l=ft())&&null),s(zn,{routerState:a,get branches(){return i()}})]}})}})};function Mn(e){const t=e.routerState.location,n=e.routerState.params,r=T(()=>e.preload&&We(()=>{e.preload({params:n,location:t,intent:Yn()||"initial"})}));return s(P,{get when(){return e.root},keyed:!0,get fallback(){return e.children},children:i=>s(i,{params:n,location:t,get data(){return r()},get children(){return e.children}})})}function zn(e){const t=[];let n;const r=T(Ze(e.routerState.matches,(i,l,a)=>{let u=l&&i.length===l.length;const o=[];for(let c=0,g=i.length;c<g;c++){const $=l&&l[c],_=i[c];a&&$&&_.route.key===$.route.key?o[c]=a[c]:(u=!1,t[c]&&t[c](),jt(f=>{t[c]=f,o[c]=jn(e.routerState,o[c-1]||e.routerState.base,at(()=>r()[c+1]),()=>{const k=e.routerState.matches();return k[c]??k[0]})}))}return t.splice(i.length).forEach(c=>c()),a&&u?a:(n=o[0],o)}));return at(()=>r()&&n)()}const at=e=>()=>s(P,{get when(){return e()},keyed:!0,children:t=>s(Xe.Provider,{value:t,get children(){return t.outlet()}})});function Wn([e,t],n,r){return[e,r?i=>t(r(i)):t]}function qn(e){let t=!1;const n=i=>typeof i=="string"?{value:i}:i,r=Wn(ne(n(e.get()),{equals:(i,l)=>i.value===l.value&&i.state===l.state}),void 0,i=>(!t&&e.set(i),Ue.registry&&!Ue.done&&(Ue.done=!0),i));return e.init&&$t(e.init((i=e.get())=>{t=!0,r[1](n(i)),t=!1})),Kn({signal:r,create:e.create,utils:e.utils})}function Zn(e,t,n){return e.addEventListener(t,n),()=>e.removeEventListener(t,n)}function Vn(e,t){const n=e&&document.getElementById(e);n?n.scrollIntoView():t&&window.scrollTo(0,0)}const Gn=new Map;function Jn(e=!0,t=!1,n="/_server",r){return i=>{const l=i.base.path(),a=i.navigatorFactory(i.base);let u,o;function c(h){return h.namespaceURI==="http://www.w3.org/2000/svg"}function g(h){if(h.defaultPrevented||h.button!==0||h.metaKey||h.altKey||h.ctrlKey||h.shiftKey)return;const m=h.composedPath().find(C=>C instanceof Node&&C.nodeName.toUpperCase()==="A");if(!m||t&&!m.hasAttribute("link"))return;const y=c(m),p=y?m.href.baseVal:m.href;if((y?m.target.baseVal:m.target)||!p&&!m.hasAttribute("state"))return;const x=(m.getAttribute("rel")||"").split(/\s+/);if(m.hasAttribute("download")||x&&x.includes("external"))return;const L=y?new URL(p,document.baseURI):new URL(p);if(!(L.origin!==window.location.origin||l&&L.pathname&&!L.pathname.toLowerCase().startsWith(l.toLowerCase())))return[m,L]}function $(h){const m=g(h);if(!m)return;const[y,p]=m,A=i.parsePath(p.pathname+p.search+p.hash),x=y.getAttribute("state");h.preventDefault(),a(A,{resolve:!1,replace:y.hasAttribute("replace"),scroll:!y.hasAttribute("noscroll"),state:x?JSON.parse(x):void 0})}function _(h){const m=g(h);if(!m)return;const[y,p]=m;i.preloadRoute(p,y.getAttribute("preload")!=="false")}function f(h){clearTimeout(u);const m=g(h);if(!m)return o=null;const[y,p]=m;o!==y&&(u=setTimeout(()=>{i.preloadRoute(p,y.getAttribute("preload")!=="false"),o=y},20))}function k(h){if(h.defaultPrevented)return;let m=h.submitter&&h.submitter.hasAttribute("formaction")?h.submitter.getAttribute("formaction"):h.target.getAttribute("action");if(!m)return;if(!m.startsWith("https://action/")){const p=new URL(m,kt);if(m=i.parsePath(p.pathname+p.search),!m.startsWith(n))return}if(h.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const y=Gn.get(m);if(y){h.preventDefault();const p=new FormData(h.target,h.submitter);y.call({r:i,f:h.target},h.target.enctype==="multipart/form-data"?p:new URLSearchParams(p))}}Ve(["click","submit"]),document.addEventListener("click",$),e&&(document.addEventListener("mousemove",f,{passive:!0}),document.addEventListener("focusin",_,{passive:!0}),document.addEventListener("touchstart",_,{passive:!0})),document.addEventListener("submit",k),$t(()=>{document.removeEventListener("click",$),e&&(document.removeEventListener("mousemove",f),document.removeEventListener("focusin",_),document.removeEventListener("touchstart",_)),document.removeEventListener("submit",k)})}}function Qn(e){const t=e.replace(/^.*?#/,"");if(!t.startsWith("/")){const[,n="/"]=window.location.hash.split("#",2);return`${n}#${t}`}return t}function Xn(e){const t=()=>window.location.hash.slice(1),n=_t();return qn({get:t,set({value:r,replace:i,scroll:l,state:a}){i?window.history.replaceState(yn(a),"","#"+r):window.history.pushState(a,"","#"+r);const u=r.indexOf("#"),o=u>=0?r.slice(u+1):"";Vn(o,l),Qe()},init:r=>Zn(window,"hashchange",En(r,i=>!n.confirm(i&&i<0?i:t()))),create:Jn(e.preload,e.explicitLinks,e.actionBase),utils:{go:r=>window.history.go(r),renderPath:r=>`#${r}`,parsePath:Qn,beforeLeave:n}})(e)}var er=v("<a>");function ee(e){e=nt({inactiveClass:"inactive",activeClass:"active"},e);const[,t]=Kt(e,["href","state","class","activeClass","inactiveClass","end"]),n=Fn(()=>e.href),r=Pn(n),i=Rt(),l=T(()=>{const a=n();if(a===void 0)return[!1,!1];const u=re(a.split(/[?#]/,1)[0]).toLowerCase(),o=decodeURI(re(i.pathname).toLowerCase());return[e.end?u===o:o.startsWith(u+"/")||o===u,u===o]});return(()=>{var a=b(er);return Mt(a,nt(t,{get href(){return r()||e.href},get state(){return JSON.stringify(e.state)},get classList(){return{...e.class&&{[e.class]:!0},[e.inactiveClass]:!l()[0],[e.activeClass]:l()[0],...t.classList}},link:"",get"aria-current"(){return l()[1]?"page":void 0}}),!1,!1),pe(),a})()}var tr=v("<div class=grid><!$><!/><div>"),nr=v("<div class=boxLink>");function lt(e){const t=e.type??"special";return(()=>{var n=b(nr);return d(n,s(U,{type:t,get children(){var r=b(tr),i=r.firstChild,[l,a]=S(i.nextSibling),u=l.nextSibling;return d(r,s(V,{get icon(){return e.icon}}),l,a),d(u,()=>e.children),r}})),n})()}var rr=v("<h3>Helfen"),ir=v("<p>Beim Kiosk und der Essensausgabe können wir immer ein paar helfende Hände gebrauchen."),ar=v("<h3>Zusammenfassung"),lr=v("<p>Erhalte einen Überblick über dein gesamtes Programm."),sr=v("<div><!$><!/><br><!$><!/>");function He(e){return(()=>{var t=b(sr),n=t.firstChild,[r,i]=S(n.nextSibling),l=r.nextSibling,a=l.nextSibling,[u,o]=S(a.nextSibling);return d(t,s(ee,{get href(){return e.link("/helfen")},class:"button-link",get children(){return s(lt,{icon:"hand-heart",get children(){return[b(rr),b(ir)]}})}}),r,i),d(t,s(ee,{get href(){return e.link("/zusammenfassung")},class:"button-link",get children(){return s(lt,{icon:"list",get children(){return[b(ar),b(lr)]}})}}),u,o),t})()}Je(["FRIDAY","SATURDAY","SUNDAY"]);function be(e,t){const{from:n,to:r}=t;return n<e&&e<r}function or(e,t){const{from:n,to:r}=e,{from:i,to:l}=t;return be(n,t)||be(r,t)||be(i,e)||be(l,e)||n===i&&r===l}function ur(e,t=!1){const{from:n,to:r}=e;if(n>r)return[];const i=r-n;return Dt(t?i+1:i,n)}function Dt(e,t=0){return[...Array(e)].map((n,r)=>r+t)}var cr=v("<a class=header-anchor>");function dr(e){return encodeURIComponent(e.replaceAll(/\s/g,"-").replaceAll("&","").replaceAll(/-{1,}/g,"-").toLocaleLowerCase())}function hr(e){const t=dr("title"in e?e.id??e.title:e.id);return s(zt,{get component(){return`h${e.level}`},id:t,get children(){var n=b(cr);return ye(n,"href",`#${t}`),d(n,(()=>{var r=le(()=>"title"in e);return()=>r()?e.title:e.children})()),n}})}var gr=v("<div class=dynamic-columns style=gap:1rem;--min-width:30rem><!$><!/><!$><!/><!$><!/>"),fr=v("<div><div style=margin-block-end:1.5rem></div><!$><!/>"),mr=v("<p>Konflikte gefunden! Bitte stelle sicher, dass du nicht zeitlich überlappende Spielrunden eingetragen hast:"),$r=v('<div style="display:grid;grid-template-columns:1fr max-content 1fr;gap:1rem;margin-block:0.5rem"><!$><!/><span style=color:var(--clr-warning-10);align-self:center;font-size:2rem></span><!$><!/>'),br=v("<div><!$><!/><div class=entries></div><div class=after-hour><div class=annotation>"),Sr=v("<div><div class=annotation></div><div class=background>"),vr=v("<div class=entry>");function _r(e){return(()=>{var t=b(gr),n=t.firstChild,[r,i]=S(n.nextSibling),l=r.nextSibling,[a,u]=S(l.nextSibling),o=a.nextSibling,[c,g]=S(o.nextSibling);return d(t,s(P,{get when(){return e.openingHours.FRIDAY.open.from!==e.openingHours.FRIDAY.open.to},get children(){return s(Te,{get programEntries(){return e.programEntries.FRIDAY},get openingHoursOfDay(){return e.openingHours.FRIDAY},get openingHours(){return e.openingHours},day:"FRIDAY",get conflictsAllowed(){return e.conflictsAllowed??!1},get columns(){return e.columns}})}}),r,i),d(t,s(Te,{get programEntries(){return e.programEntries.SATURDAY},get openingHoursOfDay(){return e.openingHours.SATURDAY},get openingHours(){return e.openingHours},day:"SATURDAY",get conflictsAllowed(){return e.conflictsAllowed??!1},get columns(){return e.columns}}),a,u),d(t,s(Te,{get programEntries(){return e.programEntries.SUNDAY},get openingHoursOfDay(){return e.openingHours.SUNDAY},get openingHours(){return e.openingHours},day:"SUNDAY",get conflictsAllowed(){return e.conflictsAllowed??!1},get columns(){return e.columns}}),c,g),t})()}function Te(e){const t=e.conflictsAllowed?[]:pr(e.programEntries);return(()=>{var n=b(fr),r=n.firstChild,i=r.nextSibling,[l,a]=S(i.nextSibling);return d(r,s(hr,{level:4,get title(){return N.days[e.day]}})),d(n,s(xe,{get fallback(){return[s(U,{type:"danger",get children(){return b(mr)}}),s(me,{each:t,children:([u,o])=>(()=>{var c=b($r),g=c.firstChild,[$,_]=S(g.nextSibling),f=$.nextSibling,k=f.nextSibling,[h,m]=S(k.nextSibling);return d(c,()=>u.component(),$,_),d(f,s(V,{icon:"triangle-exclamation"})),d(c,()=>o.component(),h,m),c})()})]},get children(){return s(M,{get when(){return t.length===0},get children(){return s(kr,{get programEntries(){return e.programEntries},get openingHoursOfDay(){return e.openingHoursOfDay},get openingHours(){return e.openingHours},get day(){return e.day},get conflictsAllowed(){return e.conflictsAllowed},get columns(){return e.columns}})}})}}),l,a),n})()}function kr(e){const t=ur(e.openingHoursOfDay.open),n=e.openingHoursOfDay.breaks.flatMap(({from:a,to:u})=>{ve(a<u,`Break is not valid, as from '${a}' is not smaller than to '${u}'`);const o=[a];let c=u-a;for(;c>1;)o.push(a+--c);return o}),r=(t[0]??0)-1,i=t.at(-1)??0,l=()=>{const a=["timetable"];return e.conflictsAllowed&&a.push(e.columns===2?"two-columns":"four-columns"),a.join(" ")};return(()=>{var a=b(br),u=a.firstChild,[o,c]=S(u.nextSibling),g=o.nextSibling,$=g.nextSibling,_=$.firstChild;return d(a,s(me,{each:t,children:f=>{const k=n.includes(f);return(()=>{var h=b(Sr),m=h.firstChild;return se(h,`hour ${k?"break":""}`),d(m,f),G(y=>Le(h,st({from:f,to:f},r,e.day,e.openingHours),y)),h})()}}),o,c),d(g,s(me,{get each(){return e.programEntries},children:f=>(()=>{var k=b(vr);return d(k,()=>f.component()),G(h=>Le(k,st(f.range,r,e.day,e.openingHours),h)),k})()})),d(_,i+1),G(f=>{var k=l(),h=`grid-row: 1 / ${i-r+1};`;return k!==f.e&&se(a,f.e=k),f.t=Le(g,h,f.t),f},{e:void 0,t:void 0}),a})()}function st(e,t,n,r){const{from:i,to:l}=e,a=i-t,u=l-t,o=r[n].open.to;return ve(a>0,`[${JSON.stringify(e)}] Entry can't start at ${i}.`),ve(u>0,`[${JSON.stringify(e)}] Entry can't end at ${l}.`),ve(l<=o,`[${JSON.stringify(e)}] Entry can't end at ${l}. Closing hour set to '${o}' on day '${n}'`),`grid-row: ${a} / ${u};`}function pr(e){const t=[];return e.forEach((n,r)=>{e.slice(r+1).forEach(i=>{or(n.range,i.range)&&t.push([n,i])})}),t}const he={kitchen:{title:"Küche",description:"Mahlzeit vorbereiten, unterstützen beim Kochen und Abwaschen."},service:{title:"Essensausgabe",description:""},cleaning:{title:"Reinigung",description:"Unterstützen beim Küche aufräumen und putzen."},kiosk:{title:"Kiosk",description:"Am Kiosk Getränke (inkl. Kaffee) und Snacks verkaufen."},flohmarkt:{title:"Flohmarkt",description:"Hilf uns beim Auf- oder Abbau des Flohmarkt und der Annahme oder Abgabe von Spielen."},checkout:{title:"Kiosk / Flohmarkt",description:"Am Kiosk Getränke und Snacks verkaufen oder am Flohmarkt die Kasse bedienen."},setup:{title:"Aufbau",description:"Hilf uns beim Zubereiten der Menüs und Aufstellen von Tischen, Stühle und der Bibliothek."},breakdown:{title:"Abbau",description:"Hilf uns beim Zusammenräumen von Tischen, Stühle, der Bibliothek und dem Flohmarkt."}},J={FRIDAY:{16:[{uuid:"eb443040-0674-429c-a3ad-48634a323b76",count:4,duration:5,kind:"setup"}],19:[{uuid:"91699a72-78d0-4dc9-bfe1-ece55b15db7d",count:1,duration:3,kind:"flohmarkt"}]},SATURDAY:{9:[{uuid:"6303bd52-cd10-4dd0-b760-b71ab971ad3b",count:4,duration:2,kind:"flohmarkt"}],10:[{uuid:"9ebca7e9-f44a-4cc9-8961-73539f17d5d6",count:2,duration:2,kind:"checkout"}],11:[{uuid:"804c379d-c747-4d7c-9f0c-a53f8548216e",count:2,duration:2,kind:"checkout"}],12:[{uuid:"bfec6f59-14eb-45b9-a21c-d33ee2205b64",count:2,duration:2,kind:"checkout"}],13:[{uuid:"8db23dfd-616e-4f1d-9a07-deb6e519d35a",count:2,duration:2,kind:"checkout"}],14:[{uuid:"477a1c27-b660-4221-9be0-de34de910f4b",count:2,duration:2,kind:"checkout"}],15:[{uuid:"516de07b-bc06-45b5-94f6-be5de186d4d5b",count:2,duration:2,kind:"checkout"}],16:[{uuid:"490c799f-ced5-461e-a483-ad6a90df221b",count:2,duration:2,kind:"checkout"}],17:[{uuid:"c9f79536-225a-41ee-93e6-ef1741b511f7",count:2,duration:2,kind:"checkout"}],18:[{uuid:"c6c3f0f7-04c6-4819-95e6-aa8476e4392c",count:2,duration:2,kind:"checkout"}],19:[{uuid:"9748b1e6-1712-449b-8dda-eb44f172071e",count:2,duration:2,kind:"checkout"}],20:[{uuid:"04f724ea-4a78-4363-ba0a-75a71ab22598",count:2,duration:2,kind:"checkout"}],21:[{uuid:"62d5af53-5e3e-4d59-b574-261e33b0a872",count:2,duration:2,kind:"checkout"}],22:[{uuid:"98fef052-02ba-4a33-ba2a-13ccad6834c7",count:2,duration:2,kind:"checkout"}],23:[{uuid:"e4700acc-7192-4063-b03d-cb4009cbe6f2",count:2,duration:1,kind:"checkout"}]},SUNDAY:{10:[{uuid:"d30340e1-e49f-44aa-bf1b-d90839b0f1aa",count:2,duration:1,kind:"checkout"},{uuid:"e1a9b252-628c-4c01-b8e1-e1964b51e646",count:2,duration:2,kind:"checkout"}],11:[{uuid:"873a1308-57bc-46bc-bdfc-a82213364c77",count:2,duration:2,kind:"checkout"}],12:[{uuid:"2e9864a9-0208-4e56-b232-dcd258e31545",count:2,duration:2,kind:"checkout"}],13:[{uuid:"caef5fea-8458-4b65-b699-9c4e5ee6589d",count:2,duration:2,kind:"checkout"}],14:[{uuid:"0da24180-0269-4206-adf7-4b9faeefa091",count:2,duration:2,kind:"checkout"}],15:[{uuid:"6c0430dd-9968-456d-bf68-d893040f73fa",count:2,duration:2,kind:"checkout"}],16:[{uuid:"40eaef18-d6a0-46e8-b3e5-a98be09cef57",count:2,duration:2,kind:"checkout"}],17:[{uuid:"3c6468ad-fdb8-432d-92ce-a52fae471206",count:2,duration:1,kind:"checkout"},{uuid:"b9da7047-c359-49fa-b558-53207ac5255a",count:2,duration:2,kind:"flohmarkt"},{uuid:"c0e1d54c-0832-4147-9054-082208dab2f2",count:4,duration:3,kind:"breakdown"}]}},yr=[...Object.values(J.FRIDAY),...Object.values(J.SATURDAY),...Object.values(J.SUNDAY)].flatMap(e=>e.map(t=>t.uuid)),ot=Object.entries(Object.groupBy(yr,e=>e)).reduce((e,[t,n])=>[...e,{uuid:t,count:n?.length??0}],[]).filter(({count:e})=>e!==1);if(ot.length>0)throw Error(`duplicate uuids found:  ${ot.map(({uuid:e})=>e).join(", ")}`);function Er(e){return Oe("FRIDAY",J.FRIDAY).concat(Oe("SATURDAY",J.SATURDAY)).concat(Oe("SUNDAY",J.SUNDAY)).find(n=>n.entry.uuid===e)??null}function Oe(e,t){const n=[];return Object.entries(t).forEach(([r,i])=>{const l=Number(r);i.forEach(a=>{n.push({dateTime:{day:e,from:l,to:l+1},entry:a})})}),n}const wr={FRIDAY:{open:{from:16,to:22},breaks:[{from:16,to:22}]},SATURDAY:{open:{from:9,to:24},breaks:[{from:9,to:10}]},SUNDAY:{open:{from:10,to:20},breaks:[{from:18,to:20}]}};var xr=v("<span>");function ut(e){const t=()=>{const n=["chip"];return n.push(e.kind??"gray"),e.inverted&&n.push("inverted"),e.size==="small"&&n.push("small"),n.join(" ")};return(()=>{var n=b(xr);return d(n,()=>e.children),G(r=>{var i=t(),l=e.title;return i!==r.e&&se(n,r.e=i),l!==r.t&&ye(n,"title",r.t=l),r},{e:void 0,t:void 0}),n})()}const Rr=St(H().uuid());async function Ut(e){const t=await en(e);if(t.kind==="FAILURE")return console.error("Unexpected error. Maybe network, maybe server error."),{kind:"FAILURE"};const n=Rr.safeParse(t.data);return n.success?{kind:"SUCCESS",data:n.data}:{kind:"FAILURE"}}var Ar=v("<p>Beim Kiosk und der Essensausgabe können wir immer ein paar helfende Hände gebrauchen. Wenn du bereit bist zu helfen, klicke in der jeweiligen Stunde auf das Handsymbol <!$><!/>."),Cr=v("<br>"),Dr=v("<p>Plan konnte nicht geladen werden."),ct=v("<div><!$><!/><!$><!/><h5></h5><p class=duration><em><!$><!/> / <!$><!/>");function Ur(e){const[t]=et(),[n]=Re(()=>Ut(String(t.secret)));return[(()=>{var r=b(Ar),i=r.firstChild,l=i.nextSibling,[a,u]=S(l.nextSibling);return a.nextSibling,d(r,s(V,{icon:"hand-heart"}),a,u),r})(),b(Cr),s(Ge,{get fallback(){return s(U,{get children(){return N.loading.program}})},get children(){return s(P,{get when(){return n()},get fallback(){return s(U,{type:"danger",get children(){return N.error.help}})},children:r=>s(P,{get when(){return r().kind==="SUCCESS"},get fallback(){return s(U,{type:"danger",get children(){return b(Dr)}})},get children(){return s(Lr,{get helpReservations(){return e.store.helping},get externalHelpReservations(){return r().data},get isEditable(){return e.isEditable},get link(){return e.link}})}})})}})]}function Lr(e){const t=()=>{const r=[];return e.helpReservations.forEach(i=>{r.push(i.helpEntryUuid)}),e.externalHelpReservations.forEach(i=>{r.push(i)}),r},n=()=>({FRIDAY:Ne({constants:J.FRIDAY,alreadyReservedUuids:t(),myReservations:e.helpReservations,link:e.link}),SATURDAY:Ne({constants:J.SATURDAY,alreadyReservedUuids:t(),myReservations:e.helpReservations,link:e.link}),SUNDAY:Ne({constants:J.SUNDAY,alreadyReservedUuids:t(),myReservations:e.helpReservations,link:e.link})});return s(_r,{get programEntries(){return n()},openingHours:wr,conflictsAllowed:!0,columns:4})}function Ne(e){const t=xt(),n=[],r=Ir(e.alreadyReservedUuids);return Object.entries(e.constants).forEach(([i,l])=>{l.forEach(a=>{const u={from:Number(i),to:Number(i)+a.duration},o=()=>a.count-(r[a.uuid]??0),c=()=>e.myReservations.filter($=>$.helpEntryUuid===a.uuid).length>0,g=()=>{const $=["box-simple","timeview-entry"];return c()&&$.push("success"),$.join(" ")};o()===0?n.push({range:u,component:()=>(()=>{var $=b(ct),_=$.firstChild,[f,k]=S(_.nextSibling),h=f.nextSibling,[m,y]=S(h.nextSibling),p=m.nextSibling,A=p.nextSibling,x=A.firstChild,L=x.firstChild,[C,O]=S(L.nextSibling),Y=C.nextSibling,j=Y.nextSibling,[z,W]=S(j.nextSibling);return $.$$click=()=>t(e.link(`/helfen/${a.uuid}`)),d($,s(ut,{title:"Helfer:innen gesucht",get inverted(){return c()},size:"small",children:"HL"}),f,k),d($,s(P,{get when(){return c()},get children(){return s(fe,{icon:"hand-heart",kind:"ghost",onClick:()=>t(e.link(`/helfen/${a.uuid}`)),title:"Helfen"})}}),m,y),d(p,()=>he[a.kind].title),d(x,o,C,O),d(x,()=>a.count,z,W),G(D=>{var q=g(),E=he[a.kind].title;return q!==D.e&&se($,D.e=q),E!==D.t&&ye(p,"title",D.t=E),D},{e:void 0,t:void 0}),pe(),$})()}):n.push({range:u,component:()=>(()=>{var $=b(ct),_=$.firstChild,[f,k]=S(_.nextSibling),h=f.nextSibling,[m,y]=S(h.nextSibling),p=m.nextSibling,A=p.nextSibling,x=A.firstChild,L=x.firstChild,[C,O]=S(L.nextSibling),Y=C.nextSibling,j=Y.nextSibling,[z,W]=S(j.nextSibling);return $.$$click=()=>t(e.link(`/helfen/${a.uuid}`)),d($,s(ut,{title:"Helfer:innen gesucht",get inverted(){return c()},size:"small",children:"HL"}),f,k),d($,s(fe,{icon:"hand-heart",kind:"ghost",onClick:()=>t(e.link(`/helfen/${a.uuid}`)),title:"Helfen"}),m,y),d(p,()=>he[a.kind].title),d(x,()=>a.count-o(),C,O),d(x,()=>a.count,z,W),G(D=>{var q=g(),E=he[a.kind].title;return q!==D.e&&se($,D.e=q),E!==D.t&&ye(p,"title",D.t=E),D},{e:void 0,t:void 0}),pe(),$})()})})}),n}function Ir(e){const t=Object.groupBy(e,r=>r),n={};for(const r of e)n[r]=t[r]?.length??0;return n}Ve(["click"]);var Fr=v("<dialog closedby=any><!$><!/><!$><!/><!$><!/>"),Pr=v("<h4>");function Hr(e=!1){return{open:e}}function Tr(e){let t;const[n,r]=K(e.store);Wt(()=>{n.open?t.showModal():t.close()});function i(){r({open:!1}),e.onClose?.()}const l=()=>{const a=[];return e.type!==void 0&&a.push(e.type),e.size!==void 0&&a.push(e.size),e.onClose!==void 0&&a.push("dialog-with-close"),a};return(()=>{var a=b(Fr),u=a.firstChild,[o,c]=S(u.nextSibling),g=o.nextSibling,[$,_]=S(g.nextSibling),f=$.nextSibling,[k,h]=S(f.nextSibling);a.addEventListener("close",i);var m=t;return typeof m=="function"?qt(m,a):t=a,d(a,s(P,{get when(){return e.onClose},get children(){return s(fe,{onClick:i,icon:"circle-xmark",kind:"gray"})}}),o,c),d(a,s(P,{get when(){return e.title},children:y=>(()=>{var p=b(Pr);return d(p,y),p})()}),$,_),d(a,()=>e.children,k,h),G(()=>se(a,l().join(" "))),a})()}var Or=v("<p>");function Ye(e){const[t,n]=K(e.store),r=e.showErrors==="ALWAYS",i=()=>r||t.isDirty?e.errors??[]:[];return[s(Pt,{get label(){return e.label},get name(){return e.name},get value(){return t.value},onValueUpdate:l=>{n("value",l),e.onUpdate?.()},onBlur:()=>n("isDirty",!0),get type(){return e.type},get required(){return e.required},get isHoneypot(){return e.isHoneypot},get disabled(){return e.disabled}}),s(P,{get when(){return i().length>0},get children(){return s(U,{type:"danger",get children(){return s(me,{get each(){return i()},children:l=>(()=>{var a=b(Or);return d(a,l),a})()})}})}})]}H().transform(e=>({value:e,isDirty:!1}));function Be(e){return{value:e,isDirty:!1}}Ke().transform(e=>({value:e,isDirty:!1}));var Nr=v("<div style=display:grid;gap:1rem><!$><!/><!$><!/>"),Yr=v("<div>"),Br=v("<div style=display:grid;gap:1rem><h3>Meine Kontaktdaten</h3><p><strong>Name:</strong> <!$><!/></p><p><strong>E-Mail:</strong> <!$><!/></p><p><strong>Handynummer:</strong> <!$><!/></p><!$><!/>"),jr=v("<form novalidate><!$><!/><!$><!/><!$><!/><!$><!/>");function Kr(e){return(()=>{var t=b(Nr),n=t.firstChild,[r,i]=S(n.nextSibling),l=r.nextSibling,[a,u]=S(l.nextSibling);return d(t,s(Mr,{get store(){return e.store.contact},get isEditable(){return e.isEditable}}),r,i),d(t,s(U,{type:"special",children:"Eine persöhnliche Zusammenfassung folgt noch."}),a,u),t})()}function Mr(e){const[t,n]=K(e.store),[r,i]=K(Hr());return s(U,{get children(){return[s(P,{get when(){return r.open},get children(){return s(zr,{dialogStore:r,get currentState(){return e.store},updateCurrentState:n})}}),(()=>{var l=b(Br),a=l.firstChild,u=a.nextSibling,o=u.firstChild,c=o.nextSibling,g=c.nextSibling,[$,_]=S(g.nextSibling),f=u.nextSibling,k=f.firstChild,h=k.nextSibling,m=h.nextSibling,[y,p]=S(m.nextSibling),A=f.nextSibling,x=A.firstChild,L=x.nextSibling,C=L.nextSibling,[O,Y]=S(C.nextSibling),j=A.nextSibling,[z,W]=S(j.nextSibling);return d(u,()=>e.store.name,$,_),d(f,()=>e.store.email,y,p),d(A,()=>e.store.mobile,O,Y),d(l,s(P,{get when(){return e.isEditable},get children(){var D=b(Yr);return d(D,s(ae,{icon:"pencil",label:"Kontaktdaten editieren",onClick:()=>i("open",!0)})),D}}),z,W),l})()]}})}function zr(e){const[t]=et(),[n]=K({name:Be(e.currentState.name),email:Be(e.currentState.email),mobile:Be(e.currentState.mobile)}),[r,i]=K({kind:"IDLE",isDuplicate:!1}),l=T(()=>{const o={name:[],email:[]};return n.name.value.trim().length===0&&o.name.push(N.mandatoryField),n.email.value.trim().length===0?o.email.push(N.mandatoryField):n.email.value.includes("@")||o.email.push(N.invalidEmail),r.kind==="IDLE"&&r.isDuplicate&&o.email.push("Diese E-Mail wird bereits verwendet."),{...o,hasErrors:o.name.length+o.email.length>0}}),[a,u]=K(e.dialogStore);return s(Tr,{get store(){return e.dialogStore},title:"Kontaktdaten editieren",onClose:()=>{},size:"medium",get children(){var o=b(jr),c=o.firstChild,[g,$]=S(c.nextSibling),_=g.nextSibling,[f,k]=S(_.nextSibling),h=f.nextSibling,[m,y]=S(h.nextSibling),p=m.nextSibling,[A,x]=S(p.nextSibling);return d(o,s(Ye,{get store(){return n.name},label:"Name",name:"name",showErrors:"ON_BLUR",get errors(){return l().name}}),g,$),d(o,s(Ye,{get store(){return n.email},label:"E-Mail",name:"email",showErrors:"ALWAYS",get errors(){return l().email},onUpdate:()=>i({kind:"IDLE",isDuplicate:!1})}),f,k),d(o,s(Ye,{get store(){return n.mobile},label:"Handynummer",name:"mobile"}),m,y),d(o,s(_e,{label:"Speichern",get disabled(){return l().hasErrors||r.kind==="CHECKING"},onClick:async()=>{if(!l().hasErrors){i({kind:"CHECKING"});const L=t.secret,C=await fetch(we(`/lst26/check-email?email=${n.email.value}&secret=${L}`));if(!C.ok){i({kind:"IDLE",isDuplicate:!0});return}const O=await C.json(),Y=Wr.safeParse(O);if(!Y.success){i({kind:"IDLE",isDuplicate:!0});return}if(Y.data.kind==="FAILURE"){i({kind:"IDLE",isDuplicate:!0});return}i({kind:"IDLE",isDuplicate:!1}),e.updateCurrentState({name:n.name.value,email:n.email.value,mobile:n.mobile.value}),u("open",!1)}}}),A,x),o}})}const Wr=bt([Q({kind:oe("SUCCESS")}),Q({kind:oe("FAILURE")})]);var qr=v("<div class=tooltip-wrapper><div class=tooltip></div><!$><!/>");function je(e){return(()=>{var t=b(qr),n=t.firstChild,r=n.nextSibling,[i,l]=S(r.nextSibling);return d(n,()=>e.tooltip),d(t,()=>e.children,i,l),t})()}var Zr=v("<div class=quickmenu-wrapper><div class=quickmenu><!$><!/><!$><!/><!$><!/>"),Vr=v('<div class="quickmenu extended"><!$><!/><!$><!/><!$><!/>'),Gr=v("<div style=margin-block-start:1rem;display:flex;gap:0.5rem;align-items:center><!$><!/><em>Zuletzt gespeichert um: <!$><!/> Uhr"),Jr=v("<div style=margin-block-start:1rem;display:flex;gap:0.5rem;align-items:center><!$><!/><em>Am Speichern..."),Qr=v("<div style=margin-block-start:1rem;display:flex;gap:0.5rem;align-items:center><!$><!/><em>Speichern war nicht möglich!");function Xr(e){return(()=>{var t=b(Zr),n=t.firstChild,r=n.firstChild,[i,l]=S(r.nextSibling),a=i.nextSibling,[u,o]=S(a.nextSibling),c=u.nextSibling,[g,$]=S(c.nextSibling);return d(n,s(je,{tooltip:"Zur Übersicht",get children(){return s(ee,{get href(){return e.link(e.parentPath)},class:"button-link",get children(){return s(_e,{get label(){return s(V,{icon:"backward"})}})}})}}),i,l),d(n,s(je,{tooltip:"Zum Helferplan",get children(){return s(ee,{get href(){return e.link("/helfen")},class:"button-link",get children(){return s(_e,{get label(){return s(V,{icon:"hand-heart"})}})}})}}),u,o),d(n,s(je,{tooltip:"Zur Zusammenfassung",get children(){return s(ee,{get href(){return e.link("/zusammenfassung")},class:"button-link",get children(){return s(_e,{get label(){return s(V,{icon:"list"})}})}})}}),g,$),t})()}function ei(e){return[s(U,{type:"gray",get children(){var t=b(Vr),n=t.firstChild,[r,i]=S(n.nextSibling),l=r.nextSibling,[a,u]=S(l.nextSibling),o=a.nextSibling,[c,g]=S(o.nextSibling);return d(t,s(ee,{get href(){return e.link(e.parentPath)},class:"button-link",get children(){return s(ae,{icon:"backward",label:"Zur Übersicht"})}}),r,i),d(t,s(ee,{get href(){return e.link("/helfen")},class:"button-link",get children(){return s(ae,{icon:"hand-heart",label:"Zum Helferplan"})}}),a,u),d(t,s(ee,{get href(){return e.link("/zusammenfassung")},class:"button-link",get children(){return s(ae,{icon:"list",label:"Zur Zusammenfassung"})}}),c,g),t}}),s(ti,{get saveState(){return e.saveState},get lastSaved(){return e.lastSaved}})]}function ti(e){return s(xe,{get children(){return[s(M,{get when(){return e.saveState==="IDLE"},get children(){var t=b(Gr),n=t.firstChild,[r,i]=S(n.nextSibling),l=r.nextSibling,a=l.firstChild,u=a.nextSibling,[o,c]=S(u.nextSibling);return o.nextSibling,d(t,s(V,{icon:"circle-check"}),r,i),d(l,()=>ht(e.lastSaved),o,c),t}}),s(M,{get when(){return e.saveState==="SAVING"},get children(){var t=b(Jr),n=t.firstChild,[r,i]=S(n.nextSibling);return r.nextSibling,d(t,s(V,{icon:"floppy-disk-circle-arrow-right"}),r,i),t}}),s(M,{get when(){return e.saveState==="ERROR"},get children(){var t=b(Qr),n=t.firstChild,[r,i]=S(n.nextSibling);return r.nextSibling,d(t,s(V,{icon:"triangle-exclamation"}),r,i),t}})]}})}var ni=v("<div class=page><!$><!/><div class=page-content><!$><!/><!$><!/></div><!$><!/>"),ri=v("<h2>"),ii=v("<br>"),ai=v("<div class=extended-wrapper style=margin-block-start:1rem>");function Se(e){return(()=>{var t=b(ni),n=t.firstChild,[r,i]=S(n.nextSibling),l=r.nextSibling,a=l.firstChild,[u,o]=S(a.nextSibling),c=u.nextSibling,[g,$]=S(c.nextSibling),_=l.nextSibling,[f,k]=S(_.nextSibling);return d(t,(()=>{var h=le(()=>e.showQuickmenu!==!1);return()=>h()?s(Xr,{get link(){return e.link},get saveState(){return e.saveState},get lastSaved(){return e.lastSaved},get parentPath(){return e.parentPath??"/"}}):null})(),r,i),d(l,(()=>{var h=le(()=>e.title===void 0);return()=>h()?null:[(()=>{var m=b(ri);return d(m,()=>e.title),m})(),b(ii)]})(),u,o),d(l,()=>e.children,g,$),d(t,(()=>{var h=le(()=>e.showQuickmenu!==!1);return()=>h()?(()=>{var m=b(ai);return d(m,s(ei,{get link(){return e.link},get saveState(){return e.saveState},get lastSaved(){return e.lastSaved},get parentPath(){return e.parentPath??"/"}})),m})():null})(),f,k),t})()}var li=v('<form class=input-button style="display:grid;gap:0rem;grid-template-columns:1fr max-content"><input type=text style=border-color:var(--clr-special-9)><!$><!/>');function dt(e){const[t,n]=ne("");return(()=>{var r=b(li),i=r.firstChild,l=i.nextSibling,[a,u]=S(l.nextSibling);return r.addEventListener("submit",o=>{o.preventDefault();const c=t();c.trim().length>0&&e.addFriend(c)}),rt(r,"noValidate",!0),i.$$input=o=>n(o.target.value),d(r,s(ae,{icon:"arrow-right",type:"submit",label:"Begleitperson anmelden",kind:"special"}),a,u),G(()=>rt(i,"value",t())),pe(),r})()}Ve(["input"]);var si=v("<p>Plan konnte nicht geladen werden."),oi=v("<h3>"),ui=v("<div class=game-dialog><ul role=list style=display:grid;gap:0.5rem><li><strong style=color:var(--clr-accent-1)>Tag, Zeit:</strong> <br><!$><!/>, <!$><!/> - <!$><!/> Uhr</li><li><strong style=color:var(--clr-accent-1)>Beschreibung:</strong> <br><!$><!/></li></ul><div class=reservations><h5 style=margin-block-start:0>Plätze reservieren</h5><div class=reservation-table>"),ci=v("<div class=count>"),di=v("<div class=reservation-table-entry><p>Reserviert für mich </p><!$><!/>"),hi=v('<div class=reservation-table-entry><p>Reserviert für "<!$><!/>"</p><!$><!/>'),gi=v('<div style="display:grid;gap:1rem;grid-template-columns:max-content 1fr"><!$><!/><!$><!/>');function fi(e){const[t,n]=K(e.store),r=Hn().uuid??"no-uuid-found",i=Er(r),[l]=et(),[a]=Re(()=>Ut(String(l.secret)));return s(Ge,{get fallback(){return s(U,{get children(){return N.loading.program}})},get children(){return s(P,{get when(){return a()},get fallback(){return s(U,{type:"danger",get children(){return N.error.help}})},children:u=>s(P,{get when(){return u().kind==="SUCCESS"},get fallback(){return s(U,{type:"danger",get children(){return b(si)}})},get children(){return s(P,{when:i,children:o=>s(mi,{get entry(){return o()},get helpReservations(){return e.store.helping},get externalHelpReservations(){return u().data},get isEditable(){return e.isEditable},addReservation:c=>n("helping",t.helping.length,{...c,uuid:crypto.randomUUID()}),removeReservation:c=>{n("helping",t.helping.filter(g=>g.uuid!==c))}})})}})})}})}function mi(e){const{dateTime:t,entry:n}=e.entry,r=he[n.kind],i=()=>e.helpReservations.filter(o=>o.helpEntryUuid===n.uuid),l=e.externalHelpReservations.filter(o=>o===n.uuid).length,a=()=>Dt(n.count).map(o=>{const c=i()[o];return c!==void 0?c:n.count-l<=o?{kind:"RESERVED_OTHER"}:{kind:"FREE"}}),u=()=>i().find(o=>o.kind==="SELF")!==void 0;return[(()=>{var o=b(oi);return d(o,()=>r.title),o})(),(()=>{var o=b(ui),c=o.firstChild,g=c.firstChild,$=g.firstChild,_=$.nextSibling,f=_.nextSibling,k=f.nextSibling,[h,m]=S(k.nextSibling),y=h.nextSibling,p=y.nextSibling,[A,x]=S(p.nextSibling),L=A.nextSibling,C=L.nextSibling,[O,Y]=S(C.nextSibling);O.nextSibling;var j=g.nextSibling,z=j.firstChild,W=z.nextSibling,D=W.nextSibling,q=D.nextSibling,[E,w]=S(q.nextSibling),F=c.nextSibling,X=F.firstChild,ue=X.nextSibling;return d(g,()=>N.days[t.day],h,m),d(g,()=>t.from,A,x),d(g,()=>t.to,O,Y),d(j,()=>r.description,E,w),d(ue,s(me,{get each(){return a()},children:(I,ce)=>[(()=>{var R=b(ci);return d(R,()=>ce()+1),R})(),s(xe,{get children(){return[s(M,{get when(){return I.kind==="RESERVED_OTHER"},get children(){return s(U,{children:"Bereits reserviert"})}}),s(M,{get when(){return!e.isEditable},get children(){return s(U,{children:"Freier Platz"})}}),s(M,{get when(){return I.kind==="SELF"},get children(){return s(tt,{type:"success",get children(){var R=b(di),B=R.firstChild,Z=B.nextSibling,[de,ie]=S(Z.nextSibling);return d(R,s(fe,{icon:"trash",onClick:()=>e.removeReservation(I.kind==="SELF"?I.uuid:"should not happen")}),de,ie),R}})}}),s(M,{get when(){return I.kind==="FRIEND"},get children(){return s(tt,{type:"success",get children(){var R=b(hi),B=R.firstChild,Z=B.firstChild,de=Z.nextSibling,[ie,Ae]=S(de.nextSibling);ie.nextSibling;var Ce=B.nextSibling,[De,Lt]=S(Ce.nextSibling);return d(B,(()=>{var It=le(()=>I.kind==="FRIEND");return()=>It()?I.name:"[Fehler beim Laden]"})(),ie,Ae),d(R,s(fe,{icon:"trash",onClick:()=>e.removeReservation(I.kind==="FRIEND"?I.uuid:"should not happen")}),De,Lt),R}})}}),s(M,{get when(){return I.kind==="FREE"},get children(){return s(P,{get when(){return u()},get fallback(){return(()=>{var R=b(gi),B=R.firstChild,[Z,de]=S(B.nextSibling),ie=Z.nextSibling,[Ae,Ce]=S(ie.nextSibling);return d(R,s(ae,{icon:"person-to-portal",label:"Mich anmelden",kind:"success",onClick:()=>e.addReservation({kind:"SELF",helpEntryUuid:n.uuid,uuid:crypto.randomUUID()})}),Z,de),d(R,s(dt,{addFriend:De=>e.addReservation({kind:"FRIEND",helpEntryUuid:n.uuid,name:De,uuid:crypto.randomUUID()})}),Ae,Ce),R})()},get children(){return s(dt,{addFriend:R=>e.addReservation({kind:"FRIEND",helpEntryUuid:n.uuid,name:R,uuid:crypto.randomUUID()})})}})}})]}})]})),o})()]}function $i(e){const[t,n]=K({meta:{saveState:"IDLE",lastSaved:new Date},save:e.initState.data}),r=crypto.randomUUID(),[i,l]=ne(!1);Re(()=>JSON.stringify(t.save),async()=>{if(!i()){l(!0);return}if(e.initState.status!=="published"){vt("Diese Anmeldung wurde deaktiviert und kann nicht editiert werden.",{kind:"danger",uuid:r});return}const u=Vt(t.save);try{const o=await on(t.meta,u,e.secret);o.kind==="FAILURE"?console.error(o):n("meta","lastSaved",o.data)}catch(o){console.error(o),n("meta","saveState","ERROR")}});function a(u){return`${u}?secret=${e.secret}`}return s(Xn,{children:[{path:"/",component:()=>s(Se,{title:"Wo möchtest du starten?",link:a,get saveState(){return t.meta.saveState},get lastSaved(){return t.meta.lastSaved},get children(){return s(He,{link:a})}})},{path:"/runden",component:()=>s(He,{link:a})},{path:"/erstellen",component:()=>s(He,{link:a})},{path:"/helfen",component:()=>s(Se,{title:"Helfen",link:a,get saveState(){return t.meta.saveState},get lastSaved(){return t.meta.lastSaved},showQuickmenu:!0,get children(){return s(Ur,{get store(){return t.save},get isEditable(){return e.initState.status==="published"},link:a})}})},{path:"/helfen/:uuid",component:()=>s(Se,{link:a,get saveState(){return t.meta.saveState},get lastSaved(){return t.meta.lastSaved},showQuickmenu:!0,parentPath:"/helfen",get children(){return s(fi,{get store(){return t.save},get isEditable(){return e.initState.status==="published"}})}})},{path:"/zusammenfassung",component:()=>s(Se,{title:"Zusammenfassung",link:a,get saveState(){return t.meta.saveState},get lastSaved(){return t.meta.lastSaved},showQuickmenu:!0,get children(){return s(Kr,{get store(){return t.save},get isEditable(){return e.initState.status==="published"}})}})}]})}function bi(){return s(U,{get children(){return N.loading.registration}})}function Ei(){const t=URL.parse(location.toString().replace("#/",""))?.searchParams.get("secret")??"no-secret-found",[n]=Re(()=>ln(t));return s(Zt,{fallback:r=>(console.error(r),s(U,{type:"danger",get children(){return N.error.general}})),get children(){return s(Ge,{get fallback(){return s(bi,{})},get children(){return s(xe,{get children(){return s(M,{get when(){return n()},children:r=>{const{kind:i,value:l}=Ht(r());return i==="FAILURE"?l.reason==="SECRET_INVALID"?s(U,{type:"danger",get children(){return N.error.secretError}}):(console.error(l),s(U,{type:"danger",get children(){return N.error.ourMistake}})):s($i,{get initState(){return l.data},secret:t})}})}})}})}})}export{Ei as MeineAnmeldungWrapper};
