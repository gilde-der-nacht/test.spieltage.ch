import{e as Ae,d as Ht,f as $t,c as G,B as A,g as pe,h as le,i as be,I as Nt,b as ye,S as st,j as ot,u as Ot}from"./utils.CeEdiwNv.js";import{g as h,t as g,r as St,h as N,j as vt,k as qe,l as Je,n as kt,e as ae,b as j,p as Ge,q as Yt,w as Bt,x as jt,y as zt,c as l,z as Kt,A as se,S as F,B as Mt,C as _t,D as Ie,E as Qe,m as ut,G as Wt,H as Vt,I as we,i as c,a as S,s as $e,J as Zt,M,F as ne,f as ve,K as ue,L as Pe,N as Ue,O as Xe,P as qt,u as Jt,d as Re,Q as Gt,R as Qt}from"./web.gnKM2iBd.js";import{c as z,u as Xt}from"./store.BEDEK3nM.js";import{e as De,o as W,n as Se,s as H,a as et,u as tt,l as ee}from"./types.BB3bk5F8.js";import"./Textarea.B1KkMEf6.js";const[fe,xe]=z([]);function pt(e,t){if(t?.uuid!==void 0&&fe.find(u=>u.uuid===t.uuid)!==void 0)return We(t.uuid,e,t);const n=t?.uuid??crypto.randomUUID(),r=t?.duration??5e3,i=t?.kind??"gray",s=t?.dismissable??!0,a=setTimeout(()=>{xe(fe.filter(u=>u.uuid!==n))},r);return xe(fe.length,{uuid:n,kind:i,message:e,duration:r,dismissable:s,cleanup:()=>clearTimeout(a)}),n}function We(e,t,n){const r=fe.find(o=>o.uuid===e);if(r===void 0)return e;r.cleanup();const i=n.duration??r.duration,s=n.kind??r.kind,a=n?.dismissable??r.dismissable,u=setTimeout(()=>{xe(fe.filter(o=>o.uuid!==e))},i);return xe(o=>o.uuid===e,{uuid:e,kind:s,message:t,duration:i,dismissable:a,cleanup:()=>clearTimeout(u)}),e}const en=De(["SATURDAY","SUNDAY"]);W({uuid:H().uuid(),day:en,from:Se(),to:Se()}).refine(e=>e.from<e.to,{message:"A TimeSlot can't end before it starts."});W({name:H(),label:H(),description:H()});const tn=De(["draft","published","archived"]);async function nn(e){const t=new URL(Ae("/lst26/load"));t.searchParams.append("secret",e);const n=await fetch(t);if(!n.ok)return{kind:"FAILURE"};const r=await n.json();return typeof r=="object"&&r!==null?{kind:"SUCCESS",data:r}:(console.error("`last_save` not found on ",r),{kind:"FAILURE"})}async function rn(e,t){try{const n=await fetch(Ae("/lst26/save"),{method:"POST",body:JSON.stringify({secret:t,save:e}),headers:{"Content-Type":"application/json"}});return n.ok?{kind:"SUCCESS",data:t}:(console.error(await n.text()),{kind:"FAILURE"})}catch(n){return console.error(n),{kind:"FAILURE"}}}async function an(e){try{const t=new URL(Ae("/lst26/help"));t.searchParams.append("secret",e);const n=await fetch(t,{headers:{"Content-Type":"application/json"}});return n.ok?{kind:"SUCCESS",data:await n.json()}:(console.error(await n.text()),{kind:"FAILURE"})}catch(t){return console.error(t),{kind:"FAILURE"}}}De(["SAVING","IDLE","ERROR"]);const ln=et(tt([ee("admin"),ee("erklaerbaer")])),sn=De(["FRIDAY","SATURDAY","SUNDAY"]),on=W({from:Se(),to:Se()}),un=on.extend({day:sn});function _e(e,t){const{from:n,to:r}=t;return n<e&&e<r}function cn(e,t){const{from:n,to:r}=e,{from:i,to:s}=t;return _e(n,t)||_e(r,t)||_e(i,e)||_e(s,e)||n===i&&r===s}function dn(e,t=!1){const{from:n,to:r}=e;if(n>r)return[];const i=r-n;return yt(t?i+1:i,n)}function yt(e,t=0){return[...Array(e)].map((n,r)=>r+t)}const hn=W({name:H(),email:H(),mobile:H()}),gn=W({kind:ee("ERKLAERBAER"),uuid:H().uuid(),slot:un}),mn=tt([W({kind:ee("SELF"),helpEntryUuid:H().uuid(),uuid:H().uuid()}),W({kind:ee("FRIEND"),helpEntryUuid:H().uuid(),name:H(),uuid:H().uuid()}),gn]),fn=W({version:ee(4),contact:hn,helping:et(mn)}),bn=W({kind:ee("SUCCESS"),status:tn,roles:ln,data:fn});async function $n(e){if(e.length!==36&&e.length!==4)return{kind:"FAILURE",reason:"SECRET_INVALID"};const t=await nn(e);if(t.kind==="FAILURE")return console.error("Unexpected error. Maybe network, maybe server error."),{kind:"FAILURE",reason:"GENERAL"};const n=bn.safeParse(t.data);return n.success?{kind:"SUCCESS",data:n.data}:(console.error(n.error),{kind:"FAILURE",reason:"PARSE_ERROR"})}const Te=crypto.randomUUID();async function Sn(e,t,n){const[r,i]=z(e);i("saveState","SAVING"),pt("Am Speichern...",{uuid:Te,dismissable:!1});const s=new Date;try{if((await rn(t,n)).kind==="FAILURE")throw Error("")}catch(a){return i("saveState","ERROR"),console.error(a),We(Te,"Speichern war nicht möglich!",{kind:"danger",duration:1e4,dismissable:!0}),{kind:"FAILURE"}}return We(Te,`Zuletzt gespeichert um: ${$t(s)} Uhr`,{kind:"success",dismissable:!0}),i("saveState","IDLE"),{kind:"SUCCESS",data:s}}const vn=Ht(Sn,1e3);var ct=g("<br>"),kn=g("<strong>Donnerstag, 21. August 2025"),_n=g("<p>Deine Anmeldung wird geladen..."),pn=g("<p>Das Programm wird geladen..."),yn=g("<p>Leider ist ein unerwarteter Fehler passiert. Versuche deine Anmeldung erneut zu laden. Wiederholt sich dieser Fehler, bitte kontaktiere uns sobald als möglich über das <a href=/kontakt>Kontaktformular</a>, da dies nicht passieren sollte."),En=g("<p>Wir konnten leider keine Anmeldung finden. Wenn du bereits eine Anmeldung begonnen hast, solltest du den korrekten Link per E-Mail erhalten haben.<br><br> Falls du noch keine Anmeldung begonnen hast, kannst du <a href=/anmeldung>hier</a> deine persönliche Anmeldung beginnen. <br><br>Für generelle Fragen oder Probleme, schreibe uns doch bitte über unser <a href=/kontatk>Kontaktformular</a>."),wn=g("<p>Wir konnten leider keine Spielrunde unter diesem Link finden.<br><br>Vermutlich liegt es an uns. Bitte kontaktiere uns sobald als möglich über das "),Rn=g("<p>Leider ist ein unerwarteter Fehler passiert. Vermutlich liegt es an uns. Bitte kontaktiere uns sobald als möglich über das <a href=/kontakt>Kontaktformular</a>."),xn=g("<p>Leider ist ein unerwarteter Fehler passiert beim Laden des Programmes. Vermutlich liegt es an uns. Bitte kontaktiere uns sobald als möglich über das <a href=/kontakt>Kontaktformular</a>."),An=g("<p>Leider ist ein unerwarteter Fehler passiert beim Laden von Daten. Vermutlich liegt es an uns. Bitte kontaktiere uns sobald als möglich über das <a href=/kontakt>Kontaktformular</a>."),Un=g("<p>Leider ist das keine gültige Seite. Versuche deine Anmeldung erneut zu laden. Wiederholt sich dieser Fehler, bitte kontaktiere uns sobald als möglich über das <a href=/kontakt>Kontaktformular</a>, da dies nicht passieren sollte."),Dn=g("<p>Leider hast du keinen Zugriff auf diese Seite. Sollte dies ein Fehler sein, dann kontaktiere uns sobald als möglich über das <a href=/kontakt>Kontaktformular</a>.");h(ct),h(ct),h(kn);const Cn={registration:h(_n),program:h(pn)},Ln={general:h(yn),secretError:h(En),gameroundUuidError:h(wn),ourMistake:h(Rn),program:h(xn),help:h(An),siteNotFound:h(Un),noAccess:h(Dn)},Fn="Neuer Eintrag erstellen",In="Die Eingabe scheint keine gültige E-Mail-Adresse zu sein.",Pn="Dies ist ein Pflichtfeld.",Tn={FRIDAY:"Freitag",SATURDAY:"Samstag",SUNDAY:"Sonntag"},D={loading:Cn,error:Ln,createNewEntry:Fn,invalidEmail:In,mandatoryField:Pn,days:Tn};function Et(){let e=new Set;function t(i){return e.add(i),()=>e.delete(i)}let n=!1;function r(i,s){if(n)return!(n=!1);const a={to:i,options:s,defaultPrevented:!1,preventDefault:()=>a.defaultPrevented=!0};for(const u of e)u.listener({...a,from:u.location,retry:o=>{o&&(n=!0),u.navigate(i,{...s,resolve:!1})}});return!a.defaultPrevented}return{subscribe:t,confirm:r}}let Ve;function nt(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),Ve=window.history.state._depth}nt();function Hn(e){return{...e,_depth:window.history.state&&window.history.state._depth}}function Nn(e,t){let n=!1;return()=>{const r=Ve;nt();const i=r==null?null:Ve-r;if(n){n=!1;return}i&&t(i)?(n=!0,window.history.go(-i)):e()}}const On=/^(?:[a-z0-9]+:)?\/\//i,Yn=/^\/+|(\/)\/+$/g,wt="http://sr";function oe(e,t=!1){const n=e.replace(Yn,"$1");return n?t||/^[?#]/.test(n)?n:"/"+n:""}function Ee(e,t,n){if(On.test(t))return;const r=oe(e),i=n&&oe(n);let s="";return!i||t.startsWith("/")?s=r:i.toLowerCase().indexOf(r.toLowerCase())!==0?s=r+i:s=i,(s||"/")+oe(t,!s)}function Bn(e,t){if(e==null)throw new Error(t);return e}function jn(e,t){return oe(e).replace(/\/*(\*.*)?$/g,"")+oe(t)}function Rt(e){const t={};return e.searchParams.forEach((n,r)=>{r in t?Array.isArray(t[r])?t[r].push(n):t[r]=[t[r],n]:t[r]=n}),t}function zn(e,t,n){const[r,i]=e.split("/*",2),s=r.split("/").filter(Boolean),a=s.length;return u=>{const o=u.split("/").filter(Boolean),d=o.length-a;if(d<0||d>0&&i===void 0&&!t)return null;const b={path:a?"":"/",params:{}},f=k=>n===void 0?void 0:n[k];for(let k=0;k<a;k++){const $=s[k],_=$[0]===":",m=_?o[k]:o[k].toLowerCase(),v=_?$.slice(1):$.toLowerCase();if(_&&He(m,f(v)))b.params[v]=m;else if(_||!He(m,v))return null;b.path+=`/${m}`}if(i){const k=d?o.slice(-d).join("/"):"";if(He(k,f(i)))b.params[i]=k;else return null}return b}}function He(e,t){const n=r=>r===e;return t===void 0?!0:typeof t=="string"?n(t):typeof t=="function"?t(e):Array.isArray(t)?t.some(n):t instanceof RegExp?t.test(e):!1}function Kn(e){const[t,n]=e.pattern.split("/*",2),r=t.split("/").filter(Boolean);return r.reduce((i,s)=>i+(s.startsWith(":")?2:3),r.length-(n===void 0?0:1))}function xt(e){const t=new Map,n=vt();return new Proxy({},{get(r,i){return t.has(i)||St(n,()=>t.set(i,N(()=>e()[i]))),t.get(i)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())},has(r,i){return i in e()}})}function Mn(e,t){const n=new URLSearchParams(e);Object.entries(t).forEach(([i,s])=>{s==null||s===""||s instanceof Array&&!s.length?n.delete(i):s instanceof Array?(n.delete(i),s.forEach(a=>{n.append(i,String(a))})):n.set(i,String(s))});const r=n.toString();return r?`?${r}`:""}function At(e){let t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];let n=e.slice(0,t.index),r=e.slice(t.index+t[0].length);const i=[n,n+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(r);)i.push(n+=t[1]),r=r.slice(t[0].length);return At(r).reduce((s,a)=>[...s,...i.map(u=>u+a)],[])}const Wn=100,Ut=kt(),rt=kt(),ke=()=>Bn(Je(Ut),"<A> and 'use' router primitives can be only used inside a Route."),Vn=()=>Je(rt)||ke().base,Zn=e=>{const t=Vn();return N(()=>t.resolvePath(e()))},qn=e=>{const t=ke();return N(()=>{const n=e();return n!==void 0?t.renderPath(n):n})},Dt=()=>ke().navigatorFactory(),Ct=()=>ke().location,Jn=()=>ke().params,it=()=>{const e=Ct(),t=Dt(),n=(r,i)=>{const s=qe(()=>Mn(e.search,r)+e.hash);t(s,{scroll:!1,resolve:!1,...i})};return[e.query,n]};function Gn(e,t=""){const{component:n,preload:r,load:i,children:s,info:a}=e,u=!s||Array.isArray(s)&&!s.length,o={key:e,component:n,preload:r||i,info:a};return Lt(e.path).reduce((d,b)=>{for(const f of At(b)){const k=jn(t,f);let $=u?k:k.split("/*",1)[0];$=$.split("/").map(_=>_.startsWith(":")||_.startsWith("*")?_:encodeURIComponent(_)).join("/"),d.push({...o,originalPath:b,pattern:$,matcher:zn($,!u,e.matchFilters)})}return d},[])}function Qn(e,t=0){return{routes:e,score:Kn(e[e.length-1])*1e4-t,matcher(n){const r=[];for(let i=e.length-1;i>=0;i--){const s=e[i],a=s.matcher(n);if(!a)return null;r.unshift({...a,route:s})}return r}}}function Lt(e){return Array.isArray(e)?e:[e]}function Ft(e,t="",n=[],r=[]){const i=Lt(e);for(let s=0,a=i.length;s<a;s++){const u=i[s];if(u&&typeof u=="object"){u.hasOwnProperty("path")||(u.path="");const o=Gn(u,t);for(const d of o){n.push(d);const b=Array.isArray(u.children)&&u.children.length===0;if(u.children&&!b)Ft(u.children,d.pattern,n,r);else{const f=Qn([...n],r.length);r.push(f)}n.pop()}}}return n.length?r:r.sort((s,a)=>a.score-s.score)}function Ne(e,t){for(let n=0,r=e.length;n<r;n++){const i=e[n].matcher(t);if(i)return i}return[]}function Xn(e,t,n){const r=new URL(wt),i=N(b=>{const f=e();try{return new URL(f,r)}catch{return console.error(`Invalid path ${f}`),b}},r,{equals:(b,f)=>b.href===f.href}),s=N(()=>i().pathname),a=N(()=>i().search,!0),u=N(()=>i().hash),o=()=>"",d=Ge(a,()=>Rt(i()));return{get pathname(){return s()},get search(){return a()},get hash(){return u()},get state(){return t()},get key(){return o()},query:n?n(d):xt(d)}}let ie;function er(){return ie}function tr(e,t,n,r={}){const{signal:[i,s],utils:a={}}=e,u=a.parsePath||(E=>E),o=a.renderPath||(E=>E),d=a.beforeLeave||Et(),b=Ee("",r.base||"");if(b===void 0)throw new Error(`${b} is not a valid base path`);b&&!i().value&&s({value:b,replace:!0,scroll:!1});const[f,k]=ae(!1);let $;const _=(E,w)=>{w.value===m()&&w.state===y()||($===void 0&&k(!0),ie=E,$=w,Bt(()=>{$===w&&(v($.value),p($.state),zt(),I[1](T=>T.filter(te=>te.pending)))}).finally(()=>{$===w&&jt(()=>{ie=void 0,E==="navigate"&&L($),k(!1),$=void 0})}))},[m,v]=ae(i().value),[y,p]=ae(i().state),U=Xn(m,y,a.queryWrapper),R=[],I=ae([]),C=N(()=>typeof r.transformUrl=="function"?Ne(t(),r.transformUrl(U.pathname)):Ne(t(),U.pathname)),O=()=>{const E=C(),w={};for(let T=0;T<E.length;T++)Object.assign(w,E[T].params);return w},Y=a.paramsWrapper?a.paramsWrapper(O,t):xt(O),K={pattern:b,path:()=>b,outlet:()=>null,resolvePath(E){return Ee(b,E)}};return j(Ge(i,E=>_("native",E),{defer:!0})),{base:K,location:U,params:Y,isRouting:f,renderPath:o,parsePath:u,navigatorFactory:Z,matches:C,beforeLeave:d,preloadRoute:q,singleFlight:r.singleFlight===void 0?!0:r.singleFlight,submissions:I};function V(E,w,T){qe(()=>{if(typeof w=="number"){w&&(a.go?a.go(w):console.warn("Router integration does not support relative routing"));return}const te=!w||w[0]==="?",{replace:de,resolve:P,scroll:he,state:x}={replace:!1,resolve:!te,scroll:!0,...T},B=P?E.resolvePath(w):Ee(te&&U.pathname||"",w);if(B===void 0)throw new Error(`Path '${w}' is not a routable path`);if(R.length>=Wn)throw new Error("Too many redirects");const J=m();(B!==J||x!==y())&&(Yt||d.confirm(B,T)&&(R.push({value:J,replace:de,scroll:he,state:y()}),_("navigate",{value:B,state:x})))})}function Z(E){return E=E||Je(rt)||K,(w,T)=>V(E,w,T)}function L(E){const w=R[0];w&&(s({...E,replace:w.replace,scroll:w.scroll}),R.length=0)}function q(E,w){const T=Ne(t(),E.pathname),te=ie;ie="preload";for(let de in T){const{route:P,params:he}=T[de];P.component&&P.component.preload&&P.component.preload();const{preload:x}=P;w&&x&&St(n(),()=>x({params:he,location:{pathname:E.pathname,search:E.search,hash:E.hash,query:Rt(E),state:null,key:""},intent:"preload"}))}ie=te}}function nr(e,t,n,r){const{base:i,location:s,params:a}=e,{pattern:u,component:o,preload:d}=r().route,b=N(()=>r().path);o&&o.preload&&o.preload();const f=d?d({params:a,location:s,intent:ie||"initial"}):void 0;return{parent:t,pattern:u,path:b,outlet:()=>o?l(o,{params:a,location:s,data:f,get children(){return n()}}):n(),resolvePath($){return Ee(i.path(),$,b())}}}const rr=e=>t=>{const{base:n}=t,r=Kt(()=>t.children),i=N(()=>Ft(r(),t.base||""));let s;const a=tr(e,i,()=>s,{base:n,singleFlight:t.singleFlight,transformUrl:t.transformUrl});return e.create&&e.create(a),l(Ut.Provider,{value:a,get children(){return l(ir,{routerState:a,get root(){return t.root},get preload(){return t.rootPreload||t.rootLoad},get children(){return[se(()=>(s=vt())&&null),l(ar,{routerState:a,get branches(){return i()}})]}})}})};function ir(e){const t=e.routerState.location,n=e.routerState.params,r=N(()=>e.preload&&qe(()=>{e.preload({params:n,location:t,intent:er()||"initial"})}));return l(F,{get when(){return e.root},keyed:!0,get fallback(){return e.children},children:i=>l(i,{params:n,location:t,get data(){return r()},get children(){return e.children}})})}function ar(e){const t=[];let n;const r=N(Ge(e.routerState.matches,(i,s,a)=>{let u=s&&i.length===s.length;const o=[];for(let d=0,b=i.length;d<b;d++){const f=s&&s[d],k=i[d];a&&f&&k.route.key===f.route.key?o[d]=a[d]:(u=!1,t[d]&&t[d](),Mt($=>{t[d]=$,o[d]=nr(e.routerState,o[d-1]||e.routerState.base,dt(()=>r()[d+1]),()=>{const _=e.routerState.matches();return _[d]??_[0]})}))}return t.splice(i.length).forEach(d=>d()),a&&u?a:(n=o[0],o)}));return dt(()=>r()&&n)()}const dt=e=>()=>l(F,{get when(){return e()},keyed:!0,children:t=>l(rt.Provider,{value:t,get children(){return t.outlet()}})});function lr([e,t],n,r){return[e,r?i=>t(r(i)):t]}function sr(e){let t=!1;const n=i=>typeof i=="string"?{value:i}:i,r=lr(ae(n(e.get()),{equals:(i,s)=>i.value===s.value&&i.state===s.state}),void 0,i=>(!t&&e.set(i),Ie.registry&&!Ie.done&&(Ie.done=!0),i));return e.init&&_t(e.init((i=e.get())=>{t=!0,r[1](n(i)),t=!1})),rr({signal:r,create:e.create,utils:e.utils})}function or(e,t,n){return e.addEventListener(t,n),()=>e.removeEventListener(t,n)}function ur(e,t){const n=e&&document.getElementById(e);n?n.scrollIntoView():t&&window.scrollTo(0,0)}const cr=new Map;function dr(e=!0,t=!1,n="/_server",r){return i=>{const s=i.base.path(),a=i.navigatorFactory(i.base);let u,o;function d(m){return m.namespaceURI==="http://www.w3.org/2000/svg"}function b(m){if(m.defaultPrevented||m.button!==0||m.metaKey||m.altKey||m.ctrlKey||m.shiftKey)return;const v=m.composedPath().find(C=>C instanceof Node&&C.nodeName.toUpperCase()==="A");if(!v||t&&!v.hasAttribute("link"))return;const y=d(v),p=y?v.href.baseVal:v.href;if((y?v.target.baseVal:v.target)||!p&&!v.hasAttribute("state"))return;const R=(v.getAttribute("rel")||"").split(/\s+/);if(v.hasAttribute("download")||R&&R.includes("external"))return;const I=y?new URL(p,document.baseURI):new URL(p);if(!(I.origin!==window.location.origin||s&&I.pathname&&!I.pathname.toLowerCase().startsWith(s.toLowerCase())))return[v,I]}function f(m){const v=b(m);if(!v)return;const[y,p]=v,U=i.parsePath(p.pathname+p.search+p.hash),R=y.getAttribute("state");m.preventDefault(),a(U,{resolve:!1,replace:y.hasAttribute("replace"),scroll:!y.hasAttribute("noscroll"),state:R?JSON.parse(R):void 0})}function k(m){const v=b(m);if(!v)return;const[y,p]=v;i.preloadRoute(p,y.getAttribute("preload")!=="false")}function $(m){clearTimeout(u);const v=b(m);if(!v)return o=null;const[y,p]=v;o!==y&&(u=setTimeout(()=>{i.preloadRoute(p,y.getAttribute("preload")!=="false"),o=y},20))}function _(m){if(m.defaultPrevented)return;let v=m.submitter&&m.submitter.hasAttribute("formaction")?m.submitter.getAttribute("formaction"):m.target.getAttribute("action");if(!v)return;if(!v.startsWith("https://action/")){const p=new URL(v,wt);if(v=i.parsePath(p.pathname+p.search),!v.startsWith(n))return}if(m.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const y=cr.get(v);if(y){m.preventDefault();const p=new FormData(m.target,m.submitter);y.call({r:i,f:m.target},m.target.enctype==="multipart/form-data"?p:new URLSearchParams(p))}}Qe(["click","submit"]),document.addEventListener("click",f),e&&(document.addEventListener("mousemove",$,{passive:!0}),document.addEventListener("focusin",k,{passive:!0}),document.addEventListener("touchstart",k,{passive:!0})),document.addEventListener("submit",_),_t(()=>{document.removeEventListener("click",f),e&&(document.removeEventListener("mousemove",$),document.removeEventListener("focusin",k),document.removeEventListener("touchstart",k)),document.removeEventListener("submit",_)})}}function hr(e){const t=e.replace(/^.*?#/,"");if(!t.startsWith("/")){const[,n="/"]=window.location.hash.split("#",2);return`${n}#${t}`}return t}function gr(e){const t=()=>window.location.hash.slice(1),n=Et();return sr({get:t,set({value:r,replace:i,scroll:s,state:a}){i?window.history.replaceState(Hn(a),"","#"+r):window.history.pushState(a,"","#"+r);const u=r.indexOf("#"),o=u>=0?r.slice(u+1):"";ur(o,s),nt()},init:r=>or(window,"hashchange",Nn(r,i=>!n.confirm(i&&i<0?i:t()))),create:dr(e.preload,e.explicitLinks,e.actionBase),utils:{go:r=>window.history.go(r),renderPath:r=>`#${r}`,parsePath:hr,beforeLeave:n}})(e)}var mr=g("<a>");function Q(e){e=ut({inactiveClass:"inactive",activeClass:"active"},e);const[,t]=Wt(e,["href","state","class","activeClass","inactiveClass","end"]),n=Zn(()=>e.href),r=qn(n),i=Ct(),s=N(()=>{const a=n();if(a===void 0)return[!1,!1];const u=oe(a.split(/[?#]/,1)[0]).toLowerCase(),o=decodeURI(oe(i.pathname).toLowerCase());return[e.end?u===o:o.startsWith(u+"/")||o===u,u===o]});return(()=>{var a=h(mr);return Vt(a,ut(t,{get href(){return r()||e.href},get state(){return JSON.stringify(e.state)},get classList(){return{...e.class&&{[e.class]:!0},[e.inactiveClass]:!s()[0],[e.activeClass]:s()[0],...t.classList}},link:"",get"aria-current"(){return s()[1]?"page":void 0}}),!1,!1),we(),a})()}var fr=g("<div class=grid><!$><!/><div>"),br=g("<div class=boxLink>");function Ze(e){const t=e.type??"special";return(()=>{var n=h(br);return c(n,l(A,{type:t,get onClick(){return e.onClick},get children(){var r=h(fr),i=r.firstChild,[s,a]=S(i.nextSibling),u=s.nextSibling;return c(r,l(G,{get icon(){return e.icon}}),s,a),c(u,()=>e.children),r}})),n})()}var $r=g("<h3>Helfen"),Sr=g("<p>Beim Kiosk und der Essensausgabe können wir immer ein paar helfende Hände gebrauchen."),vr=g("<h3>Zusammenfassung"),kr=g("<p>Erhalte einen Überblick über dein gesamtes Programm."),_r=g("<div><!$><!/><br><!$><!/>");function Oe(e){return(()=>{var t=h(_r),n=t.firstChild,[r,i]=S(n.nextSibling),s=r.nextSibling,a=s.nextSibling,[u,o]=S(a.nextSibling);return c(t,l(Q,{get href(){return e.link("/helfen")},class:"button-link",get children(){return l(Ze,{icon:"hand-heart",get children(){return[h($r),h(Sr)]}})}}),r,i),c(t,l(Q,{get href(){return e.link("/zusammenfassung")},class:"button-link",get children(){return l(Ze,{icon:"list",get children(){return[h(vr),h(kr)]}})}}),u,o),t})()}var pr=g("<a class=header-anchor>");function yr(e){return encodeURIComponent(e.replaceAll(/\s/g,"-").replaceAll("&","").replaceAll(/-{1,}/g,"-").toLocaleLowerCase())}function at(e){const t=yr("title"in e?e.id??e.title:e.id);return l(Zt,{get component(){return`h${e.level}`},id:t,get children(){var n=h(pr);return $e(n,"href",`#${t}`),c(n,(()=>{var r=se(()=>"title"in e);return()=>r()?e.title:e.children})()),n}})}var Er=g("<div class=dynamic-columns style=gap:1rem;--min-width:30rem><!$><!/><!$><!/><!$><!/>"),wr=g("<div><div style=margin-block-end:1.5rem></div><!$><!/>"),Rr=g("<p>Konflikte gefunden! Bitte stelle sicher, dass du nicht zeitlich überlappende Spielrunden eingetragen hast:"),xr=g('<div style="display:grid;grid-template-columns:1fr max-content 1fr;gap:1rem;margin-block:0.5rem"><!$><!/><span style=color:var(--clr-warning-10);align-self:center;font-size:2rem></span><!$><!/>'),Ar=g("<div><!$><!/><div class=entries></div><div class=after-hour><div class=annotation>"),Ur=g("<div><div class=annotation></div><div class=background>"),Dr=g("<div class=entry>");function Cr(e){return(()=>{var t=h(Er),n=t.firstChild,[r,i]=S(n.nextSibling),s=r.nextSibling,[a,u]=S(s.nextSibling),o=a.nextSibling,[d,b]=S(o.nextSibling);return c(t,l(F,{get when(){return e.openingHours.FRIDAY.open.from!==e.openingHours.FRIDAY.open.to},get children(){return l(Ye,{get programEntries(){return e.programEntries.FRIDAY},get openingHoursOfDay(){return e.openingHours.FRIDAY},get openingHours(){return e.openingHours},day:"FRIDAY",get conflictsAllowed(){return e.conflictsAllowed??!1},get columns(){return e.columns}})}}),r,i),c(t,l(Ye,{get programEntries(){return e.programEntries.SATURDAY},get openingHoursOfDay(){return e.openingHours.SATURDAY},get openingHours(){return e.openingHours},day:"SATURDAY",get conflictsAllowed(){return e.conflictsAllowed??!1},get columns(){return e.columns}}),a,u),c(t,l(Ye,{get programEntries(){return e.programEntries.SUNDAY},get openingHoursOfDay(){return e.openingHours.SUNDAY},get openingHours(){return e.openingHours},day:"SUNDAY",get conflictsAllowed(){return e.conflictsAllowed??!1},get columns(){return e.columns}}),d,b),t})()}function Ye(e){const t=e.conflictsAllowed?[]:Fr(e.programEntries);return(()=>{var n=h(wr),r=n.firstChild,i=r.nextSibling,[s,a]=S(i.nextSibling);return c(r,l(at,{level:4,get title(){return D.days[e.day]}})),c(n,l(ve,{get fallback(){return[l(A,{type:"danger",get children(){return h(Rr)}}),l(ne,{each:t,children:([u,o])=>(()=>{var d=h(xr),b=d.firstChild,[f,k]=S(b.nextSibling),$=f.nextSibling,_=$.nextSibling,[m,v]=S(_.nextSibling);return c(d,()=>u.component(),f,k),c($,l(G,{icon:"triangle-exclamation"})),c(d,()=>o.component(),m,v),d})()})]},get children(){return l(M,{get when(){return t.length===0},get children(){return l(Lr,{get programEntries(){return e.programEntries},get openingHoursOfDay(){return e.openingHoursOfDay},get openingHours(){return e.openingHours},get day(){return e.day},get conflictsAllowed(){return e.conflictsAllowed},get columns(){return e.columns}})}})}}),s,a),n})()}function Lr(e){const t=dn(e.openingHoursOfDay.open),n=e.openingHoursOfDay.breaks.flatMap(({from:a,to:u})=>{pe(a<u,`Break is not valid, as from '${a}' is not smaller than to '${u}'`);const o=[a];let d=u-a;for(;d>1;)o.push(a+--d);return o}),r=(t[0]??0)-1,i=t.at(-1)??0,s=()=>{const a=["timetable"];return e.conflictsAllowed&&a.push(e.columns===2?"two-columns":"four-columns"),a.join(" ")};return(()=>{var a=h(Ar),u=a.firstChild,[o,d]=S(u.nextSibling),b=o.nextSibling,f=b.nextSibling,k=f.firstChild;return c(a,l(ne,{each:t,children:$=>{const _=n.includes($);return(()=>{var m=h(Ur),v=m.firstChild;return ue(m,`hour ${_?"break":""}`),c(v,$),j(y=>Pe(m,ht({from:$,to:$},r,e.day,e.openingHours),y)),m})()}}),o,d),c(b,l(ne,{get each(){return e.programEntries},children:$=>(()=>{var _=h(Dr);return c(_,()=>$.component()),j(m=>Pe(_,ht($.range,r,e.day,e.openingHours),m)),_})()})),c(k,i+1),j($=>{var _=s(),m=`grid-row: 1 / ${i-r+1};`;return _!==$.e&&ue(a,$.e=_),$.t=Pe(b,m,$.t),$},{e:void 0,t:void 0}),a})()}function ht(e,t,n,r){const{from:i,to:s}=e,a=i-t,u=s-t,o=r[n].open.to;return pe(a>0,`[${JSON.stringify(e)}] Entry can't start at ${i}.`),pe(u>0,`[${JSON.stringify(e)}] Entry can't end at ${s}.`),pe(s<=o,`[${JSON.stringify(e)}] Entry can't end at ${s}. Closing hour set to '${o}' on day '${n}'`),`grid-row: ${a} / ${u};`}function Fr(e){const t=[];return e.forEach((n,r)=>{e.slice(r+1).forEach(i=>{cn(n.range,i.range)&&t.push([n,i])})}),t}const me={kitchen:{title:"Küche",description:"Mahlzeit vorbereiten, unterstützen beim Kochen und Abwaschen."},service:{title:"Essensausgabe",description:""},cleaning:{title:"Reinigung",description:"Unterstützen beim Küche aufräumen und putzen."},kiosk:{title:"Kiosk",description:"Am Kiosk Getränke (inkl. Kaffee) und Snacks verkaufen."},flohmarkt:{title:"Flohmarkt",description:"Hilf uns beim Auf- oder Abbau des Flohmarkt und der Annahme oder Abgabe von Spielen."},checkout:{title:"Kiosk / Flohmarkt",description:"Am Kiosk Getränke und Snacks verkaufen oder am Flohmarkt die Kasse bedienen."},setup:{title:"Aufbau",description:"Hilf uns beim Zubereiten der Menüs und Aufstellen von Tischen, Stühle und der Bibliothek."},breakdown:{title:"Abbau",description:"Hilf uns beim Zusammenräumen von Tischen, Stühle, der Bibliothek und dem Flohmarkt."}},X={FRIDAY:{16:[{uuid:"eb443040-0674-429c-a3ad-48634a323b76",count:4,duration:5,kind:"setup"}],19:[{uuid:"91699a72-78d0-4dc9-bfe1-ece55b15db7d",count:1,duration:3,kind:"flohmarkt"}]},SATURDAY:{9:[{uuid:"6303bd52-cd10-4dd0-b760-b71ab971ad3b",count:4,duration:2,kind:"flohmarkt"}],10:[{uuid:"9ebca7e9-f44a-4cc9-8961-73539f17d5d6",count:2,duration:2,kind:"checkout"}],11:[{uuid:"804c379d-c747-4d7c-9f0c-a53f8548216e",count:2,duration:2,kind:"checkout"}],12:[{uuid:"bfec6f59-14eb-45b9-a21c-d33ee2205b64",count:2,duration:2,kind:"checkout"}],13:[{uuid:"8db23dfd-616e-4f1d-9a07-deb6e519d35a",count:2,duration:2,kind:"checkout"}],14:[{uuid:"477a1c27-b660-4221-9be0-de34de910f4b",count:2,duration:2,kind:"checkout"}],15:[{uuid:"516de07b-bc06-45b5-94f6-be5de186d4d5b",count:2,duration:2,kind:"checkout"}],16:[{uuid:"490c799f-ced5-461e-a483-ad6a90df221b",count:2,duration:2,kind:"checkout"}],17:[{uuid:"c9f79536-225a-41ee-93e6-ef1741b511f7",count:2,duration:2,kind:"checkout"}],18:[{uuid:"c6c3f0f7-04c6-4819-95e6-aa8476e4392c",count:2,duration:2,kind:"checkout"}],19:[{uuid:"9748b1e6-1712-449b-8dda-eb44f172071e",count:2,duration:2,kind:"checkout"}],20:[{uuid:"04f724ea-4a78-4363-ba0a-75a71ab22598",count:2,duration:2,kind:"checkout"}],21:[{uuid:"62d5af53-5e3e-4d59-b574-261e33b0a872",count:2,duration:2,kind:"checkout"}],22:[{uuid:"98fef052-02ba-4a33-ba2a-13ccad6834c7",count:2,duration:2,kind:"checkout"}],23:[{uuid:"e4700acc-7192-4063-b03d-cb4009cbe6f2",count:2,duration:1,kind:"checkout"}]},SUNDAY:{10:[{uuid:"d30340e1-e49f-44aa-bf1b-d90839b0f1aa",count:2,duration:1,kind:"checkout"},{uuid:"e1a9b252-628c-4c01-b8e1-e1964b51e646",count:2,duration:2,kind:"checkout"}],11:[{uuid:"873a1308-57bc-46bc-bdfc-a82213364c77",count:2,duration:2,kind:"checkout"}],12:[{uuid:"2e9864a9-0208-4e56-b232-dcd258e31545",count:2,duration:2,kind:"checkout"}],13:[{uuid:"caef5fea-8458-4b65-b699-9c4e5ee6589d",count:2,duration:2,kind:"checkout"}],14:[{uuid:"0da24180-0269-4206-adf7-4b9faeefa091",count:2,duration:2,kind:"checkout"}],15:[{uuid:"6c0430dd-9968-456d-bf68-d893040f73fa",count:2,duration:2,kind:"checkout"}],16:[{uuid:"40eaef18-d6a0-46e8-b3e5-a98be09cef57",count:2,duration:2,kind:"checkout"}],17:[{uuid:"3c6468ad-fdb8-432d-92ce-a52fae471206",count:2,duration:1,kind:"checkout"},{uuid:"b9da7047-c359-49fa-b558-53207ac5255a",count:2,duration:2,kind:"flohmarkt"},{uuid:"c0e1d54c-0832-4147-9054-082208dab2f2",count:4,duration:3,kind:"breakdown"}]}},Ir=[...Object.values(X.FRIDAY),...Object.values(X.SATURDAY),...Object.values(X.SUNDAY)].flatMap(e=>e.map(t=>t.uuid)),gt=Object.entries(Object.groupBy(Ir,e=>e)).reduce((e,[t,n])=>[...e,{uuid:t,count:n?.length??0}],[]).filter(({count:e})=>e!==1);if(gt.length>0)throw Error(`duplicate uuids found:  ${gt.map(({uuid:e})=>e).join(", ")}`);function Pr(e){return Be("FRIDAY",X.FRIDAY).concat(Be("SATURDAY",X.SATURDAY)).concat(Be("SUNDAY",X.SUNDAY)).find(n=>n.entry.uuid===e)??null}function Be(e,t){const n=[];return Object.entries(t).forEach(([r,i])=>{const s=Number(r);i.forEach(a=>{n.push({dateTime:{day:e,from:s,to:s+1},entry:a})})}),n}const Tr={FRIDAY:{open:{from:0,to:0},breaks:[]},SATURDAY:{open:{from:10,to:24},breaks:[]},SUNDAY:{open:{from:10,to:18},breaks:[]}},Hr={FRIDAY:{open:{from:16,to:22},breaks:[{from:16,to:22}]},SATURDAY:{open:{from:9,to:24},breaks:[{from:9,to:10}]},SUNDAY:{open:{from:10,to:20},breaks:[{from:18,to:20}]}};var Nr=g("<span>");function mt(e){const t=()=>{const n=["chip"];return n.push(e.kind??"gray"),e.inverted&&n.push("inverted"),e.size==="small"&&n.push("small"),n.join(" ")};return(()=>{var n=h(Nr);return c(n,()=>e.children),j(r=>{var i=t(),s=e.title;return i!==r.e&&ue(n,r.e=i),s!==r.t&&$e(n,"title",r.t=s),r},{e:void 0,t:void 0}),n})()}const Or=et(H().uuid());async function It(e){const t=await an(e);if(t.kind==="FAILURE")return console.error("Unexpected error. Maybe network, maybe server error."),{kind:"FAILURE"};const n=Or.safeParse(t.data);return n.success?{kind:"SUCCESS",data:n.data}:{kind:"FAILURE"}}var Yr=g("<p>Beim Kiosk und der Essensausgabe können wir immer ein paar helfende Hände gebrauchen. Wenn du bereit bist zu helfen, klicke in der jeweiligen Stunde auf das Handsymbol <!$><!/>."),Br=g("<br>"),jr=g("<p>Plan konnte nicht geladen werden."),ft=g("<div><!$><!/><!$><!/><h5></h5><p class=duration><em><!$><!/> / <!$><!/>");function zr(e){const[t]=it(),[n]=Ue(()=>It(String(t.secret)));return[(()=>{var r=h(Yr),i=r.firstChild,s=i.nextSibling,[a,u]=S(s.nextSibling);return a.nextSibling,c(r,l(G,{icon:"hand-heart"}),a,u),r})(),h(Br),l(F,{get when(){return e.roles.includes("erklaerbaer")},get children(){return l(Q,{get href(){return e.link("/erklaerbaer")},class:"button-link",style:"margin-block-end: 1rem;",get children(){return l(le,{icon:"hand-heart",label:"Anmelden als Erklärbär"})}})}}),l(Xe,{get fallback(){return l(A,{get children(){return D.loading.program}})},get children(){return l(F,{get when(){return n()},get fallback(){return l(A,{type:"danger",get children(){return D.error.help}})},children:r=>l(F,{get when(){return r().kind==="SUCCESS"},get fallback(){return l(A,{type:"danger",get children(){return h(jr)}})},get children(){return l(Kr,{get helpReservations(){return e.store.helping},get externalHelpReservations(){return r().data},get isEditable(){return e.isEditable},get link(){return e.link}})}})})}})]}function Kr(e){const t=()=>{const r=[];return e.helpReservations.forEach(i=>{i.kind!=="ERKLAERBAER"&&r.push(i.helpEntryUuid)}),e.externalHelpReservations.forEach(i=>{r.push(i)}),r},n=()=>({FRIDAY:je({constants:X.FRIDAY,alreadyReservedUuids:t(),myReservations:e.helpReservations,link:e.link}),SATURDAY:je({constants:X.SATURDAY,alreadyReservedUuids:t(),myReservations:e.helpReservations,link:e.link}),SUNDAY:je({constants:X.SUNDAY,alreadyReservedUuids:t(),myReservations:e.helpReservations,link:e.link})});return l(Cr,{get programEntries(){return n()},openingHours:Hr,conflictsAllowed:!0,columns:4})}function je(e){const t=Dt(),n=[],r=Mr(e.alreadyReservedUuids);return Object.entries(e.constants).forEach(([i,s])=>{s.forEach(a=>{const u={from:Number(i),to:Number(i)+a.duration},o=()=>a.count-(r[a.uuid]??0),d=()=>e.myReservations.filter(f=>"helpEntryUuid"in f&&f.helpEntryUuid===a.uuid).length>0,b=()=>{const f=["box-simple","timeview-entry"];return d()&&f.push("success"),f.join(" ")};o()===0?n.push({range:u,component:()=>(()=>{var f=h(ft),k=f.firstChild,[$,_]=S(k.nextSibling),m=$.nextSibling,[v,y]=S(m.nextSibling),p=v.nextSibling,U=p.nextSibling,R=U.firstChild,I=R.firstChild,[C,O]=S(I.nextSibling),Y=C.nextSibling,K=Y.nextSibling,[V,Z]=S(K.nextSibling);return f.$$click=()=>t(e.link(`/helfen/${a.uuid}`)),c(f,l(mt,{title:"Helfer:innen gesucht",get inverted(){return d()},size:"small",children:"HL"}),$,_),c(f,l(F,{get when(){return d()},get children(){return l(be,{icon:"hand-heart",kind:"ghost",onClick:()=>t(e.link(`/helfen/${a.uuid}`)),title:"Helfen"})}}),v,y),c(p,()=>me[a.kind].title),c(R,o,C,O),c(R,()=>a.count,V,Z),j(L=>{var q=b(),E=me[a.kind].title;return q!==L.e&&ue(f,L.e=q),E!==L.t&&$e(p,"title",L.t=E),L},{e:void 0,t:void 0}),we(),f})()}):n.push({range:u,component:()=>(()=>{var f=h(ft),k=f.firstChild,[$,_]=S(k.nextSibling),m=$.nextSibling,[v,y]=S(m.nextSibling),p=v.nextSibling,U=p.nextSibling,R=U.firstChild,I=R.firstChild,[C,O]=S(I.nextSibling),Y=C.nextSibling,K=Y.nextSibling,[V,Z]=S(K.nextSibling);return f.$$click=()=>t(e.link(`/helfen/${a.uuid}`)),c(f,l(mt,{title:"Helfer:innen gesucht",get inverted(){return d()},size:"small",children:"HL"}),$,_),c(f,l(be,{icon:"hand-heart",kind:"ghost",onClick:()=>t(e.link(`/helfen/${a.uuid}`)),title:"Helfen"}),v,y),c(p,()=>me[a.kind].title),c(R,()=>a.count-o(),C,O),c(R,()=>a.count,V,Z),j(L=>{var q=b(),E=me[a.kind].title;return q!==L.e&&ue(f,L.e=q),E!==L.t&&$e(p,"title",L.t=E),L},{e:void 0,t:void 0}),we(),f})()})})}),n}function Mr(e){const t=Object.groupBy(e,r=>r),n={};for(const r of e)n[r]=t[r]?.length??0;return n}Qe(["click"]);var Wr=g("<dialog closedby=any><!$><!/><!$><!/><!$><!/>"),Vr=g("<h4>");function Zr(e=!1){return{open:e}}function qr(e){let t;const[n,r]=z(e.store);qt(()=>{n.open?t.showModal():t.close()});function i(){r({open:!1}),e.onClose?.()}const s=()=>{const a=[];return e.type!==void 0&&a.push(e.type),e.size!==void 0&&a.push(e.size),e.onClose!==void 0&&a.push("dialog-with-close"),a};return(()=>{var a=h(Wr),u=a.firstChild,[o,d]=S(u.nextSibling),b=o.nextSibling,[f,k]=S(b.nextSibling),$=f.nextSibling,[_,m]=S($.nextSibling);a.addEventListener("close",i);var v=t;return typeof v=="function"?Jt(v,a):t=a,c(a,l(F,{get when(){return e.onClose},get children(){return l(be,{onClick:i,icon:"circle-xmark",kind:"gray"})}}),o,d),c(a,l(F,{get when(){return e.title},children:y=>(()=>{var p=h(Vr);return c(p,y),p})()}),f,k),c(a,()=>e.children,_,m),j(()=>ue(a,s().join(" "))),a})()}var Jr=g("<p>");function ze(e){const[t,n]=z(e.store),r=e.showErrors==="ALWAYS",i=()=>r||t.isDirty?e.errors??[]:[];return[l(Nt,{get label(){return e.label},get name(){return e.name},get value(){return t.value},onValueUpdate:s=>{n("value",s),e.onUpdate?.()},onBlur:()=>n("isDirty",!0),get type(){return e.type},get required(){return e.required},get isHoneypot(){return e.isHoneypot},get disabled(){return e.disabled}}),l(F,{get when(){return i().length>0},get children(){return l(A,{type:"danger",get children(){return l(ne,{get each(){return i()},children:s=>(()=>{var a=h(Jr);return c(a,s),a})()})}})}})]}H().transform(e=>({value:e,isDirty:!1}));function Ke(e){return{value:e,isDirty:!1}}Se().transform(e=>({value:e,isDirty:!1}));var Gr=g("<div style=display:grid;gap:1rem><!$><!/><!$><!/>"),Qr=g("<div>"),Xr=g("<div style=display:grid;gap:1rem><h3>Meine Kontaktdaten</h3><p><strong>Name:</strong> <!$><!/></p><p><strong>E-Mail:</strong> <!$><!/></p><p><strong>Handynummer:</strong> <!$><!/></p><!$><!/>"),ei=g("<form novalidate><!$><!/><!$><!/><!$><!/><!$><!/>");function ti(e){return(()=>{var t=h(Gr),n=t.firstChild,[r,i]=S(n.nextSibling),s=r.nextSibling,[a,u]=S(s.nextSibling);return c(t,l(ni,{get store(){return e.store.contact},get isEditable(){return e.isEditable}}),r,i),c(t,l(A,{type:"special",children:"Eine persöhnliche Zusammenfassung folgt noch."}),a,u),t})()}function ni(e){const[t,n]=z(e.store),[r,i]=z(Zr());return l(A,{get children(){return[l(F,{get when(){return r.open},get children(){return l(ri,{dialogStore:r,get currentState(){return e.store},updateCurrentState:n})}}),(()=>{var s=h(Xr),a=s.firstChild,u=a.nextSibling,o=u.firstChild,d=o.nextSibling,b=d.nextSibling,[f,k]=S(b.nextSibling),$=u.nextSibling,_=$.firstChild,m=_.nextSibling,v=m.nextSibling,[y,p]=S(v.nextSibling),U=$.nextSibling,R=U.firstChild,I=R.nextSibling,C=I.nextSibling,[O,Y]=S(C.nextSibling),K=U.nextSibling,[V,Z]=S(K.nextSibling);return c(u,()=>e.store.name,f,k),c($,()=>e.store.email,y,p),c(U,()=>e.store.mobile,O,Y),c(s,l(F,{get when(){return e.isEditable},get children(){var L=h(Qr);return c(L,l(le,{icon:"pencil",label:"Kontaktdaten editieren",onClick:()=>i("open",!0)})),L}}),V,Z),s})()]}})}function ri(e){const[t]=it(),[n]=z({name:Ke(e.currentState.name),email:Ke(e.currentState.email),mobile:Ke(e.currentState.mobile)}),[r,i]=z({kind:"IDLE",isDuplicate:!1}),s=N(()=>{const o={name:[],email:[]};return n.name.value.trim().length===0&&o.name.push(D.mandatoryField),n.email.value.trim().length===0?o.email.push(D.mandatoryField):n.email.value.includes("@")||o.email.push(D.invalidEmail),r.kind==="IDLE"&&r.isDuplicate&&o.email.push("Diese E-Mail wird bereits verwendet."),{...o,hasErrors:o.name.length+o.email.length>0}}),[a,u]=z(e.dialogStore);return l(qr,{get store(){return e.dialogStore},title:"Kontaktdaten editieren",onClose:()=>{},size:"medium",get children(){var o=h(ei),d=o.firstChild,[b,f]=S(d.nextSibling),k=b.nextSibling,[$,_]=S(k.nextSibling),m=$.nextSibling,[v,y]=S(m.nextSibling),p=v.nextSibling,[U,R]=S(p.nextSibling);return c(o,l(ze,{get store(){return n.name},label:"Name",name:"name",showErrors:"ON_BLUR",get errors(){return s().name}}),b,f),c(o,l(ze,{get store(){return n.email},label:"E-Mail",name:"email",showErrors:"ALWAYS",get errors(){return s().email},onUpdate:()=>i({kind:"IDLE",isDuplicate:!1})}),$,_),c(o,l(ze,{get store(){return n.mobile},label:"Handynummer",name:"mobile"}),v,y),c(o,l(ye,{label:"Speichern",get disabled(){return s().hasErrors||r.kind==="CHECKING"},onClick:async()=>{if(!s().hasErrors){i({kind:"CHECKING"});const I=t.secret,C=await fetch(Ae(`/lst26/check-email?email=${n.email.value}&secret=${I}`));if(!C.ok){i({kind:"IDLE",isDuplicate:!0});return}const O=await C.json(),Y=ii.safeParse(O);if(!Y.success){i({kind:"IDLE",isDuplicate:!0});return}if(Y.data.kind==="FAILURE"){i({kind:"IDLE",isDuplicate:!0});return}i({kind:"IDLE",isDuplicate:!1}),e.updateCurrentState({name:n.name.value,email:n.email.value,mobile:n.mobile.value}),u("open",!1)}}}),U,R),o}})}const ii=tt([W({kind:ee("SUCCESS")}),W({kind:ee("FAILURE")})]);var ai=g("<div class=tooltip-wrapper><div class=tooltip></div><!$><!/>");function Me(e){return(()=>{var t=h(ai),n=t.firstChild,r=n.nextSibling,[i,s]=S(r.nextSibling);return c(n,()=>e.tooltip),c(t,()=>e.children,i,s),t})()}var li=g("<div class=quickmenu-wrapper><div class=quickmenu><!$><!/><!$><!/><!$><!/>"),si=g('<div class="quickmenu extended"><!$><!/><!$><!/><!$><!/>'),oi=g("<div style=margin-block-start:1rem;display:flex;gap:0.5rem;align-items:center><!$><!/><em>Zuletzt gespeichert um: <!$><!/> Uhr"),ui=g("<div style=margin-block-start:1rem;display:flex;gap:0.5rem;align-items:center><!$><!/><em>Am Speichern..."),ci=g("<div style=margin-block-start:1rem;display:flex;gap:0.5rem;align-items:center><!$><!/><em>Speichern war nicht möglich!");function di(e){return(()=>{var t=h(li),n=t.firstChild,r=n.firstChild,[i,s]=S(r.nextSibling),a=i.nextSibling,[u,o]=S(a.nextSibling),d=u.nextSibling,[b,f]=S(d.nextSibling);return c(n,l(Me,{tooltip:"Zur Übersicht",get children(){return l(Q,{get href(){return e.link(e.parentPath)},class:"button-link",get children(){return l(ye,{get label(){return l(G,{icon:"backward"})}})}})}}),i,s),c(n,l(Me,{tooltip:"Zum Helferplan",get children(){return l(Q,{get href(){return e.link("/helfen")},class:"button-link",get children(){return l(ye,{get label(){return l(G,{icon:"hand-heart"})}})}})}}),u,o),c(n,l(Me,{tooltip:"Zur Zusammenfassung",get children(){return l(Q,{get href(){return e.link("/zusammenfassung")},class:"button-link",get children(){return l(ye,{get label(){return l(G,{icon:"list"})}})}})}}),b,f),t})()}function hi(e){return[l(A,{type:"gray",get children(){var t=h(si),n=t.firstChild,[r,i]=S(n.nextSibling),s=r.nextSibling,[a,u]=S(s.nextSibling),o=a.nextSibling,[d,b]=S(o.nextSibling);return c(t,l(Q,{get href(){return e.link(e.parentPath)},class:"button-link",get children(){return l(le,{icon:"backward",label:"Zur Übersicht"})}}),r,i),c(t,l(Q,{get href(){return e.link("/helfen")},class:"button-link",get children(){return l(le,{icon:"hand-heart",label:"Zum Helferplan"})}}),a,u),c(t,l(Q,{get href(){return e.link("/zusammenfassung")},class:"button-link",get children(){return l(le,{icon:"list",label:"Zur Zusammenfassung"})}}),d,b),t}}),l(gi,{get saveState(){return e.saveState},get lastSaved(){return e.lastSaved}})]}function gi(e){return l(ve,{get children(){return[l(M,{get when(){return e.saveState==="IDLE"},get children(){var t=h(oi),n=t.firstChild,[r,i]=S(n.nextSibling),s=r.nextSibling,a=s.firstChild,u=a.nextSibling,[o,d]=S(u.nextSibling);return o.nextSibling,c(t,l(G,{icon:"circle-check"}),r,i),c(s,()=>$t(e.lastSaved),o,d),t}}),l(M,{get when(){return e.saveState==="SAVING"},get children(){var t=h(ui),n=t.firstChild,[r,i]=S(n.nextSibling);return r.nextSibling,c(t,l(G,{icon:"floppy-disk-circle-arrow-right"}),r,i),t}}),l(M,{get when(){return e.saveState==="ERROR"},get children(){var t=h(ci),n=t.firstChild,[r,i]=S(n.nextSibling);return r.nextSibling,c(t,l(G,{icon:"triangle-exclamation"}),r,i),t}})]}})}var mi=g("<div class=page><!$><!/><div class=page-content><!$><!/><!$><!/></div><!$><!/>"),fi=g("<h2>"),bi=g("<br>"),$i=g("<div class=extended-wrapper style=margin-block-start:1rem>");function re(e){return(()=>{var t=h(mi),n=t.firstChild,[r,i]=S(n.nextSibling),s=r.nextSibling,a=s.firstChild,[u,o]=S(a.nextSibling),d=u.nextSibling,[b,f]=S(d.nextSibling),k=s.nextSibling,[$,_]=S(k.nextSibling);return c(t,(()=>{var m=se(()=>e.showQuickmenu!==!1);return()=>m()?l(di,{get link(){return e.link},get saveState(){return e.saveState},get lastSaved(){return e.lastSaved},get parentPath(){return e.parentPath??"/"}}):null})(),r,i),c(s,(()=>{var m=se(()=>e.title===void 0);return()=>m()?null:[(()=>{var v=h(fi);return c(v,()=>e.title),v})(),h(bi)]})(),u,o),c(s,()=>e.children,b,f),c(t,(()=>{var m=se(()=>e.showQuickmenu!==!1);return()=>m()?(()=>{var v=h($i);return c(v,l(hi,{get link(){return e.link},get saveState(){return e.saveState},get lastSaved(){return e.lastSaved},get parentPath(){return e.parentPath??"/"}})),v})():null})(),$,_),t})()}var Si=g('<form class=input-button style="display:grid;gap:0rem;grid-template-columns:1fr max-content"><input type=text style=border-color:var(--clr-special-9)><!$><!/>');function bt(e){const[t,n]=ae("");return(()=>{var r=h(Si),i=r.firstChild,s=i.nextSibling,[a,u]=S(s.nextSibling);return r.addEventListener("submit",o=>{o.preventDefault();const d=t();d.trim().length>0&&e.addFriend(d)}),Re(r,"noValidate",!0),i.$$input=o=>n(o.target.value),c(r,l(le,{icon:"arrow-right",type:"submit",label:"Begleitperson anmelden",kind:"special"}),a,u),j(()=>Re(i,"value",t())),we(),r})()}Qe(["input"]);var vi=g("<p>Plan konnte nicht geladen werden."),ki=g("<h3>"),_i=g("<div class=game-dialog><ul role=list style=display:grid;gap:0.5rem><li><strong style=color:var(--clr-accent-1)>Tag, Zeit:</strong> <br><!$><!/>, <!$><!/> - <!$><!/> Uhr</li><li><strong style=color:var(--clr-accent-1)>Beschreibung:</strong> <br><!$><!/></li></ul><div class=reservations><h5 style=margin-block-start:0>Plätze reservieren</h5><div class=reservation-table>"),pi=g("<div class=count>"),yi=g("<div class=reservation-table-entry><p>Reserviert für mich </p><!$><!/>"),Ei=g('<div class=reservation-table-entry><p>Reserviert für "<!$><!/>"</p><!$><!/>'),wi=g('<div style="display:grid;gap:1rem;grid-template-columns:max-content 1fr"><!$><!/><!$><!/>');function Ri(e){const[t,n]=z(e.store),r=Jn().uuid??"no-uuid-found",i=Pr(r),[s]=it(),[a]=Ue(()=>It(String(s.secret)));return l(Xe,{get fallback(){return l(A,{get children(){return D.loading.program}})},get children(){return l(F,{get when(){return a()},get fallback(){return l(A,{type:"danger",get children(){return D.error.help}})},children:u=>l(F,{get when(){return u().kind==="SUCCESS"},get fallback(){return l(A,{type:"danger",get children(){return h(vi)}})},get children(){return l(F,{when:i,children:o=>l(xi,{get entry(){return o()},get helpReservations(){return e.store.helping},get externalHelpReservations(){return u().data},get isEditable(){return e.isEditable},addReservation:d=>n("helping",t.helping.length,{...d,uuid:crypto.randomUUID()}),removeReservation:d=>{n("helping",t.helping.filter(b=>b.uuid!==d))}})})}})})}})}function xi(e){const{dateTime:t,entry:n}=e.entry,r=me[n.kind],i=()=>e.helpReservations.filter(o=>"helpEntryUuid"in o&&o.helpEntryUuid===n.uuid),s=e.externalHelpReservations.filter(o=>o===n.uuid).length,a=()=>yt(n.count).map(o=>{const d=i()[o];return d!==void 0?d:n.count-s<=o?{kind:"RESERVED_OTHER"}:{kind:"FREE"}}),u=()=>i().find(o=>o.kind==="SELF")!==void 0;return[(()=>{var o=h(ki);return c(o,()=>r.title),o})(),(()=>{var o=h(_i),d=o.firstChild,b=d.firstChild,f=b.firstChild,k=f.nextSibling,$=k.nextSibling,_=$.nextSibling,[m,v]=S(_.nextSibling),y=m.nextSibling,p=y.nextSibling,[U,R]=S(p.nextSibling),I=U.nextSibling,C=I.nextSibling,[O,Y]=S(C.nextSibling);O.nextSibling;var K=b.nextSibling,V=K.firstChild,Z=V.nextSibling,L=Z.nextSibling,q=L.nextSibling,[E,w]=S(q.nextSibling),T=d.nextSibling,te=T.firstChild,de=te.nextSibling;return c(b,()=>D.days[t.day],m,v),c(b,()=>t.from,U,R),c(b,()=>t.to,O,Y),c(K,()=>r.description,E,w),c(de,l(ne,{get each(){return a()},children:(P,he)=>[(()=>{var x=h(pi);return c(x,()=>he()+1),x})(),l(ve,{get children(){return[l(M,{get when(){return P.kind==="RESERVED_OTHER"},get children(){return l(A,{children:"Bereits reserviert"})}}),l(M,{get when(){return!e.isEditable},get children(){return l(A,{children:"Freier Platz"})}}),l(M,{get when(){return P.kind==="SELF"},get children(){return l(st,{type:"success",get children(){var x=h(yi),B=x.firstChild,J=B.nextSibling,[ge,ce]=S(J.nextSibling);return c(x,l(be,{icon:"trash",onClick:()=>e.removeReservation(P.kind==="SELF"?P.uuid:"should not happen")}),ge,ce),x}})}}),l(M,{get when(){return P.kind==="FRIEND"},get children(){return l(st,{type:"success",get children(){var x=h(Ei),B=x.firstChild,J=B.firstChild,ge=J.nextSibling,[ce,Ce]=S(ge.nextSibling);ce.nextSibling;var Le=B.nextSibling,[Fe,Pt]=S(Le.nextSibling);return c(B,(()=>{var Tt=se(()=>P.kind==="FRIEND");return()=>Tt()?P.name:"[Fehler beim Laden]"})(),ce,Ce),c(x,l(be,{icon:"trash",onClick:()=>e.removeReservation(P.kind==="FRIEND"?P.uuid:"should not happen")}),Fe,Pt),x}})}}),l(M,{get when(){return P.kind==="FREE"},get children(){return l(F,{get when(){return u()},get fallback(){return(()=>{var x=h(wi),B=x.firstChild,[J,ge]=S(B.nextSibling),ce=J.nextSibling,[Ce,Le]=S(ce.nextSibling);return c(x,l(le,{icon:"person-to-portal",label:"Mich anmelden",kind:"success",onClick:()=>e.addReservation({kind:"SELF",helpEntryUuid:n.uuid,uuid:crypto.randomUUID()})}),J,ge),c(x,l(bt,{addFriend:Fe=>e.addReservation({kind:"FRIEND",helpEntryUuid:n.uuid,name:Fe,uuid:crypto.randomUUID()})}),Ce,Le),x})()},get children(){return l(bt,{addFriend:x=>e.addReservation({kind:"FRIEND",helpEntryUuid:n.uuid,name:x,uuid:crypto.randomUUID()})})}})}})]}})]})),o})()]}var Ai=g("<ul role=list>"),Ui=g("<li>"),Di=g("<label class=input-radio><input type=radio><!$><!/>");function Ci(e){const t=e.layout??"vertical";return(()=>{var n=h(Ai);return ue(n,`radio-list ${t}`),c(n,l(ne,{get each(){return e.items},children:r=>(()=>{var i=h(Ui);return c(i,l(Li,{get label(){return r.label},get name(){return`${r.value}-${e.name}`},get value(){return r.value},get checked(){return r.checked},onValueUpdate:()=>e.onValueUpdate(r.value)})),i})()})),n})()}function Li(e){return(()=>{var t=h(Di),n=t.firstChild,r=n.nextSibling,[i,s]=S(r.nextSibling);return Gt(n,"change",e.onValueUpdate),c(t,()=>e.label,i,s),j(()=>$e(n,"name",e.name)),j(()=>Re(n,"value",e.value)),j(()=>Re(n,"checked",e.checked)),t})()}var Fi=g("<p>Eines der Hauptziele der Luzerner Spieltage ist es, dass die Besucher/-innen noch nicht gespielte Spiele ausprobieren können. Dazu unterstützen uns jedes Jahr Freiwillige und erklären die ihnen bekannten Spiele aus der Spiele-Bibliothek. Diese Erklärbären sind durch ihr rotes T-Shirt erkennbar."),lt=g("<br>"),Ii=g("<ul><li>Sie müssen nicht alle Spiele der Spiele-Bibliothek kennen!</li><li>Sie erklären Spiele während der eingeplanten Zeit<ul><li>Grundsätzlich spielen die Erklärbären nicht mit</li><li>Sobald die Spieler/-innen die Regeln verstanden haben (z.B. nach den ersten paar Runden) verlassen sie den Tisch</li><li>Sie stehen weiterhin für Fragen zur Verfügung und kommen allenfalls periodisch zum Tisch zurück</li></ul></li><li>Sie bringen Spiele für die Spiele-Bibliothek mit welche sie erklären können<ul><li>Diese Spiele sollen ein breites Spektrum, von einfach bis komplex, abdecken</li><li>Eine Liste der mitgebrachten Spiele (Spiele-Bibliothek) wird vor dem Event von allen Erklärbären zusammen erstellt</li><li>Vor dem Event notieren die Erklärbären, was sie aus der Spiele-Bibliothek erklären können - (Mitbringen eigener Spiele ist nicht Pflicht, falls genügend Spiele aus der Liste erklärt werden können)</li></ul></li><li>Sie erarbeiten gemeinsam vor dem Event eine Empfehlungsliste aus ca.&nbsp;6&nbsp;Spielen<ul><li>Alle Erklärbären sollen die Regeln dieser Spiele vor dem Event lesen"),Pi=g("<h3>"),Ti=g("<div style=display:grid;gap:1rem><!$><!/><!$><!/>"),Hi=g("<em>Noch keine Einsätze eingetragen"),Ni=g("<h4>Tag"),Oi=g("<h4>Uhrzeit"),Yi=g('<div style="display:grid;grid-template-columns:repeat(2, 1fr);gap:1rem"><!$><!/><!$><!/>'),Bi=g("<h5>Warnungen"),ji=g("<ul>"),zi=g("<li>");function Ki(e){return[h(Fi),h(lt),l(at,{level:3,title:"Was machen die Erklärbären"}),h(Ii),l(Mi,{get store(){return e.store},get isEditable(){return e.isEditable}})]}function Mi(e){const[t,n]=z(e.store.helping);function r(){return t.filter(i=>i.kind==="ERKLAERBAER")}return[l(at,{level:3,title:"Meine Einsätze"}),h(lt),(()=>{var i=h(Ti),s=i.firstChild,[a,u]=S(s.nextSibling),o=a.nextSibling,[d,b]=S(o.nextSibling);return c(i,l(ne,{get each(){return r()},get fallback(){return h(Hi)},children:f=>l(Wi,{job:f,updateJob:k=>{n(t.map($=>$.uuid===f.uuid?k:$))},removeJob:()=>{n(t.filter(k=>k.uuid!==f.uuid))},get isEditable(){return e.isEditable}})}),a,u),c(i,l(F,{get when(){return e.isEditable},get children(){return l(Ze,{icon:"grid-2-plus",type:"success",onClick:()=>{n(t.length,{kind:"ERKLAERBAER",uuid:crypto.randomUUID(),slot:{day:"SATURDAY",from:10,to:18}})},get children(){var f=h(Pi);return c(f,()=>D.createNewEntry),f}})}}),d,b),i})()]}function Wi(e){function t(){const n=[],{day:r,from:i,to:s}=e.job.slot;i>=s&&n.push("Das Ende muss grösser sein als der Start.");const a=Tr[r],{from:u,to:o}=a.open;return u>i&&n.push(`Die Spieltage öffnen am ${D.days[r]} erst um ${u} Uhr.`),o<s&&n.push(`Die Spieltage schliessen am ${D.days[r]} um ${o} Uhr.`),n}return l(A,{get onClose(){return se(()=>!!e.isEditable)()?e.removeJob:void 0},get children(){return[h(Ni),l(Ci,{get items(){return[{label:D.days.SATURDAY,checked:e.job.slot.day==="SATURDAY",value:"SATURDAY"},{label:D.days.SUNDAY,checked:e.job.slot.day==="SUNDAY",value:"SUNDAY"}]},onValueUpdate:n=>{e.updateJob({...e.job,slot:{...e.job.slot,day:n}})},get name(){return`day-entry-${e.job.uuid}`},layout:"horizontal",get disabled(){return!e.isEditable}}),h(lt),h(Oi),(()=>{var n=h(Yi),r=n.firstChild,[i,s]=S(r.nextSibling),a=i.nextSibling,[u,o]=S(a.nextSibling);return c(n,l(ot,{label:"Start",name:"from",get value(){return e.job.slot.from},onValueUpdate:d=>e.updateJob({...e.job,slot:{...e.job.slot,from:d}}),get disabled(){return!e.isEditable}}),i,s),c(n,l(ot,{label:"Ende",name:"to",get value(){return e.job.slot.to},onValueUpdate:d=>e.updateJob({...e.job,slot:{...e.job.slot,to:d}}),get disabled(){return!e.isEditable}}),u,o),n})(),l(F,{get when(){return t().length>0},get children(){return[h(Bi),(()=>{var n=h(ji);return c(n,l(ne,{get each(){return t()},children:r=>(()=>{var i=h(zi);return c(i,r),i})()})),n})()]}})]}})}function Vi(e){const[t,n]=z({meta:{saveState:"IDLE",lastSaved:new Date,roles:e.initState.roles},save:e.initState.data}),r=crypto.randomUUID(),[i,s]=ae(!1);Ue(()=>JSON.stringify(t.save),async()=>{if(!i()){s(!0);return}if(e.initState.status!=="published"){pt("Diese Anmeldung wurde deaktiviert und kann nicht editiert werden.",{kind:"danger",uuid:r});return}const u=Xt(t.save);try{const o=await vn(t.meta,u,e.secret);o.kind==="FAILURE"?console.error(o):n("meta","lastSaved",o.data)}catch(o){console.error(o),n("meta","saveState","ERROR")}});function a(u){return`${u}?secret=${e.secret}`}return l(gr,{children:[{path:"/",component:()=>l(re,{title:"Wo möchtest du starten?",link:a,get saveState(){return t.meta.saveState},get lastSaved(){return t.meta.lastSaved},get children(){return l(Oe,{link:a})}})},{path:"/runden",component:()=>l(Oe,{link:a})},{path:"/erstellen",component:()=>l(Oe,{link:a})},{path:"/helfen",component:()=>l(re,{title:"Helfen",link:a,get saveState(){return t.meta.saveState},get lastSaved(){return t.meta.lastSaved},showQuickmenu:!0,get children(){return l(zr,{get store(){return t.save},get isEditable(){return e.initState.status==="published"},link:a,get roles(){return t.meta.roles}})}})},{path:"/helfen/:uuid",component:()=>l(re,{link:a,get saveState(){return t.meta.saveState},get lastSaved(){return t.meta.lastSaved},showQuickmenu:!0,parentPath:"/helfen",get children(){return l(Ri,{get store(){return t.save},get isEditable(){return e.initState.status==="published"}})}})},{path:"/erklaerbaer",component:()=>l(ve,{get fallback(){return l(re,{title:"Keinen Zugriff",link:a,get saveState(){return t.meta.saveState},get lastSaved(){return t.meta.lastSaved},showQuickmenu:!0,get children(){return l(A,{type:"danger",get children(){return D.error.noAccess}})}})},get children(){return l(M,{get when(){return t.meta.roles.includes("erklaerbaer")},get children(){return l(re,{title:"Helfen: Erklärbären",link:a,get saveState(){return t.meta.saveState},get lastSaved(){return t.meta.lastSaved},showQuickmenu:!0,parentPath:"/helfen",get children(){return l(Ki,{get store(){return t.save},get isEditable(){return e.initState.status==="published"}})}})}})}})},{path:"/zusammenfassung",component:()=>l(re,{title:"Zusammenfassung",link:a,get saveState(){return t.meta.saveState},get lastSaved(){return t.meta.lastSaved},showQuickmenu:!0,get children(){return l(ti,{get store(){return t.save},get isEditable(){return e.initState.status==="published"}})}})},{path:"*",component:()=>l(re,{title:"Seite nicht gefunden",link:a,get saveState(){return t.meta.saveState},get lastSaved(){return t.meta.lastSaved},showQuickmenu:!0,get children(){return l(A,{type:"danger",get children(){return D.error.siteNotFound}})}})}]})}function Zi(){return l(A,{get children(){return D.loading.registration}})}function ta(){const t=URL.parse(location.toString().replace("#/",""))?.searchParams.get("secret")??"no-secret-found",[n]=Ue(()=>$n(t));return l(Qt,{fallback:r=>(console.error(r),l(A,{type:"danger",get children(){return D.error.general}})),get children(){return l(Xe,{get fallback(){return l(Zi,{})},get children(){return l(ve,{get children(){return l(M,{get when(){return n()},children:r=>{const{kind:i,value:s}=Ot(r());return i==="FAILURE"?s.reason==="SECRET_INVALID"?l(A,{type:"danger",get children(){return D.error.secretError}}):(console.error(s),l(A,{type:"danger",get children(){return D.error.ourMistake}})):l(Vi,{get initState(){return s.data},secret:t})}})}})}})}})}export{ta as MeineAnmeldungWrapper};
