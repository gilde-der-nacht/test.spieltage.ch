import{c as Le,o as T,n as me,s as Y,e as Fe,d as _e,u as Ge,l as ne,f as Tt,g as Ht,h as $t,i as V,B as R,j as Ae,r as Nt,b as q,k as pe,I as Yt,m as ee,S as at,p as st,q as Bt}from"./utils.IkXL6xk3.js";import{g,t as h,r as St,h as O,j as vt,k as Qe,l as kt,e as le,b as B,n as Xe,p as et,q as Ot,w as zt,x as jt,y as Kt,c as l,z as Mt,A as ae,S as U,B as Wt,C as _t,D as Ne,E as tt,m as ot,G as Vt,H as Zt,I as De,i as c,a as b,s as fe,J as qt,M as Z,F as se,f as Ee,K as de,L as Ye,N as nt,O as Jt,u as Gt,d as ue,P as Qt,Q as Ze,R as Xt}from"./web.D8V8UMPF.js";import{c as j,u as en}from"./store.B96L5sdd.js";import"./Textarea.C_4l1a-b.js";const[ye,Ce]=j([]);function yt(e,n){if(n?.uuid!==void 0&&ye.find(u=>u.uuid===n.uuid)!==void 0)return qe(n.uuid,e,n);const t=n?.uuid??crypto.randomUUID(),r=n?.duration??5e3,i=n?.kind??"gray",a=n?.dismissable??!0,s=setTimeout(()=>{Ce(ye.filter(u=>u.uuid!==t))},r);return Ce(ye.length,{uuid:t,kind:i,message:e,duration:r,dismissable:a,cleanup:()=>clearTimeout(s)}),t}function qe(e,n,t){const r=ye.find(o=>o.uuid===e);if(r===void 0)return e;r.cleanup();const i=t.duration??r.duration,a=t.kind??r.kind,s=t?.dismissable??r.dismissable,u=setTimeout(()=>{Ce(ye.filter(o=>o.uuid!==e))},i);return Ce(o=>o.uuid===e,{uuid:e,kind:a,message:n,duration:i,dismissable:s,cleanup:()=>clearTimeout(u)}),e}const tn=Le(["SATURDAY","SUNDAY"]);T({uuid:Y().uuid(),day:tn,from:me(),to:me()}).refine(e=>e.from<e.to,{message:"A TimeSlot can't end before it starts."});T({name:Y(),label:Y(),description:Y()});const nn=Le(["draft","published","archived"]);async function rn(e){const n=new URL(Fe("/lst26/load"));n.searchParams.append("secret",e);const t=await fetch(n);if(!t.ok)return{kind:"FAILURE"};const r=await t.json();return typeof r=="object"&&r!==null?{kind:"SUCCESS",data:r}:(console.error("`last_save` not found on ",r),{kind:"FAILURE"})}async function ln(e,n){try{const t=await fetch(Fe("/lst26/save"),{method:"POST",body:JSON.stringify({secret:n,save:e}),headers:{"Content-Type":"application/json"}});return t.ok?{kind:"SUCCESS",data:n}:(console.error(await t.text()),{kind:"FAILURE"})}catch(t){return console.error(t),{kind:"FAILURE"}}}async function an(){try{const e=new URL(Fe("/lst26/public")),n=await fetch(e,{headers:{"Content-Type":"application/json"}});return n.ok?{kind:"SUCCESS",data:await n.json()}:(console.error(await n.text()),{kind:"FAILURE"})}catch(e){return console.error(e),{kind:"FAILURE"}}}Le(["SAVING","IDLE","ERROR"]);const sn=_e(Ge([ne("admin"),ne("erklaerbaer")])),on=Le(["FRIDAY","SATURDAY","SUNDAY"]),un=T({from:me(),to:me()}),cn=un.extend({day:on});function xe(e,n){const{from:t,to:r}=n;return t<e&&e<r}function dn(e,n){const{from:t,to:r}=e,{from:i,to:a}=n;return xe(t,n)||xe(r,n)||xe(i,e)||xe(a,e)||t===i&&r===a}function gn(e,n=!1){const{from:t,to:r}=e;if(t>r)return[];const i=r-t;return pt(n?i+1:i,t)}function pt(e,n=0){return[...Array(e)].map((t,r)=>r+n)}const hn=T({name:Y(),email:Y(),mobile:Y()}),mn=T({kind:ne("ERKLAERBAER"),uuid:Y().uuid(),slot:cn}),fn=Ge([T({kind:ne("SELF"),helpEntryUuid:Y().uuid(),uuid:Y().uuid()}),T({kind:ne("FRIEND"),helpEntryUuid:Y().uuid(),name:Y(),uuid:Y().uuid()}),mn]),bn=T({}),$n=T({}),Sn=T({version:ne(5),contact:hn,config:T({wantsUpdates:Tt()}),helping:_e(fn),program:T({organising:_e(bn),participating:_e($n)})}),vn=T({kind:ne("SUCCESS"),status:nn,roles:sn,data:Sn});async function kn(e){if(e.length!==36&&e.length!==4)return{kind:"FAILURE",reason:"SECRET_INVALID"};const n=await rn(e);if(n.kind==="FAILURE")return console.error("Unexpected error. Maybe network, maybe server error."),{kind:"FAILURE",reason:"GENERAL"};const t=vn.safeParse(n.data);return t.success?{kind:"SUCCESS",data:t.data}:(console.error(t.error),{kind:"FAILURE",reason:"PARSE_ERROR"})}const Be=crypto.randomUUID();async function _n(e,n,t){const[r,i]=j(e);i("saveState","SAVING"),yt("Am Speichern...",{uuid:Be,dismissable:!1});const a=new Date;try{if((await ln(n,t)).kind==="FAILURE")throw Error("")}catch(s){return i("saveState","ERROR"),console.error(s),qe(Be,"Speichern war nicht möglich!",{kind:"danger",duration:1e4,dismissable:!0}),{kind:"FAILURE"}}return qe(Be,`Zuletzt gespeichert um: ${$t(a)} Uhr`,{kind:"success",dismissable:!0}),i("saveState","IDLE"),{kind:"SUCCESS",data:a}}const yn=Ht(_n,1e3);var ut=h("<br>"),pn=h("<strong>Donnerstag, 21. August 2025"),En=h("<p>Deine Anmeldung wird geladen..."),wn=h("<p>Das Programm wird geladen..."),xn=h("<p>Leider ist ein unerwarteter Fehler passiert. Versuche deine Anmeldung erneut zu laden. Wiederholt sich dieser Fehler, bitte kontaktiere uns sobald als möglich über das <a href=/kontakt>Kontaktformular</a>, da dies nicht passieren sollte."),Rn=h("<p>Wir konnten leider keine Anmeldung finden. Wenn du bereits eine Anmeldung begonnen hast, solltest du den korrekten Link per E-Mail erhalten haben.<br><br> Falls du noch keine Anmeldung begonnen hast, kannst du <a href=/anmeldung>hier</a> deine persönliche Anmeldung beginnen. <br><br>Für generelle Fragen oder Probleme, schreibe uns doch bitte über unser <a href=/kontatk>Kontaktformular</a>."),An=h("<p>Wir konnten leider keine Spielrunde unter diesem Link finden.<br><br>Vermutlich liegt es an uns. Bitte kontaktiere uns sobald als möglich über das "),Un=h("<p>Leider ist ein unerwarteter Fehler passiert. Vermutlich liegt es an uns. Bitte kontaktiere uns sobald als möglich über das <a href=/kontakt>Kontaktformular</a>."),Dn=h("<p>Leider ist ein unerwarteter Fehler passiert beim Laden des Programmes. Vermutlich liegt es an uns. Bitte kontaktiere uns sobald als möglich über das <a href=/kontakt>Kontaktformular</a>."),Cn=h("<p>Leider ist ein unerwarteter Fehler passiert beim Laden von Daten. Vermutlich liegt es an uns. Bitte kontaktiere uns sobald als möglich über das <a href=/kontakt>Kontaktformular</a>."),Ln=h("<p>Leider ist das keine gültige Seite. Versuche deine Anmeldung erneut zu laden. Wiederholt sich dieser Fehler, bitte kontaktiere uns sobald als möglich über das <a href=/kontakt>Kontaktformular</a>, da dies nicht passieren sollte."),Fn=h("<p>Leider hast du keinen Zugriff auf diese Seite. Sollte dies ein Fehler sein, dann kontaktiere uns sobald als möglich über das <a href=/kontakt>Kontaktformular</a>.");g(ut),g(ut),g(pn);const In={registration:g(En),program:g(wn)},Pn={general:g(xn),secretError:g(Rn),gameroundUuidError:g(An),ourMistake:g(Un),program:g(Dn),help:g(Cn),siteNotFound:g(Ln),noAccess:g(Fn)},Tn="Neuer Eintrag erstellen",Hn="Die Eingabe scheint keine gültige E-Mail-Adresse zu sein.",Nn="Dies ist ein Pflichtfeld.",Yn={FRIDAY:"Freitag",SATURDAY:"Samstag",SUNDAY:"Sonntag"},C={loading:In,error:Pn,createNewEntry:Tn,invalidEmail:Hn,mandatoryField:Nn,days:Yn};function Et(){let e=new Set;function n(i){return e.add(i),()=>e.delete(i)}let t=!1;function r(i,a){if(t)return!(t=!1);const s={to:i,options:a,defaultPrevented:!1,preventDefault:()=>s.defaultPrevented=!0};for(const u of e)u.listener({...s,from:u.location,retry:o=>{o&&(t=!0),u.navigate(i,{...a,resolve:!1})}});return!s.defaultPrevented}return{subscribe:n,confirm:r}}let Je;function rt(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),Je=window.history.state._depth}rt();function Bn(e){return{...e,_depth:window.history.state&&window.history.state._depth}}function On(e,n){let t=!1;return()=>{const r=Je;rt();const i=r==null?null:Je-r;if(t){t=!1;return}i&&n(i)?(t=!0,window.history.go(-i)):e()}}const zn=/^(?:[a-z0-9]+:)?\/\//i,jn=/^\/+|(\/)\/+$/g,wt="http://sr";function ce(e,n=!1){const t=e.replace(jn,"$1");return t?n||/^[?#]/.test(t)?t:"/"+t:""}function Ue(e,n,t){if(zn.test(n))return;const r=ce(e),i=t&&ce(t);let a="";return!i||n.startsWith("/")?a=r:i.toLowerCase().indexOf(r.toLowerCase())!==0?a=r+i:a=i,(a||"/")+ce(n,!a)}function Kn(e,n){if(e==null)throw new Error(n);return e}function Mn(e,n){return ce(e).replace(/\/*(\*.*)?$/g,"")+ce(n)}function xt(e){const n={};return e.searchParams.forEach((t,r)=>{r in n?Array.isArray(n[r])?n[r].push(t):n[r]=[n[r],t]:n[r]=t}),n}function Wn(e,n,t){const[r,i]=e.split("/*",2),a=r.split("/").filter(Boolean),s=a.length;return u=>{const o=u.split("/").filter(Boolean),d=o.length-s;if(d<0||d>0&&i===void 0&&!n)return null;const f={path:s?"":"/",params:{}},m=v=>t===void 0?void 0:t[v];for(let v=0;v<s;v++){const $=a[v],_=$[0]===":",S=_?o[v]:o[v].toLowerCase(),k=_?$.slice(1):$.toLowerCase();if(_&&Oe(S,m(k)))f.params[k]=S;else if(_||!Oe(S,k))return null;f.path+=`/${S}`}if(i){const v=d?o.slice(-d).join("/"):"";if(Oe(v,m(i)))f.params[i]=v;else return null}return f}}function Oe(e,n){const t=r=>r===e;return n===void 0?!0:typeof n=="string"?t(n):typeof n=="function"?n(e):Array.isArray(n)?n.some(t):n instanceof RegExp?n.test(e):!1}function Vn(e){const[n,t]=e.pattern.split("/*",2),r=n.split("/").filter(Boolean);return r.reduce((i,a)=>i+(a.startsWith(":")?2:3),r.length-(t===void 0?0:1))}function Rt(e){const n=new Map,t=vt();return new Proxy({},{get(r,i){return n.has(i)||St(t,()=>n.set(i,O(()=>e()[i]))),n.get(i)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())},has(r,i){return i in e()}})}function Zn(e,n){const t=new URLSearchParams(e);Object.entries(n).forEach(([i,a])=>{a==null||a===""||a instanceof Array&&!a.length?t.delete(i):a instanceof Array?(t.delete(i),a.forEach(s=>{t.append(i,String(s))})):t.set(i,String(a))});const r=t.toString();return r?`?${r}`:""}function At(e){let n=/(\/?\:[^\/]+)\?/.exec(e);if(!n)return[e];let t=e.slice(0,n.index),r=e.slice(n.index+n[0].length);const i=[t,t+=n[1]];for(;n=/^(\/\:[^\/]+)\?/.exec(r);)i.push(t+=n[1]),r=r.slice(n[0].length);return At(r).reduce((a,s)=>[...a,...i.map(u=>u+s)],[])}const qn=100,Ut=kt(),it=kt(),we=()=>Kn(Qe(Ut),"<A> and 'use' router primitives can be only used inside a Route."),Jn=()=>Qe(it)||we().base,Gn=e=>{const n=Jn();return O(()=>n.resolvePath(e()))},Qn=e=>{const n=we();return O(()=>{const t=e();return t!==void 0?n.renderPath(t):t})},Dt=()=>we().navigatorFactory(),Ct=()=>we().location,Xn=()=>we().params,er=()=>{const e=Ct(),n=Dt(),t=(r,i)=>{const a=et(()=>Zn(e.search,r)+e.hash);n(a,{scroll:!1,resolve:!1,...i})};return[e.query,t]};function tr(e,n=""){const{component:t,preload:r,load:i,children:a,info:s}=e,u=!a||Array.isArray(a)&&!a.length,o={key:e,component:t,preload:r||i,info:s};return Lt(e.path).reduce((d,f)=>{for(const m of At(f)){const v=Mn(n,m);let $=u?v:v.split("/*",1)[0];$=$.split("/").map(_=>_.startsWith(":")||_.startsWith("*")?_:encodeURIComponent(_)).join("/"),d.push({...o,originalPath:f,pattern:$,matcher:Wn($,!u,e.matchFilters)})}return d},[])}function nr(e,n=0){return{routes:e,score:Vn(e[e.length-1])*1e4-n,matcher(t){const r=[];for(let i=e.length-1;i>=0;i--){const a=e[i],s=a.matcher(t);if(!s)return null;r.unshift({...s,route:a})}return r}}}function Lt(e){return Array.isArray(e)?e:[e]}function Ft(e,n="",t=[],r=[]){const i=Lt(e);for(let a=0,s=i.length;a<s;a++){const u=i[a];if(u&&typeof u=="object"){u.hasOwnProperty("path")||(u.path="");const o=tr(u,n);for(const d of o){t.push(d);const f=Array.isArray(u.children)&&u.children.length===0;if(u.children&&!f)Ft(u.children,d.pattern,t,r);else{const m=nr([...t],r.length);r.push(m)}t.pop()}}}return t.length?r:r.sort((a,s)=>s.score-a.score)}function ze(e,n){for(let t=0,r=e.length;t<r;t++){const i=e[t].matcher(n);if(i)return i}return[]}function rr(e,n,t){const r=new URL(wt),i=O(f=>{const m=e();try{return new URL(m,r)}catch{return console.error(`Invalid path ${m}`),f}},r,{equals:(f,m)=>f.href===m.href}),a=O(()=>i().pathname),s=O(()=>i().search,!0),u=O(()=>i().hash),o=()=>"",d=Xe(s,()=>xt(i()));return{get pathname(){return a()},get search(){return s()},get hash(){return u()},get state(){return n()},get key(){return o()},query:t?t(d):Rt(d)}}let oe;function ir(){return oe}function lr(e,n,t,r={}){const{signal:[i,a],utils:s={}}=e,u=s.parsePath||(E=>E),o=s.renderPath||(E=>E),d=s.beforeLeave||Et(),f=Ue("",r.base||"");if(f===void 0)throw new Error(`${f} is not a valid base path`);f&&!i().value&&a({value:f,replace:!0,scroll:!1});const[m,v]=le(!1);let $;const _=(E,w)=>{w.value===S()&&w.state===p()||($===void 0&&v(!0),oe=E,$=w,zt(()=>{$===w&&(k($.value),y($.state),Kt(),I[1](N=>N.filter(re=>re.pending)))}).finally(()=>{$===w&&jt(()=>{oe=void 0,E==="navigate"&&F($),v(!1),$=void 0})}))},[S,k]=le(i().value),[p,y]=le(i().state),D=rr(S,p,s.queryWrapper),x=[],I=le([]),L=O(()=>typeof r.transformUrl=="function"?ze(n(),r.transformUrl(D.pathname)):ze(n(),D.pathname)),z=()=>{const E=L(),w={};for(let N=0;N<E.length;N++)Object.assign(w,E[N].params);return w},K=s.paramsWrapper?s.paramsWrapper(z,n):Rt(z),W={pattern:f,path:()=>f,outlet:()=>null,resolvePath(E){return Ue(f,E)}};return B(Xe(i,E=>_("native",E),{defer:!0})),{base:W,location:D,params:K,isRouting:m,renderPath:o,parsePath:u,navigatorFactory:G,matches:L,beforeLeave:d,preloadRoute:Q,singleFlight:r.singleFlight===void 0?!0:r.singleFlight,submissions:I};function J(E,w,N){et(()=>{if(typeof w=="number"){w&&(s.go?s.go(w):console.warn("Router integration does not support relative routing"));return}const re=!w||w[0]==="?",{replace:be,resolve:P,scroll:$e,state:A}={replace:!1,resolve:!re,scroll:!0,...N},M=P?E.resolvePath(w):Ue(re&&D.pathname||"",w);if(M===void 0)throw new Error(`Path '${w}' is not a routable path`);if(x.length>=qn)throw new Error("Too many redirects");const X=S();(M!==X||A!==p())&&(Ot||d.confirm(M,N)&&(x.push({value:X,replace:be,scroll:$e,state:p()}),_("navigate",{value:M,state:A})))})}function G(E){return E=E||Qe(it)||W,(w,N)=>J(E,w,N)}function F(E){const w=x[0];w&&(a({...E,replace:w.replace,scroll:w.scroll}),x.length=0)}function Q(E,w){const N=ze(n(),E.pathname),re=oe;oe="preload";for(let be in N){const{route:P,params:$e}=N[be];P.component&&P.component.preload&&P.component.preload();const{preload:A}=P;w&&A&&St(t(),()=>A({params:$e,location:{pathname:E.pathname,search:E.search,hash:E.hash,query:xt(E),state:null,key:""},intent:"preload"}))}oe=re}}function ar(e,n,t,r){const{base:i,location:a,params:s}=e,{pattern:u,component:o,preload:d}=r().route,f=O(()=>r().path);o&&o.preload&&o.preload();const m=d?d({params:s,location:a,intent:oe||"initial"}):void 0;return{parent:n,pattern:u,path:f,outlet:()=>o?l(o,{params:s,location:a,data:m,get children(){return t()}}):t(),resolvePath($){return Ue(i.path(),$,f())}}}const sr=e=>n=>{const{base:t}=n,r=Mt(()=>n.children),i=O(()=>Ft(r(),n.base||""));let a;const s=lr(e,i,()=>a,{base:t,singleFlight:n.singleFlight,transformUrl:n.transformUrl});return e.create&&e.create(s),l(Ut.Provider,{value:s,get children(){return l(or,{routerState:s,get root(){return n.root},get preload(){return n.rootPreload||n.rootLoad},get children(){return[ae(()=>(a=vt())&&null),l(ur,{routerState:s,get branches(){return i()}})]}})}})};function or(e){const n=e.routerState.location,t=e.routerState.params,r=O(()=>e.preload&&et(()=>{e.preload({params:t,location:n,intent:ir()||"initial"})}));return l(U,{get when(){return e.root},keyed:!0,get fallback(){return e.children},children:i=>l(i,{params:t,location:n,get data(){return r()},get children(){return e.children}})})}function ur(e){const n=[];let t;const r=O(Xe(e.routerState.matches,(i,a,s)=>{let u=a&&i.length===a.length;const o=[];for(let d=0,f=i.length;d<f;d++){const m=a&&a[d],v=i[d];s&&m&&v.route.key===m.route.key?o[d]=s[d]:(u=!1,n[d]&&n[d](),Wt($=>{n[d]=$,o[d]=ar(e.routerState,o[d-1]||e.routerState.base,ct(()=>r()[d+1]),()=>{const _=e.routerState.matches();return _[d]??_[0]})}))}return n.splice(i.length).forEach(d=>d()),s&&u?s:(t=o[0],o)}));return ct(()=>r()&&t)()}const ct=e=>()=>l(U,{get when(){return e()},keyed:!0,children:n=>l(it.Provider,{value:n,get children(){return n.outlet()}})});function cr([e,n],t,r){return[e,r?i=>n(r(i)):n]}function dr(e){let n=!1;const t=i=>typeof i=="string"?{value:i}:i,r=cr(le(t(e.get()),{equals:(i,a)=>i.value===a.value&&i.state===a.state}),void 0,i=>(!n&&e.set(i),Ne.registry&&!Ne.done&&(Ne.done=!0),i));return e.init&&_t(e.init((i=e.get())=>{n=!0,r[1](t(i)),n=!1})),sr({signal:r,create:e.create,utils:e.utils})}function gr(e,n,t){return e.addEventListener(n,t),()=>e.removeEventListener(n,t)}function hr(e,n){const t=e&&document.getElementById(e);t?t.scrollIntoView():n&&window.scrollTo(0,0)}const mr=new Map;function fr(e=!0,n=!1,t="/_server",r){return i=>{const a=i.base.path(),s=i.navigatorFactory(i.base);let u,o;function d(S){return S.namespaceURI==="http://www.w3.org/2000/svg"}function f(S){if(S.defaultPrevented||S.button!==0||S.metaKey||S.altKey||S.ctrlKey||S.shiftKey)return;const k=S.composedPath().find(L=>L instanceof Node&&L.nodeName.toUpperCase()==="A");if(!k||n&&!k.hasAttribute("link"))return;const p=d(k),y=p?k.href.baseVal:k.href;if((p?k.target.baseVal:k.target)||!y&&!k.hasAttribute("state"))return;const x=(k.getAttribute("rel")||"").split(/\s+/);if(k.hasAttribute("download")||x&&x.includes("external"))return;const I=p?new URL(y,document.baseURI):new URL(y);if(!(I.origin!==window.location.origin||a&&I.pathname&&!I.pathname.toLowerCase().startsWith(a.toLowerCase())))return[k,I]}function m(S){const k=f(S);if(!k)return;const[p,y]=k,D=i.parsePath(y.pathname+y.search+y.hash),x=p.getAttribute("state");S.preventDefault(),s(D,{resolve:!1,replace:p.hasAttribute("replace"),scroll:!p.hasAttribute("noscroll"),state:x?JSON.parse(x):void 0})}function v(S){const k=f(S);if(!k)return;const[p,y]=k;i.preloadRoute(y,p.getAttribute("preload")!=="false")}function $(S){clearTimeout(u);const k=f(S);if(!k)return o=null;const[p,y]=k;o!==p&&(u=setTimeout(()=>{i.preloadRoute(y,p.getAttribute("preload")!=="false"),o=p},20))}function _(S){if(S.defaultPrevented)return;let k=S.submitter&&S.submitter.hasAttribute("formaction")?S.submitter.getAttribute("formaction"):S.target.getAttribute("action");if(!k)return;if(!k.startsWith("https://action/")){const y=new URL(k,wt);if(k=i.parsePath(y.pathname+y.search),!k.startsWith(t))return}if(S.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const p=mr.get(k);if(p){S.preventDefault();const y=new FormData(S.target,S.submitter);p.call({r:i,f:S.target},S.target.enctype==="multipart/form-data"?y:new URLSearchParams(y))}}tt(["click","submit"]),document.addEventListener("click",m),e&&(document.addEventListener("mousemove",$,{passive:!0}),document.addEventListener("focusin",v,{passive:!0}),document.addEventListener("touchstart",v,{passive:!0})),document.addEventListener("submit",_),_t(()=>{document.removeEventListener("click",m),e&&(document.removeEventListener("mousemove",$),document.removeEventListener("focusin",v),document.removeEventListener("touchstart",v)),document.removeEventListener("submit",_)})}}function br(e){const n=e.replace(/^.*?#/,"");if(!n.startsWith("/")){const[,t="/"]=window.location.hash.split("#",2);return`${t}#${n}`}return n}function $r(e){const n=()=>window.location.hash.slice(1),t=Et();return dr({get:n,set({value:r,replace:i,scroll:a,state:s}){i?window.history.replaceState(Bn(s),"","#"+r):window.history.pushState(s,"","#"+r);const u=r.indexOf("#"),o=u>=0?r.slice(u+1):"";hr(o,a),rt()},init:r=>gr(window,"hashchange",On(r,i=>!t.confirm(i&&i<0?i:n()))),create:fr(e.preload,e.explicitLinks,e.actionBase),utils:{go:r=>window.history.go(r),renderPath:r=>`#${r}`,parsePath:br,beforeLeave:t}})(e)}var Sr=h("<a>");function H(e){e=ot({inactiveClass:"inactive",activeClass:"active"},e);const[,n]=Vt(e,["href","state","class","activeClass","inactiveClass","end"]),t=Gn(()=>e.href),r=Qn(t),i=Ct(),a=O(()=>{const s=t();if(s===void 0)return[!1,!1];const u=ce(s.split(/[?#]/,1)[0]).toLowerCase(),o=decodeURI(ce(i.pathname).toLowerCase());return[e.end?u===o:o.startsWith(u+"/")||o===u,u===o]});return(()=>{var s=g(Sr);return Zt(s,ot(n,{get href(){return r()||e.href},get state(){return JSON.stringify(e.state)},get classList(){return{...e.class&&{[e.class]:!0},[e.inactiveClass]:!a()[0],[e.activeClass]:a()[0],...n.classList}},link:"",get"aria-current"(){return a()[1]?"page":void 0}}),!1,!1),De(),s})()}var vr=h("<div class=grid><!$><!/><div>"),kr=h("<div class=boxLink>");function he(e){const n=e.type??"special";return(()=>{var t=g(kr);return c(t,l(R,{type:n,get onClick(){return e.onClick},get children(){var r=g(vr),i=r.firstChild,[a,s]=b(i.nextSibling),u=a.nextSibling;return c(r,l(V,{get icon(){return e.icon}}),a,s),c(u,()=>e.children),r}})),t})()}var _r=h("<h3>Programm ansehen"),yr=h("<p>Melde dich (und deine Freunde) für diverse Spielrunden an."),dt=h("<br>"),pr=h("<h3>Programmpunkte erstellen"),Er=h("<p>Erstelle und editiere Programmpunkte."),wr=h("<h3>Helfen"),xr=h("<p>Beim Kiosk und der Essensausgabe können wir immer ein paar helfende Hände gebrauchen."),Rr=h("<h3>Zusammenfassung"),Ar=h("<p>Erhalte einen Überblick über dein gesamtes Programm."),Ur=h("<div><!$><!/><!$><!/><br><!$><!/>");function Dr(e){return(()=>{var n=g(Ur),t=n.firstChild,[r,i]=b(t.nextSibling),a=r.nextSibling,[s,u]=b(a.nextSibling),o=s.nextSibling,d=o.nextSibling,[f,m]=b(d.nextSibling);return c(n,l(U,{get when(){return e.roles.includes("admin")},get children(){return[l(H,{get href(){return e.link("/programm")},class:"button-link",get children(){return l(he,{icon:"dice-d20",get children(){return[g(_r),g(yr)]}})}}),g(dt),l(H,{get href(){return e.link("/erstellen")},class:"button-link",get children(){return l(he,{icon:"grid-2-plus",get children(){return[g(pr),g(Er)]}})}}),g(dt)]}}),r,i),c(n,l(H,{get href(){return e.link("/helfen")},class:"button-link",get children(){return l(he,{icon:"hand-heart",get children(){return[g(wr),g(xr)]}})}}),s,u),c(n,l(H,{get href(){return e.link("/zusammenfassung")},class:"button-link",get children(){return l(he,{icon:"list",get children(){return[g(Rr),g(Ar)]}})}}),f,m),n})()}var Cr=h("<a class=header-anchor>");function Lr(e){return encodeURIComponent(e.replaceAll(/\s/g,"-").replaceAll("&","").replaceAll(/-{1,}/g,"-").toLocaleLowerCase())}function Ie(e){const n=Lr("title"in e?e.id??e.title:e.id);return l(qt,{get component(){return`h${e.level}`},id:n,get children(){var t=g(Cr);return fe(t,"href",`#${n}`),c(t,(()=>{var r=ae(()=>"title"in e);return()=>r()?e.title:e.children})()),t}})}var Fr=h("<div style=display:grid;gap:1rem><!$><!/><!$><!/><!$><!/>"),Ir=h("<div><div style=margin-block-end:1.5rem></div><!$><!/>"),Pr=h("<p>Konflikte gefunden! Bitte stelle sicher, dass du nicht zeitlich überlappende Spielrunden eingetragen hast:"),Tr=h('<div style="display:grid;grid-template-columns:1fr max-content 1fr;gap:1rem;margin-block:0.5rem"><!$><!/><span style=color:var(--clr-warning-10);align-self:center;font-size:2rem></span><!$><!/>'),Hr=h("<div><!$><!/><div class=entries></div><div class=after-hour><div class=annotation>"),Nr=h("<div><div class=annotation></div><div class=background>"),Yr=h("<div class=entry>");function Br(e){return(()=>{var n=g(Fr),t=n.firstChild,[r,i]=b(t.nextSibling),a=r.nextSibling,[s,u]=b(a.nextSibling),o=s.nextSibling,[d,f]=b(o.nextSibling);return c(n,l(U,{get when(){return ae(()=>e.openingHours.FRIDAY.open.from!==e.openingHours.FRIDAY.open.to)()&&(e.dayFilter===null||e.dayFilter==="FRIDAY")},get children(){return l(je,{get programEntries(){return e.programEntries.FRIDAY},get openingHoursOfDay(){return e.openingHours.FRIDAY},get openingHours(){return e.openingHours},day:"FRIDAY",get conflictsAllowed(){return e.conflictsAllowed??!1},get columns(){return e.columns}})}}),r,i),c(n,l(U,{get when(){return e.dayFilter===null||e.dayFilter==="SATURDAY"},get children(){return l(je,{get programEntries(){return e.programEntries.SATURDAY},get openingHoursOfDay(){return e.openingHours.SATURDAY},get openingHours(){return e.openingHours},day:"SATURDAY",get conflictsAllowed(){return e.conflictsAllowed??!1},get columns(){return e.columns}})}}),s,u),c(n,l(U,{get when(){return e.dayFilter===null||e.dayFilter==="SUNDAY"},get children(){return l(je,{get programEntries(){return e.programEntries.SUNDAY},get openingHoursOfDay(){return e.openingHours.SUNDAY},get openingHours(){return e.openingHours},day:"SUNDAY",get conflictsAllowed(){return e.conflictsAllowed??!1},get columns(){return e.columns}})}}),d,f),n})()}function je(e){const n=e.conflictsAllowed?[]:zr(e.programEntries);return(()=>{var t=g(Ir),r=t.firstChild,i=r.nextSibling,[a,s]=b(i.nextSibling);return c(r,l(Ie,{level:4,get title(){return C.days[e.day]}})),c(t,l(Ee,{get fallback(){return[l(R,{type:"danger",get children(){return g(Pr)}}),l(se,{each:n,children:([u,o])=>(()=>{var d=g(Tr),f=d.firstChild,[m,v]=b(f.nextSibling),$=m.nextSibling,_=$.nextSibling,[S,k]=b(_.nextSibling);return c(d,()=>u.component(),m,v),c($,l(V,{icon:"triangle-exclamation"})),c(d,()=>o.component(),S,k),d})()})]},get children(){return l(Z,{get when(){return n.length===0},get children(){return l(Or,{get programEntries(){return e.programEntries},get openingHoursOfDay(){return e.openingHoursOfDay},get openingHours(){return e.openingHours},get day(){return e.day},get conflictsAllowed(){return e.conflictsAllowed},get columns(){return e.columns}})}})}}),a,s),t})()}function Or(e){const n=gn(e.openingHoursOfDay.open),t=e.openingHoursOfDay.breaks.flatMap(({from:s,to:u})=>{Ae(s<u,`Break is not valid, as from '${s}' is not smaller than to '${u}'`);const o=[s];let d=u-s;for(;d>1;)o.push(s+--d);return o}),r=(n[0]??0)-1,i=n.at(-1)??0,a=()=>{const s=["timetable"];return e.conflictsAllowed&&s.push(e.columns===2?"two-columns":"four-columns"),s.join(" ")};return(()=>{var s=g(Hr),u=s.firstChild,[o,d]=b(u.nextSibling),f=o.nextSibling,m=f.nextSibling,v=m.firstChild;return c(s,l(se,{each:n,children:$=>{const _=t.includes($);return(()=>{var S=g(Nr),k=S.firstChild;return de(S,`hour ${_?"break":""}`),c(k,$),B(p=>Ye(S,gt({from:$,to:$},r,e.day,e.openingHours),p)),S})()}}),o,d),c(f,l(se,{get each(){return e.programEntries},children:$=>(()=>{var _=g(Yr);return c(_,()=>$.component()),B(S=>Ye(_,gt($.range,r,e.day,e.openingHours),S)),_})()})),c(v,i+1),B($=>{var _=a(),S=`grid-row: 1 / ${i-r+1};`;return _!==$.e&&de(s,$.e=_),$.t=Ye(f,S,$.t),$},{e:void 0,t:void 0}),s})()}function gt(e,n,t,r){const{from:i,to:a}=e,s=i-n,u=a-n,o=r[t].open.to;return Ae(s>0,`[${JSON.stringify(e)}] Entry can't start at ${i}.`),Ae(u>0,`[${JSON.stringify(e)}] Entry can't end at ${a}.`),Ae(a<=o,`[${JSON.stringify(e)}] Entry can't end at ${a}. Closing hour set to '${o}' on day '${t}'`),`grid-row: ${s} / ${u};`}function zr(e){const n=[];return e.forEach((t,r)=>{e.slice(r+1).forEach(i=>{dn(t.range,i.range)&&n.push([t,i])})}),n}const ke={kitchen:{title:"Küche",description:"Mahlzeit vorbereiten, unterstützen beim Kochen und Abwaschen."},service:{title:"Essensausgabe",description:""},cleaning:{title:"Reinigung",description:"Unterstützen beim Küche aufräumen und putzen."},kiosk:{title:"Kiosk",description:"Am Kiosk Getränke (inkl. Kaffee) und Snacks verkaufen."},flohmarkt:{title:"Flohmarkt",description:"Hilf uns beim Auf- oder Abbau des Flohmarkt und der Annahme oder Abgabe von Spielen."},checkout:{title:"Kiosk / Flohmarkt",description:"Am Kiosk Getränke und Snacks verkaufen oder am Flohmarkt die Kasse bedienen."},setup:{title:"Menü-Vorbereitung / Aufbau",description:"Hilf uns beim Zubereiten der Menüs und Aufstellen von Tischen, Stühle und der Bibliothek."},breakdown:{title:"Abbau",description:"Hilf uns beim Zusammenräumen von Tischen, Stühle, der Bibliothek und dem Flohmarkt."}},te={FRIDAY:{16:[{uuid:"eb443040-0674-429c-a3ad-48634a323b76",count:4,duration:5,kind:"setup"}],19:[{uuid:"91699a72-78d0-4dc9-bfe1-ece55b15db7d",count:1,duration:3,kind:"flohmarkt"}]},SATURDAY:{9:[{uuid:"6303bd52-cd10-4dd0-b760-b71ab971ad3b",count:4,duration:2,kind:"flohmarkt"}],10:[{uuid:"9ebca7e9-f44a-4cc9-8961-73539f17d5d6",count:2,duration:2,kind:"checkout"}],11:[{uuid:"804c379d-c747-4d7c-9f0c-a53f8548216e",count:2,duration:2,kind:"checkout"}],12:[{uuid:"bfec6f59-14eb-45b9-a21c-d33ee2205b64",count:2,duration:2,kind:"checkout"}],13:[{uuid:"8db23dfd-616e-4f1d-9a07-deb6e519d35a",count:2,duration:2,kind:"checkout"}],14:[{uuid:"477a1c27-b660-4221-9be0-de34de910f4b",count:2,duration:2,kind:"checkout"}],15:[{uuid:"516de07b-bc06-45b5-94f6-be5de186d4d5b",count:2,duration:2,kind:"checkout"}],16:[{uuid:"490c799f-ced5-461e-a483-ad6a90df221b",count:2,duration:2,kind:"checkout"}],17:[{uuid:"c9f79536-225a-41ee-93e6-ef1741b511f7",count:2,duration:2,kind:"checkout"}],18:[{uuid:"c6c3f0f7-04c6-4819-95e6-aa8476e4392c",count:2,duration:2,kind:"checkout"}],19:[{uuid:"9748b1e6-1712-449b-8dda-eb44f172071e",count:2,duration:2,kind:"checkout"}],20:[{uuid:"04f724ea-4a78-4363-ba0a-75a71ab22598",count:2,duration:2,kind:"checkout"}],21:[{uuid:"62d5af53-5e3e-4d59-b574-261e33b0a872",count:2,duration:2,kind:"checkout"}],22:[{uuid:"98fef052-02ba-4a33-ba2a-13ccad6834c7",count:2,duration:2,kind:"checkout"}],23:[{uuid:"e4700acc-7192-4063-b03d-cb4009cbe6f2",count:2,duration:1,kind:"checkout"}]},SUNDAY:{10:[{uuid:"d30340e1-e49f-44aa-bf1b-d90839b0f1aa",count:2,duration:1,kind:"checkout"},{uuid:"e1a9b252-628c-4c01-b8e1-e1964b51e646",count:2,duration:2,kind:"checkout"}],11:[{uuid:"873a1308-57bc-46bc-bdfc-a82213364c77",count:2,duration:2,kind:"checkout"}],12:[{uuid:"2e9864a9-0208-4e56-b232-dcd258e31545",count:2,duration:2,kind:"checkout"}],13:[{uuid:"caef5fea-8458-4b65-b699-9c4e5ee6589d",count:2,duration:2,kind:"checkout"}],14:[{uuid:"0da24180-0269-4206-adf7-4b9faeefa091",count:2,duration:2,kind:"checkout"}],15:[{uuid:"6c0430dd-9968-456d-bf68-d893040f73fa",count:2,duration:2,kind:"checkout"}],16:[{uuid:"40eaef18-d6a0-46e8-b3e5-a98be09cef57",count:2,duration:2,kind:"checkout"}],17:[{uuid:"3c6468ad-fdb8-432d-92ce-a52fae471206",count:2,duration:1,kind:"checkout"},{uuid:"b9da7047-c359-49fa-b558-53207ac5255a",count:2,duration:2,kind:"flohmarkt"},{uuid:"c0e1d54c-0832-4147-9054-082208dab2f2",count:4,duration:3,kind:"breakdown"}]}},jr=[...Object.values(te.FRIDAY),...Object.values(te.SATURDAY),...Object.values(te.SUNDAY)].flatMap(e=>e.map(n=>n.uuid)),ht=Object.entries(Object.groupBy(jr,e=>e)).reduce((e,[n,t])=>[...e,{uuid:n,count:t?.length??0}],[]).filter(({count:e})=>e!==1);if(ht.length>0)throw Error(`duplicate uuids found:  ${ht.map(({uuid:e})=>e).join(", ")}`);function Kr(e){return Ke("FRIDAY",te.FRIDAY).concat(Ke("SATURDAY",te.SATURDAY)).concat(Ke("SUNDAY",te.SUNDAY)).find(t=>t.entry.uuid===e)??null}function Ke(e,n){const t=[];return Object.entries(n).forEach(([r,i])=>{const a=Number(r);i.forEach(s=>{t.push({dateTime:{day:e,from:a,to:a+1},entry:s})})}),t}const Mr={FRIDAY:{open:{from:0,to:0},breaks:[]},SATURDAY:{open:{from:10,to:24},breaks:[]},SUNDAY:{open:{from:10,to:18},breaks:[]}},Wr={FRIDAY:{open:{from:16,to:22},breaks:[{from:16,to:22}]},SATURDAY:{open:{from:9,to:24},breaks:[{from:9,to:10}]},SUNDAY:{open:{from:10,to:20},breaks:[{from:18,to:20}]}};var Vr=h("<span>");function mt(e){const n=()=>{const t=["chip"];return t.push(e.kind??"gray"),e.inverted&&t.push("inverted"),e.size==="small"&&t.push("small"),t.join(" ")};return(()=>{var t=g(Vr);return c(t,()=>e.children),B(r=>{var i=n(),a=e.title;return i!==r.e&&de(t,r.e=i),a!==r.t&&fe(t,"title",r.t=a),r},{e:void 0,t:void 0}),t})()}const Zr=_e(T({})),qr=Nt(Y(),me()),Jr=T({programEntries:Zr,reservations:qr});async function Gr(){const e=await an();if(e.kind==="FAILURE")return console.error("Unexpected error. Maybe network, maybe server error."),{kind:"FAILURE"};const n=Jr.safeParse(e.data);return n.success?{kind:"SUCCESS",data:n.data}:{kind:"FAILURE"}}var Qr=h("<p>Beim Kiosk und der Essensausgabe können wir immer ein paar helfende Hände gebrauchen. Wenn du bereit bist zu helfen, klicke in der jeweiligen Stunde auf das Handsymbol <!$><!/>."),Re=h("<br>"),Xr=h("<h4>Zur Anmeldung für Erklärbären"),ei=h("<div class=dynamic-columns><p>Eines der Hauptziele der Luzerner Spieltage ist es, dass die Besucher/-innen noch nicht gespielte Spiele ausprobieren können. Dazu unterstützen uns jedes Jahr Freiwillige und erklären die ihnen bekannten Spiele aus der Spiele-Bibliothek. Diese Erklärbären sind durch ihr rotes T-Shirt erkennbar.</p><!$><!/>"),ti=h("<div style=display:flex;flex-wrap:wrap;gap:1rem;justify-content:space-between><h5 style=margin:0>Filter"),ni=h("<div style=display:flex;flex-wrap:wrap;gap:0.5rem><!$><!/><!$><!/><!$><!/><!$><!/>"),ri=h("<p>Plan konnte nicht geladen werden."),ft=h("<div><!$><!/><!$><!/><h5></h5><p class=duration><em><!$><!/> / <!$><!/>");function ii(e){const[n,t]=le(null);return[(()=>{var r=g(Qr),i=r.firstChild,a=i.nextSibling,[s,u]=b(a.nextSibling);return s.nextSibling,c(r,l(V,{icon:"hand-heart"}),s,u),r})(),g(Re),l(Ie,{level:3,title:"Erklärbären"}),g(Re),(()=>{var r=g(ei),i=r.firstChild,a=i.nextSibling,[s,u]=b(a.nextSibling);return c(r,l(H,{get href(){return e.link("/erklaerbaer")},class:"button-link",style:"margin-block-end: 1rem; padding: 0;",get children(){return l(he,{icon:"forward",type:"success",get children(){return g(Xr)}})}}),s,u),r})(),g(Re),l(R,{get children(){return[g(ti),(()=>{var r=g(ni),i=r.firstChild,[a,s]=b(i.nextSibling),u=a.nextSibling,[o,d]=b(u.nextSibling),f=o.nextSibling,[m,v]=b(f.nextSibling),$=m.nextSibling,[_,S]=b($.nextSibling);return c(r,l(q,{label:"Alle Tage",get kind(){return n()===null?"success":"gray"},onClick:()=>t(null)}),a,s),c(r,l(q,{label:"Freitag",get kind(){return n()==="FRIDAY"?"success":"gray"},onClick:()=>t("FRIDAY")}),o,d),c(r,l(q,{label:"Samstag",get kind(){return n()==="SATURDAY"?"success":"gray"},onClick:()=>t("SATURDAY")}),m,v),c(r,l(q,{label:"Sonntag",get kind(){return n()==="SUNDAY"?"success":"gray"},onClick:()=>t("SUNDAY")}),_,S),r})()]}}),g(Re),l(nt,{get fallback(){return l(R,{get children(){return C.loading.program}})},get children(){return l(U,{get when(){return e.publicResource()},get fallback(){return l(R,{type:"danger",get children(){return C.error.help}})},children:r=>l(U,{get when(){return r().kind==="SUCCESS"},get fallback(){return l(R,{type:"danger",get children(){return g(ri)}})},get children(){return l(li,{get myHelpReservations(){return e.store.helping},get allReservations(){return r().data.reservations},get isEditable(){return e.isEditable},get link(){return e.link},get dayFilter(){return n()}})}})})}})]}function li(e){const n=()=>Object.keys(e.allReservations),t=()=>({FRIDAY:Me({constants:te.FRIDAY,alreadyReservedUuids:n(),myReservations:e.myHelpReservations,link:e.link}),SATURDAY:Me({constants:te.SATURDAY,alreadyReservedUuids:n(),myReservations:e.myHelpReservations,link:e.link}),SUNDAY:Me({constants:te.SUNDAY,alreadyReservedUuids:n(),myReservations:e.myHelpReservations,link:e.link})});return l(Br,{get programEntries(){return t()},openingHours:Wr,conflictsAllowed:!0,columns:4,get dayFilter(){return e.dayFilter}})}function Me(e){const n=Dt(),t=[],r=ai(e.alreadyReservedUuids);return Object.entries(e.constants).forEach(([i,a])=>{a.forEach(s=>{const u={from:Number(i),to:Number(i)+s.duration},o=()=>s.count-(r[s.uuid]??0),d=()=>e.myReservations.filter(m=>"helpEntryUuid"in m&&m.helpEntryUuid===s.uuid).length>0,f=()=>{const m=["box-simple","timeview-entry"];return d()&&m.push("success"),m.join(" ")};o()===0?t.push({range:u,component:()=>(()=>{var m=g(ft),v=m.firstChild,[$,_]=b(v.nextSibling),S=$.nextSibling,[k,p]=b(S.nextSibling),y=k.nextSibling,D=y.nextSibling,x=D.firstChild,I=x.firstChild,[L,z]=b(I.nextSibling),K=L.nextSibling,W=K.nextSibling,[J,G]=b(W.nextSibling);return m.$$click=()=>n(e.link(`/helfen/${s.uuid}`)),c(m,l(mt,{title:"Helfer:innen gesucht",get inverted(){return d()},size:"small",children:"HL"}),$,_),c(m,l(U,{get when(){return d()},get children(){return l(pe,{icon:"hand-heart",kind:"ghost",onClick:()=>n(e.link(`/helfen/${s.uuid}`)),title:"Helfen"})}}),k,p),c(y,()=>ke[s.kind].title),c(x,o,L,z),c(x,()=>s.count,J,G),B(F=>{var Q=f(),E=ke[s.kind].title;return Q!==F.e&&de(m,F.e=Q),E!==F.t&&fe(y,"title",F.t=E),F},{e:void 0,t:void 0}),De(),m})()}):t.push({range:u,component:()=>(()=>{var m=g(ft),v=m.firstChild,[$,_]=b(v.nextSibling),S=$.nextSibling,[k,p]=b(S.nextSibling),y=k.nextSibling,D=y.nextSibling,x=D.firstChild,I=x.firstChild,[L,z]=b(I.nextSibling),K=L.nextSibling,W=K.nextSibling,[J,G]=b(W.nextSibling);return m.$$click=()=>n(e.link(`/helfen/${s.uuid}`)),c(m,l(mt,{title:"Helfer:innen gesucht",get inverted(){return d()},size:"small",children:"HL"}),$,_),c(m,l(pe,{icon:"hand-heart",kind:"ghost",onClick:()=>n(e.link(`/helfen/${s.uuid}`)),title:"Helfen"}),k,p),c(y,()=>ke[s.kind].title),c(x,()=>s.count-o(),L,z),c(x,()=>s.count,J,G),B(F=>{var Q=f(),E=ke[s.kind].title;return Q!==F.e&&de(m,F.e=Q),E!==F.t&&fe(y,"title",F.t=E),F},{e:void 0,t:void 0}),De(),m})()})})}),t}function ai(e){const n=Object.groupBy(e,r=>r),t={};for(const r of e)t[r]=n[r]?.length??0;return t}tt(["click"]);var si=h("<dialog closedby=any><!$><!/><!$><!/><!$><!/>"),oi=h("<h4>");function ui(e=!1){return{open:e}}function ci(e){let n;const[t,r]=j(e.store);Jt(()=>{t.open?n.showModal():n.close()});function i(){r({open:!1}),e.onClose?.()}const a=()=>{const s=[];return e.type!==void 0&&s.push(e.type),e.size!==void 0&&s.push(e.size),e.onClose!==void 0&&s.push("dialog-with-close"),s};return(()=>{var s=g(si),u=s.firstChild,[o,d]=b(u.nextSibling),f=o.nextSibling,[m,v]=b(f.nextSibling),$=m.nextSibling,[_,S]=b($.nextSibling);s.addEventListener("close",i);var k=n;return typeof k=="function"?Gt(k,s):n=s,c(s,l(U,{get when(){return e.onClose},get children(){return l(pe,{onClick:i,icon:"circle-xmark",kind:"gray"})}}),o,d),c(s,l(U,{get when(){return e.title},children:p=>(()=>{var y=g(oi);return c(y,p),y})()}),m,v),c(s,()=>e.children,_,S),B(()=>de(s,a().join(" "))),s})()}var di=h("<p>");function We(e){const[n,t]=j(e.store),r=e.showErrors==="ALWAYS",i=()=>r||n.isDirty?e.errors??[]:[];return[l(Yt,{get label(){return e.label},get name(){return e.name},get value(){return n.value},onValueUpdate:a=>{t("value",a),e.onUpdate?.()},onBlur:()=>t("isDirty",!0),get type(){return e.type},get required(){return e.required},get isHoneypot(){return e.isHoneypot},get disabled(){return e.disabled}}),l(U,{get when(){return i().length>0},get children(){return l(R,{type:"danger",get children(){return l(se,{get each(){return i()},children:a=>(()=>{var s=g(di);return c(s,a),s})()})}})}})]}Y().transform(e=>({value:e,isDirty:!1}));function Ve(e){return{value:e,isDirty:!1}}me().transform(e=>({value:e,isDirty:!1}));var gi=h("<label class=input-checkbox><input type=checkbox><div><!$><!/><!$><!/>"),hi=h("<div class=checkbox-description>");function mi(e){return(()=>{var n=g(gi),t=n.firstChild,r=t.nextSibling,i=r.firstChild,[a,s]=b(i.nextSibling),u=a.nextSibling,[o,d]=b(u.nextSibling);return t.addEventListener("change",f=>e.onValueUpdate(f.target.checked)),c(r,()=>e.label,a,s),c(r,l(U,{get when(){return e.description},children:f=>(()=>{var m=g(hi);return c(m,f),m})()}),o,d),B(f=>{var m=e.name,v=e.disabled===!0;return m!==f.e&&fe(t,"name",f.e=m),v!==f.t&&ue(t,"disabled",f.t=v),f},{e:void 0,t:void 0}),B(()=>ue(t,"value",e.value)),B(()=>ue(t,"checked",e.checked)),n})()}var fi=h("<div style=display:grid;gap:1rem><!$><!/><!$><!/><!$><!/>"),bi=h("<div>"),$i=h("<div style=display:grid;gap:1rem><h3>Meine Kontaktdaten</h3><p><strong>Name:</strong> <!$><!/></p><p><strong>E-Mail:</strong> <!$><!/></p><p><strong>Handynummer:</strong> <!$><!/></p><!$><!/>"),Si=h("<form novalidate><!$><!/><!$><!/><!$><!/><!$><!/>");function vi(e){const[n,t]=j(e.store);return(()=>{var r=g(fi),i=r.firstChild,[a,s]=b(i.nextSibling),u=a.nextSibling,[o,d]=b(u.nextSibling),f=o.nextSibling,[m,v]=b(f.nextSibling);return c(r,l(ki,{get store(){return e.store.contact},get isEditable(){return e.isEditable}}),a,s),c(r,l(mi,{label:"Schickt mir bitte E-Mails, wenn neue Programmpunkte veröffentlicht werden.",get checked(){return n.config.wantsUpdates},name:"wantsUpdates",value:"wantsUpdates",onValueUpdate:$=>{t("config","wantsUpdates",$)}}),o,d),c(r,l(R,{type:"special",children:"Eine persöhnliche Zusammenfassung folgt noch."}),m,v),r})()}function ki(e){const[n,t]=j(e.store),[r,i]=j(ui());return l(R,{get children(){return[l(U,{get when(){return r.open},get children(){return l(_i,{dialogStore:r,get currentState(){return e.store},updateCurrentState:t})}}),(()=>{var a=g($i),s=a.firstChild,u=s.nextSibling,o=u.firstChild,d=o.nextSibling,f=d.nextSibling,[m,v]=b(f.nextSibling),$=u.nextSibling,_=$.firstChild,S=_.nextSibling,k=S.nextSibling,[p,y]=b(k.nextSibling),D=$.nextSibling,x=D.firstChild,I=x.nextSibling,L=I.nextSibling,[z,K]=b(L.nextSibling),W=D.nextSibling,[J,G]=b(W.nextSibling);return c(u,()=>e.store.name,m,v),c($,()=>e.store.email,p,y),c(D,()=>e.store.mobile,z,K),c(a,l(U,{get when(){return e.isEditable},get children(){var F=g(bi);return c(F,l(ee,{icon:"pencil",label:"Kontaktdaten editieren",onClick:()=>i("open",!0)})),F}}),J,G),a})()]}})}function _i(e){const[n]=er(),[t]=j({name:Ve(e.currentState.name),email:Ve(e.currentState.email),mobile:Ve(e.currentState.mobile)}),[r,i]=j({kind:"IDLE",isDuplicate:!1}),a=O(()=>{const o={name:[],email:[]};return t.name.value.trim().length===0&&o.name.push(C.mandatoryField),t.email.value.trim().length===0?o.email.push(C.mandatoryField):t.email.value.includes("@")||o.email.push(C.invalidEmail),r.kind==="IDLE"&&r.isDuplicate&&o.email.push("Diese E-Mail wird bereits verwendet."),{...o,hasErrors:o.name.length+o.email.length>0}}),[s,u]=j(e.dialogStore);return l(ci,{get store(){return e.dialogStore},title:"Kontaktdaten editieren",onClose:()=>{},size:"medium",get children(){var o=g(Si),d=o.firstChild,[f,m]=b(d.nextSibling),v=f.nextSibling,[$,_]=b(v.nextSibling),S=$.nextSibling,[k,p]=b(S.nextSibling),y=k.nextSibling,[D,x]=b(y.nextSibling);return c(o,l(We,{get store(){return t.name},label:"Name",name:"name",showErrors:"ON_BLUR",get errors(){return a().name}}),f,m),c(o,l(We,{get store(){return t.email},label:"E-Mail",name:"email",showErrors:"ALWAYS",get errors(){return a().email},onUpdate:()=>i({kind:"IDLE",isDuplicate:!1})}),$,_),c(o,l(We,{get store(){return t.mobile},label:"Handynummer",name:"mobile"}),k,p),c(o,l(q,{label:"Speichern",get disabled(){return a().hasErrors||r.kind==="CHECKING"},onClick:async()=>{if(!a().hasErrors){i({kind:"CHECKING"});const I=n.secret,L=await fetch(Fe(`/lst26/check-email?email=${t.email.value}&secret=${I}`));if(!L.ok){i({kind:"IDLE",isDuplicate:!0});return}const z=await L.json(),K=yi.safeParse(z);if(!K.success){i({kind:"IDLE",isDuplicate:!0});return}if(K.data.kind==="FAILURE"){i({kind:"IDLE",isDuplicate:!0});return}i({kind:"IDLE",isDuplicate:!1}),e.updateCurrentState({name:t.name.value,email:t.email.value,mobile:t.mobile.value}),u("open",!1)}}}),D,x),o}})}const yi=Ge([T({kind:ne("SUCCESS")}),T({kind:ne("FAILURE")})]);var pi=h("<div class=tooltip-wrapper><div class=tooltip></div><!$><!/>");function ve(e){return(()=>{var n=g(pi),t=n.firstChild,r=t.nextSibling,[i,a]=b(r.nextSibling);return c(t,()=>e.tooltip),c(n,()=>e.children,i,a),n})()}var Ei=h("<div class=quickmenu-wrapper><div class=quickmenu><!$><!/><!$><!/><!$><!/><!$><!/>"),wi=h('<div class="quickmenu extended"><!$><!/><!$><!/><!$><!/><!$><!/>'),xi=h("<div style=margin-block-start:1rem;display:flex;gap:0.5rem;align-items:center><!$><!/><em>Zuletzt gespeichert um: <!$><!/> Uhr"),Ri=h("<div style=margin-block-start:1rem;display:flex;gap:0.5rem;align-items:center><!$><!/><em>Am Speichern..."),Ai=h("<div style=margin-block-start:1rem;display:flex;gap:0.5rem;align-items:center><!$><!/><em>Speichern war nicht möglich!");function Ui(e){return(()=>{var n=g(Ei),t=n.firstChild,r=t.firstChild,[i,a]=b(r.nextSibling),s=i.nextSibling,[u,o]=b(s.nextSibling),d=u.nextSibling,[f,m]=b(d.nextSibling),v=f.nextSibling,[$,_]=b(v.nextSibling);return c(t,l(ve,{tooltip:"Zur Übersicht",get children(){return l(H,{get href(){return e.link(e.parentPath)},class:"button-link",get children(){return l(q,{get label(){return l(V,{icon:"backward"})}})}})}}),i,a),c(t,l(U,{get when(){return e.roles.includes("admin")},get children(){return[l(ve,{tooltip:"Zum Programm",get children(){return l(H,{get href(){return e.link("/programm")},class:"button-link",get children(){return l(q,{get label(){return l(V,{icon:"dice-d20"})}})}})}}),l(ve,{tooltip:"Zu deinen Programmpunkten",get children(){return l(H,{get href(){return e.link("/erstellen")},class:"button-link",get children(){return l(q,{get label(){return l(V,{icon:"grid-2-plus"})}})}})}})]}}),u,o),c(t,l(ve,{tooltip:"Zum Helferplan",get children(){return l(H,{get href(){return e.link("/helfen")},class:"button-link",get children(){return l(q,{get label(){return l(V,{icon:"hand-heart"})}})}})}}),f,m),c(t,l(ve,{tooltip:"Zur Zusammenfassung",get children(){return l(H,{get href(){return e.link("/zusammenfassung")},class:"button-link",get children(){return l(q,{get label(){return l(V,{icon:"list"})}})}})}}),$,_),n})()}function Di(e){return[l(R,{type:"gray",get children(){var n=g(wi),t=n.firstChild,[r,i]=b(t.nextSibling),a=r.nextSibling,[s,u]=b(a.nextSibling),o=s.nextSibling,[d,f]=b(o.nextSibling),m=d.nextSibling,[v,$]=b(m.nextSibling);return c(n,l(H,{get href(){return e.link(e.parentPath)},class:"button-link",get children(){return l(ee,{icon:"backward",label:"Zur Übersicht"})}}),r,i),c(n,l(U,{get when(){return e.roles.includes("admin")},get children(){return[l(H,{get href(){return e.link("/programm")},class:"button-link",get children(){return l(ee,{icon:"dice-d20",label:"Zum Programm"})}}),l(H,{get href(){return e.link("/erstellen")},class:"button-link",get children(){return l(ee,{icon:"grid-2-plus",label:"Zu deinen Programmpunkten"})}})]}}),s,u),c(n,l(H,{get href(){return e.link("/helfen")},class:"button-link",get children(){return l(ee,{icon:"hand-heart",label:"Zum Helferplan"})}}),d,f),c(n,l(H,{get href(){return e.link("/zusammenfassung")},class:"button-link",get children(){return l(ee,{icon:"list",label:"Zur Zusammenfassung"})}}),v,$),n}}),l(Ci,{get saveState(){return e.saveState},get lastSaved(){return e.lastSaved}})]}function Ci(e){return l(Ee,{get children(){return[l(Z,{get when(){return e.saveState==="IDLE"},get children(){var n=g(xi),t=n.firstChild,[r,i]=b(t.nextSibling),a=r.nextSibling,s=a.firstChild,u=s.nextSibling,[o,d]=b(u.nextSibling);return o.nextSibling,c(n,l(V,{icon:"circle-check"}),r,i),c(a,()=>$t(e.lastSaved),o,d),n}}),l(Z,{get when(){return e.saveState==="SAVING"},get children(){var n=g(Ri),t=n.firstChild,[r,i]=b(t.nextSibling);return r.nextSibling,c(n,l(V,{icon:"floppy-disk-circle-arrow-right"}),r,i),n}}),l(Z,{get when(){return e.saveState==="ERROR"},get children(){var n=g(Ai),t=n.firstChild,[r,i]=b(t.nextSibling);return r.nextSibling,c(n,l(V,{icon:"triangle-exclamation"}),r,i),n}})]}})}var Li=h("<div class=page><!$><!/><div class=page-content><!$><!/><!$><!/></div><!$><!/>"),Fi=h("<h2>"),Ii=h("<br>"),Pi=h("<div class=extended-wrapper style=margin-block-start:1rem>");function ie(e){return(()=>{var n=g(Li),t=n.firstChild,[r,i]=b(t.nextSibling),a=r.nextSibling,s=a.firstChild,[u,o]=b(s.nextSibling),d=u.nextSibling,[f,m]=b(d.nextSibling),v=a.nextSibling,[$,_]=b(v.nextSibling);return c(n,(()=>{var S=ae(()=>e.showQuickmenu!==!1);return()=>S()?l(Ui,{get roles(){return e.roles},get link(){return e.link},get saveState(){return e.saveState},get lastSaved(){return e.lastSaved},get parentPath(){return e.parentPath??"/"}}):null})(),r,i),c(a,(()=>{var S=ae(()=>e.title===void 0);return()=>S()?null:[(()=>{var k=g(Fi);return c(k,()=>e.title),k})(),g(Ii)]})(),u,o),c(a,()=>e.children,f,m),c(n,(()=>{var S=ae(()=>e.showQuickmenu!==!1);return()=>S()?(()=>{var k=g(Pi);return c(k,l(Di,{get roles(){return e.roles},get link(){return e.link},get saveState(){return e.saveState},get lastSaved(){return e.lastSaved},get parentPath(){return e.parentPath??"/"}})),k})():null})(),$,_),n})()}var Ti=h('<form class=input-button style="display:grid;gap:0rem;grid-template-columns:1fr max-content"><input type=text style=border-color:var(--clr-special-9)><!$><!/>');function bt(e){const[n,t]=le("");return(()=>{var r=g(Ti),i=r.firstChild,a=i.nextSibling,[s,u]=b(a.nextSibling);return r.addEventListener("submit",o=>{o.preventDefault();const d=n();d.trim().length>0&&e.addFriend(d)}),ue(r,"noValidate",!0),i.$$input=o=>t(o.target.value),c(r,l(ee,{icon:"arrow-right",type:"submit",label:"Begleitperson anmelden",kind:"special"}),s,u),B(()=>ue(i,"value",n())),De(),r})()}tt(["input"]);var Hi=h("<p>Plan konnte nicht geladen werden."),Ni=h("<div style=display:flex;gap:1rem;flex-wrap:wrap;justify-content:space-between><h3></h3><!$><!/>"),Yi=h("<div class=game-dialog><ul role=list style=display:grid;gap:0.5rem><li><strong style=color:var(--clr-accent-1)>Tag, Zeit:</strong> <br><!$><!/>, <!$><!/> - <!$><!/> Uhr</li><li><strong style=color:var(--clr-accent-1)>Beschreibung:</strong> <br><!$><!/></li></ul><div class=reservations><h5 style=margin-block-start:0>Plätze reservieren</h5><div class=reservation-table>"),Bi=h("<div class=count>"),Oi=h("<div class=reservation-table-entry><p>Reserviert für mich </p><!$><!/>"),zi=h('<div class=reservation-table-entry><p>Reserviert für "<!$><!/>"</p><!$><!/>'),ji=h('<div style="display:grid;gap:1rem;grid-template-columns:max-content 1fr"><!$><!/><!$><!/>');function Ki(e){const[n,t]=j(e.store),r=Xn().uuid??"no-uuid-found",i=Kr(r);return l(nt,{get fallback(){return l(R,{get children(){return C.loading.program}})},get children(){return l(U,{get when(){return e.publicResource()},get fallback(){return l(R,{type:"danger",get children(){return C.error.help}})},children:a=>l(U,{get when(){return a().kind==="SUCCESS"},get fallback(){return l(R,{type:"danger",get children(){return g(Hi)}})},get children(){return l(U,{when:i,children:s=>l(Mi,{get entry(){return s()},get myHelpReservations(){return e.store.helping},get allReservations(){return a().data.reservations},get isEditable(){return e.isEditable},addReservation:u=>t("helping",n.helping.length,{...u,uuid:crypto.randomUUID()}),removeReservation:u=>{t("helping",n.helping.filter(o=>o.uuid!==u))},get link(){return e.link}})})}})})}})}function Mi(e){const{dateTime:n,entry:t}=e.entry,r=ke[t.kind],i=()=>e.myHelpReservations.filter(o=>"helpEntryUuid"in o&&o.helpEntryUuid===t.uuid),a=(e.allReservations[t.uuid]??0)-i().length,s=()=>pt(t.count).map(o=>{const d=i()[o];return d!==void 0?d:t.count-a<=o?{kind:"RESERVED_OTHER"}:{kind:"FREE"}}),u=()=>i().find(o=>o.kind==="SELF")!==void 0;return[(()=>{var o=g(Ni),d=o.firstChild,f=d.nextSibling,[m,v]=b(f.nextSibling);return c(d,()=>r.title),c(o,l(H,{get href(){return e.link("/helfen")},class:"button-link",get children(){return l(ee,{icon:"backward",label:"Zurück zur Helfer-Übersicht"})}}),m,v),o})(),(()=>{var o=g(Yi),d=o.firstChild,f=d.firstChild,m=f.firstChild,v=m.nextSibling,$=v.nextSibling,_=$.nextSibling,[S,k]=b(_.nextSibling),p=S.nextSibling,y=p.nextSibling,[D,x]=b(y.nextSibling),I=D.nextSibling,L=I.nextSibling,[z,K]=b(L.nextSibling);z.nextSibling;var W=f.nextSibling,J=W.firstChild,G=J.nextSibling,F=G.nextSibling,Q=F.nextSibling,[E,w]=b(Q.nextSibling),N=d.nextSibling,re=N.firstChild,be=re.nextSibling;return c(f,()=>C.days[n.day],S,k),c(f,()=>n.from,D,x),c(f,()=>n.to,z,K),c(W,()=>r.description,E,w),c(be,l(se,{get each(){return s()},children:(P,$e)=>[(()=>{var A=g(Bi);return c(A,()=>$e()+1),A})(),l(Ee,{get children(){return[l(Z,{get when(){return P.kind==="RESERVED_OTHER"},get children(){return l(R,{children:"Bereits reserviert"})}}),l(Z,{get when(){return!e.isEditable},get children(){return l(R,{children:"Freier Platz"})}}),l(Z,{get when(){return P.kind==="SELF"},get children(){return l(at,{type:"success",get children(){var A=g(Oi),M=A.firstChild,X=M.nextSibling,[Se,ge]=b(X.nextSibling);return c(A,l(pe,{icon:"trash",onClick:()=>e.removeReservation(P.kind==="SELF"?P.uuid:"should not happen")}),Se,ge),A}})}}),l(Z,{get when(){return P.kind==="FRIEND"},get children(){return l(at,{type:"success",get children(){var A=g(zi),M=A.firstChild,X=M.firstChild,Se=X.nextSibling,[ge,Pe]=b(Se.nextSibling);ge.nextSibling;var Te=M.nextSibling,[He,It]=b(Te.nextSibling);return c(M,(()=>{var Pt=ae(()=>P.kind==="FRIEND");return()=>Pt()?P.name:"[Fehler beim Laden]"})(),ge,Pe),c(A,l(pe,{icon:"trash",onClick:()=>e.removeReservation(P.kind==="FRIEND"?P.uuid:"should not happen")}),He,It),A}})}}),l(Z,{get when(){return P.kind==="FREE"},get children(){return l(U,{get when(){return u()},get fallback(){return(()=>{var A=g(ji),M=A.firstChild,[X,Se]=b(M.nextSibling),ge=X.nextSibling,[Pe,Te]=b(ge.nextSibling);return c(A,l(ee,{icon:"person-to-portal",label:"Mich anmelden",kind:"success",onClick:()=>e.addReservation({kind:"SELF",helpEntryUuid:t.uuid,uuid:crypto.randomUUID()})}),X,Se),c(A,l(bt,{addFriend:He=>e.addReservation({kind:"FRIEND",helpEntryUuid:t.uuid,name:He,uuid:crypto.randomUUID()})}),Pe,Te),A})()},get children(){return l(bt,{addFriend:A=>e.addReservation({kind:"FRIEND",helpEntryUuid:t.uuid,name:A,uuid:crypto.randomUUID()})})}})}})]}})]})),o})()]}var Wi=h("<ul role=list>"),Vi=h("<li>"),Zi=h("<label class=input-radio><input type=radio><!$><!/>");function qi(e){const n=e.layout??"vertical";return(()=>{var t=g(Wi);return de(t,`radio-list ${n}`),c(t,l(se,{get each(){return e.items},children:r=>(()=>{var i=g(Vi);return c(i,l(Ji,{get label(){return r.label},get name(){return`${r.value}-${e.name}`},get value(){return r.value},get checked(){return r.checked},onValueUpdate:()=>e.onValueUpdate(r.value)})),i})()})),t})()}function Ji(e){return(()=>{var n=g(Zi),t=n.firstChild,r=t.nextSibling,[i,a]=b(r.nextSibling);return Qt(t,"change",e.onValueUpdate),c(n,()=>e.label,i,a),B(()=>fe(t,"name",e.name)),B(()=>ue(t,"value",e.value)),B(()=>ue(t,"checked",e.checked)),n})()}var Gi=h("<p>Eines der Hauptziele der Luzerner Spieltage ist es, dass die Besucher/-innen noch nicht gespielte Spiele ausprobieren können. Dazu unterstützen uns jedes Jahr Freiwillige und erklären die ihnen bekannten Spiele aus der Spiele-Bibliothek. Diese Erklärbären sind durch ihr rotes T-Shirt erkennbar."),lt=h("<br>"),Qi=h("<div class=dynamic-columns><div></div><div><!$><!/><ul><li>Sie müssen nicht alle Spiele der Spiele-Bibliothek kennen!</li><li>Sie erklären Spiele während der eingeplanten Zeit<ul><li>Grundsätzlich spielen die Erklärbären nicht mit</li><li>Sobald die Spieler/-innen die Regeln verstanden haben (z.B. nach den ersten paar Runden) verlassen sie den Tisch</li><li>Sie stehen weiterhin für Fragen zur Verfügung und kommen allenfalls periodisch zum Tisch zurück</li></ul></li><li>Sie bringen Spiele für die Spiele-Bibliothek mit welche sie erklären können<ul><li>Diese Spiele sollen ein breites Spektrum, von einfach bis komplex, abdecken</li><li>Eine Liste der mitgebrachten Spiele (Spiele-Bibliothek) wird vor dem Event von allen Erklärbären zusammen erstellt</li><li>Vor dem Event notieren die Erklärbären, was sie aus der Spiele-Bibliothek erklären können - (Mitbringen eigener Spiele ist nicht Pflicht, falls genügend Spiele aus der Liste erklärt werden können)</li></ul></li><li>Sie erarbeiten gemeinsam vor dem Event eine Empfehlungsliste aus ca.&nbsp;6&nbsp;Spielen<ul><li>Alle Erklärbären sollen die Regeln dieser Spiele vor dem Event lesen"),Xi=h("<h3>"),el=h("<div style=display:grid;gap:1rem><!$><!/><!$><!/>"),tl=h("<p>Bitte nimm mit uns <a href=/kontakt>Kontakt</a> auf, damit wir uns kurz mit dir absprechen und dir diesen Bereich freischalten können."),nl=h("<em>Noch keine Einsätze eingetragen"),rl=h("<h4>Tag"),il=h("<h4>Uhrzeit"),ll=h('<div style="display:grid;grid-template-columns:repeat(2, 1fr);gap:1rem"><!$><!/><!$><!/>'),al=h("<h5>Warnungen"),sl=h("<ul>"),ol=h("<li>");function ul(e){return[g(Gi),g(lt),(()=>{var n=g(Qi),t=n.firstChild,r=t.nextSibling,i=r.firstChild,[a,s]=b(i.nextSibling);return a.nextSibling,c(t,l(cl,{get store(){return e.store},get roles(){return e.roles},get isEditable(){return e.isEditable}})),c(r,l(Ie,{level:3,title:"Was machen die Erklärbären"}),a,s),n})()]}function cl(e){const[n,t]=j(e.store.helping);function r(){return n.filter(i=>i.kind==="ERKLAERBAER")}return[l(Ie,{level:3,title:"Meine Einsätze"}),g(lt),l(Ee,{get fallback(){return l(R,{get children(){return g(tl)}})},get children(){return l(Z,{get when(){return e.roles.includes("erklaerbaer")},get children(){var i=g(el),a=i.firstChild,[s,u]=b(a.nextSibling),o=s.nextSibling,[d,f]=b(o.nextSibling);return c(i,l(se,{get each(){return r()},get fallback(){return g(nl)},children:m=>l(dl,{job:m,updateJob:v=>{t(n.map($=>$.uuid===m.uuid?v:$))},removeJob:()=>{t(n.filter(v=>v.uuid!==m.uuid))},get isEditable(){return e.isEditable}})}),s,u),c(i,l(U,{get when(){return e.isEditable},get children(){return l(he,{icon:"grid-2-plus",type:"success",onClick:()=>{t(n.length,{kind:"ERKLAERBAER",uuid:crypto.randomUUID(),slot:{day:"SATURDAY",from:10,to:18}})},get children(){var m=g(Xi);return c(m,()=>C.createNewEntry),m}})}}),d,f),i}})}})]}function dl(e){function n(){const t=[],{day:r,from:i,to:a}=e.job.slot;i>=a&&t.push("Das Ende muss grösser sein als der Start.");const s=Mr[r],{from:u,to:o}=s.open;return u>i&&t.push(`Die Spieltage öffnen am ${C.days[r]} erst um ${u} Uhr.`),o<a&&t.push(`Die Spieltage schliessen am ${C.days[r]} um ${o} Uhr.`),t}return l(R,{get onClose(){return ae(()=>!!e.isEditable)()?e.removeJob:void 0},get children(){return[g(rl),l(qi,{get items(){return[{label:C.days.SATURDAY,checked:e.job.slot.day==="SATURDAY",value:"SATURDAY"},{label:C.days.SUNDAY,checked:e.job.slot.day==="SUNDAY",value:"SUNDAY"}]},onValueUpdate:t=>{e.updateJob({...e.job,slot:{...e.job.slot,day:t}})},get name(){return`day-entry-${e.job.uuid}`},layout:"horizontal",get disabled(){return!e.isEditable}}),g(lt),g(il),(()=>{var t=g(ll),r=t.firstChild,[i,a]=b(r.nextSibling),s=i.nextSibling,[u,o]=b(s.nextSibling);return c(t,l(st,{label:"Start",name:"from",get value(){return e.job.slot.from},onValueUpdate:d=>e.updateJob({...e.job,slot:{...e.job.slot,from:d}}),get disabled(){return!e.isEditable}}),i,a),c(t,l(st,{label:"Ende",name:"to",get value(){return e.job.slot.to},onValueUpdate:d=>e.updateJob({...e.job,slot:{...e.job.slot,to:d}}),get disabled(){return!e.isEditable}}),u,o),t})(),l(U,{get when(){return n().length>0},get children(){return[g(al),(()=>{var t=g(sl);return c(t,l(se,{get each(){return n()},children:r=>(()=>{var i=g(ol);return c(i,r),i})()})),t})()]}})]}})}function gl(){return l(R,{children:"Inhalt folgt."})}function hl(){return l(R,{children:"Inhalt folgt."})}function ml(e){const[n]=Ze(Gr),[t,r]=j({meta:{saveState:"IDLE",lastSaved:new Date,roles:e.initState.roles},save:e.initState.data}),i=crypto.randomUUID(),[a,s]=le(!1);Ze(()=>JSON.stringify(t.save),async()=>{if(!a()){s(!0);return}if(e.initState.status!=="published"){yt("Diese Anmeldung wurde deaktiviert und kann nicht editiert werden.",{kind:"danger",uuid:i});return}const o=en(t.save);try{const d=await yn(t.meta,o,e.secret);d.kind==="FAILURE"?console.error(d):r("meta","lastSaved",d.data)}catch(d){console.error(d),r("meta","saveState","ERROR")}});function u(o){return`${o}?secret=${e.secret}`}return l($r,{children:[{path:"/",component:()=>l(ie,{title:"Wo möchtest du starten?",get roles(){return t.meta.roles},link:u,get saveState(){return t.meta.saveState},get lastSaved(){return t.meta.lastSaved},get children(){return l(Dr,{get roles(){return t.meta.roles},link:u})}})},{path:"/programm",component:()=>l(ie,{title:"Programm",get roles(){return t.meta.roles},link:u,get saveState(){return t.meta.saveState},get lastSaved(){return t.meta.lastSaved},get children(){return l(gl,{})}})},{path:"/erstellen",component:()=>l(ie,{title:"Programmpunkte erstellen und editieren",get roles(){return t.meta.roles},link:u,get saveState(){return t.meta.saveState},get lastSaved(){return t.meta.lastSaved},get children(){return l(hl,{})}})},{path:"/helfen",component:()=>l(ie,{title:"Helfen",get roles(){return t.meta.roles},link:u,get saveState(){return t.meta.saveState},get lastSaved(){return t.meta.lastSaved},showQuickmenu:!0,get children(){return l(ii,{get store(){return t.save},publicResource:n,get isEditable(){return e.initState.status==="published"},link:u,get roles(){return t.meta.roles}})}})},{path:"/helfen/:uuid",component:()=>l(ie,{link:u,get roles(){return t.meta.roles},get saveState(){return t.meta.saveState},get lastSaved(){return t.meta.lastSaved},showQuickmenu:!0,parentPath:"/helfen",get children(){return l(Ki,{get store(){return t.save},publicResource:n,link:u,get isEditable(){return e.initState.status==="published"}})}})},{path:"/erklaerbaer",component:()=>l(ie,{title:"Helfen: Erklärbären",get roles(){return t.meta.roles},link:u,get saveState(){return t.meta.saveState},get lastSaved(){return t.meta.lastSaved},showQuickmenu:!0,parentPath:"/helfen",get children(){return l(ul,{get store(){return t.save},get roles(){return t.meta.roles},get isEditable(){return e.initState.status==="published"}})}})},{path:"/zusammenfassung",component:()=>l(ie,{title:"Zusammenfassung",get roles(){return t.meta.roles},link:u,get saveState(){return t.meta.saveState},get lastSaved(){return t.meta.lastSaved},showQuickmenu:!0,get children(){return l(vi,{get store(){return t.save},get isEditable(){return e.initState.status==="published"}})}})},{path:"*",component:()=>l(ie,{title:"Seite nicht gefunden",get roles(){return t.meta.roles},link:u,get saveState(){return t.meta.saveState},get lastSaved(){return t.meta.lastSaved},showQuickmenu:!0,get children(){return l(R,{type:"danger",get children(){return C.error.siteNotFound}})}})}]})}function fl(){return l(R,{get children(){return C.loading.registration}})}function _l(){const n=URL.parse(location.toString().replace("#/",""))?.searchParams.get("secret")??"no-secret-found",[t]=Ze(()=>kn(n));return l(Xt,{fallback:r=>(console.error(r),l(R,{type:"danger",get children(){return C.error.general}})),get children(){return l(nt,{get fallback(){return l(fl,{})},get children(){return l(Ee,{get children(){return l(Z,{get when(){return t()},children:r=>{const{kind:i,value:a}=Bt(r());return i==="FAILURE"?a.reason==="SECRET_INVALID"?l(R,{type:"danger",get children(){return C.error.secretError}}):(console.error(a),l(R,{type:"danger",get children(){return C.error.ourMistake}})):l(ml,{get initState(){return a.data},secret:n})}})}})}})}})}export{_l as MeineAnmeldungWrapper};
