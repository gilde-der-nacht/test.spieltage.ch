import{g as m,t as w,c as S,a as F,s as Y,d as I,i as v,b as r,e as x,f as C,r as V,m as N,o as Z,h as D,u as J,j as P,S as _,k as B,F as H,l as O,M as R}from"./web.CXIi3SLr.js";var p=w("<i>");function K(t){const e=(t.classes??[]).concat(["fa-duotone",`fa-${t.icon}`]);return(()=>{var n=m(p);return S(d=>{var l=e.join(" "),u=t.style;return l!==d.e&&F(n,d.e=l),d.t=Y(n,u,d.t),d},{e:void 0,t:void 0}),n})()}var Q=w("<button>");function ee(t){return(()=>{var e=m(Q);return e.$$click=n=>t.onClick?.(n),v(e,()=>t.label),S(n=>{var d=t.type??"button",l=`button-${t.kind??(t.disabled?"gray":"accent")}`,u=t.disabled===!0;return d!==n.e&&x(e,"type",n.e=d),l!==n.t&&F(e,n.t=l),u!==n.a&&C(e,"disabled",n.a=u),n},{e:void 0,t:void 0,a:void 0}),V(),e})()}function te(t){return(()=>{var e=m(Q);return e.$$click=n=>t.onClick?.(n),v(e,r(K,{get icon(){return t.icon}})),S(n=>{var d=t.type??"button",l=`button-${t.kind??(t.disabled?"gray":"accent")} button-icon`,u=t.disabled===!0;return d!==n.e&&x(e,"type",n.e=d),l!==n.t&&F(e,n.t=l),u!==n.a&&C(e,"disabled",n.a=u),n},{e:void 0,t:void 0,a:void 0}),V(),e})()}I(["click"]);var ne=w("<form method=post><!$><!/><!$><!/>");function re(t){const e=N({language:"de",submitLabel:t.language==="en"?"Submit":"Absenden"},t);let n;Z(()=>{n.setAttribute("novalidate",""),[...n.querySelectorAll('input[name^="redirect"][type="hidden"]')].forEach(u=>u.remove())});async function d(l){const{target:u}=l;if(u!==null&&u instanceof HTMLFormElement){l.preventDefault();const i=new FormData(u);if(!e.isValid(i))return;try{const a=await fetch(e.actionUrl,{method:"post",body:i});a.ok?e.onSuccess():e.onError(await a.text())}catch(a){e.onError(a)}}}return(()=>{var l=m(ne),u=l.firstChild,[i,a]=D(u.nextSibling),s=i.nextSibling,[g,f]=D(s.nextSibling),h=n;return typeof h=="function"?J(h,l):n=l,l.addEventListener("submit",d),v(l,()=>e.children,i,a),v(l,r(ee,{type:"submit",get label(){return e.submitLabel}}),g,f),S(()=>x(l,"action",e.actionUrl.href)),l})()}var X=w("<label><!$><!/><input>");function j(t){const e=N({type:"text",required:!0,isHoneypot:!1},t);return(()=>{var n=m(X),d=n.firstChild,[l,u]=D(d.nextSibling),i=l.nextSibling;return v(n,()=>e.label,l,u),P(i,"blur",t.onBlur),i.$$input=a=>e.onValueUpdate(a.target.value),S(a=>{var s=e.isHoneypot?"honey":"",g=e.type,f=e.name,h=e.label,k=e.required;return s!==a.e&&F(n,a.e=s),g!==a.t&&x(i,"type",a.t=g),f!==a.a&&x(i,"name",a.a=f),h!==a.o&&x(i,"placeholder",a.o=h),k!==a.i&&C(i,"required",a.i=k),a},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),S(()=>C(i,"value",e.value)),V(),n})()}function ae(t){const e=N({type:"text",required:!0,isHoneypot:!1},t);return(()=>{var n=m(X),d=n.firstChild,[l,u]=D(d.nextSibling),i=l.nextSibling;v(n,()=>e.label,l,u);var a=e.ref;return typeof a=="function"?J(a,i):e.ref=i,P(i,"blur",t.onBlur),i.$$input=s=>e.onValueUpdate(s.target.value),S(s=>{var g=e.isHoneypot?"honey":"",f=e.type,h=e.name,k=e.label,L=e.required;return g!==s.e&&F(n,s.e=g),f!==s.t&&x(i,"type",s.t=f),h!==s.a&&x(i,"name",s.a=h),k!==s.o&&x(i,"placeholder",s.o=k),L!==s.i&&C(i,"required",s.i=L),s},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),S(()=>C(i,"value",e.value)),V(),n})()}I(["input"]);var ie=w("<label><!$><!/><textarea>");function le(t){const e=N({required:!0},t);return(()=>{var n=m(ie),d=n.firstChild,[l,u]=D(d.nextSibling),i=l.nextSibling;return v(n,()=>e.label,l,u),P(i,"blur",t.onBlur),i.$$input=a=>e.onValueUpdate(a.target.value),S(a=>{var s=t.size==="sm"?"small":"",g=e.name,f=e.label,h=e.required;return s!==a.e&&F(i,a.e=s),g!==a.t&&x(i,"name",a.t=g),f!==a.a&&x(i,"placeholder",a.a=f),h!==a.o&&C(i,"required",a.o=h),a},{e:void 0,t:void 0,a:void 0,o:void 0}),S(()=>C(i,"value",e.value)),V(),n})()}I(["input"]);var ue=w("<input type=hidden>");function U(t){return(()=>{var e=m(ue);return S(()=>x(e,"name",t.name)),S(()=>C(e,"value",t.value)),e})()}var ce=w("<a><!$><!/><span> <!$><!/>"),se=w("<div><!$><!/><span></span><!$><!/>");function M(t){return(()=>{var e=m(se),n=e.firstChild,[d,l]=D(n.nextSibling),u=d.nextSibling,i=u.nextSibling,[a,s]=D(i.nextSibling);return P(e,"click",t.onClick,!0),v(e,r(_,{get when(){return t.onClose},children:g=>r(te,{get onClick(){return g()},icon:"circle-xmark",kind:"gray"})}),d,l),v(u,()=>t.children),v(e,r(_,{get when(){return t.link!==void 0&&t.linkLabel!==void 0},get children(){var g=m(ce),f=g.firstChild,[h,k]=D(f.nextSibling),L=h.nextSibling,b=L.firstChild,E=b.nextSibling,[q,A]=D(E.nextSibling);return v(g,r(K,{icon:"arrow-turn-down-right",classes:["event-icon"]}),h,k),v(L,()=>t.linkLabel,q,A),S(c=>{var o=t.link??"",$=`button button-small button-${t.type??"gray"}`;return o!==c.e&&x(g,"href",c.e=o),$!==c.t&&F(g,c.t=$),c},{e:void 0,t:void 0}),g}}),a,s),S(()=>F(e,`box-${t.type??"gray"} ${t.onClose!==void 0?"box-with-close":""}`)),V(),e})()}I(["click"]);function oe(t){return new URL(t,"https://elysium.gildedernacht.ch")}var z=w("<br>"),T=w("<p>");function G(){return{name:"",email:"",captcha:"",message:""}}function W(){return{name:[],email:[],captcha:[],message:[]}}const de=oe("/forms");function he(t){const e="Name",n=t.language!=="en"?"E-Mail":"Email",d=t.language!=="en"?"Bitte leer lassen":"leave this field empty",l=t.language!=="en"?"Nachricht":"Message",[u,i]=B(G());let a;const[s,g]=B(!1),[f,h]=B(!1);function k(){h(!1),i(G()),g(!0)}function L(c){g(!1),h(!0),console.error(c)}const[b,E]=B(W());function q(c){return o=>{h(!1),E(W()),i($=>({...$,[c]:o}))}}function A(c){E(W());const o=t.language==="en";if(u().name.trim().length===0){const $=o?"This is a mandatory field.":"Dies ist ein Pflichtfeld.";E(y=>({...y,name:[...y.name,$]}))}if(u().email.trim().length===0){const $=o?"This is a mandatory field.":"Dies ist ein Pflichtfeld.";E(y=>({...y,email:[...y.email,$]}))}if(a.validity.typeMismatch){const $=o?"The input does not seem to be a valid email address.":"Die Eingabe scheint keine gÃ¼ltige E-Mail-Adresse zu sein.";E(y=>({...y,email:[...y.email,$]}))}if(u().captcha.trim().length>0){const $=o?"This is field must be empty.":"Dieses Feld muss leer bleiben.";E(y=>({...y,captcha:[...y.captcha,$]}))}if(u().message.trim().length===0){const $=o?"This is a mandatory field.":"Dies ist ein Pflichtfeld.";E(y=>({...y,message:[...y.message,$]}))}return b().name.length===0&&b().email.length===0&&b().captcha.length===0&&b().message.length===0}return[r(re,{actionUrl:de,get language(){return t.language??"de"},isValid:A,onSuccess:k,onError:L,get children(){return[r(j,{label:e,name:"private-name",get value(){return u().name},get onValueUpdate(){return q("name")}}),r(_,{get when(){return b().name.length>0},get children(){return r(M,{type:"danger",get children(){return r(H,{get each(){return b().name},children:c=>(()=>{var o=m(T);return v(o,c),o})()})}})}}),r(ae,{label:n,name:"private-email",type:"email",get value(){return u().email},get onValueUpdate(){return q("email")},ref(c){var o=a;typeof o=="function"?o(c):a=c}}),r(_,{get when(){return b().email.length>0},get children(){return r(M,{type:"danger",get children(){return r(H,{get each(){return b().email},children:c=>(()=>{var o=m(T);return v(o,c),o})()})}})}}),r(j,{label:d,name:"private-captcha",type:"email",required:!1,isHoneypot:!0,get value(){return u().captcha},get onValueUpdate(){return q("captcha")}}),r(_,{get when(){return b().captcha.length>0},get children(){return r(M,{type:"danger",get children(){return r(H,{get each(){return b().captcha},children:c=>(()=>{var o=m(T);return v(o,c),o})()})}})}}),r(le,{label:l,name:"private-message",get value(){return u().message},get onValueUpdate(){return q("message")}}),r(_,{get when(){return b().message.length>0},get children(){return r(M,{type:"danger",get children(){return r(H,{get each(){return b().message},children:c=>(()=>{var o=m(T);return v(o,c),o})()})}})}}),r(_,{get when(){return t.language},children:c=>r(U,{name:"language",get value(){return c()}})}),r(_,{get when(){return t.category},children:c=>r(U,{name:"category",get value(){return c()}})}),r(_,{get when(){return t.referer},children:c=>r(U,{name:"referer",get value(){return c().href}})}),r(_,{get when(){return t.redirectOnSuccess},children:c=>r(U,{name:"redirect-on-success",get value(){return c().href}})}),r(_,{get when(){return t.redirectOnFailure},children:c=>r(U,{name:"redirect-on-failure",get value(){return c().href}})}),r(_,{get when(){return t.redirectOnSpam},children:c=>r(U,{name:"redirect-on-spam",get value(){return c().href}})})]}}),r(_,{get when(){return f()},get children(){return[m(z),r(M,{type:"danger",get children(){return r(O,{fallback:"Leider konnten wir die Nachricht nicht absenden. Bitte versuche es erneut.",get children(){return r(R,{get when(){return t.language==="en"},children:"There was a problem sending your message. Please try again."})}})}})]}}),r(_,{get when(){return s()},get children(){return[m(z),r(M,{type:"success",get children(){return r(O,{fallback:"Nachricht wurde erfolgreich gesendet.",get children(){return r(R,{get when(){return t.language==="en"},children:"Message successfully sent."})}})}})]}})]}export{he as ContactFormImpl};
