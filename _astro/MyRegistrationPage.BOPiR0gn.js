import{e as Ce,d as Ye,f as Pe,c as U,B as I,g as Xe,I as et,h as G,b as Y,u as tt}from"./utils.CUbrjdhf.js";import{g as b,t as S,r as Ue,h as E,j as Ie,k as _e,e as K,b as De,l as pe,n as Fe,p as Te,q as nt,w as rt,x as at,y as it,c as l,z as st,A as be,S as N,B as lt,C as Oe,D as le,E as ot,m as Ee,G as ut,H as ct,I as dt,i as m,a as _,J as ht,u as gt,K as mt,F as ft,M as X,f as Be,L as Me,N as bt,O as $t}from"./web.Cd_UHsK7.js";import{c as P,u as St}from"./store.2AQHAzaW.js";import{e as Ne,o as q,n as $e,s as D,l as We}from"./types.3ddsQzP4.js";import"./Textarea.PBlkqRmM.js";const[j,te]=P([]);function He(e,t){if(t?.uuid!==void 0&&j.find(o=>o.uuid===t.uuid)!==void 0)return Se(t.uuid,e,t);const n=t?.uuid??crypto.randomUUID(),a=t?.duration??5e3,r=t?.kind??"gray",i=t?.dismissable??!0,s=setTimeout(()=>{te(j.filter(o=>o.uuid!==n))},a);return te(j.length,{uuid:n,kind:r,message:e,duration:a,dismissable:i,cleanup:()=>clearTimeout(s)}),n}function Se(e,t,n){const a=j.find(u=>u.uuid===e);if(a===void 0)return e;a.cleanup();const r=n.duration??a.duration,i=n.kind??a.kind,s=n?.dismissable??a.dismissable,o=setTimeout(()=>{te(j.filter(u=>u.uuid!==e))},r);return te(u=>u.uuid===e,{uuid:e,kind:i,message:t,duration:r,dismissable:s,cleanup:()=>clearTimeout(o)}),e}const vt=Ne(["SATURDAY","SUNDAY"]);q({uuid:D().uuid(),day:vt,from:$e(),to:$e()}).refine(e=>e.from<e.to,{message:"A TimeSlot can't end before it starts."});q({name:D(),label:D(),description:D()});const _t=Ne(["draft","published","archived"]);async function pt(e){const t=new URL(Ce("/lst26/load"));t.searchParams.append("secret",e);const n=await fetch(t);if(!n.ok)return{kind:"FAILURE"};const a=await n.json();return typeof a=="object"&&a!==null?{kind:"SUCCESS",data:a}:(console.error("`last_save` not found on ",a),{kind:"FAILURE"})}async function kt(e,t){try{const n=await fetch(Ce("/lst26/save"),{method:"POST",body:JSON.stringify({secret:t,save:e}),headers:{"Content-Type":"application/json"}});return n.ok?{kind:"SUCCESS",data:t}:(console.error(await n.text()),{kind:"FAILURE"})}catch(n){return console.error(n),{kind:"FAILURE"}}}const wt=q({name:D(),email:D(),mobile:D()}),yt=q({version:We(2),contact:wt}),xt=q({kind:We("SUCCESS"),status:_t,data:yt});async function Et(e){if(e.length!==36&&e.length!==4)return{kind:"FAILURE",reason:"SECRET_INVALID"};const t=await pt(e);if(t.kind==="FAILURE")return console.error("Unexpected error. Maybe network, maybe server error."),{kind:"FAILURE",reason:"GENERAL"};const n=xt.safeParse(t.data);return n.success?{kind:"SUCCESS",data:n.data}:(console.error(n.error),{kind:"FAILURE",reason:"PARSE_ERROR"})}const oe=crypto.randomUUID();async function Rt(e,t,n){const[a,r]=P(e);r("saveState","SAVING"),He("Am Speichern...",{uuid:oe,dismissable:!1});const i=new Date;try{if((await kt(t,n)).kind==="FAILURE")throw Error("")}catch(s){return r("saveState","ERROR"),console.error(s),Se(oe,"Speichern war nicht möglich!",{kind:"danger",duration:1e4,dismissable:!0}),{kind:"FAILURE"}}return Se(oe,`Zuletzt gespeichert um: ${Pe(i)} Uhr`,{kind:"success",dismissable:!0}),r("saveState","IDLE"),{kind:"SUCCESS",data:i}}const Lt=Ye(Rt,1e3);var Re=S("<br>"),At=S("<strong>Donnerstag, 21. August 2025"),Ct=S("<p>Deine Anmeldung wird geladen..."),Pt=S("<p>Das Programm wird geladen..."),Ut=S("<p>Leider ist ein unerwarteter Fehler passiert. Versuche deine Anmeldung erneut zu laden. Wiederholt sich dieser Fehler, bitte kontaktiere uns sobald als möglich über das <a href=/kontakt>Kontaktformular</a>, da dies nicht passieren sollte."),It=S("<p>Wir konnten leider keine Anmeldung finden. Wenn du bereits eine Anmeldung begonnen hast, solltest du den korrekten Link per E-Mail erhalten haben.<br><br> Falls du noch keine Anmeldung begonnen hast, kannst du <a href=/anmeldung>hier</a> deine persönliche Anmeldung beginnen. <br><br>Für generelle Fragen oder Probleme, schreibe uns doch bitte über unser <a href=/kontatk>Kontaktformular</a>."),Dt=S("<p>Wir konnten leider keine Spielrunde unter diesem Link finden.<br><br>Vermutlich liegt es an uns. Bitte kontaktiere uns sobald als möglich über das "),Ft=S("<p>Leider ist ein unerwarteter Fehler passiert. Vermutlich liegt es an uns. Bitte kontaktiere uns sobald als möglich über das <a href=/kontakt>Kontaktformular</a>."),Tt=S("<p>Leider ist ein unerwarteter Fehler passiert beim Laden des Programmes. Vermutlich liegt es an uns. Bitte kontaktiere uns sobald als möglich über das <a href=/kontakt>Kontaktformular</a>."),Ot=S("<p>Leider ist ein unerwarteter Fehler passiert beim Laden von Daten. Vermutlich liegt es an uns. Bitte kontaktiere uns sobald als möglich über das <a href=/kontakt>Kontaktformular</a>.");b(Re),b(Re),b(At);const Bt={registration:b(Ct),program:b(Pt)},Mt={general:b(Ut),secretError:b(It),gameroundUuidError:b(Dt),ourMistake:b(Ft),program:b(Tt),help:b(Ot)},Nt="Die Eingabe scheint keine gültige E-Mail-Adresse zu sein.",Wt="Dies ist ein Pflichtfeld.",B={loading:Bt,error:Mt,invalidEmail:Nt,mandatoryField:Wt};function Ke(){let e=new Set;function t(r){return e.add(r),()=>e.delete(r)}let n=!1;function a(r,i){if(n)return!(n=!1);const s={to:r,options:i,defaultPrevented:!1,preventDefault:()=>s.defaultPrevented=!0};for(const o of e)o.listener({...s,from:o.location,retry:u=>{u&&(n=!0),o.navigate(r,{...i,resolve:!1})}});return!s.defaultPrevented}return{subscribe:t,confirm:a}}let ve;function ke(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),ve=window.history.state._depth}ke();function Ht(e){return{...e,_depth:window.history.state&&window.history.state._depth}}function Kt(e,t){let n=!1;return()=>{const a=ve;ke();const r=a==null?null:ve-a;if(n){n=!1;return}r&&t(r)?(n=!0,window.history.go(-r)):e()}}const zt=/^(?:[a-z0-9]+:)?\/\//i,jt=/^\/+|(\/)\/+$/g,ze="http://sr";function M(e,t=!1){const n=e.replace(jt,"$1");return n?t||/^[?#]/.test(n)?n:"/"+n:""}function ee(e,t,n){if(zt.test(t))return;const a=M(e),r=n&&M(n);let i="";return!r||t.startsWith("/")?i=a:r.toLowerCase().indexOf(a.toLowerCase())!==0?i=a+r:i=r,(i||"/")+M(t,!i)}function qt(e,t){if(e==null)throw new Error(t);return e}function Zt(e,t){return M(e).replace(/\/*(\*.*)?$/g,"")+M(t)}function je(e){const t={};return e.searchParams.forEach((n,a)=>{a in t?Array.isArray(t[a])?t[a].push(n):t[a]=[t[a],n]:t[a]=n}),t}function Vt(e,t,n){const[a,r]=e.split("/*",2),i=a.split("/").filter(Boolean),s=i.length;return o=>{const u=o.split("/").filter(Boolean),c=u.length-s;if(c<0||c>0&&r===void 0&&!t)return null;const h={path:s?"":"/",params:{}},v=$=>n===void 0?void 0:n[$];for(let $=0;$<s;$++){const f=i[$],p=f[0]===":",d=p?u[$]:u[$].toLowerCase(),g=p?f.slice(1):f.toLowerCase();if(p&&ue(d,v(g)))h.params[g]=d;else if(p||!ue(d,g))return null;h.path+=`/${d}`}if(r){const $=c?u.slice(-c).join("/"):"";if(ue($,v(r)))h.params[r]=$;else return null}return h}}function ue(e,t){const n=a=>a===e;return t===void 0?!0:typeof t=="string"?n(t):typeof t=="function"?t(e):Array.isArray(t)?t.some(n):t instanceof RegExp?t.test(e):!1}function Qt(e){const[t,n]=e.pattern.split("/*",2),a=t.split("/").filter(Boolean);return a.reduce((r,i)=>r+(i.startsWith(":")?2:3),a.length-(n===void 0?0:1))}function qe(e){const t=new Map,n=Ie();return new Proxy({},{get(a,r){return t.has(r)||Ue(n,()=>t.set(r,E(()=>e()[r]))),t.get(r)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())},has(a,r){return r in e()}})}function Ze(e){let t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];let n=e.slice(0,t.index),a=e.slice(t.index+t[0].length);const r=[n,n+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(a);)r.push(n+=t[1]),a=a.slice(t[0].length);return Ze(a).reduce((i,s)=>[...i,...r.map(o=>o+s)],[])}const Jt=100,Ve=Fe(),we=Fe(),ye=()=>qt(_e(Ve),"<A> and 'use' router primitives can be only used inside a Route."),Gt=()=>_e(we)||ye().base,Yt=e=>{const t=Gt();return E(()=>t.resolvePath(e()))},Xt=e=>{const t=ye();return E(()=>{const n=e();return n!==void 0?t.renderPath(n):n})},en=()=>ye().location;function tn(e,t=""){const{component:n,preload:a,load:r,children:i,info:s}=e,o=!i||Array.isArray(i)&&!i.length,u={key:e,component:n,preload:a||r,info:s};return Qe(e.path).reduce((c,h)=>{for(const v of Ze(h)){const $=Zt(t,v);let f=o?$:$.split("/*",1)[0];f=f.split("/").map(p=>p.startsWith(":")||p.startsWith("*")?p:encodeURIComponent(p)).join("/"),c.push({...u,originalPath:h,pattern:f,matcher:Vt(f,!o,e.matchFilters)})}return c},[])}function nn(e,t=0){return{routes:e,score:Qt(e[e.length-1])*1e4-t,matcher(n){const a=[];for(let r=e.length-1;r>=0;r--){const i=e[r],s=i.matcher(n);if(!s)return null;a.unshift({...s,route:i})}return a}}}function Qe(e){return Array.isArray(e)?e:[e]}function Je(e,t="",n=[],a=[]){const r=Qe(e);for(let i=0,s=r.length;i<s;i++){const o=r[i];if(o&&typeof o=="object"){o.hasOwnProperty("path")||(o.path="");const u=tn(o,t);for(const c of u){n.push(c);const h=Array.isArray(o.children)&&o.children.length===0;if(o.children&&!h)Je(o.children,c.pattern,n,a);else{const v=nn([...n],a.length);a.push(v)}n.pop()}}}return n.length?a:a.sort((i,s)=>s.score-i.score)}function ce(e,t){for(let n=0,a=e.length;n<a;n++){const r=e[n].matcher(t);if(r)return r}return[]}function rn(e,t,n){const a=new URL(ze),r=E(h=>{const v=e();try{return new URL(v,a)}catch{return console.error(`Invalid path ${v}`),h}},a,{equals:(h,v)=>h.href===v.href}),i=E(()=>r().pathname),s=E(()=>r().search,!0),o=E(()=>r().hash),u=()=>"",c=pe(s,()=>je(r()));return{get pathname(){return i()},get search(){return s()},get hash(){return o()},get state(){return t()},get key(){return u()},query:n?n(c):qe(c)}}let O;function an(){return O}function sn(e,t,n,a={}){const{signal:[r,i],utils:s={}}=e,o=s.parsePath||(w=>w),u=s.renderPath||(w=>w),c=s.beforeLeave||Ke(),h=ee("",a.base||"");if(h===void 0)throw new Error(`${h} is not a valid base path`);h&&!r().value&&i({value:h,replace:!0,scroll:!1});const[v,$]=K(!1);let f;const p=(w,y)=>{y.value===d()&&y.state===k()||(f===void 0&&$(!0),O=w,f=y,rt(()=>{f===y&&(g(f.value),x(f.state),it(),C[1](R=>R.filter(W=>W.pending)))}).finally(()=>{f===y&&at(()=>{O=void 0,w==="navigate"&&Q(f),$(!1),f=void 0})}))},[d,g]=K(r().value),[k,x]=K(r().state),A=rn(d,k,s.queryWrapper),L=[],C=K([]),T=E(()=>typeof a.transformUrl=="function"?ce(t(),a.transformUrl(A.pathname)):ce(t(),A.pathname)),Z=()=>{const w=T(),y={};for(let R=0;R<w.length;R++)Object.assign(y,w[R].params);return y},ne=s.paramsWrapper?s.paramsWrapper(Z,t):qe(Z),V={pattern:h,path:()=>h,outlet:()=>null,resolvePath(w){return ee(h,w)}};return De(pe(r,w=>p("native",w),{defer:!0})),{base:V,location:A,params:ne,isRouting:v,renderPath:u,parsePath:o,navigatorFactory:ae,matches:T,beforeLeave:c,preloadRoute:Ge,singleFlight:a.singleFlight===void 0?!0:a.singleFlight,submissions:C};function re(w,y,R){Te(()=>{if(typeof y=="number"){y&&(s.go?s.go(y):console.warn("Router integration does not support relative routing"));return}const W=!y||y[0]==="?",{replace:ie,resolve:H,scroll:se,state:z}={replace:!1,resolve:!W,scroll:!0,...R},J=H?w.resolvePath(y):ee(W&&A.pathname||"",y);if(J===void 0)throw new Error(`Path '${y}' is not a routable path`);if(L.length>=Jt)throw new Error("Too many redirects");const xe=d();(J!==xe||z!==k())&&(nt||c.confirm(J,R)&&(L.push({value:xe,replace:ie,scroll:se,state:k()}),p("navigate",{value:J,state:z})))})}function ae(w){return w=w||_e(we)||V,(y,R)=>re(w,y,R)}function Q(w){const y=L[0];y&&(i({...w,replace:y.replace,scroll:y.scroll}),L.length=0)}function Ge(w,y){const R=ce(t(),w.pathname),W=O;O="preload";for(let ie in R){const{route:H,params:se}=R[ie];H.component&&H.component.preload&&H.component.preload();const{preload:z}=H;y&&z&&Ue(n(),()=>z({params:se,location:{pathname:w.pathname,search:w.search,hash:w.hash,query:je(w),state:null,key:""},intent:"preload"}))}O=W}}function ln(e,t,n,a){const{base:r,location:i,params:s}=e,{pattern:o,component:u,preload:c}=a().route,h=E(()=>a().path);u&&u.preload&&u.preload();const v=c?c({params:s,location:i,intent:O||"initial"}):void 0;return{parent:t,pattern:o,path:h,outlet:()=>u?l(u,{params:s,location:i,data:v,get children(){return n()}}):n(),resolvePath(f){return ee(r.path(),f,h())}}}const on=e=>t=>{const{base:n}=t,a=st(()=>t.children),r=E(()=>Je(a(),t.base||""));let i;const s=sn(e,r,()=>i,{base:n,singleFlight:t.singleFlight,transformUrl:t.transformUrl});return e.create&&e.create(s),l(Ve.Provider,{value:s,get children(){return l(un,{routerState:s,get root(){return t.root},get preload(){return t.rootPreload||t.rootLoad},get children(){return[be(()=>(i=Ie())&&null),l(cn,{routerState:s,get branches(){return r()}})]}})}})};function un(e){const t=e.routerState.location,n=e.routerState.params,a=E(()=>e.preload&&Te(()=>{e.preload({params:n,location:t,intent:an()||"initial"})}));return l(N,{get when(){return e.root},keyed:!0,get fallback(){return e.children},children:r=>l(r,{params:n,location:t,get data(){return a()},get children(){return e.children}})})}function cn(e){const t=[];let n;const a=E(pe(e.routerState.matches,(r,i,s)=>{let o=i&&r.length===i.length;const u=[];for(let c=0,h=r.length;c<h;c++){const v=i&&i[c],$=r[c];s&&v&&$.route.key===v.route.key?u[c]=s[c]:(o=!1,t[c]&&t[c](),lt(f=>{t[c]=f,u[c]=ln(e.routerState,u[c-1]||e.routerState.base,Le(()=>a()[c+1]),()=>{const p=e.routerState.matches();return p[c]??p[0]})}))}return t.splice(r.length).forEach(c=>c()),s&&o?s:(n=u[0],u)}));return Le(()=>a()&&n)()}const Le=e=>()=>l(N,{get when(){return e()},keyed:!0,children:t=>l(we.Provider,{value:t,get children(){return t.outlet()}})});function dn([e,t],n,a){return[e,a?r=>t(a(r)):t]}function hn(e){let t=!1;const n=r=>typeof r=="string"?{value:r}:r,a=dn(K(n(e.get()),{equals:(r,i)=>r.value===i.value&&r.state===i.state}),void 0,r=>(!t&&e.set(r),le.registry&&!le.done&&(le.done=!0),r));return e.init&&Oe(e.init((r=e.get())=>{t=!0,a[1](n(r)),t=!1})),on({signal:a,create:e.create,utils:e.utils})}function gn(e,t,n){return e.addEventListener(t,n),()=>e.removeEventListener(t,n)}function mn(e,t){const n=e&&document.getElementById(e);n?n.scrollIntoView():t&&window.scrollTo(0,0)}const fn=new Map;function bn(e=!0,t=!1,n="/_server",a){return r=>{const i=r.base.path(),s=r.navigatorFactory(r.base);let o,u;function c(d){return d.namespaceURI==="http://www.w3.org/2000/svg"}function h(d){if(d.defaultPrevented||d.button!==0||d.metaKey||d.altKey||d.ctrlKey||d.shiftKey)return;const g=d.composedPath().find(T=>T instanceof Node&&T.nodeName.toUpperCase()==="A");if(!g||t&&!g.hasAttribute("link"))return;const k=c(g),x=k?g.href.baseVal:g.href;if((k?g.target.baseVal:g.target)||!x&&!g.hasAttribute("state"))return;const L=(g.getAttribute("rel")||"").split(/\s+/);if(g.hasAttribute("download")||L&&L.includes("external"))return;const C=k?new URL(x,document.baseURI):new URL(x);if(!(C.origin!==window.location.origin||i&&C.pathname&&!C.pathname.toLowerCase().startsWith(i.toLowerCase())))return[g,C]}function v(d){const g=h(d);if(!g)return;const[k,x]=g,A=r.parsePath(x.pathname+x.search+x.hash),L=k.getAttribute("state");d.preventDefault(),s(A,{resolve:!1,replace:k.hasAttribute("replace"),scroll:!k.hasAttribute("noscroll"),state:L?JSON.parse(L):void 0})}function $(d){const g=h(d);if(!g)return;const[k,x]=g;r.preloadRoute(x,k.getAttribute("preload")!=="false")}function f(d){clearTimeout(o);const g=h(d);if(!g)return u=null;const[k,x]=g;u!==k&&(o=setTimeout(()=>{r.preloadRoute(x,k.getAttribute("preload")!=="false"),u=k},20))}function p(d){if(d.defaultPrevented)return;let g=d.submitter&&d.submitter.hasAttribute("formaction")?d.submitter.getAttribute("formaction"):d.target.getAttribute("action");if(!g)return;if(!g.startsWith("https://action/")){const x=new URL(g,ze);if(g=r.parsePath(x.pathname+x.search),!g.startsWith(n))return}if(d.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const k=fn.get(g);if(k){d.preventDefault();const x=new FormData(d.target,d.submitter);k.call({r,f:d.target},d.target.enctype==="multipart/form-data"?x:new URLSearchParams(x))}}ot(["click","submit"]),document.addEventListener("click",v),e&&(document.addEventListener("mousemove",f,{passive:!0}),document.addEventListener("focusin",$,{passive:!0}),document.addEventListener("touchstart",$,{passive:!0})),document.addEventListener("submit",p),Oe(()=>{document.removeEventListener("click",v),e&&(document.removeEventListener("mousemove",f),document.removeEventListener("focusin",$),document.removeEventListener("touchstart",$)),document.removeEventListener("submit",p)})}}function $n(e){const t=e.replace(/^.*?#/,"");if(!t.startsWith("/")){const[,n="/"]=window.location.hash.split("#",2);return`${n}#${t}`}return t}function Sn(e){const t=()=>window.location.hash.slice(1),n=Ke();return hn({get:t,set({value:a,replace:r,scroll:i,state:s}){r?window.history.replaceState(Ht(s),"","#"+a):window.history.pushState(s,"","#"+a);const o=a.indexOf("#"),u=o>=0?a.slice(o+1):"";mn(u,i),ke()},init:a=>gn(window,"hashchange",Kt(a,r=>!n.confirm(r&&r<0?r:t()))),create:bn(e.preload,e.explicitLinks,e.actionBase),utils:{go:a=>window.history.go(a),renderPath:a=>`#${a}`,parsePath:$n,beforeLeave:n}})(e)}var vn=S("<a>");function F(e){e=Ee({inactiveClass:"inactive",activeClass:"active"},e);const[,t]=ut(e,["href","state","class","activeClass","inactiveClass","end"]),n=Yt(()=>e.href),a=Xt(n),r=en(),i=E(()=>{const s=n();if(s===void 0)return[!1,!1];const o=M(s.split(/[?#]/,1)[0]).toLowerCase(),u=decodeURI(M(r.pathname).toLowerCase());return[e.end?o===u:u.startsWith(o+"/")||u===o,o===u]});return(()=>{var s=b(vn);return ct(s,Ee(t,{get href(){return a()||e.href},get state(){return JSON.stringify(e.state)},get classList(){return{...e.class&&{[e.class]:!0},[e.inactiveClass]:!i()[0],[e.activeClass]:i()[0],...t.classList}},link:"",get"aria-current"(){return i()[1]?"page":void 0}}),!1),dt(),s})()}var _n=S("<div class=grid><!$><!/><div>"),pn=S("<div class=boxLink>");function Ae(e){const t=e.type??"special";return(()=>{var n=b(pn);return m(n,l(I,{type:t,get children(){var a=b(_n),r=a.firstChild,[i,s]=_(r.nextSibling),o=i.nextSibling;return m(a,l(U,{get icon(){return e.icon}}),i,s),m(o,()=>e.children),a}})),n})()}var kn=S("<h3>Helfen"),wn=S("<p>Beim Kiosk und der Essensausgabe können wir immer ein paar helfende Hände gebrauchen."),yn=S("<h3>Zusammenfassung"),xn=S("<p>Erhalte einen Überblick über dein gesamtes Programm."),En=S("<div><!$><!/><br><!$><!/>");function de(e){return(()=>{var t=b(En),n=t.firstChild,[a,r]=_(n.nextSibling),i=a.nextSibling,s=i.nextSibling,[o,u]=_(s.nextSibling);return m(t,l(F,{get href(){return e.link("/helfen")},class:"button-link",get children(){return l(Ae,{icon:"hand-heart",get children(){return[b(kn),b(wn)]}})}}),a,r),m(t,l(F,{get href(){return e.link("/zusammenfassung")},class:"button-link",get children(){return l(Ae,{icon:"list",get children(){return[b(yn),b(xn)]}})}}),o,u),t})()}var Rn=S("<p>Beim Kiosk und der Essensausgabe können wir immer ein paar helfende Hände gebrauchen. Wenn du bereit bist zu helfen, klicke in der jeweiligen Stunde auf das Handsymbol <!$><!/>.");function Ln(){return(()=>{var e=b(Rn),t=e.firstChild,n=t.nextSibling,[a,r]=_(n.nextSibling);return a.nextSibling,m(e,l(U,{icon:"hand-heart"}),a,r),e})()}var An=S("<dialog closedby=any><!$><!/><!$><!/><!$><!/>"),Cn=S("<h4>");function Pn(e=!1){return{open:e}}function Un(e){let t;const[n,a]=P(e.store);ht(()=>{n.open?t.showModal():t.close()});function r(){a({open:!1}),e.onClose?.()}const i=()=>{const s=[];return e.type!==void 0&&s.push(e.type),e.size!==void 0&&s.push(e.size),e.onClose!==void 0&&s.push("dialog-with-close"),s};return(()=>{var s=b(An),o=s.firstChild,[u,c]=_(o.nextSibling),h=u.nextSibling,[v,$]=_(h.nextSibling),f=v.nextSibling,[p,d]=_(f.nextSibling);s.addEventListener("close",r);var g=t;return typeof g=="function"?gt(g,s):t=s,m(s,l(N,{get when(){return e.onClose},get children(){return l(Xe,{onClick:r,icon:"circle-xmark",kind:"gray"})}}),u,c),m(s,l(N,{get when(){return e.title},children:k=>(()=>{var x=b(Cn);return m(x,k),x})()}),v,$),m(s,()=>e.children,p,d),De(()=>mt(s,i().join(" "))),s})()}var In=S("<p>");function he(e){const[t,n]=P(e.store),a=e.showErrors==="ALWAYS",r=()=>a||t.isDirty?e.errors??[]:[];return[l(et,{get label(){return e.label},get name(){return e.name},get value(){return t.value},onValueUpdate:i=>n("value",i),onBlur:()=>n("isDirty",!0),get type(){return e.type},get required(){return e.required},get isHoneypot(){return e.isHoneypot},get disabled(){return e.disabled}}),l(N,{get when(){return r().length>0},get children(){return l(I,{type:"danger",get children(){return l(ft,{get each(){return r()},children:i=>(()=>{var s=b(In);return m(s,i),s})()})}})}})]}D().transform(e=>({value:e,isDirty:!1}));function ge(e){return{value:e,isDirty:!1}}$e().transform(e=>({value:e,isDirty:!1}));var Dn=S("<div>"),Fn=S("<div style=display:grid;gap:1rem><h3>Meine Kontaktdaten</h3><p><strong>Name:</strong> <!$><!/></p><p><strong>E-Mail:</strong> <!$><!/></p><p><strong>Handynummer:</strong> <!$><!/></p><!$><!/>"),Tn=S("<form novalidate><!$><!/><!$><!/><!$><!/><!$><!/>");function On(e){return l(Bn,{get store(){return e.store.contact},get isEditable(){return e.isEditable}})}function Bn(e){const[t,n]=P(e.store),[a,r]=P(Pn());return l(I,{get children(){return[l(N,{get when(){return a.open},get children(){return l(Mn,{dialogStore:a,get currentState(){return e.store},updateCurrentState:n})}}),(()=>{var i=b(Fn),s=i.firstChild,o=s.nextSibling,u=o.firstChild,c=u.nextSibling,h=c.nextSibling,[v,$]=_(h.nextSibling),f=o.nextSibling,p=f.firstChild,d=p.nextSibling,g=d.nextSibling,[k,x]=_(g.nextSibling),A=f.nextSibling,L=A.firstChild,C=L.nextSibling,T=C.nextSibling,[Z,ne]=_(T.nextSibling),V=A.nextSibling,[re,ae]=_(V.nextSibling);return m(o,()=>e.store.name,v,$),m(f,()=>e.store.email,k,x),m(A,()=>e.store.mobile,Z,ne),m(i,l(N,{get when(){return e.isEditable},get children(){var Q=b(Dn);return m(Q,l(G,{icon:"pencil",label:"Kontaktdaten editieren",onClick:()=>r("open",!0)})),Q}}),re,ae),i})()]}})}function Mn(e){const[t]=P({name:ge(e.currentState.name),email:ge(e.currentState.email),mobile:ge(e.currentState.mobile)}),n=E(()=>{const i={name:[],email:[]};return t.name.value.trim().length===0&&i.name.push(B.mandatoryField),t.email.value.trim().length===0?i.email.push(B.mandatoryField):t.email.value.includes("@")||i.email.push(B.invalidEmail),{...i,hasErrors:i.name.length+i.email.length>0}}),[a,r]=P(e.dialogStore);return l(Un,{get store(){return e.dialogStore},title:"Kontaktdaten editieren",onClose:()=>{},size:"medium",get children(){var i=b(Tn),s=i.firstChild,[o,u]=_(s.nextSibling),c=o.nextSibling,[h,v]=_(c.nextSibling),$=h.nextSibling,[f,p]=_($.nextSibling),d=f.nextSibling,[g,k]=_(d.nextSibling);return m(i,l(he,{get store(){return t.name},label:"Name",name:"name",showErrors:"ON_BLUR",get errors(){return n().name}}),o,u),m(i,l(he,{get store(){return t.email},label:"E-Mail",name:"email",showErrors:"ON_BLUR",get errors(){return n().email}}),h,v),m(i,l(he,{get store(){return t.mobile},label:"Handynummer",name:"mobile"}),f,p),m(i,l(Y,{label:"Speichern",get disabled(){return n().hasErrors},onClick:()=>{n().hasErrors||(e.updateCurrentState({name:t.name.value,email:t.email.value,mobile:t.mobile.value}),r("open",!1))}}),g,k),i}})}var Nn=S("<div class=tooltip-wrapper><div class=tooltip></div><!$><!/>");function me(e){return(()=>{var t=b(Nn),n=t.firstChild,a=n.nextSibling,[r,i]=_(a.nextSibling);return m(n,()=>e.tooltip),m(t,()=>e.children,r,i),t})()}var Wn=S("<div class=quickmenu-wrapper><div class=quickmenu><!$><!/><!$><!/><!$><!/>"),Hn=S('<div class="quickmenu extended"><!$><!/><!$><!/><!$><!/>'),Kn=S("<div style=margin-block-start:1rem;display:flex;gap:0.5rem;align-items:center><!$><!/><em>Zuletzt gespeichert um: <!$><!/> Uhr"),zn=S("<div style=margin-block-start:1rem;display:flex;gap:0.5rem;align-items:center><!$><!/><em>Am Speichern..."),jn=S("<div style=margin-block-start:1rem;display:flex;gap:0.5rem;align-items:center><!$><!/><em>Speichern war nicht möglich!");function qn(e){return(()=>{var t=b(Wn),n=t.firstChild,a=n.firstChild,[r,i]=_(a.nextSibling),s=r.nextSibling,[o,u]=_(s.nextSibling),c=o.nextSibling,[h,v]=_(c.nextSibling);return m(n,l(me,{tooltip:"Zur Übersicht",get children(){return l(F,{get href(){return e.link("/")},class:"button-link",get children(){return l(Y,{get label(){return l(U,{icon:"backward"})}})}})}}),r,i),m(n,l(me,{tooltip:"Zum Helferplan",get children(){return l(F,{get href(){return e.link("/helfen")},class:"button-link",get children(){return l(Y,{get label(){return l(U,{icon:"hand-heart"})}})}})}}),o,u),m(n,l(me,{tooltip:"Zur Zusammenfassung",get children(){return l(F,{get href(){return e.link("/zusammenfassung")},class:"button-link",get children(){return l(Y,{get label(){return l(U,{icon:"list"})}})}})}}),h,v),t})()}function Zn(e){return[l(I,{type:"gray",get children(){var t=b(Hn),n=t.firstChild,[a,r]=_(n.nextSibling),i=a.nextSibling,[s,o]=_(i.nextSibling),u=s.nextSibling,[c,h]=_(u.nextSibling);return m(t,l(F,{get href(){return e.link("/")},class:"button-link",get children(){return l(G,{icon:"backward",label:"Zur Übersicht"})}}),a,r),m(t,l(F,{get href(){return e.link("/helfen")},class:"button-link",get children(){return l(G,{icon:"hand-heart",label:"Zum Helferplan"})}}),s,o),m(t,l(F,{get href(){return e.link("/zusammenfassung")},class:"button-link",get children(){return l(G,{icon:"list",label:"Zur Zusammenfassung"})}}),c,h),t}}),l(Vn,{get saveState(){return e.saveState},get lastSaved(){return e.lastSaved}})]}function Vn(e){return l(Be,{get children(){return[l(X,{get when(){return e.saveState==="IDLE"},get children(){var t=b(Kn),n=t.firstChild,[a,r]=_(n.nextSibling),i=a.nextSibling,s=i.firstChild,o=s.nextSibling,[u,c]=_(o.nextSibling);return u.nextSibling,m(t,l(U,{icon:"circle-check"}),a,r),m(i,()=>Pe(e.lastSaved),u,c),t}}),l(X,{get when(){return e.saveState==="SAVING"},get children(){var t=b(zn),n=t.firstChild,[a,r]=_(n.nextSibling);return a.nextSibling,m(t,l(U,{icon:"floppy-disk-circle-arrow-right"}),a,r),t}}),l(X,{get when(){return e.saveState==="ERROR"},get children(){var t=b(jn),n=t.firstChild,[a,r]=_(n.nextSibling);return a.nextSibling,m(t,l(U,{icon:"triangle-exclamation"}),a,r),t}})]}})}var Qn=S("<div class=page><!$><!/><div class=page-content><h2></h2><br><!$><!/></div><!$><!/>"),Jn=S("<div class=extended-wrapper style=margin-block-start:1rem>");function fe(e){return(()=>{var t=b(Qn),n=t.firstChild,[a,r]=_(n.nextSibling),i=a.nextSibling,s=i.firstChild,o=s.nextSibling,u=o.nextSibling,[c,h]=_(u.nextSibling),v=i.nextSibling,[$,f]=_(v.nextSibling);return m(t,(()=>{var p=be(()=>e.showQuickmenu!==!1);return()=>p()?l(qn,{get link(){return e.link},get saveState(){return e.saveState},get lastSaved(){return e.lastSaved}}):null})(),a,r),m(s,()=>e.title),m(i,()=>e.children,c,h),m(t,(()=>{var p=be(()=>e.showQuickmenu!==!1);return()=>p()?(()=>{var d=b(Jn);return m(d,l(Zn,{get link(){return e.link},get saveState(){return e.saveState},get lastSaved(){return e.lastSaved}})),d})():null})(),$,f),t})()}function Gn(e){const[t,n]=P({meta:{saveState:"IDLE",lastSaved:new Date},save:e.initState.data}),a=crypto.randomUUID(),[r,i]=K(!1);Me(()=>JSON.stringify(t.save),async()=>{if(!r()){i(!0);return}if(e.initState.status!=="published"){He("Diese Anmeldung wurde deaktiviert und kann nicht editiert werden.",{kind:"danger",uuid:a});return}const o=St(t.save);try{const u=await Lt(t.meta,o,e.secret);u.kind==="FAILURE"?console.error(u):n("meta","lastSaved",u.data)}catch(u){console.error(u),n("meta","saveState","ERROR")}});function s(o){return`${o}?secret=${e.secret}`}return l(Sn,{children:[{path:"/",component:()=>l(fe,{title:"Wo möchtest du starten?",link:s,get saveState(){return t.meta.saveState},get lastSaved(){return t.meta.lastSaved},get children(){return l(de,{link:s})}})},{path:"/runden",component:()=>l(de,{link:s})},{path:"/erstellen",component:()=>l(de,{link:s})},{path:"/helfen",component:()=>l(fe,{title:"Helfen",link:s,get saveState(){return t.meta.saveState},get lastSaved(){return t.meta.lastSaved},showQuickmenu:!0,get children(){return l(Ln,{})}})},{path:"/zusammenfassung",component:()=>l(fe,{title:"Zusammenfassung",link:s,get saveState(){return t.meta.saveState},get lastSaved(){return t.meta.lastSaved},showQuickmenu:!0,get children(){return l(On,{get store(){return t.save},get isEditable(){return e.initState.status==="published"}})}})}]})}function Yn(){return l(I,{get children(){return B.loading.registration}})}function ir(){const t=URL.parse(location.toString().replace("#/",""))?.searchParams.get("secret")??"no-secret-found",[n]=Me(()=>Et(t));return l($t,{fallback:a=>(console.error(a),l(I,{type:"danger",get children(){return B.error.general}})),get children(){return l(bt,{get fallback(){return l(Yn,{})},get children(){return l(Be,{get children(){return l(X,{get when(){return n()},children:a=>{const{kind:r,value:i}=tt(a());return r==="FAILURE"?i.reason==="SECRET_INVALID"?l(I,{type:"danger",get children(){return B.error.secretError}}):(console.error(i),l(I,{type:"danger",get children(){return B.error.ourMistake}})):l(Gn,{get initState(){return i.data},secret:t})}})}})}})}})}export{ir as MeineAnmeldungWrapper};
