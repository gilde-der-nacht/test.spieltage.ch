import{c as Xe,o as F,n as de,s as w,e as Oe,d as $e,u as mt,l as be,q as ie,f as mn,g as $n,h as Bt,i as re,B as R,j as ae,p as pt,N as Dt,r as fn,b as ce,k as Ue,I as zt,m as me,S as Et,t as Rt,v as bn,w as At,x as Sn,y as _n,z as vn}from"./utils.C4ysr8J5.js";import{g,a as $,i as o,c as l,t as m,r as Mt,h as X,j as jt,k as $t,l as Kt,e as se,b as V,n as ft,p as bt,q as kn,w as yn,x as xn,y as pn,z as Dn,A as K,S as p,B as En,C as Wt,D as nt,E as St,m as wt,G as Rn,H as An,I as qe,s as Ae,J as wn,M as le,F as G,f as Be,K as xe,L as rt,N as ze,O as Tn,u as Un,d as Ee,P as Cn,Q as Vt,R as We}from"./web.BGDrlDKA.js";import{c as fe,u as Pn}from"./store.XlVLhlw3.js";import{E as oe}from"./ExitSpa.B46xHIx7.js";import{T as Fn}from"./Textarea.Df3zblOd.js";const[Ne,Je]=fe([]);function Zt(e,t){if(t?.uuid!==void 0&&Ne.find(u=>u.uuid===t.uuid)!==void 0)return gt(t.uuid,e,t);const n=t?.uuid??crypto.randomUUID(),r=t?.duration??5e3,i=t?.kind??"gray",a=t?.dismissable??!0,s=setTimeout(()=>{Je(Ne.filter(u=>u.uuid!==n))},r);return Je(Ne.length,{uuid:n,kind:i,message:e,duration:r,dismissable:a,cleanup:()=>clearTimeout(s)}),n}function gt(e,t,n){const r=Ne.find(c=>c.uuid===e);if(r===void 0)return e;r.cleanup();const i=n.duration??r.duration,a=n.kind??r.kind,s=n?.dismissable??r.dismissable,u=setTimeout(()=>{Je(Ne.filter(c=>c.uuid!==e))},i);return Je(c=>c.uuid===e,{uuid:e,kind:a,message:t,duration:i,dismissable:s,cleanup:()=>clearTimeout(u)}),e}const Ln=Xe(["SATURDAY","SUNDAY"]);F({uuid:w().uuid(),day:Ln,from:de(),to:de()}).refine(e=>e.from<e.to,{message:"A TimeSlot can't end before it starts."});F({name:w(),label:w(),description:w()});const qt=Xe(["draft","published","archived"]);async function In(e){const t=new URL(Oe("/lst26/load"));t.searchParams.append("secret",e);const n=await fetch(t);if(!n.ok)return{kind:"FAILURE"};const r=await n.json();return typeof r=="object"&&r!==null?{kind:"SUCCESS",data:r}:(console.error("`last_save` not found on ",r),{kind:"FAILURE"})}async function Yn(e,t){try{const n=await fetch(Oe("/lst26/save"),{method:"POST",body:JSON.stringify({secret:t,save:e}),headers:{"Content-Type":"application/json"}});return n.ok?{kind:"SUCCESS",data:t}:(console.error(await n.text()),{kind:"FAILURE"})}catch(n){return console.error(n),{kind:"FAILURE"}}}async function Nn(){try{const e=new URL(Oe("/lst26/public")),t=await fetch(e,{headers:{"Content-Type":"application/json"}});return t.ok?{kind:"SUCCESS",data:await t.json()}:(console.error(await t.text()),{kind:"FAILURE"})}catch(e){return console.error(e),{kind:"FAILURE"}}}async function Hn(e){try{const t=new URL(Oe("/lst26/public/admin"));t.searchParams.append("secret",e);const n=await fetch(t,{headers:{"Content-Type":"application/json"}});return n.ok?{kind:"SUCCESS",data:await n.json()}:(console.error(await n.text()),{kind:"FAILURE"})}catch(t){return console.error(t),{kind:"FAILURE"}}}Xe(["SAVING","IDLE","ERROR"]);const On=$e(mt([be("admin"),be("erklaerbaer")])),Ge=Xe(["FRIDAY","SATURDAY","SUNDAY"]),Bn=F({from:de(),to:de()}),zn=Bn.extend({day:Ge});function Ke(e,t){const{startTime:n,endTime:r}=Mn(t);return!(n.hour>e.hour||n.hour===e.hour&&n.minute>e.minute||r.hour<e.hour||r.hour===e.hour&&r.minute<e.minute)}function Mn(e){const{startTime:t,endTime:n}=e;return{startTime:t.hour===0&&t.minute===0?ie.PlainTime.from({hour:23,minute:59}):t,endTime:n.hour===0&&n.minute===0?ie.PlainTime.from({hour:23,minute:59}):n}}function jn(e,t){const{startTime:n,endTime:r}=e,{startTime:i,endTime:a}=t;return Ke(n,t)||Ke(r,t)||Ke(i,e)||Ke(a,e)||n===i&&r===a}function Kn(e,t=!1){const{from:n,to:r}=e;if(n>r)return[];const i=r-n;return Jt(t?i+1:i,n)}function Jt(e,t=0){return[...Array(e)].map((n,r)=>r+t)}function Ce(e,t){const{minutes:n}=t??{minutes:!0};return n?`${e.hour}.${e.minute.toString().padStart(2,"0")}`:`${e.hour}`}function Wn(e,t){const n=e.minute+e.hour*60,r=t.minute+t.hour*60,i=Math.abs(r-n),a=i%60,s=Math.round((i-a)/60);return a===0?`${s} ${s===1?"Stunde":"Stunden"}`:s===0?`${a} ${a===1?"Minute":"Minuten"}`:`${s},${a} Stunden`}const Vn=F({name:w(),email:w(),mobile:w()}),Zn=F({kind:be("ERKLAERBAER"),uuid:w().uuid(),slot:zn}),qn=mt([F({kind:be("SELF"),helpEntryUuid:w().uuid(),uuid:w().uuid()}),F({kind:be("FRIEND"),helpEntryUuid:w().uuid(),name:w(),uuid:w().uuid()}),Zn]),Jn=F({uuid:w(),start:F({day:Ge,time:w()}),end:F({day:Ge,time:w()})}),Gn=F({uuid:w().uuid(),status:qt,title:w(),shortDescription:w(),longDescription:w(),slots:$e(Jn),playerMax:de(),tagNames:$e(w())}),Qn=F({}),Xn=F({version:be(7),contact:Vn,config:F({wantsUpdates:mn()}),helping:$e(qn),program:F({organising:$e(Gn),participating:$e(Qn)})}),er=F({kind:be("SUCCESS"),status:qt,roles:On,data:Xn});async function tr(e){if(e.length!==36&&e.length!==4)return{kind:"FAILURE",reason:"SECRET_INVALID"};const t=await In(e);if(t.kind==="FAILURE")return console.error("Unexpected error. Maybe network, maybe server error."),{kind:"FAILURE",reason:"GENERAL"};const n=er.safeParse(t.data);return n.success?{kind:"SUCCESS",data:n.data}:(console.error(n.error),{kind:"FAILURE",reason:"PARSE_ERROR"})}const it=crypto.randomUUID();async function nr(e,t,n){const[r,i]=fe(e);i("saveState","SAVING"),Zt("Am Speichern...",{uuid:it,dismissable:!1});const a=new Date;try{if((await Yn(t,n)).kind==="FAILURE")throw Error("")}catch(s){return i("saveState","ERROR"),console.error(s),gt(it,"Speichern war nicht möglich!",{kind:"danger",duration:1e4,dismissable:!0}),{kind:"FAILURE"}}return gt(it,`Zuletzt gespeichert um: ${Bt(a)} Uhr`,{kind:"success",dismissable:!0}),i("saveState","IDLE"),{kind:"SUCCESS",data:a}}const rr=$n(nr,1e3);var Tt=m("<br>"),ir=m("<strong>Donnerstag, 21. August 2025"),lr=m("<p>Deine Anmeldung wird geladen..."),ar=m("<p>Das Programm wird geladen..."),sr=m("<p>Leider ist ein unerwarteter Fehler passiert. Versuche deine Anmeldung erneut zu laden. Wiederholt sich dieser Fehler, bitte kontaktiere uns sobald als möglich über das <!$><!/>, da dies nicht passieren sollte."),ur=m("<p>Wir konnten leider keine Anmeldung finden. Wenn du bereits eine Anmeldung begonnen hast, solltest du den korrekten Link per E-Mail erhalten haben.<br><br> Falls du noch keine Anmeldung begonnen hast, kannst du <!$><!/> deine persönliche Anmeldung beginnen. <br><br>Für generelle Fragen oder Probleme, schreibe uns doch bitte über unser <!$><!/>."),or=m("<p>Wir konnten leider keine Spielrunde unter diesem Link finden.<br><br>Vermutlich liegt es an uns. Bitte kontaktiere uns sobald als möglich über das "),cr=m("<p>Leider ist ein unerwarteter Fehler passiert. Vermutlich liegt es an uns. Bitte kontaktiere uns sobald als möglich über das <!$><!/>."),dr=m("<p>Leider ist ein unerwarteter Fehler passiert beim Laden des Programmes. Vermutlich liegt es an uns. Bitte kontaktiere uns sobald als möglich über das <!$><!/>."),gr=m("<p>Leider ist ein unerwarteter Fehler passiert beim Laden von Daten. Vermutlich liegt es an uns. Bitte kontaktiere uns sobald als möglich über das <!$><!/>."),hr=m("<p>Leider ist das keine gültige Seite. Versuche deine Anmeldung erneut zu laden. Wiederholt sich dieser Fehler, bitte kontaktiere uns sobald als möglich über das <!$><!/>, da dies nicht passieren sollte."),mr=m("<p>Leider hast du keinen Zugriff auf diese Seite. Sollte dies ein Fehler sein, dann kontaktiere uns sobald als möglich über das <!$><!/>.");g(Tt),g(Tt),g(ir);const $r={registration:g(lr),program:g(ar)},fr={general:(()=>{var e=g(sr),t=e.firstChild,n=t.nextSibling,[r,i]=$(n.nextSibling);return r.nextSibling,o(e,l(oe,{href:"/kontakt",children:"Kontaktformular"}),r,i),e})(),secretError:(()=>{var e=g(ur),t=e.firstChild,n=t.nextSibling,r=n.nextSibling,i=r.nextSibling,a=i.nextSibling,[s,u]=$(a.nextSibling),c=s.nextSibling,d=c.nextSibling,h=d.nextSibling,S=h.nextSibling,v=S.nextSibling,[b,k]=$(v.nextSibling);return b.nextSibling,o(e,l(oe,{href:"/anmeldung",children:"hier"}),s,u),o(e,l(oe,{href:"/kontakt",children:"Kontaktformular"}),b,k),e})(),gameroundUuidError:g(or),ourMistake:(()=>{var e=g(cr),t=e.firstChild,n=t.nextSibling,[r,i]=$(n.nextSibling);return r.nextSibling,o(e,l(oe,{href:"/kontakt",children:"Kontaktformular"}),r,i),e})(),program:(()=>{var e=g(dr),t=e.firstChild,n=t.nextSibling,[r,i]=$(n.nextSibling);return r.nextSibling,o(e,l(oe,{href:"/kontakt",children:"Kontaktformular"}),r,i),e})(),help:(()=>{var e=g(gr),t=e.firstChild,n=t.nextSibling,[r,i]=$(n.nextSibling);return r.nextSibling,o(e,l(oe,{href:"/kontakt",children:"Kontaktformular"}),r,i),e})(),siteNotFound:(()=>{var e=g(hr),t=e.firstChild,n=t.nextSibling,[r,i]=$(n.nextSibling);return r.nextSibling,o(e,l(oe,{href:"/kontakt",children:"Kontaktformular"}),r,i),e})(),noAccess:(()=>{var e=g(mr),t=e.firstChild,n=t.nextSibling,[r,i]=$(n.nextSibling);return r.nextSibling,o(e,l(oe,{href:"/kontakt",children:"Kontaktformular"}),r,i),e})()},br="Neue Spielrunde erstellen",Sr="Neuer Eintrag erstellen",_r="Die Eingabe scheint keine gültige E-Mail-Adresse zu sein.",vr="Dies ist ein Pflichtfeld.",kr="Dieses Feld ist auf {} Zeichen limitiert.",yr={FRIDAY:"Freitag",SATURDAY:"Samstag",SUNDAY:"Sonntag"},xr={draft:"Entwurf",published:"Veröffentlicht",archived:"Gelöscht"},T={loading:$r,error:fr,createNewGameRound:br,createNewEntry:Sr,invalidEmail:_r,mandatoryField:vr,charLimitBy:kr,days:yr,publishingSteps:xr};function Gt(){let e=new Set;function t(i){return e.add(i),()=>e.delete(i)}let n=!1;function r(i,a){if(n)return!(n=!1);const s={to:i,options:a,defaultPrevented:!1,preventDefault:()=>s.defaultPrevented=!0};for(const u of e)u.listener({...s,from:u.location,retry:c=>{c&&(n=!0),u.navigate(i,{...a,resolve:!1})}});return!s.defaultPrevented}return{subscribe:t,confirm:r}}let ht;function _t(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),ht=window.history.state._depth}_t();function pr(e){return{...e,_depth:window.history.state&&window.history.state._depth}}function Dr(e,t){let n=!1;return()=>{const r=ht;_t();const i=r==null?null:ht-r;if(n){n=!1;return}i&&t(i)?(n=!0,window.history.go(-i)):e()}}const Er=/^(?:[a-z0-9]+:)?\/\//i,Rr=/^\/+|(\/)\/+$/g,Qt="http://sr";function Re(e,t=!1){const n=e.replace(Rr,"$1");return n?t||/^[?#]/.test(n)?n:"/"+n:""}function Ve(e,t,n){if(Er.test(t))return;const r=Re(e),i=n&&Re(n);let a="";return!i||t.startsWith("/")?a=r:i.toLowerCase().indexOf(r.toLowerCase())!==0?a=r+i:a=i,(a||"/")+Re(t,!a)}function Ar(e,t){if(e==null)throw new Error(t);return e}function wr(e,t){return Re(e).replace(/\/*(\*.*)?$/g,"")+Re(t)}function Xt(e){const t={};return e.searchParams.forEach((n,r)=>{r in t?Array.isArray(t[r])?t[r].push(n):t[r]=[t[r],n]:t[r]=n}),t}function Tr(e,t,n){const[r,i]=e.split("/*",2),a=r.split("/").filter(Boolean),s=a.length;return u=>{const c=u.split("/").filter(Boolean),d=c.length-s;if(d<0||d>0&&i===void 0&&!t)return null;const h={path:s?"":"/",params:{}},S=v=>n===void 0?void 0:n[v];for(let v=0;v<s;v++){const b=a[v],k=b[0]===":",f=k?c[v]:c[v].toLowerCase(),_=k?b.slice(1):b.toLowerCase();if(k&&lt(f,S(_)))h.params[_]=f;else if(k||!lt(f,_))return null;h.path+=`/${f}`}if(i){const v=d?c.slice(-d).join("/"):"";if(lt(v,S(i)))h.params[i]=v;else return null}return h}}function lt(e,t){const n=r=>r===e;return t===void 0?!0:typeof t=="string"?n(t):typeof t=="function"?t(e):Array.isArray(t)?t.some(n):t instanceof RegExp?t.test(e):!1}function Ur(e){const[t,n]=e.pattern.split("/*",2),r=t.split("/").filter(Boolean);return r.reduce((i,a)=>i+(a.startsWith(":")?2:3),r.length-(n===void 0?0:1))}function en(e){const t=new Map,n=jt();return new Proxy({},{get(r,i){return t.has(i)||Mt(n,()=>t.set(i,X(()=>e()[i]))),t.get(i)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())},has(r,i){return i in e()}})}function Cr(e,t){const n=new URLSearchParams(e);Object.entries(t).forEach(([i,a])=>{a==null||a===""||a instanceof Array&&!a.length?n.delete(i):a instanceof Array?(n.delete(i),a.forEach(s=>{n.append(i,String(s))})):n.set(i,String(a))});const r=n.toString();return r?`?${r}`:""}function tn(e){let t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];let n=e.slice(0,t.index),r=e.slice(t.index+t[0].length);const i=[n,n+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(r);)i.push(n+=t[1]),r=r.slice(t[0].length);return tn(r).reduce((a,s)=>[...a,...i.map(u=>u+s)],[])}const Pr=100,nn=Kt(),vt=Kt(),Me=()=>Ar($t(nn),"<A> and 'use' router primitives can be only used inside a Route."),Fr=()=>$t(vt)||Me().base,Lr=e=>{const t=Fr();return X(()=>t.resolvePath(e()))},Ir=e=>{const t=Me();return X(()=>{const n=e();return n!==void 0?t.renderPath(n):n})},kt=()=>Me().navigatorFactory(),rn=()=>Me().location,ln=()=>Me().params,Yr=()=>{const e=rn(),t=kt(),n=(r,i)=>{const a=bt(()=>Cr(e.search,r)+e.hash);t(a,{scroll:!1,resolve:!1,...i})};return[e.query,n]};function Nr(e,t=""){const{component:n,preload:r,load:i,children:a,info:s}=e,u=!a||Array.isArray(a)&&!a.length,c={key:e,component:n,preload:r||i,info:s};return an(e.path).reduce((d,h)=>{for(const S of tn(h)){const v=wr(t,S);let b=u?v:v.split("/*",1)[0];b=b.split("/").map(k=>k.startsWith(":")||k.startsWith("*")?k:encodeURIComponent(k)).join("/"),d.push({...c,originalPath:h,pattern:b,matcher:Tr(b,!u,e.matchFilters)})}return d},[])}function Hr(e,t=0){return{routes:e,score:Ur(e[e.length-1])*1e4-t,matcher(n){const r=[];for(let i=e.length-1;i>=0;i--){const a=e[i],s=a.matcher(n);if(!s)return null;r.unshift({...s,route:a})}return r}}}function an(e){return Array.isArray(e)?e:[e]}function sn(e,t="",n=[],r=[]){const i=an(e);for(let a=0,s=i.length;a<s;a++){const u=i[a];if(u&&typeof u=="object"){u.hasOwnProperty("path")||(u.path="");const c=Nr(u,t);for(const d of c){n.push(d);const h=Array.isArray(u.children)&&u.children.length===0;if(u.children&&!h)sn(u.children,d.pattern,n,r);else{const S=Hr([...n],r.length);r.push(S)}n.pop()}}}return n.length?r:r.sort((a,s)=>s.score-a.score)}function at(e,t){for(let n=0,r=e.length;n<r;n++){const i=e[n].matcher(t);if(i)return i}return[]}function Or(e,t,n){const r=new URL(Qt),i=X(h=>{const S=e();try{return new URL(S,r)}catch{return console.error(`Invalid path ${S}`),h}},r,{equals:(h,S)=>h.href===S.href}),a=X(()=>i().pathname),s=X(()=>i().search,!0),u=X(()=>i().hash),c=()=>"",d=ft(s,()=>Xt(i()));return{get pathname(){return a()},get search(){return s()},get hash(){return u()},get state(){return t()},get key(){return c()},query:n?n(d):en(d)}}let pe;function Br(){return pe}function zr(e,t,n,r={}){const{signal:[i,a],utils:s={}}=e,u=s.parsePath||(D=>D),c=s.renderPath||(D=>D),d=s.beforeLeave||Gt(),h=Ve("",r.base||"");if(h===void 0)throw new Error(`${h} is not a valid base path`);h&&!i().value&&a({value:h,replace:!0,scroll:!1});const[S,v]=se(!1);let b;const k=(D,E)=>{E.value===f()&&E.state===y()||(b===void 0&&v(!0),pe=D,b=E,yn(()=>{b===E&&(_(b.value),x(b.state),pn(),C[1](H=>H.filter(ee=>ee.pending)))}).finally(()=>{b===E&&xn(()=>{pe=void 0,D==="navigate"&&j(b),v(!1),b=void 0})}))},[f,_]=se(i().value),[y,x]=se(i().state),A=Or(f,y,s.queryWrapper),U=[],C=se([]),P=X(()=>typeof r.transformUrl=="function"?at(t(),r.transformUrl(A.pathname)):at(t(),A.pathname)),Y=()=>{const D=P(),E={};for(let H=0;H<D.length;H++)Object.assign(E,D[H].params);return E},W=s.paramsWrapper?s.paramsWrapper(Y,t):en(Y),J={pattern:h,path:()=>h,outlet:()=>null,resolvePath(D){return Ve(h,D)}};return V(ft(i,D=>k("native",D),{defer:!0})),{base:J,location:A,params:W,isRouting:S,renderPath:c,parsePath:u,navigatorFactory:O,matches:P,beforeLeave:d,preloadRoute:Z,singleFlight:r.singleFlight===void 0?!0:r.singleFlight,submissions:C};function Q(D,E,H){bt(()=>{if(typeof E=="number"){E&&(s.go?s.go(E):console.warn("Router integration does not support relative routing"));return}const ee=!E||E[0]==="?",{replace:ue,resolve:q,scroll:z,state:te}={replace:!1,resolve:!ee,scroll:!0,...H},L=q?D.resolvePath(E):Ve(ee&&A.pathname||"",E);if(L===void 0)throw new Error(`Path '${E}' is not a routable path`);if(U.length>=Pr)throw new Error("Too many redirects");const ne=f();(L!==ne||te!==y())&&(kn||d.confirm(L,H)&&(U.push({value:ne,replace:ue,scroll:z,state:y()}),k("navigate",{value:L,state:te})))})}function O(D){return D=D||$t(vt)||J,(E,H)=>Q(D,E,H)}function j(D){const E=U[0];E&&(a({...D,replace:E.replace,scroll:E.scroll}),U.length=0)}function Z(D,E){const H=at(t(),D.pathname),ee=pe;pe="preload";for(let ue in H){const{route:q,params:z}=H[ue];q.component&&q.component.preload&&q.component.preload();const{preload:te}=q;E&&te&&Mt(n(),()=>te({params:z,location:{pathname:D.pathname,search:D.search,hash:D.hash,query:Xt(D),state:null,key:""},intent:"preload"}))}pe=ee}}function Mr(e,t,n,r){const{base:i,location:a,params:s}=e,{pattern:u,component:c,preload:d}=r().route,h=X(()=>r().path);c&&c.preload&&c.preload();const S=d?d({params:s,location:a,intent:pe||"initial"}):void 0;return{parent:t,pattern:u,path:h,outlet:()=>c?l(c,{params:s,location:a,data:S,get children(){return n()}}):n(),resolvePath(b){return Ve(i.path(),b,h())}}}const jr=e=>t=>{const{base:n}=t,r=Dn(()=>t.children),i=X(()=>sn(r(),t.base||""));let a;const s=zr(e,i,()=>a,{base:n,singleFlight:t.singleFlight,transformUrl:t.transformUrl});return e.create&&e.create(s),l(nn.Provider,{value:s,get children(){return l(Kr,{routerState:s,get root(){return t.root},get preload(){return t.rootPreload||t.rootLoad},get children(){return[K(()=>(a=jt())&&null),l(Wr,{routerState:s,get branches(){return i()}})]}})}})};function Kr(e){const t=e.routerState.location,n=e.routerState.params,r=X(()=>e.preload&&bt(()=>{e.preload({params:n,location:t,intent:Br()||"initial"})}));return l(p,{get when(){return e.root},keyed:!0,get fallback(){return e.children},children:i=>l(i,{params:n,location:t,get data(){return r()},get children(){return e.children}})})}function Wr(e){const t=[];let n;const r=X(ft(e.routerState.matches,(i,a,s)=>{let u=a&&i.length===a.length;const c=[];for(let d=0,h=i.length;d<h;d++){const S=a&&a[d],v=i[d];s&&S&&v.route.key===S.route.key?c[d]=s[d]:(u=!1,t[d]&&t[d](),En(b=>{t[d]=b,c[d]=Mr(e.routerState,c[d-1]||e.routerState.base,Ut(()=>r()[d+1]),()=>{const k=e.routerState.matches();return k[d]??k[0]})}))}return t.splice(i.length).forEach(d=>d()),s&&u?s:(n=c[0],c)}));return Ut(()=>r()&&n)()}const Ut=e=>()=>l(p,{get when(){return e()},keyed:!0,children:t=>l(vt.Provider,{value:t,get children(){return t.outlet()}})});function Vr([e,t],n,r){return[e,r?i=>t(r(i)):t]}function Zr(e){let t=!1;const n=i=>typeof i=="string"?{value:i}:i,r=Vr(se(n(e.get()),{equals:(i,a)=>i.value===a.value&&i.state===a.state}),void 0,i=>(!t&&e.set(i),nt.registry&&!nt.done&&(nt.done=!0),i));return e.init&&Wt(e.init((i=e.get())=>{t=!0,r[1](n(i)),t=!1})),jr({signal:r,create:e.create,utils:e.utils})}function qr(e,t,n){return e.addEventListener(t,n),()=>e.removeEventListener(t,n)}function Jr(e,t){const n=e&&document.getElementById(e);n?n.scrollIntoView():t&&window.scrollTo(0,0)}const Gr=new Map;function Qr(e=!0,t=!1,n="/_server",r){return i=>{const a=i.base.path(),s=i.navigatorFactory(i.base);let u,c;function d(f){return f.namespaceURI==="http://www.w3.org/2000/svg"}function h(f){if(f.defaultPrevented||f.button!==0||f.metaKey||f.altKey||f.ctrlKey||f.shiftKey)return;const _=f.composedPath().find(P=>P instanceof Node&&P.nodeName.toUpperCase()==="A");if(!_||t&&!_.hasAttribute("link"))return;const y=d(_),x=y?_.href.baseVal:_.href;if((y?_.target.baseVal:_.target)||!x&&!_.hasAttribute("state"))return;const U=(_.getAttribute("rel")||"").split(/\s+/);if(_.hasAttribute("download")||U&&U.includes("external"))return;const C=y?new URL(x,document.baseURI):new URL(x);if(!(C.origin!==window.location.origin||a&&C.pathname&&!C.pathname.toLowerCase().startsWith(a.toLowerCase())))return[_,C]}function S(f){const _=h(f);if(!_)return;const[y,x]=_,A=i.parsePath(x.pathname+x.search+x.hash),U=y.getAttribute("state");f.preventDefault(),s(A,{resolve:!1,replace:y.hasAttribute("replace"),scroll:!y.hasAttribute("noscroll"),state:U?JSON.parse(U):void 0})}function v(f){const _=h(f);if(!_)return;const[y,x]=_;i.preloadRoute(x,y.getAttribute("preload")!=="false")}function b(f){clearTimeout(u);const _=h(f);if(!_)return c=null;const[y,x]=_;c!==y&&(u=setTimeout(()=>{i.preloadRoute(x,y.getAttribute("preload")!=="false"),c=y},20))}function k(f){if(f.defaultPrevented)return;let _=f.submitter&&f.submitter.hasAttribute("formaction")?f.submitter.getAttribute("formaction"):f.target.getAttribute("action");if(!_)return;if(!_.startsWith("https://action/")){const x=new URL(_,Qt);if(_=i.parsePath(x.pathname+x.search),!_.startsWith(n))return}if(f.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const y=Gr.get(_);if(y){f.preventDefault();const x=new FormData(f.target,f.submitter);y.call({r:i,f:f.target},f.target.enctype==="multipart/form-data"?x:new URLSearchParams(x))}}St(["click","submit"]),document.addEventListener("click",S),e&&(document.addEventListener("mousemove",b,{passive:!0}),document.addEventListener("focusin",v,{passive:!0}),document.addEventListener("touchstart",v,{passive:!0})),document.addEventListener("submit",k),Wt(()=>{document.removeEventListener("click",S),e&&(document.removeEventListener("mousemove",b),document.removeEventListener("focusin",v),document.removeEventListener("touchstart",v)),document.removeEventListener("submit",k)})}}function Xr(e){const t=e.replace(/^.*?#/,"");if(!t.startsWith("/")){const[,n="/"]=window.location.hash.split("#",2);return`${n}#${t}`}return t}function ei(e){const t=()=>window.location.hash.slice(1),n=Gt();return Zr({get:t,set({value:r,replace:i,scroll:a,state:s}){i?window.history.replaceState(pr(s),"","#"+r):window.history.pushState(s,"","#"+r);const u=r.indexOf("#"),c=u>=0?r.slice(u+1):"";Jr(c,a),_t()},init:r=>qr(window,"hashchange",Dr(r,i=>!n.confirm(i&&i<0?i:t()))),create:Qr(e.preload,e.explicitLinks,e.actionBase),utils:{go:r=>window.history.go(r),renderPath:r=>`#${r}`,parsePath:Xr,beforeLeave:n}})(e)}var ti=m("<a>");function M(e){e=wt({inactiveClass:"inactive",activeClass:"active"},e);const[,t]=Rn(e,["href","state","class","activeClass","inactiveClass","end"]),n=Lr(()=>e.href),r=Ir(n),i=rn(),a=X(()=>{const s=n();if(s===void 0)return[!1,!1];const u=Re(s.split(/[?#]/,1)[0]).toLowerCase(),c=decodeURI(Re(i.pathname).toLowerCase());return[e.end?u===c:c.startsWith(u+"/")||c===u,u===c]});return(()=>{var s=g(ti);return An(s,wt(t,{get href(){return r()||e.href},get state(){return JSON.stringify(e.state)},get classList(){return{...e.class&&{[e.class]:!0},[e.inactiveClass]:!a()[0],[e.activeClass]:a()[0],...t.classList}},link:"",get"aria-current"(){return a()[1]?"page":void 0}}),!1,!1),qe(),s})()}var ni=m("<div class=grid><!$><!/><div>"),ri=m("<div class=boxLink>");function ve(e){const t=e.type??"special";return(()=>{var n=g(ri);return o(n,l(R,{type:t,get onClick(){return e.onClick},get children(){var r=g(ni),i=r.firstChild,[a,s]=$(i.nextSibling),u=a.nextSibling;return o(r,l(re,{get icon(){return e.icon}}),a,s),o(u,()=>e.children),r}})),n})()}var ii=m("<h3>Programm ansehen"),li=m("<p>Melde dich (und deine Freunde) für diverse Spielrunden an."),Ct=m("<br>"),ai=m("<h3>Programmpunkte erstellen"),si=m("<p>Erstelle und editiere Programmpunkte."),ui=m("<h3>Helfen"),oi=m("<p>Beim Kiosk und der Essensausgabe können wir immer ein paar helfende Hände gebrauchen."),ci=m("<h3>Zusammenfassung"),di=m("<p>Erhalte einen Überblick über dein gesamtes Programm."),gi=m("<div><!$><!/><!$><!/><br><!$><!/>");function hi(e){return(()=>{var t=g(gi),n=t.firstChild,[r,i]=$(n.nextSibling),a=r.nextSibling,[s,u]=$(a.nextSibling),c=s.nextSibling,d=c.nextSibling,[h,S]=$(d.nextSibling);return o(t,l(p,{get when(){return e.roles.includes("admin")},get children(){return[l(M,{get href(){return e.link("/programm")},class:"button-link",get children(){return l(ve,{icon:"dice-d20",get children(){return[g(ii),g(li)]}})}}),g(Ct),l(M,{get href(){return e.link("/erstellen")},class:"button-link",get children(){return l(ve,{icon:"grid-2-plus",get children(){return[g(ai),g(si)]}})}}),g(Ct)]}}),r,i),o(t,l(M,{get href(){return e.link("/helfen")},class:"button-link",get children(){return l(ve,{icon:"hand-heart",get children(){return[g(ui),g(oi)]}})}}),s,u),o(t,l(M,{get href(){return e.link("/zusammenfassung")},class:"button-link",get children(){return l(ve,{icon:"list",get children(){return[g(ci),g(di)]}})}}),h,S),t})()}var mi=m("<a class=header-anchor>");function $i(e){return encodeURIComponent(e.replaceAll(/\s/g,"-").replaceAll("&","").replaceAll(/-{1,}/g,"-").toLocaleLowerCase())}function je(e){const t=$i("title"in e?e.id??e.title:e.id);return l(wn,{get component(){return`h${e.level}`},id:t,get children(){var n=g(mi);return Ae(n,"href",`#${t}`),o(n,(()=>{var r=K(()=>"title"in e);return()=>r()?e.title:e.children})()),n}})}var fi=m("<div style=display:grid;gap:1rem><!$><!/><!$><!/><!$><!/>"),bi=m("<div><div style=margin-block-end:1.5rem></div><!$><!/>"),Si=m("<p>Konflikte gefunden! Bitte stelle sicher, dass du nicht zeitlich überlappende Spielrunden eingetragen hast:"),_i=m('<div style="display:grid;grid-template-columns:1fr max-content 1fr;gap:1rem;margin-block:0.5rem"><!$><!/><span style=color:var(--clr-warning-10);align-self:center;font-size:2rem></span><!$><!/>'),vi=m("<div><!$><!/><div class=entries></div><div class=after-hour><div class=annotation>"),ki=m("<div><div class=annotation></div><div class=background>"),yi=m("<div class=entry>");function un(e){const t=e.exclude??[];return(()=>{var n=g(fi),r=n.firstChild,[i,a]=$(r.nextSibling),s=i.nextSibling,[u,c]=$(s.nextSibling),d=u.nextSibling,[h,S]=$(d.nextSibling);return o(n,l(p,{get when(){return K(()=>!t.includes("FRIDAY")&&e.openingHours.FRIDAY.open.from!==e.openingHours.FRIDAY.open.to)()&&(e.dayFilter===null||e.dayFilter==="FRIDAY")},get children(){return l(st,{get programEntries(){return e.programEntries.FRIDAY},get openingHoursOfDay(){return e.openingHours.FRIDAY},day:"FRIDAY",get conflictsAllowed(){return e.conflictsAllowed??!1},get columns(){return e.columns}})}}),i,a),o(n,l(p,{get when(){return K(()=>!t.includes("SATURDAY"))()&&e.dayFilter===null||e.dayFilter==="SATURDAY"},get children(){return l(st,{get programEntries(){return e.programEntries.SATURDAY},get openingHoursOfDay(){return e.openingHours.SATURDAY},day:"SATURDAY",get conflictsAllowed(){return e.conflictsAllowed??!1},get columns(){return e.columns}})}}),u,c),o(n,l(p,{get when(){return K(()=>!t.includes("SUNDAY"))()&&e.dayFilter===null||e.dayFilter==="SUNDAY"},get children(){return l(st,{get programEntries(){return e.programEntries.SUNDAY},get openingHoursOfDay(){return e.openingHours.SUNDAY},day:"SUNDAY",get conflictsAllowed(){return e.conflictsAllowed??!1},get columns(){return e.columns}})}}),h,S),n})()}function st(e){const t=e.conflictsAllowed?[]:pi(e.programEntries);return(()=>{var n=g(bi),r=n.firstChild,i=r.nextSibling,[a,s]=$(i.nextSibling);return o(r,l(je,{level:4,get title(){return T.days[e.day]}})),o(n,l(Be,{get fallback(){return[l(R,{type:"danger",get children(){return g(Si)}}),l(G,{each:t,children:([u,c])=>(()=>{var d=g(_i),h=d.firstChild,[S,v]=$(h.nextSibling),b=S.nextSibling,k=b.nextSibling,[f,_]=$(k.nextSibling);return o(d,()=>u.component(),S,v),o(b,l(re,{icon:"triangle-exclamation"})),o(d,()=>c.component(),f,_),d})()})]},get children(){return l(le,{get when(){return t.length===0},get children(){return l(xi,{get programEntries(){return e.programEntries},get openingHoursOfDay(){return e.openingHoursOfDay},get day(){return e.day},get conflictsAllowed(){return e.conflictsAllowed},get columns(){return e.columns}})}})}}),a,s),n})()}function xi(e){const t=Kn(e.openingHoursOfDay.open),n=e.openingHoursOfDay.breaks.flatMap(({from:s,to:u})=>{ae(s<u,`Break is not valid, as from '${s}' is not smaller than to '${u}'`);const c=[s];let d=u-s;for(;d>1;)c.push(s+--d);return c}),r=(t[0]??0)-1,i=t.at(-1)??0,a=()=>{const s=["timetable"];return e.conflictsAllowed&&s.push(e.columns===2?"two-columns":e.columns===4?"four-columns":""),s.join(" ")};return(()=>{var s=g(vi),u=s.firstChild,[c,d]=$(u.nextSibling),h=c.nextSibling,S=h.nextSibling,v=S.firstChild;return o(s,l(G,{each:t,children:b=>{const k=n.includes(b);return(()=>{var f=g(ki),_=f.firstChild;return xe(f,`hour ${k?"break":""}`),o(_,b),V(y=>rt(f,Pt({startTime:ie.PlainTime.from({hour:b,minute:0}),endTime:ie.PlainTime.from({hour:b,minute:0})},r,e.day,e.openingHoursOfDay),y)),f})()}}),c,d),o(h,l(G,{get each(){return e.programEntries},children:b=>(()=>{var k=g(yi);return o(k,()=>b.component()),V(f=>rt(k,Pt(b.range,r,e.day,e.openingHoursOfDay),f)),k})()})),o(v,i+1),V(b=>{var k=a(),f=`grid-row: 1 / ${i-r+1};`;return k!==b.e&&xe(s,b.e=k),b.t=rt(h,f,b.t),b},{e:void 0,t:void 0}),s})()}function Pt(e,t,n,r){const{startTime:i,endTime:a}=e,s=i.hour-t,u=a.hour===0?24-t:a.hour-t,c=r.open.to;return ae(s>0,`[${JSON.stringify(e)}] Entry can't start at '${i.hour}'.`),ae(u>0,`[${JSON.stringify(e)}] Entry can't end at '${a.hour}'.`),ae(a.hour<=c,`[${JSON.stringify(e)}] Entry can't end at '${a.hour}'. Closing hour set to '${c}' on day '${n}'`),`grid-row: ${s} / ${u};`}function pi(e){const t=[];return e.forEach((n,r)=>{e.slice(r+1).forEach(i=>{jn(n.range,i.range)&&t.push([n,i])})}),t}const ke=ie.PlainDate.from({year:2026,month:3,day:13}),I=ie.PlainDate.from({year:2026,month:3,day:14}),B=ie.PlainDate.from({year:2026,month:3,day:15}),Qe={FRIDAY:ke,SATURDAY:I,SUNDAY:B};function we(e){const{year:t,month:n,day:r}=e;return ke.year===t&&ke.month===n&&ke.day===r?"FRIDAY":I.year===t&&I.month===n&&I.day===r?"SATURDAY":B.year===t&&B.month===n&&B.day===r?"SUNDAY":null}const on={FRIDAY:{open:{from:0,to:0},breaks:[]},SATURDAY:{open:{from:10,to:24},breaks:[]},SUNDAY:{open:{from:10,to:18},breaks:[]}},De={kitchen:{title:"Küche",description:"Mahlzeit vorbereiten, unterstützen beim Kochen und Abwaschen."},service:{title:"Essensausgabe",description:""},cleaning:{title:"Reinigung",description:"Unterstützen beim Küche aufräumen und putzen."},kiosk:{title:"Kiosk",description:"Am Kiosk Getränke (inkl. Kaffee) und Snacks verkaufen."},flohmarkt:{title:"Flohmarkt",description:"Hilf uns beim Auf- oder Abbau des Flohmarkt und der Annahme oder Abgabe von Spielen."},checkout:{title:"Kiosk oder Flohmarkt",description:"Am Kiosk Getränke und Snacks verkaufen oder am Flohmarkt die Kasse bedienen."},setup:{title:"Menü-Vorbereitung / Aufbau",description:"Hilf uns beim Zubereiten der Menüs und Aufstellen von Tischen, Stühle und der Bibliothek."},breakdown:{title:"Abbau",description:"Hilf uns beim Zusammenräumen von Tischen, Stühle, der Bibliothek und dem Flohmarkt."}},Te=[{uuid:"eb443040-0674-429c-a3ad-48634a323b76",count:4,kind:"setup",dateTime:{startDate:ke.toPlainDateTime({hour:16,minute:0}),endDate:ke.toPlainDateTime({hour:21,minute:0})}},{uuid:"91699a72-78d0-4dc9-bfe1-ece55b15db7d",count:1,kind:"flohmarkt",dateTime:{startDate:ke.toPlainDateTime({hour:19,minute:0}),endDate:ke.toPlainDateTime({hour:22,minute:0})}},{uuid:"9ebca7e9-f44a-4cc9-8961-73539f17d5d6",count:2,kind:"checkout",dateTime:{startDate:I.toPlainDateTime({hour:10,minute:0}),endDate:I.toPlainDateTime({hour:12,minute:0})}},{uuid:"6303bd52-cd10-4dd0-b760-b71ab971ad3b",count:4,kind:"flohmarkt",dateTime:{startDate:I.toPlainDateTime({hour:9,minute:0}),endDate:I.toPlainDateTime({hour:11,minute:0})}},{uuid:"804c379d-c747-4d7c-9f0c-a53f8548216e",count:1,kind:"kitchen",dateTime:{startDate:I.toPlainDateTime({hour:11,minute:0}),endDate:I.toPlainDateTime({hour:13,minute:0})}},{uuid:"bfec6f59-14eb-45b9-a21c-d33ee2205b64",count:2,kind:"checkout",dateTime:{startDate:I.toPlainDateTime({hour:12,minute:0}),endDate:I.toPlainDateTime({hour:14,minute:0})}},{uuid:"8db23dfd-616e-4f1d-9a07-deb6e519d35a",count:1,kind:"kitchen",dateTime:{startDate:I.toPlainDateTime({hour:13,minute:0}),endDate:I.toPlainDateTime({hour:15,minute:0})}},{uuid:"477a1c27-b660-4221-9be0-de34de910f4b",count:2,kind:"checkout",dateTime:{startDate:I.toPlainDateTime({hour:14,minute:0}),endDate:I.toPlainDateTime({hour:16,minute:0})}},{uuid:"490c799f-ced5-461e-a483-ad6a90df221b",count:2,kind:"checkout",dateTime:{startDate:I.toPlainDateTime({hour:16,minute:0}),endDate:I.toPlainDateTime({hour:18,minute:0})}},{uuid:"c9f79536-225a-41ee-93e6-ef1741b511f7",count:1,kind:"kitchen",dateTime:{startDate:I.toPlainDateTime({hour:17,minute:0}),endDate:I.toPlainDateTime({hour:19,minute:0})}},{uuid:"c6c3f0f7-04c6-4819-95e6-aa8476e4392c",count:2,kind:"checkout",dateTime:{startDate:I.toPlainDateTime({hour:18,minute:0}),endDate:I.toPlainDateTime({hour:20,minute:0})}},{uuid:"9748b1e6-1712-449b-8dda-eb44f172071e",count:1,kind:"kitchen",dateTime:{startDate:I.toPlainDateTime({hour:19,minute:0}),endDate:I.toPlainDateTime({hour:21,minute:0})}},{uuid:"e1a9b252-628c-4c01-b8e1-e1964b51e646",count:2,kind:"checkout",dateTime:{startDate:B.toPlainDateTime({hour:10,minute:0}),endDate:B.toPlainDateTime({hour:12,minute:0})}},{uuid:"873a1308-57bc-46bc-bdfc-a82213364c77",count:1,kind:"kitchen",dateTime:{startDate:B.toPlainDateTime({hour:11,minute:0}),endDate:B.toPlainDateTime({hour:13,minute:0})}},{uuid:"2e9864a9-0208-4e56-b232-dcd258e31545",count:2,kind:"checkout",dateTime:{startDate:B.toPlainDateTime({hour:12,minute:0}),endDate:B.toPlainDateTime({hour:14,minute:0})}},{uuid:"caef5fea-8458-4b65-b699-9c4e5ee6589d",count:1,kind:"kitchen",dateTime:{startDate:B.toPlainDateTime({hour:13,minute:0}),endDate:B.toPlainDateTime({hour:15,minute:0})}},{uuid:"0da24180-0269-4206-adf7-4b9faeefa091",count:2,kind:"checkout",dateTime:{startDate:B.toPlainDateTime({hour:14,minute:0}),endDate:B.toPlainDateTime({hour:16,minute:0})}},{uuid:"40eaef18-d6a0-46e8-b3e5-a98be09cef57",count:2,kind:"checkout",dateTime:{startDate:B.toPlainDateTime({hour:16,minute:0}),endDate:B.toPlainDateTime({hour:18,minute:0})}},{uuid:"b9da7047-c359-49fa-b558-53207ac5255a",count:2,kind:"flohmarkt",dateTime:{startDate:B.toPlainDateTime({hour:17,minute:0}),endDate:B.toPlainDateTime({hour:19,minute:0})}},{uuid:"c0e1d54c-0832-4147-9054-082208dab2f2",count:4,kind:"breakdown",dateTime:{startDate:B.toPlainDateTime({hour:17,minute:0}),endDate:B.toPlainDateTime({hour:20,minute:0})}}],Di=Te.map(e=>e.uuid),Ft=Object.entries(Object.groupBy(Di,e=>e)).reduce((e,[t,n])=>[...e,{uuid:t,count:n?.length??0}],[]).filter(({count:e})=>e!==1);if(Ft.length>0)throw Error(`duplicate uuids found:  ${Ft.map(({uuid:e})=>e).join(", ")}`);function Ei(e){return Te.find(t=>t.uuid===e)??null}const Ze={FRIDAY:{open:{from:16,to:22},breaks:[{from:16,to:22}]},SATURDAY:{open:{from:9,to:24},breaks:[{from:9,to:10}]},SUNDAY:{open:{from:10,to:20},breaks:[{from:18,to:20}]}};var Ri=m("<span>");function He(e){const t=()=>{const n=["chip"];return n.push(e.kind??"gray"),e.inverted&&n.push("inverted"),e.size==="small"&&n.push("small"),n.join(" ")};return(()=>{var n=g(Ri);return o(n,()=>e.children),V(r=>{var i=t(),a=e.title;return i!==r.e&&xe(n,r.e=i),a!==r.t&&Ae(n,"title",r.t=a),r},{e:void 0,t:void 0}),n})()}const Ai=F({start:w(),end:w()}).transform((e,t)=>{const{start:n,end:r}=e,i=pt(n),a=pt(r);return i.kind==="ERROR"?(t.addIssue({code:"custom",message:i.message}),Dt):a.kind==="ERROR"?(t.addIssue({code:"custom",message:a.message}),Dt):{startDate:ie.PlainDateTime.from({year:i.value.year,month:i.value.month,day:i.value.day,hour:i.value.hour,minute:i.value.minute}),endDate:ie.PlainDateTime.from({year:a.value.year,month:a.value.month,day:a.value.day,hour:a.value.hour,minute:a.value.minute})}}),wi=F({uuid:w(),title:w(),organizer:w(),slot:Ai,shortDescription:w(),longDescription:w(),playerMax:de(),tagNames:$e(w())}),Ti=fn(w(),de()),Ui=F({programEntries:$e(wi),reservations:Ti});async function Ci(){const e=await Nn();if(e.kind==="FAILURE")return console.error("Unexpected error. Maybe network, maybe server error."),{kind:"FAILURE"};const t=Ui.safeParse(e.data);return t.success?{kind:"SUCCESS",data:t.data}:{kind:"FAILURE"}}var Pi=m("<div style=display:flex;flex-wrap:wrap;gap:1rem;justify-content:space-between><h5 style=margin:0>Filter"),Fi=m("<div style=display:flex;flex-wrap:wrap;gap:0.5rem><!$><!/><!$><!/><!$><!/><!$><!/>");function cn(e){const t=e.exclude??[];return l(R,{get children(){return[g(Pi),(()=>{var n=g(Fi),r=n.firstChild,[i,a]=$(r.nextSibling),s=i.nextSibling,[u,c]=$(s.nextSibling),d=u.nextSibling,[h,S]=$(d.nextSibling),v=h.nextSibling,[b,k]=$(v.nextSibling);return o(n,l(ce,{label:"Alle Tage",get kind(){return e.dayFilter()===null?"success":"gray"},onClick:()=>e.setDayFilter(null)}),i,a),o(n,l(p,{get when(){return!t.includes("FRIDAY")},get children(){return l(ce,{label:"Freitag",get kind(){return e.dayFilter()==="FRIDAY"?"success":"gray"},onClick:()=>e.setDayFilter("FRIDAY")})}}),u,c),o(n,l(p,{get when(){return!t.includes("SATURDAY")},get children(){return l(ce,{label:"Samstag",get kind(){return e.dayFilter()==="SATURDAY"?"success":"gray"},onClick:()=>e.setDayFilter("SATURDAY")})}}),h,S),o(n,l(p,{get when(){return!t.includes("SUNDAY")},get children(){return l(ce,{label:"Sonntag",get kind(){return e.dayFilter()==="SUNDAY"?"success":"gray"},onClick:()=>e.setDayFilter("SUNDAY")})}}),b,k),n})()]}})}var Li=m("<p>Beim Kiosk und der Essensausgabe können wir immer ein paar helfende Hände gebrauchen. Wenn du bereit bist zu helfen, klicke in der jeweiligen Stunde auf das Handsymbol <!$><!/>."),Ie=m("<br>"),Ii=m("<h4>Zur Anmeldung für Erklärbären"),Yi=m("<div class=dynamic-columns><p>Eines der Hauptziele der Luzerner Spieltage ist es, dass die Besucher/-innen noch nicht gespielte Spiele ausprobieren können. Dazu unterstützen uns jedes Jahr Freiwillige und erklären die ihnen bekannten Spiele aus der Spiele-Bibliothek. Diese Erklärbären sind durch ihr rotes T-Shirt erkennbar.</p><!$><!/>"),Ni=m("<p>Plan konnte nicht geladen werden."),Hi=m("<div><!$><!/><!$><!/><h5></h5><p class=duration><em><!$><!/> / <!$><!/>"),Oi=m("<div><!$><!/><!$><!/><h5></h5><p class=duration><span><!$><!/>-<!$><!/>&nbsp;Uhr | </span><em><!$><!/>&nbsp;/&nbsp;<!$><!/>");function Bi(e){const[t,n]=se(null);return[(()=>{var r=g(Li),i=r.firstChild,a=i.nextSibling,[s,u]=$(a.nextSibling);return s.nextSibling,o(r,l(re,{icon:"hand-heart"}),s,u),r})(),g(Ie),l(R,{type:"special",get children(){return["Melde bitte 15 Minuten vor Schichtbeginn bei einem OK-Mitglied, beim"," ",l(oe,{href:"/adresse",children:"Eingang zum Würzenbachsaal."})]}}),g(Ie),l(je,{level:3,title:"Erklärbären"}),g(Ie),(()=>{var r=g(Yi),i=r.firstChild,a=i.nextSibling,[s,u]=$(a.nextSibling);return o(r,l(M,{get href(){return e.link("/erklaerbaer")},class:"button-link",style:"margin-block-end: 1rem; padding: 0;",get children(){return l(ve,{icon:"forward",type:"success",get children(){return g(Ii)}})}}),s,u),r})(),g(Ie),l(cn,{dayFilter:t,setDayFilter:n}),g(Ie),l(ze,{get fallback(){return l(R,{get children(){return T.loading.program}})},get children(){return l(p,{get when(){return e.publicResource()},get fallback(){return l(R,{type:"danger",get children(){return T.error.help}})},children:r=>l(p,{get when(){return r().kind==="SUCCESS"},get fallback(){return l(R,{type:"danger",get children(){return g(Ni)}})},get children(){return l(zi,{get myHelpReservations(){return e.reservations$.get()},get allReservations(){return r().data.reservations},get isEditable(){return e.isEditable},get link(){return e.link},get dayFilter(){return t()}})}})})}})]}function zi(e){const t=()=>Object.keys(e.allReservations),n=()=>({FRIDAY:ut({day:"FRIDAY",entries:Te,alreadyReservedUuids:t(),myReservations:e.myHelpReservations,link:e.link}),SATURDAY:ut({day:"SATURDAY",entries:Te,alreadyReservedUuids:t(),myReservations:e.myHelpReservations,link:e.link}),SUNDAY:ut({day:"SUNDAY",entries:Te,alreadyReservedUuids:t(),myReservations:e.myHelpReservations,link:e.link})});return l(un,{get programEntries(){return n()},openingHours:Ze,conflictsAllowed:!0,columns:4,get dayFilter(){return e.dayFilter}})}function ut(e){const t=kt(),n=[],r=Mi(e.alreadyReservedUuids);return Object.groupBy(e.entries,a=>we(a.dateTime.startDate)??"empty")[e.day]?.forEach(a=>{const s=()=>a.count-(r[a.uuid]??0),u=()=>e.myReservations.filter(h=>"helpEntryUuid"in h&&h.helpEntryUuid===a.uuid).length>0,c=()=>{const h=["box-simple","timeview-entry"];return u()&&h.push("success"),h.join(" ")},d={startTime:ie.PlainTime.from({hour:a.dateTime.startDate.hour,minute:a.dateTime.startDate.minute}),endTime:a.dateTime.startDate.day!==a.dateTime.endDate.day?ie.PlainTime.from({hour:a.dateTime.endDate.hour,minute:a.dateTime.endDate.minute}):ie.PlainTime.from({hour:a.dateTime.endDate.hour,minute:a.dateTime.endDate.minute})};s()===0?n.push({range:d,component:()=>(()=>{var h=g(Hi),S=h.firstChild,[v,b]=$(S.nextSibling),k=v.nextSibling,[f,_]=$(k.nextSibling),y=f.nextSibling,x=y.nextSibling,A=x.firstChild,U=A.firstChild,[C,P]=$(U.nextSibling),Y=C.nextSibling,W=Y.nextSibling,[J,Q]=$(W.nextSibling);return h.$$click=()=>t(e.link(`/helfen/${a.uuid}`)),o(h,l(He,{title:"Helfer:innen gesucht",get inverted(){return u()},size:"small",children:"HL"}),v,b),o(h,l(p,{get when(){return u()},get children(){return l(Ue,{icon:"hand-heart",kind:"ghost",onClick:()=>t(e.link(`/helfen/${a.uuid}`)),title:"Helfen"})}}),f,_),o(y,()=>De[a.kind].title),o(A,s,C,P),o(A,()=>a.count,J,Q),V(O=>{var j=c(),Z=De[a.kind].title;return j!==O.e&&xe(h,O.e=j),Z!==O.t&&Ae(y,"title",O.t=Z),O},{e:void 0,t:void 0}),qe(),h})()}):n.push({range:d,component:()=>(()=>{var h=g(Oi),S=h.firstChild,[v,b]=$(S.nextSibling),k=v.nextSibling,[f,_]=$(k.nextSibling),y=f.nextSibling,x=y.nextSibling,A=x.firstChild,U=A.firstChild,[C,P]=$(U.nextSibling),Y=C.nextSibling,W=Y.nextSibling,[J,Q]=$(W.nextSibling);J.nextSibling;var O=A.nextSibling,j=O.firstChild,[Z,D]=$(j.nextSibling),E=Z.nextSibling,H=E.nextSibling,[ee,ue]=$(H.nextSibling);return h.$$click=()=>t(e.link(`/helfen/${a.uuid}`)),o(h,l(He,{title:"Helfer:innen gesucht",get inverted(){return u()},size:"small",children:"HL"}),v,b),o(h,l(Ue,{icon:"hand-heart",kind:"ghost",onClick:()=>t(e.link(`/helfen/${a.uuid}`)),title:"Helfen"}),f,_),o(y,()=>De[a.kind].title),o(A,()=>d.startTime.hour,C,P),o(A,()=>d.endTime.hour,J,Q),o(O,()=>a.count-s(),Z,D),o(O,()=>a.count,ee,ue),V(q=>{var z=c(),te=De[a.kind].title;return z!==q.e&&xe(h,q.e=z),te!==q.t&&Ae(y,"title",q.t=te),q},{e:void 0,t:void 0}),qe(),h})()})}),n}function Mi(e){const t=Object.groupBy(e,r=>r),n={};for(const r of e)n[r]=t[r]?.length??0;return n}St(["click"]);var ji=m("<dialog closedby=any><!$><!/><!$><!/><!$><!/>"),Ki=m("<h4>");function Wi(e=!1){return{open:e}}function Vi(e){let t;const[n,r]=fe(e.store);Tn(()=>{n.open?t.showModal():t.close()});function i(){r({open:!1}),e.onClose?.()}const a=()=>{const s=[];return e.type!==void 0&&s.push(e.type),e.size!==void 0&&s.push(e.size),e.onClose!==void 0&&s.push("dialog-with-close"),s};return(()=>{var s=g(ji),u=s.firstChild,[c,d]=$(u.nextSibling),h=c.nextSibling,[S,v]=$(h.nextSibling),b=S.nextSibling,[k,f]=$(b.nextSibling);s.addEventListener("close",i);var _=t;return typeof _=="function"?Un(_,s):t=s,o(s,l(p,{get when(){return e.onClose},get children(){return l(Ue,{onClick:i,icon:"circle-xmark",kind:"gray"})}}),c,d),o(s,l(p,{get when(){return e.title},children:y=>(()=>{var x=g(Ki);return o(x,y),x})()}),S,v),o(s,()=>e.children,k,f),V(()=>xe(s,a().join(" "))),s})()}var Zi=m("<p>");function ot(e){const[t,n]=fe(e.store),r=e.showErrors==="ALWAYS",i=()=>r||t.isDirty?e.errors??[]:[];return[l(zt,{get label(){return e.label},get name(){return e.name},get value(){return t.value},onValueUpdate:a=>{n("value",a),e.onUpdate?.()},onBlur:()=>n("isDirty",!0),get type(){return e.type},get required(){return e.required},get isHoneypot(){return e.isHoneypot},get disabled(){return e.disabled}}),l(p,{get when(){return i().length>0},get children(){return l(R,{type:"danger",get children(){return l(G,{get each(){return i()},children:a=>(()=>{var s=g(Zi);return o(s,a),s})()})}})}})]}w().transform(e=>({value:e,isDirty:!1}));function ct(e){return{value:e,isDirty:!1}}de().transform(e=>({value:e,isDirty:!1}));var qi=m("<div><!$><!/><br><!$><!/><br><!$><!/>"),Ji=m("<h5>"),Gi=m("<p class=duration>von <!$><!/> bis <!$><!/> Uhr <em><small>(<!$><!/>)"),Qi=m("<div>");function Xi(e){const[t,n]=se(null),r=el(e.save,e.publicState,e.link),i=nl(r),a=rl(r);return(()=>{var s=g(qi),u=s.firstChild,[c,d]=$(u.nextSibling),h=c.nextSibling,S=h.nextSibling,[v,b]=$(S.nextSibling),k=v.nextSibling,f=k.nextSibling,[_,y]=$(f.nextSibling);return o(s,l(je,{level:3,title:"Mein Programm"}),c,d),o(s,l(cn,{dayFilter:t,setDayFilter:n,exclude:i}),v,b),o(s,l(un,{get dayFilter(){return t()},programEntries:r,openingHours:a,conflictsAllowed:!1,columns:1,exclude:i}),_,y),s})()}function el(e,t,n){const{helping:r}=e,i={FRIDAY:[],SATURDAY:[],SUNDAY:[]},a=r.map(u=>{if(u.kind==="ERKLAERBAER"){const d={startDate:Qe[u.slot.day].toPlainDateTime({hour:u.slot.from,minute:0}),endDate:Qe[u.slot.day].toPlainDateTime({hour:u.slot.to,minute:0})};return{...u,meta:{dateTime:d}}}const c=Te.find(d=>d.uuid===u.helpEntryUuid);return ae(c!==void 0,`Help UUID is invalid: '${u.helpEntryUuid}'`),{...u,meta:c}}),s=Object.groupBy(a,u=>{const{startDate:c,endDate:d}=u.meta.dateTime;return`${c.year}-${c.month}-${c.day}-${c.hour}-${c.minute}--${d.year}-${d.month}-${d.day}-${d.hour}-${d.minute}`});return Object.values(s).forEach(u=>{if(u===void 0)return;const c=u[0];if(c===void 0)return;let d=!0;const h=u.map(f=>f.kind==="ERKLAERBAER"?["Erklärbär","ME"]:f.kind==="SELF"?[De[f.meta.kind].title,"ME"]:(d=!1,[De[f.meta.kind].title,f.name])),S=d?h.map(([f])=>f).join(", "):h.map(([f,_])=>_==="ME"?f:`${f} (${_})`).join("; "),v=we(c.meta.dateTime.startDate);ae(v!==null,`Date '${JSON.stringify(c.meta.dateTime.startDate)}' is not a valid event date.`);const b={startTime:c.meta.dateTime.startDate.toPlainTime(),endTime:c.meta.dateTime.endDate.toPlainTime()},k=c.kind==="ERKLAERBAER"?"/erklaerbaer":`/helfen/${c.helpEntryUuid}`;i[v].push({range:b,component:()=>l(tl,{title:S,range:b,kind:"help",path:k,link:n})})}),a.forEach(u=>{switch(u.kind){case"SELF":{const c=we(u.meta.dateTime.startDate);ae(c!==null,`Date '${JSON.stringify(u.meta.dateTime.startDate)}' is not a valid event date.`);break}case"FRIEND":{const c=we(u.meta.dateTime.startDate);ae(c!==null,`Date '${JSON.stringify(u.meta.dateTime.startDate)}' is not a valid event date.`);break}}}),i}function tl(e){const t={"master-draft":{label:"SL",help:"Spielleitung",link:{icon:"pencil",label:"Spielrunde bearbeiten"}},master:{label:"SL",help:"Spielleitung",link:{icon:"pencil",label:"Spielrunde bearbeiten"}},play:{label:"TN",help:"Teilnehmer:in",link:{icon:"link",label:"Zur Spielrunde"}},help:{label:"HL",help:"Helfen",link:{icon:"link",label:"Zum Eintrag"}}}[e.kind],n=()=>{const r=["timeview-entry","box-simple"];return e.kind==="master-draft"&&r.push("gray"),e.kind==="master"&&r.push("special"),e.kind==="play"&&r.push("danger"),r.join(" ")};return(()=>{var r=g(Qi);return o(r,l(M,{get href(){return e.link(e.path)},class:"button-link",style:"display: contents;",get children(){return[l(He,{get title(){return t.help},get inverted(){return e.kind!=="help"},size:"small",get children(){return t.label}}),l(Ue,{get icon(){return t.link.icon},kind:"ghost",get title(){return t.link.label}}),(()=>{var i=g(Ji);return o(i,()=>e.title),V(()=>Ae(i,"title",e.title)),i})(),(()=>{var i=g(Gi),a=i.firstChild,s=a.nextSibling,[u,c]=$(s.nextSibling),d=u.nextSibling,h=d.nextSibling,[S,v]=$(h.nextSibling),b=S.nextSibling,k=b.nextSibling,f=k.firstChild,_=f.firstChild,y=_.nextSibling,[x,A]=$(y.nextSibling);return x.nextSibling,o(i,()=>Ce(e.range.startTime),u,c),o(i,()=>Ce(e.range.endTime),S,v),o(f,()=>Wn(e.range.startTime,e.range.endTime),x,A),i})()]}})),V(()=>xe(r,n())),r})()}function nl(e){const t=[];return e.FRIDAY.length===0&&t.push("FRIDAY"),e.SATURDAY.length===0&&t.push("SATURDAY"),e.SUNDAY.length===0&&t.push("SUNDAY"),t.length===3?["FRIDAY"]:t}function rl(e){const t=on;e.FRIDAY.length>0&&(t.FRIDAY=Ze.FRIDAY);let n=!1;e.SATURDAY.forEach(i=>{i.range.startTime.hour<t.SATURDAY.open.from&&(n=!0),i.range.endTime.hour>t.SATURDAY.open.to&&(n=!0)}),n&&(t.SATURDAY=Ze.SATURDAY);let r=!1;return e.SUNDAY.forEach(i=>{i.range.startTime.hour<t.SUNDAY.open.from&&(r=!0),i.range.endTime.hour>t.SUNDAY.open.to&&(r=!0)}),r&&(t.SUNDAY=Ze.SUNDAY),t}function yt(e,t){const n={get:e,set:r=>t(()=>r),update:t,pipe:r=>r(n)};return n}function il(e){const[t,n]=fe({value:e});return yt(()=>t.value,r=>n("value",r(t.value)))}const N={sub:e=>t=>yt(()=>t.get()[e],n=>t.update(r=>({...r,[e]:n(t.get()[e])})))},ye={push:(e,t)=>{e.update(n=>[...n,t])},update:(e,t,n)=>{e.update(r=>r.map(i=>t(i)?n:i))},remove:(e,t)=>{e.update(n=>n.filter(t))},findExact:(e,t)=>(dt(e.get(),t),yt(()=>dt(e.get(),t),n=>{const r=dt(e.get(),t);ye.update(e,t,n(r))}))};function dt(e,t){const[n,...r]=e.filter(t);return ae(n!==void 0,"No element found with predicate"),ae(r.length===0,"Predicate does not result in unique element"),n}var ll=m("<label class=input-checkbox><input type=checkbox><div><!$><!/><!$><!/>"),al=m("<div class=checkbox-description>");function sl(e){return(()=>{var t=g(ll),n=t.firstChild,r=n.nextSibling,i=r.firstChild,[a,s]=$(i.nextSibling),u=a.nextSibling,[c,d]=$(u.nextSibling);return n.addEventListener("change",h=>e.checked$.set(h.target.checked)),o(r,()=>e.label,a,s),o(r,l(p,{get when(){return e.description},children:h=>(()=>{var S=g(al);return o(S,h),S})()}),c,d),V(h=>{var S=e.name,v=e.disabled===!0;return S!==h.e&&Ae(n,"name",h.e=S),v!==h.t&&Ee(n,"disabled",h.t=v),h},{e:void 0,t:void 0}),V(()=>Ee(n,"value",e.value)),V(()=>Ee(n,"checked",e.checked$.get())),t})()}var ul=m("<div style=display:grid;gap:1rem><!$><!/><!$><!/><!$><!/>"),ol=m("<div>"),cl=m("<div style=display:grid;gap:1rem><h3>Meine Kontaktdaten</h3><p><strong>Name:</strong> <!$><!/></p><p><strong>E-Mail:</strong> <!$><!/></p><p><strong>Handynummer:</strong> <!$><!/></p><!$><!/>"),dl=m("<form novalidate><!$><!/><!$><!/><!$><!/><!$><!/>");function gl(e){return(()=>{var t=g(ul),n=t.firstChild,[r,i]=$(n.nextSibling),a=r.nextSibling,[s,u]=$(a.nextSibling),c=s.nextSibling,[d,h]=$(c.nextSibling);return o(t,l(hl,{get contact$(){return e.save$.pipe(N.sub("contact"))},get isEditable(){return e.isEditable}}),r,i),o(t,l(sl,{label:"Schickt mir bitte E-Mails, wenn neue Programmpunkte veröffentlicht werden.",get checked$(){return e.save$.pipe(N.sub("config")).pipe(N.sub("wantsUpdates"))},name:"wantsUpdates",value:"wantsUpdates"}),s,u),o(t,l(ze,{get fallback(){return l(R,{get children(){return T.loading.program}})},get children(){return l(p,{get when(){return e.publicResource()},get fallback(){return l(R,{type:"danger",get children(){return T.error.help}})},children:S=>l(p,{get when(){return S().kind==="SUCCESS"},get fallback(){return l(R,{type:"danger",get children(){return T.loading.program}})},get children(){return l(Xi,{get save(){return e.save$.get()},get publicState(){return S().data},get link(){return e.link}})}})})}}),d,h),t})()}function hl(e){const[t,n]=fe(Wi()),{name:r,email:i,mobile:a}=e.contact$.get();return l(R,{get children(){return[l(p,{get when(){return t.open},get children(){return l(ml,{get contact$(){return e.contact$},dialogStore:t})}}),(()=>{var s=g(cl),u=s.firstChild,c=u.nextSibling,d=c.firstChild,h=d.nextSibling,S=h.nextSibling,[v,b]=$(S.nextSibling),k=c.nextSibling,f=k.firstChild,_=f.nextSibling,y=_.nextSibling,[x,A]=$(y.nextSibling),U=k.nextSibling,C=U.firstChild,P=C.nextSibling,Y=P.nextSibling,[W,J]=$(Y.nextSibling),Q=U.nextSibling,[O,j]=$(Q.nextSibling);return o(c,r,v,b),o(k,i,x,A),o(U,a,W,J),o(s,l(p,{get when(){return e.isEditable},get children(){var Z=g(ol);return o(Z,l(me,{icon:"pencil",label:"Kontaktdaten editieren",onClick:()=>n("open",!0)})),Z}}),O,j),s})()]}})}function ml(e){const[t]=Yr(),[n]=fe({name:ct(e.contact$.get().name),email:ct(e.contact$.get().email),mobile:ct(e.contact$.get().mobile)}),[r,i]=fe({kind:"IDLE",isDuplicate:!1}),a=X(()=>{const c={name:[],email:[]};return n.name.value.trim().length===0&&c.name.push(T.mandatoryField),n.email.value.trim().length===0?c.email.push(T.mandatoryField):n.email.value.includes("@")||c.email.push(T.invalidEmail),r.kind==="IDLE"&&r.isDuplicate&&c.email.push("Diese E-Mail wird bereits verwendet."),{...c,hasErrors:c.name.length+c.email.length>0}}),[s,u]=fe(e.dialogStore);return l(Vi,{get store(){return e.dialogStore},title:"Kontaktdaten editieren",onClose:()=>{},size:"medium",get children(){var c=g(dl),d=c.firstChild,[h,S]=$(d.nextSibling),v=h.nextSibling,[b,k]=$(v.nextSibling),f=b.nextSibling,[_,y]=$(f.nextSibling),x=_.nextSibling,[A,U]=$(x.nextSibling);return o(c,l(ot,{get store(){return n.name},label:"Name",name:"name",showErrors:"ON_BLUR",get errors(){return a().name}}),h,S),o(c,l(ot,{get store(){return n.email},label:"E-Mail",name:"email",showErrors:"ALWAYS",get errors(){return a().email},onUpdate:()=>i({kind:"IDLE",isDuplicate:!1})}),b,k),o(c,l(ot,{get store(){return n.mobile},label:"Handynummer",name:"mobile"}),_,y),o(c,l(ce,{label:"Speichern",get disabled(){return a().hasErrors||r.kind==="CHECKING"},onClick:async()=>{if(!a().hasErrors){i({kind:"CHECKING"});const C=t.secret,P=await fetch(Oe(`/lst26/check-email?email=${n.email.value}&secret=${C}`));if(!P.ok){i({kind:"IDLE",isDuplicate:!0});return}const Y=await P.json(),W=$l.safeParse(Y);if(!W.success){i({kind:"IDLE",isDuplicate:!0});return}if(W.data.kind==="FAILURE"){i({kind:"IDLE",isDuplicate:!0});return}i({kind:"IDLE",isDuplicate:!1}),e.contact$.set({name:n.name.value,email:n.email.value,mobile:n.mobile.value}),u("open",!1)}}}),A,U),c}})}const $l=mt([F({kind:be("SUCCESS")}),F({kind:be("FAILURE")})]);var fl=m("<div class=tooltip-wrapper><div class=tooltip></div><!$><!/>");function Ye(e){return(()=>{var t=g(fl),n=t.firstChild,r=n.nextSibling,[i,a]=$(r.nextSibling);return o(n,()=>e.tooltip),o(t,()=>e.children,i,a),t})()}var bl=m("<div class=quickmenu-wrapper><div class=quickmenu><!$><!/><!$><!/><!$><!/><!$><!/>"),Sl=m('<div class="quickmenu extended"><!$><!/><!$><!/><!$><!/><!$><!/>'),_l=m("<div style=margin-block-start:1rem;display:flex;gap:0.5rem;align-items:center><!$><!/><em>Zuletzt gespeichert um: <!$><!/> Uhr"),vl=m("<div style=margin-block-start:1rem;display:flex;gap:0.5rem;align-items:center><!$><!/><em>Am Speichern..."),kl=m("<div style=margin-block-start:1rem;display:flex;gap:0.5rem;align-items:center><!$><!/><em>Speichern war nicht möglich!");function yl(e){return(()=>{var t=g(bl),n=t.firstChild,r=n.firstChild,[i,a]=$(r.nextSibling),s=i.nextSibling,[u,c]=$(s.nextSibling),d=u.nextSibling,[h,S]=$(d.nextSibling),v=h.nextSibling,[b,k]=$(v.nextSibling);return o(n,l(Ye,{tooltip:"Zur Übersicht",get children(){return l(M,{get href(){return e.link(e.parentPath)},class:"button-link",get children(){return l(ce,{get label(){return l(re,{icon:"backward"})}})}})}}),i,a),o(n,l(p,{get when(){return e.roles.includes("admin")},get children(){return[l(Ye,{tooltip:"Zum Programm",get children(){return l(M,{get href(){return e.link("/programm")},class:"button-link",get children(){return l(ce,{get label(){return l(re,{icon:"dice-d20"})}})}})}}),l(Ye,{tooltip:"Zu deinen Programmpunkten",get children(){return l(M,{get href(){return e.link("/erstellen")},class:"button-link",get children(){return l(ce,{get label(){return l(re,{icon:"grid-2-plus"})}})}})}})]}}),u,c),o(n,l(Ye,{tooltip:"Zum Helferplan",get children(){return l(M,{get href(){return e.link("/helfen")},class:"button-link",get children(){return l(ce,{get label(){return l(re,{icon:"hand-heart"})}})}})}}),h,S),o(n,l(Ye,{tooltip:"Zur Zusammenfassung",get children(){return l(M,{get href(){return e.link("/zusammenfassung")},class:"button-link",get children(){return l(ce,{get label(){return l(re,{icon:"list"})}})}})}}),b,k),t})()}function xl(e){return[l(R,{type:"gray",get children(){var t=g(Sl),n=t.firstChild,[r,i]=$(n.nextSibling),a=r.nextSibling,[s,u]=$(a.nextSibling),c=s.nextSibling,[d,h]=$(c.nextSibling),S=d.nextSibling,[v,b]=$(S.nextSibling);return o(t,l(M,{get href(){return e.link(e.parentPath)},class:"button-link",get children(){return l(me,{icon:"backward",label:"Zur Übersicht"})}}),r,i),o(t,l(p,{get when(){return e.roles.includes("admin")},get children(){return[l(M,{get href(){return e.link("/programm")},class:"button-link",get children(){return l(me,{icon:"dice-d20",label:"Zum Programm"})}}),l(M,{get href(){return e.link("/erstellen")},class:"button-link",get children(){return l(me,{icon:"grid-2-plus",label:"Zu deinen Programmpunkten"})}})]}}),s,u),o(t,l(M,{get href(){return e.link("/helfen")},class:"button-link",get children(){return l(me,{icon:"hand-heart",label:"Zum Helferplan"})}}),d,h),o(t,l(M,{get href(){return e.link("/zusammenfassung")},class:"button-link",get children(){return l(me,{icon:"list",label:"Zur Zusammenfassung"})}}),v,b),t}}),l(pl,{get saveState(){return e.saveState},get lastSaved(){return e.lastSaved}})]}function pl(e){return l(Be,{get children(){return[l(le,{get when(){return e.saveState==="IDLE"},get children(){var t=g(_l),n=t.firstChild,[r,i]=$(n.nextSibling),a=r.nextSibling,s=a.firstChild,u=s.nextSibling,[c,d]=$(u.nextSibling);return c.nextSibling,o(t,l(re,{icon:"circle-check"}),r,i),o(a,()=>Bt(e.lastSaved),c,d),t}}),l(le,{get when(){return e.saveState==="SAVING"},get children(){var t=g(vl),n=t.firstChild,[r,i]=$(n.nextSibling);return r.nextSibling,o(t,l(re,{icon:"floppy-disk-circle-arrow-right"}),r,i),t}}),l(le,{get when(){return e.saveState==="ERROR"},get children(){var t=g(kl),n=t.firstChild,[r,i]=$(n.nextSibling);return r.nextSibling,o(t,l(re,{icon:"triangle-exclamation"}),r,i),t}})]}})}var Dl=m("<div class=page><!$><!/><div class=page-content><!$><!/><!$><!/></div><!$><!/>"),El=m("<h2>"),Rl=m("<br>"),Al=m("<div class=extended-wrapper style=margin-block-start:1rem>");function he(e){return(()=>{var t=g(Dl),n=t.firstChild,[r,i]=$(n.nextSibling),a=r.nextSibling,s=a.firstChild,[u,c]=$(s.nextSibling),d=u.nextSibling,[h,S]=$(d.nextSibling),v=a.nextSibling,[b,k]=$(v.nextSibling);return o(t,(()=>{var f=K(()=>e.showQuickmenu!==!1);return()=>f()?l(yl,{get roles(){return e.roles},get link(){return e.link},get saveState(){return e.saveState},get lastSaved(){return e.lastSaved},get parentPath(){return e.parentPath??"/"}}):null})(),r,i),o(a,(()=>{var f=K(()=>e.title===void 0);return()=>f()?null:[(()=>{var _=g(El);return o(_,()=>e.title),_})(),g(Rl)]})(),u,c),o(a,()=>e.children,h,S),o(t,(()=>{var f=K(()=>e.showQuickmenu!==!1);return()=>f()?(()=>{var _=g(Al);return o(_,l(xl,{get roles(){return e.roles},get link(){return e.link},get saveState(){return e.saveState},get lastSaved(){return e.lastSaved},get parentPath(){return e.parentPath??"/"}})),_})():null})(),b,k),t})()}var wl=m('<form class=input-button style="display:grid;gap:0rem;grid-template-columns:1fr max-content"><input type=text style=border-color:var(--clr-special-9)><!$><!/>');function Lt(e){const[t,n]=se("");return(()=>{var r=g(wl),i=r.firstChild,a=i.nextSibling,[s,u]=$(a.nextSibling);return r.addEventListener("submit",c=>{c.preventDefault();const d=t();d.trim().length>0&&e.addFriend(d)}),Ee(r,"noValidate",!0),i.$$input=c=>n(c.target.value),o(r,l(me,{icon:"arrow-right",type:"submit",label:"Begleitperson anmelden",kind:"special"}),s,u),V(()=>Ee(i,"value",t())),qe(),r})()}St(["input"]);var Tl=m("<p>Details konnten nicht geladen werden."),Ul=m("<div style=display:flex;gap:1rem;flex-wrap:wrap;justify-content:space-between><h3></h3><!$><!/>"),Cl=m("<div class=game-dialog><ul role=list style=display:grid;gap:0.5rem><li><strong style=color:var(--clr-accent-1)>Tag, Zeit:</strong> <br><!$><!/>, <!$><!/> - <!$><!/> Uhr</li><li><strong style=color:var(--clr-accent-1)>Beschreibung:</strong> <br><!$><!/></li></ul><div class=reservations><h5 style=margin-block-start:0>Plätze reservieren</h5><div class=reservation-table>"),Pl=m("<div class=count>"),Fl=m("<div class=reservation-table-entry><p>Reserviert für mich </p><!$><!/>"),Ll=m('<div class=reservation-table-entry><p>Reserviert für "<!$><!/>"</p><!$><!/>'),Il=m('<div style="display:grid;gap:1rem;grid-template-columns:max-content 1fr"><!$><!/><!$><!/>');function Yl(e){const t=ln().uuid??"no-uuid-found",n=Ei(t);return l(ze,{get fallback(){return l(R,{get children(){return T.loading.program}})},get children(){return l(p,{get when(){return e.publicResource()},get fallback(){return l(R,{type:"danger",get children(){return T.error.help}})},children:r=>l(p,{get when(){return r().kind==="SUCCESS"},get fallback(){return l(R,{type:"danger",get children(){return T.loading.program}})},get children(){return l(p,{when:n,get fallback(){return l(R,{type:"danger",get children(){return g(Tl)}})},children:i=>l(Nl,{get entry(){return i()},get myHelpReservations(){return e.reservations$.get()},get allReservations(){return r().data.reservations},get isEditable(){return e.isEditable},addReservation:a=>ye.push(e.reservations$,{...a,uuid:crypto.randomUUID()}),removeReservation:a=>{ye.remove(e.reservations$,s=>s.uuid!==a)},get link(){return e.link}})})}})})}})}function Nl(e){const{dateTime:t,kind:n}=e.entry,r=De[n],i=we(t.startDate);ae(i!==null,`Date '${JSON.stringify(t.startDate)}' is not a valid event date.`);const a=()=>e.myHelpReservations.filter(d=>"helpEntryUuid"in d&&d.helpEntryUuid===e.entry.uuid),s=(e.allReservations[e.entry.uuid]??0)-a().length,u=()=>Jt(e.entry.count).map(d=>{const h=a()[d];return h!==void 0?h:e.entry.count-s<=d?{kind:"RESERVED_OTHER"}:{kind:"FREE"}}),c=()=>a().find(d=>d.kind==="SELF")!==void 0;return[(()=>{var d=g(Ul),h=d.firstChild,S=h.nextSibling,[v,b]=$(S.nextSibling);return o(h,()=>r.title),o(d,l(M,{get href(){return e.link("/helfen")},class:"button-link",get children(){return l(me,{icon:"backward",label:"Zurück zur Helfer-Übersicht"})}}),v,b),d})(),(()=>{var d=g(Cl),h=d.firstChild,S=h.firstChild,v=S.firstChild,b=v.nextSibling,k=b.nextSibling,f=k.nextSibling,[_,y]=$(f.nextSibling),x=_.nextSibling,A=x.nextSibling,[U,C]=$(A.nextSibling),P=U.nextSibling,Y=P.nextSibling,[W,J]=$(Y.nextSibling);W.nextSibling;var Q=S.nextSibling,O=Q.firstChild,j=O.nextSibling,Z=j.nextSibling,D=Z.nextSibling,[E,H]=$(D.nextSibling),ee=h.nextSibling,ue=ee.firstChild,q=ue.nextSibling;return o(S,()=>T.days[i],_,y),o(S,()=>Ce(t.startDate.toPlainTime(),{minutes:!1}),U,C),o(S,()=>Ce(t.endDate.toPlainTime(),{minutes:!1}),W,J),o(Q,()=>r.description,E,H),o(q,l(G,{get each(){return u()},children:(z,te)=>[(()=>{var L=g(Pl);return o(L,()=>te()+1),L})(),l(Be,{get children(){return[l(le,{get when(){return z.kind==="RESERVED_OTHER"},get children(){return l(R,{children:"Bereits reserviert"})}}),l(le,{get when(){return!e.isEditable},get children(){return l(R,{children:"Freier Platz"})}}),l(le,{get when(){return z.kind==="SELF"},get children(){return l(Et,{type:"success",get children(){var L=g(Fl),ne=L.firstChild,ge=ne.nextSibling,[Se,_e]=$(ge.nextSibling);return o(L,l(Ue,{icon:"trash",onClick:()=>e.removeReservation(z.kind==="SELF"?z.uuid:"should not happen")}),Se,_e),L}})}}),l(le,{get when(){return z.kind==="FRIEND"},get children(){return l(Et,{type:"success",get children(){var L=g(Ll),ne=L.firstChild,ge=ne.firstChild,Se=ge.nextSibling,[_e,Pe]=$(Se.nextSibling);_e.nextSibling;var Fe=ne.nextSibling,[Le,et]=$(Fe.nextSibling);return o(ne,(()=>{var tt=K(()=>z.kind==="FRIEND");return()=>tt()?z.name:"[Fehler beim Laden]"})(),_e,Pe),o(L,l(Ue,{icon:"trash",onClick:()=>e.removeReservation(z.kind==="FRIEND"?z.uuid:"should not happen")}),Le,et),L}})}}),l(le,{get when(){return z.kind==="FREE"},get children(){return l(p,{get when(){return c()},get fallback(){return(()=>{var L=g(Il),ne=L.firstChild,[ge,Se]=$(ne.nextSibling),_e=ge.nextSibling,[Pe,Fe]=$(_e.nextSibling);return o(L,l(me,{icon:"person-to-portal",label:"Mich anmelden",kind:"success",onClick:()=>e.addReservation({kind:"SELF",helpEntryUuid:e.entry.uuid,uuid:crypto.randomUUID()})}),ge,Se),o(L,l(Lt,{addFriend:Le=>e.addReservation({kind:"FRIEND",helpEntryUuid:e.entry.uuid,name:Le,uuid:crypto.randomUUID()})}),Pe,Fe),L})()},get children(){return l(Lt,{addFriend:L=>e.addReservation({kind:"FRIEND",helpEntryUuid:e.entry.uuid,name:L,uuid:crypto.randomUUID()})})}})}})]}})]})),d})()]}var Hl=m("<ul role=list>"),Ol=m("<li>"),Bl=m("<label class=input-radio><input type=radio><!$><!/>");function zl(e){const t=e.layout??"vertical";return(()=>{var n=g(Hl);return xe(n,`radio-list ${t}`),o(n,l(G,{get each(){return e.items},children:r=>(()=>{var i=g(Ol);return o(i,l(Ml,{get label(){return r.label},get name(){return`${r.value}-${e.name}`},get value(){return r.value},get checked(){return r.checked},onValueUpdate:()=>e.onValueUpdate(r.value)})),i})()})),n})()}function Ml(e){return(()=>{var t=g(Bl),n=t.firstChild,r=n.nextSibling,[i,a]=$(r.nextSibling);return Cn(n,"change",e.onValueUpdate),o(t,()=>e.label,i,a),V(()=>Ae(n,"name",e.name)),V(()=>Ee(n,"value",e.value)),V(()=>Ee(n,"checked",e.checked)),t})()}var jl=m("<p>Eines der Hauptziele der Luzerner Spieltage ist es, dass die Besucher/-innen noch nicht gespielte Spiele ausprobieren können. Dazu unterstützen uns jedes Jahr Freiwillige und erklären die ihnen bekannten Spiele aus der Spiele-Bibliothek. Diese Erklärbären sind durch ihr rotes T-Shirt erkennbar."),xt=m("<br>"),Kl=m("<div class=dynamic-columns><div></div><div><!$><!/><ul><li>Sie müssen nicht alle Spiele der Spiele-Bibliothek kennen!</li><li>Sie erklären Spiele während der eingeplanten Zeit<ul><li>Grundsätzlich spielen die Erklärbären nicht mit</li><li>Sobald die Spieler/-innen die Regeln verstanden haben (z.B. nach den ersten paar Runden) verlassen sie den Tisch</li><li>Sie stehen weiterhin für Fragen zur Verfügung und kommen allenfalls periodisch zum Tisch zurück</li></ul></li><li>Sie bringen Spiele für die Spiele-Bibliothek mit welche sie erklären können<ul><li>Diese Spiele sollen ein breites Spektrum, von einfach bis komplex, abdecken</li><li>Eine Liste der mitgebrachten Spiele (Spiele-Bibliothek) wird vor dem Event von allen Erklärbären zusammen erstellt</li><li>Vor dem Event notieren die Erklärbären, was sie aus der Spiele-Bibliothek erklären können - (Mitbringen eigener Spiele ist nicht Pflicht, falls genügend Spiele aus der Liste erklärt werden können)</li></ul></li><li>Sie erarbeiten gemeinsam vor dem Event eine Empfehlungsliste aus ca.&nbsp;6&nbsp;Spielen<ul><li>Alle Erklärbären sollen die Regeln dieser Spiele vor dem Event lesen"),Wl=m("<h3>"),Vl=m("<div style=display:grid;gap:1rem><!$><!/><!$><!/>"),Zl=m("<p>Bitte nimm mit uns <!$><!/> auf, damit wir uns kurz mit dir absprechen und dir diesen Bereich freischalten können."),ql=m("<em>Noch keine Einsätze eingetragen"),Jl=m("<h4>Tag"),Gl=m("<h4>Uhrzeit"),Ql=m('<div style="display:grid;grid-template-columns:repeat(2, 1fr);gap:1rem"><!$><!/><!$><!/>'),Xl=m("<h5>Warnungen"),ea=m("<ul>"),ta=m("<li>"),na=m("<h4>Übersicht über alle Erklärbären"),ra=m("<div class=dynamic-columns><div><h5>Samstag</h5><table><tr><th>Name</th><th>Zeit</th></tr><tbody></tbody></table></div><div><h5>Sonntag</h5><table><tr><th>Name</th><th>Zeit</th></tr><tbody>"),It=m("<tr><td></td><td><!$><!/> - <!$><!/> Uhr");function ia(e){return[g(jl),g(xt),(()=>{var t=g(Kl),n=t.firstChild,r=n.nextSibling,i=r.firstChild,[a,s]=$(i.nextSibling);return a.nextSibling,o(n,l(la,{get reservations$(){return e.save$.pipe(N.sub("helping"))},get roles(){return e.roles},get isEditable(){return e.isEditable}})),o(r,l(je,{level:3,title:"Was machen die Erklärbären"}),a,s),t})(),l(p,{get when(){return e.adminResource()},children:t=>l(sa,{get adminResource(){return t()}})})]}function la(e){function t(){return e.reservations$.get().filter(n=>n.kind==="ERKLAERBAER")}return[l(je,{level:3,title:"Meine Einsätze"}),g(xt),l(Be,{get fallback(){return l(R,{get children(){var n=g(Zl),r=n.firstChild,i=r.nextSibling,[a,s]=$(i.nextSibling);return a.nextSibling,o(n,l(oe,{href:"/kontakt",children:"Kontakt"}),a,s),n}})},get children(){return l(le,{get when(){return e.roles.includes("erklaerbaer")},get children(){var n=g(Vl),r=n.firstChild,[i,a]=$(r.nextSibling),s=i.nextSibling,[u,c]=$(s.nextSibling);return o(n,l(G,{get each(){return t()},get fallback(){return g(ql)},children:d=>l(aa,{job:d,updateJob:h=>{ye.update(e.reservations$,S=>S.uuid===d.uuid,h)},removeJob:()=>{ye.remove(e.reservations$,h=>h.uuid!==d.uuid)},get isEditable(){return e.isEditable}})}),i,a),o(n,l(p,{get when(){return e.isEditable},get children(){return l(ve,{icon:"grid-2-plus",type:"success",onClick:()=>{ye.push(e.reservations$,{kind:"ERKLAERBAER",uuid:crypto.randomUUID(),slot:{day:"SATURDAY",from:10,to:18}})},get children(){var d=g(Wl);return o(d,()=>T.createNewEntry),d}})}}),u,c),n}})}})]}function aa(e){function t(){const n=[],{day:r,from:i,to:a}=e.job.slot;i>=a&&n.push("Das Ende muss grösser sein als der Start.");const s=on[r],{from:u,to:c}=s.open;return u>i&&n.push(`Die Spieltage öffnen am ${T.days[r]} erst um ${u} Uhr.`),c<a&&n.push(`Die Spieltage schliessen am ${T.days[r]} um ${c} Uhr.`),n}return l(R,{get onClose(){return K(()=>!!e.isEditable)()?e.removeJob:void 0},get children(){return[g(Jl),l(zl,{get items(){return[{label:T.days.SATURDAY,checked:e.job.slot.day==="SATURDAY",value:"SATURDAY"},{label:T.days.SUNDAY,checked:e.job.slot.day==="SUNDAY",value:"SUNDAY"}]},onValueUpdate:n=>{e.updateJob({...e.job,slot:{...e.job.slot,day:n}})},get name(){return`day-entry-${e.job.uuid}`},layout:"horizontal",get disabled(){return!e.isEditable}}),g(xt),g(Gl),(()=>{var n=g(Ql),r=n.firstChild,[i,a]=$(r.nextSibling),s=i.nextSibling,[u,c]=$(s.nextSibling);return o(n,l(Rt,{label:"Start",name:"from",get value(){return e.job.slot.from},onValueUpdate:d=>e.updateJob({...e.job,slot:{...e.job.slot,from:d}}),get disabled(){return!e.isEditable}}),i,a),o(n,l(Rt,{label:"Ende",name:"to",get value(){return e.job.slot.to},onValueUpdate:d=>e.updateJob({...e.job,slot:{...e.job.slot,to:d}}),get disabled(){return!e.isEditable}}),u,c),n})(),l(p,{get when(){return t().length>0},get children(){return[g(Xl),(()=>{var n=g(ea);return o(n,l(G,{get each(){return t()},children:r=>(()=>{var i=g(ta);return o(i,r),i})()})),n})()]}})]}})}function sa(e){if(e.adminResource.kind==="FAILURE"||e.adminResource.data.erklaerbaer===null)return null;const t=ua(e.adminResource.data.erklaerbaer.entries);return[g(na),(()=>{var n=g(ra),r=n.firstChild,i=r.firstChild,a=i.nextSibling,s=a.firstChild,u=s.nextSibling,c=r.nextSibling,d=c.firstChild,h=d.nextSibling,S=h.firstChild,v=S.nextSibling;return o(u,l(G,{get each(){return t.SATURDAY},children:b=>(()=>{var k=g(It),f=k.firstChild,_=f.nextSibling,y=_.firstChild,[x,A]=$(y.nextSibling),U=x.nextSibling,C=U.nextSibling,[P,Y]=$(C.nextSibling);return P.nextSibling,o(f,()=>b.name),o(_,()=>b.slot.from,x,A),o(_,()=>b.slot.to,P,Y),k})()})),o(v,l(G,{get each(){return t.SUNDAY},children:b=>(()=>{var k=g(It),f=k.firstChild,_=f.nextSibling,y=_.firstChild,[x,A]=$(y.nextSibling),U=x.nextSibling,C=U.nextSibling,[P,Y]=$(C.nextSibling);return P.nextSibling,o(f,()=>b.name),o(_,()=>b.slot.from,x,A),o(_,()=>b.slot.to,P,Y),k})()})),n})()]}function ua(e){const{FRIDAY:t,SATURDAY:n,SUNDAY:r}=Object.groupBy(e,i=>i.slot.day);return{FRIDAY:(t??[]).toSorted((i,a)=>i.slot.from-a.slot.from||i.slot.to-a.slot.to),SATURDAY:(n??[]).toSorted((i,a)=>i.slot.from-a.slot.from||i.slot.to-a.slot.to),SUNDAY:(r??[]).toSorted((i,a)=>i.slot.from-a.slot.from||i.slot.to-a.slot.to)}}function oa(){return l(R,{children:"Inhalt folgt."})}const Yt=200,Nt=500;function dn(e){const t={};e.title.trim().length===0&&(t.title=[...t.title??[],"Titel ist ein Pflichtfeld"]),e.shortDescription.trim().length===0&&(t.shortDescription=[...t.shortDescription??[],"'Kurze Beschreibung' ist ein Pflichtfeld"]),e.shortDescription.trim().length>Yt&&(t.shortDescription=[...t.shortDescription??[],T.charLimitBy.replace("{}",String(Yt))]),e.longDescription.trim().length>Nt&&(t.longDescription=[...t.longDescription??[],T.charLimitBy.replace("{}",String(Nt))]);const n=Object.values(t).flat();return{allErrors:n,byField:t,hasErrors:n.length>0}}var ca=m("<ul class=link-list role=list>"),da=m("<br>"),Ht=m("<h3>"),ga=m("<li>"),ha=m("<span> mit Fehlern");function ma(e){const t=kt();return[(()=>{var n=g(ca);return o(n,l(G,{get each(){return e.programEntries$.get()},children:r=>{const i=dn(r);return(()=>{var a=g(ga);return o(a,l(M,{get href(){return e.link(`/erstellen/${r.uuid}`)},class:"button-link",get children(){return l(ve,{get icon(){return i.hasErrors?"triangle-exclamation":"arrow-right"},get type(){return i.hasErrors?"danger":"special"},get children(){return[(()=>{var s=g(Ht);return o(s,(()=>{var u=K(()=>r.title.trim().length===0);return()=>u()?"[Titel fehlt noch]":r.title})()),s})(),l(He,{get kind(){return i.hasErrors?"danger":"special"},get children(){return["Status: ",K(()=>T.publishingSteps[r.status]),K(()=>K(()=>!!i.hasErrors)()?g(ha):"")]}})]}})}})),a})()}})),n})(),g(da),l(p,{get when(){return e.isEditable},get children(){return l(ve,{icon:"grid-2-plus",type:"success",onClick:()=>{const n=crypto.randomUUID();ye.push(e.programEntries$,{uuid:n,status:"draft",title:"",shortDescription:"",longDescription:"",playerMax:6,slots:[],tagNames:[]}),t(e.link(`/erstellen/${n}`))},get children(){var n=g(Ht);return o(n,()=>T.createNewGameRound),n}})}})]}var $a=m("<p>");function fa(e){const[t,n]=se(!1),r=e.showErrors==="ALWAYS",i=()=>r||t()?e.errors??[]:[];return[l(zt,{get label(){return e.label},get name(){return e.name},get value(){return e.value$.get()},onValueUpdate:a=>e.value$.set(a),onBlur:()=>n(!0),get type(){return e.type},get required(){return e.required},get disabled(){return e.disabled}}),l(p,{get when(){return i().length>0},get children(){return l(R,{type:"danger",get children(){return l(G,{get each(){return i()},children:a=>(()=>{var s=g($a);return o(s,a),s})()})}})}})]}const ba=200;var Sa=m("<button class=event-link><span>Details & Teilnahme"),_a=m('<li class=event-entry><h3 class=event-title></h3><div class=event-details><div class=event-tags><strong>Organisiert durch:</strong><!$><!/></div><div class=event-tags><strong>Tag, Zeit:</strong><span><!$><!/>, <!$><!/>: - <!$><!/> Uhr</span></div><div class=event-tags><strong>Freie Plätze:</strong> <!$><!/> (von <!$><!/>)</div> <div class=event-tags><strong>Kategorien:</strong> <!$><!/></div></div><div class="event-description content"><p><strong>Kurzbeschreibung:</strong><br><!$><!/></p></div><ul role=list class=event-links><li>'),va=m("<em>keine Kategorien");function ka(e){return(()=>{var t=g(_a),n=t.firstChild,r=n.nextSibling,i=r.firstChild,a=i.firstChild,s=a.nextSibling,[u,c]=$(s.nextSibling),d=i.nextSibling,h=d.firstChild,S=h.nextSibling,v=S.firstChild,[b,k]=$(v.nextSibling),f=b.nextSibling,_=f.nextSibling,[y,x]=$(_.nextSibling),A=y.nextSibling,U=A.nextSibling,[C,P]=$(U.nextSibling);C.nextSibling;var Y=d.nextSibling,W=Y.firstChild,J=W.nextSibling,Q=J.nextSibling,[O,j]=$(Q.nextSibling),Z=O.nextSibling,D=Z.nextSibling,[E,H]=$(D.nextSibling);E.nextSibling;var ee=Y.nextSibling,ue=ee.nextSibling,q=ue.firstChild,z=q.nextSibling,te=z.nextSibling,[L,ne]=$(te.nextSibling),ge=r.nextSibling,Se=ge.firstChild,_e=Se.firstChild,Pe=_e.nextSibling,Fe=Pe.nextSibling,[Le,et]=$(Fe.nextSibling),tt=ge.nextSibling,gn=tt.firstChild;return o(n,()=>e.entry.title),o(i,()=>e.entry.organizer,u,c),o(S,()=>T.days[we(e.entry.slot.startDate)??"FRIDAY"],b,k),o(S,()=>Ce(e.entry.slot.startDate.toPlainTime()),y,x),o(S,()=>Ce(e.entry.slot.endDate.toPlainTime()),C,P),o(Y,()=>Math.max(e.entry.playerMax-e.reservations,0),O,j),o(Y,()=>e.entry.playerMax,E,H),o(ue,(()=>{var hn=K(()=>e.entry.tagNames.length>0);return()=>hn()?e.entry.tagNames.join(", "):g(va)})(),L,ne),o(Se,()=>bn(e.entry.shortDescription,ba),Le,et),o(gn,l(M,{get href(){return e.link(`${e.basePath}/${e.entry.uuid}`)},class:"button-link",get children(){return g(Sa)}})),t})()}var ya=m("<p>");function Ot(e){const[t,n]=se(!1),r=e.showErrors==="ALWAYS",i=()=>r||t()?e.errors??[]:[];return[l(Fn,{get label(){return e.label},get name(){return e.name},get value(){return e.value$.get()},onValueUpdate:a=>e.value$.set(a),onBlur:()=>n(!0),get required(){return e.required},get size(){return e.size},get disabled(){return e.disabled}}),l(p,{get when(){return i().length>0},get children(){return l(R,{type:"danger",get children(){return l(G,{get each(){return i()},children:a=>(()=>{var s=g(ya);return o(s,a),s})()})}})}})]}var xa=m("<p>Details konnten nicht geladen werden."),pa=m("<h2>"),Da=m("<div class=dynamic-columns><div><form novalidate><!$><!/><!$><!/><!$><!/><!$><!/></form></div><div><h3>Vorschau</h3><br><!$><!/><br><br><!$><!/>"),Ea=m("<span> mit Fehlern <!$><!/>"),Ra=m("<em>Keine (gültigen) Zeitslots gefunden"),Aa=m("<h4>Spielrunde inkomplett"),wa=m("<p>Du hast noch einen oder mehre Fehler/fehlende Informationen in dieser Spielrunde:"),Ta=m("<ul>"),Ua=m("<li>");function Ca(e){const t=ln().uuid??"no-uuid-found";return l(ze,{get fallback(){return l(R,{get children(){return T.loading.program}})},get children(){return l(p,{get when(){return e.publicResource()},get fallback(){return l(R,{type:"danger",get children(){return T.error.help}})},children:n=>l(p,{get when(){return n().kind==="SUCCESS"},get fallback(){return l(R,{type:"danger",get children(){return T.loading.program}})},get children(){return l(Vt,{get fallback(){return l(R,{type:"danger",get children(){return g(xa)}})},get children(){return l(Pa,{get entry$(){return ye.findExact(e.programEntries$,r=>r.uuid===t)},get isEditable(){return e.isEditable},get link(){return e.link}})}})}})})}})}function Pa(e){const t=()=>dn(e.entry$.get());return[(()=>{var n=g(pa);return o(n,()=>e.entry$.get().title),n})(),(()=>{var n=g(Da),r=n.firstChild,i=r.firstChild,a=i.firstChild,[s,u]=$(a.nextSibling),c=s.nextSibling,[d,h]=$(c.nextSibling),S=d.nextSibling,[v,b]=$(S.nextSibling),k=v.nextSibling,[f,_]=$(k.nextSibling),y=r.nextSibling,x=y.firstChild,A=x.nextSibling,U=A.nextSibling,[C,P]=$(U.nextSibling),Y=C.nextSibling,W=Y.nextSibling,J=W.nextSibling,[Q,O]=$(J.nextSibling);return o(i,l(p,{get when(){return e.entry$.get().status==="published"},get children(){return l(Fa,{get errors(){return t()}})}}),s,u),o(i,l(fa,{get value$(){return e.entry$.pipe(N.sub("title"))},label:"Titel",name:"title",get showErrors(){return e.entry$.get().status==="published"?"ALWAYS":"ON_BLUR"},get errors(){return t().byField.title??[]},get disabled(){return!e.isEditable}}),d,h),o(i,l(Ot,{get value$(){return e.entry$.pipe(N.sub("shortDescription"))},label:"kurze Beschreibung",name:"descriptionShort",size:"small",get showErrors(){return e.entry$.get().status==="published"?"ALWAYS":"ON_BLUR"},get errors(){return t().byField.shortDescription??[]},get disabled(){return!e.isEditable}}),v,b),o(i,l(Ot,{get value$(){return e.entry$.pipe(N.sub("longDescription"))},label:"lange Beschreibung (optional)",name:"descriptionLong",get showErrors(){return e.entry$.get().status==="published"?"ALWAYS":"ON_BLUR"},get errors(){return t().byField.longDescription??[]},get disabled(){return!e.isEditable}}),f,_),o(y,l(He,{get kind(){return t().hasErrors?"danger":"special"},get children(){return["Status: ",K(()=>T.publishingSteps[e.entry$.get().status]),K(()=>K(()=>!!t().hasErrors)()?(()=>{var j=g(Ea),Z=j.firstChild,D=Z.nextSibling,[E,H]=$(D.nextSibling);return o(j,l(re,{icon:"triangle-exclamation"}),E,H),j})():"")]}}),C,P),o(y,l(G,{get each(){return La(e.entry$.get())},get fallback(){return g(Ra)},children:j=>l(ka,{entry:j,basePath:"/programm",get link(){return e.link},reservations:0})}),Q,O),n})()]}function Fa(e){return l(p,{get when(){return e.errors.hasErrors},get children(){return l(R,{type:"danger",get children(){return[g(Aa),g(wa),(()=>{var t=g(Ta);return o(t,l(G,{get each(){return e.errors.allErrors},children:n=>(()=>{var r=g(Ua);return o(r,n),r})()})),t})()]}})}})}function La(e){const t=[];return e.slots.forEach(n=>{const r=At(n.start.time),i=At(n.end.time);r.kind==="ERROR"||i.kind==="ERROR"||t.push({uuid:n.uuid,title:e.title,organizer:"",slot:{startDate:Qe[n.start.day].toPlainDateTime({hour:r.value.hour,minute:r.value.minute}),endDate:Qe[n.end.day].toPlainDateTime({hour:i.value.hour,minute:i.value.minute})},shortDescription:e.shortDescription,longDescription:e.longDescription,playerMax:e.playerMax,tagNames:e.tagNames})}),t}const Ia=F({name:w(),slot:F({day:Ge,from:de(),to:de()})}),Ya=Sn(),Na=F({entries:$e(Ia)}),Ha=F({admin:Ya,erklaerbaer:_n(Na)});async function Oa(e){const t=await Hn(e);if(t.kind==="FAILURE")return console.error("Unexpected error. Maybe network, maybe server error."),{kind:"FAILURE"};const n=Ha.safeParse(t.data);return n.success?{kind:"SUCCESS",data:n.data}:{kind:"FAILURE"}}function Ba(e){const[t]=We(Ci),[n]=We(()=>Oa(e.secret)),r=il({meta:{saveState:"IDLE",lastSaved:new Date,roles:e.initState.roles},save:e.initState.data}),i=crypto.randomUUID(),[a,s]=se(!1);We(()=>JSON.stringify(r.get().save),async()=>{if(!a()){s(!0);return}if(e.initState.status!=="published"){Zt("Diese Anmeldung wurde deaktiviert und kann nicht editiert werden.",{kind:"danger",uuid:i});return}const c=Pn(r.get().save);try{const d=await rr(r.get().meta,c,e.secret);d.kind==="FAILURE"?console.error(d):r.pipe(N.sub("meta")).pipe(N.sub("lastSaved")).set(d.data)}catch(d){console.error(d),r.pipe(N.sub("meta")).pipe(N.sub("saveState")).set("ERROR")}});function u(c){return`${c}?secret=${e.secret}`}return l(ei,{explicitLinks:!0,children:[{path:"/",component:()=>l(he,{title:"Wo möchtest du starten?",get roles(){return r.get().meta.roles},link:u,get saveState(){return r.get().meta.saveState},get lastSaved(){return r.get().meta.lastSaved},get children(){return l(hi,{get roles(){return r.get().meta.roles},link:u})}})},{path:"/programm",component:()=>l(he,{title:"Programm",get roles(){return r.get().meta.roles},link:u,get saveState(){return r.get().meta.saveState},get lastSaved(){return r.get().meta.lastSaved},get children(){return l(oa,{})}})},{path:"/erstellen",component:()=>l(he,{title:"Programmpunkte erstellen und editieren",get roles(){return r.get().meta.roles},link:u,get saveState(){return r.get().meta.saveState},get lastSaved(){return r.get().meta.lastSaved},get children(){return l(ma,{get programEntries$(){return r.pipe(N.sub("save")).pipe(N.sub("program")).pipe(N.sub("organising"))},link:u,get isEditable(){return e.initState.status==="published"}})}})},{path:"/erstellen/:uuid",component:()=>l(he,{get roles(){return r.get().meta.roles},link:u,get saveState(){return r.get().meta.saveState},get lastSaved(){return r.get().meta.lastSaved},parentPath:"/erstellen",get children(){return l(Ca,{get programEntries$(){return r.pipe(N.sub("save")).pipe(N.sub("program")).pipe(N.sub("organising"))},publicResource:t,link:u,get isEditable(){return e.initState.status==="published"}})}})},{path:"/helfen",component:()=>l(he,{title:"Helfen",get roles(){return r.get().meta.roles},link:u,get saveState(){return r.get().meta.saveState},get lastSaved(){return r.get().meta.lastSaved},showQuickmenu:!0,get children(){return l(Bi,{get reservations$(){return r.pipe(N.sub("save")).pipe(N.sub("helping"))},publicResource:t,get isEditable(){return e.initState.status==="published"},link:u,get roles(){return r.get().meta.roles}})}})},{path:"/helfen/:uuid",component:()=>l(he,{link:u,get roles(){return r.get().meta.roles},get saveState(){return r.get().meta.saveState},get lastSaved(){return r.get().meta.lastSaved},showQuickmenu:!0,parentPath:"/helfen",get children(){return l(Yl,{get reservations$(){return r.pipe(N.sub("save")).pipe(N.sub("helping"))},publicResource:t,link:u,get isEditable(){return e.initState.status==="published"}})}})},{path:"/erklaerbaer",component:()=>l(he,{title:"Helfen: Erklärbären",get roles(){return r.get().meta.roles},link:u,get saveState(){return r.get().meta.saveState},get lastSaved(){return r.get().meta.lastSaved},showQuickmenu:!0,parentPath:"/helfen",get children(){return l(ia,{get save$(){return r.pipe(N.sub("save"))},adminResource:n,get roles(){return r.get().meta.roles},get isEditable(){return e.initState.status==="published"}})}})},{path:"/zusammenfassung",component:()=>l(he,{title:"Zusammenfassung",get roles(){return r.get().meta.roles},link:u,get saveState(){return r.get().meta.saveState},get lastSaved(){return r.get().meta.lastSaved},showQuickmenu:!0,get children(){return l(gl,{get save$(){return r.pipe(N.sub("save"))},publicResource:t,link:u,get isEditable(){return e.initState.status==="published"}})}})},{path:"*",component:()=>l(he,{title:"Seite nicht gefunden",get roles(){return r.get().meta.roles},link:u,get saveState(){return r.get().meta.saveState},get lastSaved(){return r.get().meta.lastSaved},showQuickmenu:!0,get children(){return l(R,{type:"danger",get children(){return T.error.siteNotFound}})}})}]})}function za(){return l(R,{get children(){return T.loading.registration}})}function qa(){const t=URL.parse(location.toString().replace("#/",""))?.searchParams.get("secret")??"no-secret-found",[n]=We(()=>tr(t));return l(Vt,{fallback:r=>(console.error(r),l(R,{type:"danger",get children(){return T.error.general}})),get children(){return l(ze,{get fallback(){return l(za,{})},get children(){return l(Be,{get children(){return l(le,{get when(){return n()},children:r=>{const{kind:i,value:a}=vn(r());return i==="FAILURE"?a.reason==="SECRET_INVALID"?l(R,{type:"danger",get children(){return T.error.secretError}}):(console.error(a),l(R,{type:"danger",get children(){return T.error.ourMistake}})):l(Ba,{get initState(){return a.data},secret:t})}})}})}})}})}export{qa as MeineAnmeldungWrapper};
