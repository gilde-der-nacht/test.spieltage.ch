import{c as je,o as O,n as xe,s as j,e as ze,d as Te,u as st,l as ue,f as Vt,g as Zt,h as xt,i as q,B as R,j as se,q as v,r as Jt,b as re,k as Ee,I as qt,m as le,S as ft,p as $t,t as Gt}from"./utils.B6i49G2H.js";import{g as h,a as g,i as d,c as a,t as f,r as Et,h as z,j as wt,k as ot,l as At,e as oe,b as B,n as ut,p as ct,q as Qt,w as Xt,x as en,y as tn,z as nn,A as ie,S as T,B as rn,C as Tt,D as Ze,E as dt,m as bt,G as an,H as ln,I as Ne,s as ve,J as sn,M as G,F as he,f as Ce,K as ge,L as Je,N as Me,O as on,u as un,d as Se,P as cn,Q as rt,R as dn}from"./web.D8V8UMPF.js";import{c as V,u as mn}from"./store.B96L5sdd.js";import{E as ae}from"./ExitSpa.DrpG5xHv.js";import"./Textarea.C_4l1a-b.js";const[Re,Oe]=V([]);function Rt(e,n){if(n?.uuid!==void 0&&Re.find(o=>o.uuid===n.uuid)!==void 0)return it(n.uuid,e,n);const t=n?.uuid??crypto.randomUUID(),r=n?.duration??5e3,i=n?.kind??"gray",l=n?.dismissable??!0,s=setTimeout(()=>{Oe(Re.filter(o=>o.uuid!==t))},r);return Oe(Re.length,{uuid:t,kind:i,message:e,duration:r,dismissable:l,cleanup:()=>clearTimeout(s)}),t}function it(e,n,t){const r=Re.find(u=>u.uuid===e);if(r===void 0)return e;r.cleanup();const i=t.duration??r.duration,l=t.kind??r.kind,s=t?.dismissable??r.dismissable,o=setTimeout(()=>{Oe(Re.filter(u=>u.uuid!==e))},i);return Oe(u=>u.uuid===e,{uuid:e,kind:l,message:n,duration:i,dismissable:s,cleanup:()=>clearTimeout(o)}),e}const hn=je(["SATURDAY","SUNDAY"]);O({uuid:j().uuid(),day:hn,from:xe(),to:xe()}).refine(e=>e.from<e.to,{message:"A TimeSlot can't end before it starts."});O({name:j(),label:j(),description:j()});const gn=je(["draft","published","archived"]);async function fn(e){const n=new URL(ze("/lst26/load"));n.searchParams.append("secret",e);const t=await fetch(n);if(!t.ok)return{kind:"FAILURE"};const r=await t.json();return typeof r=="object"&&r!==null?{kind:"SUCCESS",data:r}:(console.error("`last_save` not found on ",r),{kind:"FAILURE"})}async function $n(e,n){try{const t=await fetch(ze("/lst26/save"),{method:"POST",body:JSON.stringify({secret:n,save:e}),headers:{"Content-Type":"application/json"}});return t.ok?{kind:"SUCCESS",data:n}:(console.error(await t.text()),{kind:"FAILURE"})}catch(t){return console.error(t),{kind:"FAILURE"}}}async function bn(){try{const e=new URL(ze("/lst26/public")),n=await fetch(e,{headers:{"Content-Type":"application/json"}});return n.ok?{kind:"SUCCESS",data:await n.json()}:(console.error(await n.text()),{kind:"FAILURE"})}catch(e){return console.error(e),{kind:"FAILURE"}}}je(["SAVING","IDLE","ERROR"]);const Sn=Te(st([ue("admin"),ue("erklaerbaer")])),_n=je(["FRIDAY","SATURDAY","SUNDAY"]),vn=O({from:xe(),to:xe()}),kn=vn.extend({day:_n});function Le(e,n){const{startTime:t,endTime:r}=n;return!(t.hour>e.hour||t.hour===e.hour&&t.minute>e.minute||r.hour<e.hour||r.hour===e.hour&&r.minute<e.minute)}function yn(e,n){const{startTime:t,endTime:r}=e,{startTime:i,endTime:l}=n;return Le(t,n)||Le(r,n)||Le(i,e)||Le(l,e)||t===i&&r===l}function Dn(e,n=!1){const{from:t,to:r}=e;if(t>r)return[];const i=r-t;return Ut(n?i+1:i,t)}function Ut(e,n=0){return[...Array(e)].map((t,r)=>r+n)}function Be(e,n){const{minutes:t}=n??{minutes:!0};return t?`${e.hour}.${e.minute.toString().padStart(2,"0")}`:`${e.hour}`}function pn(e,n){const t=e.minute+e.hour*60,r=n.minute+n.hour*60,i=Math.abs(r-t),l=i%60,s=Math.round((i-l)/60);return l===0?`${s} ${s===1?"Stunde":"Stunden"}`:s===0?`${l} ${l===1?"Minute":"Minuten"}`:`${s},${l} Stunden`}const xn=O({name:j(),email:j(),mobile:j()}),En=O({kind:ue("ERKLAERBAER"),uuid:j().uuid(),slot:kn}),wn=st([O({kind:ue("SELF"),helpEntryUuid:j().uuid(),uuid:j().uuid()}),O({kind:ue("FRIEND"),helpEntryUuid:j().uuid(),name:j(),uuid:j().uuid()}),En]),An=O({}),Tn=O({}),Rn=O({version:ue(5),contact:xn,config:O({wantsUpdates:Vt()}),helping:Te(wn),program:O({organising:Te(An),participating:Te(Tn)})}),Un=O({kind:ue("SUCCESS"),status:gn,roles:Sn,data:Rn});async function Cn(e){if(e.length!==36&&e.length!==4)return{kind:"FAILURE",reason:"SECRET_INVALID"};const n=await fn(e);if(n.kind==="FAILURE")return console.error("Unexpected error. Maybe network, maybe server error."),{kind:"FAILURE",reason:"GENERAL"};const t=Un.safeParse(n.data);return t.success?{kind:"SUCCESS",data:t.data}:(console.error(t.error),{kind:"FAILURE",reason:"PARSE_ERROR"})}const qe=crypto.randomUUID();async function Pn(e,n,t){const[r,i]=V(e);i("saveState","SAVING"),Rt("Am Speichern...",{uuid:qe,dismissable:!1});const l=new Date;try{if((await $n(n,t)).kind==="FAILURE")throw Error("")}catch(s){return i("saveState","ERROR"),console.error(s),it(qe,"Speichern war nicht möglich!",{kind:"danger",duration:1e4,dismissable:!0}),{kind:"FAILURE"}}return it(qe,`Zuletzt gespeichert um: ${xt(l)} Uhr`,{kind:"success",dismissable:!0}),i("saveState","IDLE"),{kind:"SUCCESS",data:l}}const Fn=Zt(Pn,1e3);var St=f("<br>"),Ln=f("<strong>Donnerstag, 21. August 2025"),In=f("<p>Deine Anmeldung wird geladen..."),Yn=f("<p>Das Programm wird geladen..."),Hn=f("<p>Leider ist ein unerwarteter Fehler passiert. Versuche deine Anmeldung erneut zu laden. Wiederholt sich dieser Fehler, bitte kontaktiere uns sobald als möglich über das <!$><!/>, da dies nicht passieren sollte."),Nn=f("<p>Wir konnten leider keine Anmeldung finden. Wenn du bereits eine Anmeldung begonnen hast, solltest du den korrekten Link per E-Mail erhalten haben.<br><br> Falls du noch keine Anmeldung begonnen hast, kannst du <!$><!/> deine persönliche Anmeldung beginnen. <br><br>Für generelle Fragen oder Probleme, schreibe uns doch bitte über unser <!$><!/>."),On=f("<p>Wir konnten leider keine Spielrunde unter diesem Link finden.<br><br>Vermutlich liegt es an uns. Bitte kontaktiere uns sobald als möglich über das "),Bn=f("<p>Leider ist ein unerwarteter Fehler passiert. Vermutlich liegt es an uns. Bitte kontaktiere uns sobald als möglich über das <!$><!/>."),jn=f("<p>Leider ist ein unerwarteter Fehler passiert beim Laden des Programmes. Vermutlich liegt es an uns. Bitte kontaktiere uns sobald als möglich über das <!$><!/>."),zn=f("<p>Leider ist ein unerwarteter Fehler passiert beim Laden von Daten. Vermutlich liegt es an uns. Bitte kontaktiere uns sobald als möglich über das <!$><!/>."),Mn=f("<p>Leider ist das keine gültige Seite. Versuche deine Anmeldung erneut zu laden. Wiederholt sich dieser Fehler, bitte kontaktiere uns sobald als möglich über das <!$><!/>, da dies nicht passieren sollte."),Kn=f("<p>Leider hast du keinen Zugriff auf diese Seite. Sollte dies ein Fehler sein, dann kontaktiere uns sobald als möglich über das <!$><!/>.");h(St),h(St),h(Ln);const Wn={registration:h(In),program:h(Yn)},Vn={general:(()=>{var e=h(Hn),n=e.firstChild,t=n.nextSibling,[r,i]=g(t.nextSibling);return r.nextSibling,d(e,a(ae,{href:"/kontakt",children:"Kontaktformular"}),r,i),e})(),secretError:(()=>{var e=h(Nn),n=e.firstChild,t=n.nextSibling,r=t.nextSibling,i=r.nextSibling,l=i.nextSibling,[s,o]=g(l.nextSibling),u=s.nextSibling,c=u.nextSibling,m=c.nextSibling,S=m.nextSibling,_=S.nextSibling,[$,y]=g(_.nextSibling);return $.nextSibling,d(e,a(ae,{href:"/anmeldung",children:"hier"}),s,o),d(e,a(ae,{href:"/kontakt",children:"Kontaktformular"}),$,y),e})(),gameroundUuidError:h(On),ourMistake:(()=>{var e=h(Bn),n=e.firstChild,t=n.nextSibling,[r,i]=g(t.nextSibling);return r.nextSibling,d(e,a(ae,{href:"/kontakt",children:"Kontaktformular"}),r,i),e})(),program:(()=>{var e=h(jn),n=e.firstChild,t=n.nextSibling,[r,i]=g(t.nextSibling);return r.nextSibling,d(e,a(ae,{href:"/kontakt",children:"Kontaktformular"}),r,i),e})(),help:(()=>{var e=h(zn),n=e.firstChild,t=n.nextSibling,[r,i]=g(t.nextSibling);return r.nextSibling,d(e,a(ae,{href:"/kontakt",children:"Kontaktformular"}),r,i),e})(),siteNotFound:(()=>{var e=h(Mn),n=e.firstChild,t=n.nextSibling,[r,i]=g(t.nextSibling);return r.nextSibling,d(e,a(ae,{href:"/kontakt",children:"Kontaktformular"}),r,i),e})(),noAccess:(()=>{var e=h(Kn),n=e.firstChild,t=n.nextSibling,[r,i]=g(t.nextSibling);return r.nextSibling,d(e,a(ae,{href:"/kontakt",children:"Kontaktformular"}),r,i),e})()},Zn="Neuer Eintrag erstellen",Jn="Die Eingabe scheint keine gültige E-Mail-Adresse zu sein.",qn="Dies ist ein Pflichtfeld.",Gn={FRIDAY:"Freitag",SATURDAY:"Samstag",SUNDAY:"Sonntag"},P={loading:Wn,error:Vn,createNewEntry:Zn,invalidEmail:Jn,mandatoryField:qn,days:Gn};function Ct(){let e=new Set;function n(i){return e.add(i),()=>e.delete(i)}let t=!1;function r(i,l){if(t)return!(t=!1);const s={to:i,options:l,defaultPrevented:!1,preventDefault:()=>s.defaultPrevented=!0};for(const o of e)o.listener({...s,from:o.location,retry:u=>{u&&(t=!0),o.navigate(i,{...l,resolve:!1})}});return!s.defaultPrevented}return{subscribe:n,confirm:r}}let at;function mt(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),at=window.history.state._depth}mt();function Qn(e){return{...e,_depth:window.history.state&&window.history.state._depth}}function Xn(e,n){let t=!1;return()=>{const r=at;mt();const i=r==null?null:at-r;if(t){t=!1;return}i&&n(i)?(t=!0,window.history.go(-i)):e()}}const er=/^(?:[a-z0-9]+:)?\/\//i,tr=/^\/+|(\/)\/+$/g,Pt="http://sr";function _e(e,n=!1){const t=e.replace(tr,"$1");return t?n||/^[?#]/.test(t)?t:"/"+t:""}function Ye(e,n,t){if(er.test(n))return;const r=_e(e),i=t&&_e(t);let l="";return!i||n.startsWith("/")?l=r:i.toLowerCase().indexOf(r.toLowerCase())!==0?l=r+i:l=i,(l||"/")+_e(n,!l)}function nr(e,n){if(e==null)throw new Error(n);return e}function rr(e,n){return _e(e).replace(/\/*(\*.*)?$/g,"")+_e(n)}function Ft(e){const n={};return e.searchParams.forEach((t,r)=>{r in n?Array.isArray(n[r])?n[r].push(t):n[r]=[n[r],t]:n[r]=t}),n}function ir(e,n,t){const[r,i]=e.split("/*",2),l=r.split("/").filter(Boolean),s=l.length;return o=>{const u=o.split("/").filter(Boolean),c=u.length-s;if(c<0||c>0&&i===void 0&&!n)return null;const m={path:s?"":"/",params:{}},S=_=>t===void 0?void 0:t[_];for(let _=0;_<s;_++){const $=l[_],y=$[0]===":",b=y?u[_]:u[_].toLowerCase(),k=y?$.slice(1):$.toLowerCase();if(y&&Ge(b,S(k)))m.params[k]=b;else if(y||!Ge(b,k))return null;m.path+=`/${b}`}if(i){const _=c?u.slice(-c).join("/"):"";if(Ge(_,S(i)))m.params[i]=_;else return null}return m}}function Ge(e,n){const t=r=>r===e;return n===void 0?!0:typeof n=="string"?t(n):typeof n=="function"?n(e):Array.isArray(n)?n.some(t):n instanceof RegExp?n.test(e):!1}function ar(e){const[n,t]=e.pattern.split("/*",2),r=n.split("/").filter(Boolean);return r.reduce((i,l)=>i+(l.startsWith(":")?2:3),r.length-(t===void 0?0:1))}function Lt(e){const n=new Map,t=wt();return new Proxy({},{get(r,i){return n.has(i)||Et(t,()=>n.set(i,z(()=>e()[i]))),n.get(i)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())},has(r,i){return i in e()}})}function lr(e,n){const t=new URLSearchParams(e);Object.entries(n).forEach(([i,l])=>{l==null||l===""||l instanceof Array&&!l.length?t.delete(i):l instanceof Array?(t.delete(i),l.forEach(s=>{t.append(i,String(s))})):t.set(i,String(l))});const r=t.toString();return r?`?${r}`:""}function It(e){let n=/(\/?\:[^\/]+)\?/.exec(e);if(!n)return[e];let t=e.slice(0,n.index),r=e.slice(n.index+n[0].length);const i=[t,t+=n[1]];for(;n=/^(\/\:[^\/]+)\?/.exec(r);)i.push(t+=n[1]),r=r.slice(n[0].length);return It(r).reduce((l,s)=>[...l,...i.map(o=>o+s)],[])}const sr=100,Yt=At(),ht=At(),Pe=()=>nr(ot(Yt),"<A> and 'use' router primitives can be only used inside a Route."),or=()=>ot(ht)||Pe().base,ur=e=>{const n=or();return z(()=>n.resolvePath(e()))},cr=e=>{const n=Pe();return z(()=>{const t=e();return t!==void 0?n.renderPath(t):t})},Ht=()=>Pe().navigatorFactory(),Nt=()=>Pe().location,dr=()=>Pe().params,mr=()=>{const e=Nt(),n=Ht(),t=(r,i)=>{const l=ct(()=>lr(e.search,r)+e.hash);n(l,{scroll:!1,resolve:!1,...i})};return[e.query,t]};function hr(e,n=""){const{component:t,preload:r,load:i,children:l,info:s}=e,o=!l||Array.isArray(l)&&!l.length,u={key:e,component:t,preload:r||i,info:s};return Ot(e.path).reduce((c,m)=>{for(const S of It(m)){const _=rr(n,S);let $=o?_:_.split("/*",1)[0];$=$.split("/").map(y=>y.startsWith(":")||y.startsWith("*")?y:encodeURIComponent(y)).join("/"),c.push({...u,originalPath:m,pattern:$,matcher:ir($,!o,e.matchFilters)})}return c},[])}function gr(e,n=0){return{routes:e,score:ar(e[e.length-1])*1e4-n,matcher(t){const r=[];for(let i=e.length-1;i>=0;i--){const l=e[i],s=l.matcher(t);if(!s)return null;r.unshift({...s,route:l})}return r}}}function Ot(e){return Array.isArray(e)?e:[e]}function Bt(e,n="",t=[],r=[]){const i=Ot(e);for(let l=0,s=i.length;l<s;l++){const o=i[l];if(o&&typeof o=="object"){o.hasOwnProperty("path")||(o.path="");const u=hr(o,n);for(const c of u){t.push(c);const m=Array.isArray(o.children)&&o.children.length===0;if(o.children&&!m)Bt(o.children,c.pattern,t,r);else{const S=gr([...t],r.length);r.push(S)}t.pop()}}}return t.length?r:r.sort((l,s)=>s.score-l.score)}function Qe(e,n){for(let t=0,r=e.length;t<r;t++){const i=e[t].matcher(n);if(i)return i}return[]}function fr(e,n,t){const r=new URL(Pt),i=z(m=>{const S=e();try{return new URL(S,r)}catch{return console.error(`Invalid path ${S}`),m}},r,{equals:(m,S)=>m.href===S.href}),l=z(()=>i().pathname),s=z(()=>i().search,!0),o=z(()=>i().hash),u=()=>"",c=ut(s,()=>Ft(i()));return{get pathname(){return l()},get search(){return s()},get hash(){return o()},get state(){return n()},get key(){return u()},query:t?t(c):Lt(c)}}let $e;function $r(){return $e}function br(e,n,t,r={}){const{signal:[i,l],utils:s={}}=e,o=s.parsePath||(x=>x),u=s.renderPath||(x=>x),c=s.beforeLeave||Ct(),m=Ye("",r.base||"");if(m===void 0)throw new Error(`${m} is not a valid base path`);m&&!i().value&&l({value:m,replace:!0,scroll:!1});const[S,_]=oe(!1);let $;const y=(x,w)=>{w.value===b()&&w.state===D()||($===void 0&&_(!0),$e=x,$=w,Xt(()=>{$===w&&(k($.value),p($.state),tn(),I[1](H=>H.filter(X=>X.pending)))}).finally(()=>{$===w&&en(()=>{$e=void 0,x==="navigate"&&W($),_(!1),$=void 0})}))},[b,k]=oe(i().value),[D,p]=oe(i().state),U=fr(b,D,s.queryWrapper),F=[],I=oe([]),Y=z(()=>typeof r.transformUrl=="function"?Qe(n(),r.transformUrl(U.pathname)):Qe(n(),U.pathname)),Z=()=>{const x=Y(),w={};for(let H=0;H<x.length;H++)Object.assign(w,x[H].params);return w},M=s.paramsWrapper?s.paramsWrapper(Z,n):Lt(Z),Q={pattern:m,path:()=>m,outlet:()=>null,resolvePath(x){return Ye(m,x)}};return B(ut(i,x=>y("native",x),{defer:!0})),{base:Q,location:U,params:M,isRouting:S,renderPath:u,parsePath:o,navigatorFactory:K,matches:Y,beforeLeave:c,preloadRoute:ce,singleFlight:r.singleFlight===void 0?!0:r.singleFlight,submissions:I};function J(x,w,H){ct(()=>{if(typeof w=="number"){w&&(s.go?s.go(w):console.warn("Router integration does not support relative routing"));return}const X=!w||w[0]==="?",{replace:fe,resolve:ee,scroll:L,state:te}={replace:!1,resolve:!X,scroll:!0,...H},C=ee?x.resolvePath(w):Ye(X&&U.pathname||"",w);if(C===void 0)throw new Error(`Path '${w}' is not a routable path`);if(F.length>=sr)throw new Error("Too many redirects");const ne=b();(C!==ne||te!==D())&&(Qt||c.confirm(C,H)&&(F.push({value:ne,replace:fe,scroll:L,state:D()}),y("navigate",{value:C,state:te})))})}function K(x){return x=x||ot(ht)||Q,(w,H)=>J(x,w,H)}function W(x){const w=F[0];w&&(l({...x,replace:w.replace,scroll:w.scroll}),F.length=0)}function ce(x,w){const H=Qe(n(),x.pathname),X=$e;$e="preload";for(let fe in H){const{route:ee,params:L}=H[fe];ee.component&&ee.component.preload&&ee.component.preload();const{preload:te}=ee;w&&te&&Et(t(),()=>te({params:L,location:{pathname:x.pathname,search:x.search,hash:x.hash,query:Ft(x),state:null,key:""},intent:"preload"}))}$e=X}}function Sr(e,n,t,r){const{base:i,location:l,params:s}=e,{pattern:o,component:u,preload:c}=r().route,m=z(()=>r().path);u&&u.preload&&u.preload();const S=c?c({params:s,location:l,intent:$e||"initial"}):void 0;return{parent:n,pattern:o,path:m,outlet:()=>u?a(u,{params:s,location:l,data:S,get children(){return t()}}):t(),resolvePath($){return Ye(i.path(),$,m())}}}const _r=e=>n=>{const{base:t}=n,r=nn(()=>n.children),i=z(()=>Bt(r(),n.base||""));let l;const s=br(e,i,()=>l,{base:t,singleFlight:n.singleFlight,transformUrl:n.transformUrl});return e.create&&e.create(s),a(Yt.Provider,{value:s,get children(){return a(vr,{routerState:s,get root(){return n.root},get preload(){return n.rootPreload||n.rootLoad},get children(){return[ie(()=>(l=wt())&&null),a(kr,{routerState:s,get branches(){return i()}})]}})}})};function vr(e){const n=e.routerState.location,t=e.routerState.params,r=z(()=>e.preload&&ct(()=>{e.preload({params:t,location:n,intent:$r()||"initial"})}));return a(T,{get when(){return e.root},keyed:!0,get fallback(){return e.children},children:i=>a(i,{params:t,location:n,get data(){return r()},get children(){return e.children}})})}function kr(e){const n=[];let t;const r=z(ut(e.routerState.matches,(i,l,s)=>{let o=l&&i.length===l.length;const u=[];for(let c=0,m=i.length;c<m;c++){const S=l&&l[c],_=i[c];s&&S&&_.route.key===S.route.key?u[c]=s[c]:(o=!1,n[c]&&n[c](),rn($=>{n[c]=$,u[c]=Sr(e.routerState,u[c-1]||e.routerState.base,_t(()=>r()[c+1]),()=>{const y=e.routerState.matches();return y[c]??y[0]})}))}return n.splice(i.length).forEach(c=>c()),s&&o?s:(t=u[0],u)}));return _t(()=>r()&&t)()}const _t=e=>()=>a(T,{get when(){return e()},keyed:!0,children:n=>a(ht.Provider,{value:n,get children(){return n.outlet()}})});function yr([e,n],t,r){return[e,r?i=>n(r(i)):n]}function Dr(e){let n=!1;const t=i=>typeof i=="string"?{value:i}:i,r=yr(oe(t(e.get()),{equals:(i,l)=>i.value===l.value&&i.state===l.state}),void 0,i=>(!n&&e.set(i),Ze.registry&&!Ze.done&&(Ze.done=!0),i));return e.init&&Tt(e.init((i=e.get())=>{n=!0,r[1](t(i)),n=!1})),_r({signal:r,create:e.create,utils:e.utils})}function pr(e,n,t){return e.addEventListener(n,t),()=>e.removeEventListener(n,t)}function xr(e,n){const t=e&&document.getElementById(e);t?t.scrollIntoView():n&&window.scrollTo(0,0)}const Er=new Map;function wr(e=!0,n=!1,t="/_server",r){return i=>{const l=i.base.path(),s=i.navigatorFactory(i.base);let o,u;function c(b){return b.namespaceURI==="http://www.w3.org/2000/svg"}function m(b){if(b.defaultPrevented||b.button!==0||b.metaKey||b.altKey||b.ctrlKey||b.shiftKey)return;const k=b.composedPath().find(Y=>Y instanceof Node&&Y.nodeName.toUpperCase()==="A");if(!k||n&&!k.hasAttribute("link"))return;const D=c(k),p=D?k.href.baseVal:k.href;if((D?k.target.baseVal:k.target)||!p&&!k.hasAttribute("state"))return;const F=(k.getAttribute("rel")||"").split(/\s+/);if(k.hasAttribute("download")||F&&F.includes("external"))return;const I=D?new URL(p,document.baseURI):new URL(p);if(!(I.origin!==window.location.origin||l&&I.pathname&&!I.pathname.toLowerCase().startsWith(l.toLowerCase())))return[k,I]}function S(b){const k=m(b);if(!k)return;const[D,p]=k,U=i.parsePath(p.pathname+p.search+p.hash),F=D.getAttribute("state");b.preventDefault(),s(U,{resolve:!1,replace:D.hasAttribute("replace"),scroll:!D.hasAttribute("noscroll"),state:F?JSON.parse(F):void 0})}function _(b){const k=m(b);if(!k)return;const[D,p]=k;i.preloadRoute(p,D.getAttribute("preload")!=="false")}function $(b){clearTimeout(o);const k=m(b);if(!k)return u=null;const[D,p]=k;u!==D&&(o=setTimeout(()=>{i.preloadRoute(p,D.getAttribute("preload")!=="false"),u=D},20))}function y(b){if(b.defaultPrevented)return;let k=b.submitter&&b.submitter.hasAttribute("formaction")?b.submitter.getAttribute("formaction"):b.target.getAttribute("action");if(!k)return;if(!k.startsWith("https://action/")){const p=new URL(k,Pt);if(k=i.parsePath(p.pathname+p.search),!k.startsWith(t))return}if(b.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const D=Er.get(k);if(D){b.preventDefault();const p=new FormData(b.target,b.submitter);D.call({r:i,f:b.target},b.target.enctype==="multipart/form-data"?p:new URLSearchParams(p))}}dt(["click","submit"]),document.addEventListener("click",S),e&&(document.addEventListener("mousemove",$,{passive:!0}),document.addEventListener("focusin",_,{passive:!0}),document.addEventListener("touchstart",_,{passive:!0})),document.addEventListener("submit",y),Tt(()=>{document.removeEventListener("click",S),e&&(document.removeEventListener("mousemove",$),document.removeEventListener("focusin",_),document.removeEventListener("touchstart",_)),document.removeEventListener("submit",y)})}}function Ar(e){const n=e.replace(/^.*?#/,"");if(!n.startsWith("/")){const[,t="/"]=window.location.hash.split("#",2);return`${t}#${n}`}return n}function Tr(e){const n=()=>window.location.hash.slice(1),t=Ct();return Dr({get:n,set({value:r,replace:i,scroll:l,state:s}){i?window.history.replaceState(Qn(s),"","#"+r):window.history.pushState(s,"","#"+r);const o=r.indexOf("#"),u=o>=0?r.slice(o+1):"";xr(u,l),mt()},init:r=>pr(window,"hashchange",Xn(r,i=>!t.confirm(i&&i<0?i:n()))),create:wr(e.preload,e.explicitLinks,e.actionBase),utils:{go:r=>window.history.go(r),renderPath:r=>`#${r}`,parsePath:Ar,beforeLeave:t}})(e)}var Rr=f("<a>");function N(e){e=bt({inactiveClass:"inactive",activeClass:"active"},e);const[,n]=an(e,["href","state","class","activeClass","inactiveClass","end"]),t=ur(()=>e.href),r=cr(t),i=Nt(),l=z(()=>{const s=t();if(s===void 0)return[!1,!1];const o=_e(s.split(/[?#]/,1)[0]).toLowerCase(),u=decodeURI(_e(i.pathname).toLowerCase());return[e.end?o===u:u.startsWith(o+"/")||u===o,o===u]});return(()=>{var s=h(Rr);return ln(s,bt(n,{get href(){return r()||e.href},get state(){return JSON.stringify(e.state)},get classList(){return{...e.class&&{[e.class]:!0},[e.inactiveClass]:!l()[0],[e.activeClass]:l()[0],...n.classList}},link:"",get"aria-current"(){return l()[1]?"page":void 0}}),!1,!1),Ne(),s})()}var Ur=f("<div class=grid><!$><!/><div>"),Cr=f("<div class=boxLink>");function De(e){const n=e.type??"special";return(()=>{var t=h(Cr);return d(t,a(R,{type:n,get onClick(){return e.onClick},get children(){var r=h(Ur),i=r.firstChild,[l,s]=g(i.nextSibling),o=l.nextSibling;return d(r,a(q,{get icon(){return e.icon}}),l,s),d(o,()=>e.children),r}})),t})()}var Pr=f("<h3>Programm ansehen"),Fr=f("<p>Melde dich (und deine Freunde) für diverse Spielrunden an."),vt=f("<br>"),Lr=f("<h3>Programmpunkte erstellen"),Ir=f("<p>Erstelle und editiere Programmpunkte."),Yr=f("<h3>Helfen"),Hr=f("<p>Beim Kiosk und der Essensausgabe können wir immer ein paar helfende Hände gebrauchen."),Nr=f("<h3>Zusammenfassung"),Or=f("<p>Erhalte einen Überblick über dein gesamtes Programm."),Br=f("<div><!$><!/><!$><!/><br><!$><!/>");function jr(e){return(()=>{var n=h(Br),t=n.firstChild,[r,i]=g(t.nextSibling),l=r.nextSibling,[s,o]=g(l.nextSibling),u=s.nextSibling,c=u.nextSibling,[m,S]=g(c.nextSibling);return d(n,a(T,{get when(){return e.roles.includes("admin")},get children(){return[a(N,{get href(){return e.link("/programm")},class:"button-link",get children(){return a(De,{icon:"dice-d20",get children(){return[h(Pr),h(Fr)]}})}}),h(vt),a(N,{get href(){return e.link("/erstellen")},class:"button-link",get children(){return a(De,{icon:"grid-2-plus",get children(){return[h(Lr),h(Ir)]}})}}),h(vt)]}}),r,i),d(n,a(N,{get href(){return e.link("/helfen")},class:"button-link",get children(){return a(De,{icon:"hand-heart",get children(){return[h(Yr),h(Hr)]}})}}),s,o),d(n,a(N,{get href(){return e.link("/zusammenfassung")},class:"button-link",get children(){return a(De,{icon:"list",get children(){return[h(Nr),h(Or)]}})}}),m,S),n})()}var zr=f("<a class=header-anchor>");function Mr(e){return encodeURIComponent(e.replaceAll(/\s/g,"-").replaceAll("&","").replaceAll(/-{1,}/g,"-").toLocaleLowerCase())}function Fe(e){const n=Mr("title"in e?e.id??e.title:e.id);return a(sn,{get component(){return`h${e.level}`},id:n,get children(){var t=h(zr);return ve(t,"href",`#${n}`),d(t,(()=>{var r=ie(()=>"title"in e);return()=>r()?e.title:e.children})()),t}})}var Kr=f("<div style=display:grid;gap:1rem><!$><!/><!$><!/><!$><!/>"),Wr=f("<div><div style=margin-block-end:1.5rem></div><!$><!/>"),Vr=f("<p>Konflikte gefunden! Bitte stelle sicher, dass du nicht zeitlich überlappende Spielrunden eingetragen hast:"),Zr=f('<div style="display:grid;grid-template-columns:1fr max-content 1fr;gap:1rem;margin-block:0.5rem"><!$><!/><span style=color:var(--clr-warning-10);align-self:center;font-size:2rem></span><!$><!/>'),Jr=f("<div><!$><!/><div class=entries></div><div class=after-hour><div class=annotation>"),qr=f("<div><div class=annotation></div><div class=background>"),Gr=f("<div class=entry>");function jt(e){const n=e.exclude??[];return(()=>{var t=h(Kr),r=t.firstChild,[i,l]=g(r.nextSibling),s=i.nextSibling,[o,u]=g(s.nextSibling),c=o.nextSibling,[m,S]=g(c.nextSibling);return d(t,a(T,{get when(){return ie(()=>!n.includes("FRIDAY")&&e.openingHours.FRIDAY.open.from!==e.openingHours.FRIDAY.open.to)()&&(e.dayFilter===null||e.dayFilter==="FRIDAY")},get children(){return a(Xe,{get programEntries(){return e.programEntries.FRIDAY},get openingHoursOfDay(){return e.openingHours.FRIDAY},day:"FRIDAY",get conflictsAllowed(){return e.conflictsAllowed??!1},get columns(){return e.columns}})}}),i,l),d(t,a(T,{get when(){return ie(()=>!n.includes("SATURDAY"))()&&e.dayFilter===null||e.dayFilter==="SATURDAY"},get children(){return a(Xe,{get programEntries(){return e.programEntries.SATURDAY},get openingHoursOfDay(){return e.openingHours.SATURDAY},day:"SATURDAY",get conflictsAllowed(){return e.conflictsAllowed??!1},get columns(){return e.columns}})}}),o,u),d(t,a(T,{get when(){return ie(()=>!n.includes("SUNDAY"))()&&e.dayFilter===null||e.dayFilter==="SUNDAY"},get children(){return a(Xe,{get programEntries(){return e.programEntries.SUNDAY},get openingHoursOfDay(){return e.openingHours.SUNDAY},day:"SUNDAY",get conflictsAllowed(){return e.conflictsAllowed??!1},get columns(){return e.columns}})}}),m,S),t})()}function Xe(e){const n=e.conflictsAllowed?[]:Xr(e.programEntries);return(()=>{var t=h(Wr),r=t.firstChild,i=r.nextSibling,[l,s]=g(i.nextSibling);return d(r,a(Fe,{level:4,get title(){return P.days[e.day]}})),d(t,a(Ce,{get fallback(){return[a(R,{type:"danger",get children(){return h(Vr)}}),a(he,{each:n,children:([o,u])=>(()=>{var c=h(Zr),m=c.firstChild,[S,_]=g(m.nextSibling),$=S.nextSibling,y=$.nextSibling,[b,k]=g(y.nextSibling);return d(c,()=>o.component(),S,_),d($,a(q,{icon:"triangle-exclamation"})),d(c,()=>u.component(),b,k),c})()})]},get children(){return a(G,{get when(){return n.length===0},get children(){return a(Qr,{get programEntries(){return e.programEntries},get openingHoursOfDay(){return e.openingHoursOfDay},get day(){return e.day},get conflictsAllowed(){return e.conflictsAllowed},get columns(){return e.columns}})}})}}),l,s),t})()}function Qr(e){const n=Dn(e.openingHoursOfDay.open),t=e.openingHoursOfDay.breaks.flatMap(({from:s,to:o})=>{se(s<o,`Break is not valid, as from '${s}' is not smaller than to '${o}'`);const u=[s];let c=o-s;for(;c>1;)u.push(s+--c);return u}),r=(n[0]??0)-1,i=n.at(-1)??0,l=()=>{const s=["timetable"];return e.conflictsAllowed&&s.push(e.columns===2?"two-columns":e.columns===4?"four-columns":""),s.join(" ")};return(()=>{var s=h(Jr),o=s.firstChild,[u,c]=g(o.nextSibling),m=u.nextSibling,S=m.nextSibling,_=S.firstChild;return d(s,a(he,{each:n,children:$=>{const y=t.includes($);return(()=>{var b=h(qr),k=b.firstChild;return ge(b,`hour ${y?"break":""}`),d(k,$),B(D=>Je(b,kt({startTime:v.PlainTime.from({hour:$,minute:0}),endTime:v.PlainTime.from({hour:$,minute:0})},r,e.day,e.openingHoursOfDay),D)),b})()}}),u,c),d(m,a(he,{get each(){return e.programEntries},children:$=>(()=>{var y=h(Gr);return d(y,()=>$.component()),B(b=>Je(y,kt($.range,r,e.day,e.openingHoursOfDay),b)),y})()})),d(_,i+1),B($=>{var y=l(),b=`grid-row: 1 / ${i-r+1};`;return y!==$.e&&ge(s,$.e=y),$.t=Je(m,b,$.t),$},{e:void 0,t:void 0}),s})()}function kt(e,n,t,r){const{startTime:i,endTime:l}=e,s=i.hour-n,o=l.hour-n,u=r.open.to;return se(s>0,`[${JSON.stringify(e)}] Entry can't start at '${i.hour}'.`),se(o>0,`[${JSON.stringify(e)}] Entry can't end at '${l.hour}'.`),se(l.hour<=u,`[${JSON.stringify(e)}] Entry can't end at '${l.hour}'. Closing hour set to '${u}' on day '${t}'`),`grid-row: ${s} / ${o};`}function Xr(e){const n=[];return e.forEach((t,r)=>{e.slice(r+1).forEach(i=>{yn(t.range,i.range)&&n.push([t,i])})}),n}const me=v.PlainDate.from({year:2026,month:3,day:13}),E=v.PlainDate.from({year:2026,month:3,day:14}),A=v.PlainDate.from({year:2026,month:3,day:15}),yt={FRIDAY:me,SATURDAY:E,SUNDAY:A};function Ue(e){const{year:n,month:t,day:r}=e;return me.year===n&&me.month===t&&me.day===r?"FRIDAY":E.year===n&&E.month===t&&E.day===r?"SATURDAY":A.year===n&&A.month===t&&A.day===r?"SUNDAY":null}const zt={FRIDAY:{open:{from:0,to:0},breaks:[]},SATURDAY:{open:{from:10,to:24},breaks:[]},SUNDAY:{open:{from:10,to:18},breaks:[]}},be={kitchen:{title:"Küche",description:"Mahlzeit vorbereiten, unterstützen beim Kochen und Abwaschen."},service:{title:"Essensausgabe",description:""},cleaning:{title:"Reinigung",description:"Unterstützen beim Küche aufräumen und putzen."},kiosk:{title:"Kiosk",description:"Am Kiosk Getränke (inkl. Kaffee) und Snacks verkaufen."},flohmarkt:{title:"Flohmarkt",description:"Hilf uns beim Auf- oder Abbau des Flohmarkt und der Annahme oder Abgabe von Spielen."},checkout:{title:"Kiosk / Flohmarkt",description:"Am Kiosk Getränke und Snacks verkaufen oder am Flohmarkt die Kasse bedienen."},setup:{title:"Menü-Vorbereitung / Aufbau",description:"Hilf uns beim Zubereiten der Menüs und Aufstellen von Tischen, Stühle und der Bibliothek."},breakdown:{title:"Abbau",description:"Hilf uns beim Zusammenräumen von Tischen, Stühle, der Bibliothek und dem Flohmarkt."}},pe=[{uuid:"eb443040-0674-429c-a3ad-48634a323b76",count:4,kind:"setup",dateTime:{startDate:v.PlainDateTime.from({...me,hour:16,minute:0}),endDate:v.PlainDateTime.from({...me,hour:21,minute:0})}},{uuid:"91699a72-78d0-4dc9-bfe1-ece55b15db7d",count:1,kind:"flohmarkt",dateTime:{startDate:v.PlainDateTime.from({...me,hour:19,minute:0}),endDate:v.PlainDateTime.from({...me,hour:22,minute:0})}},{uuid:"6303bd52-cd10-4dd0-b760-b71ab971ad3b",count:4,kind:"flohmarkt",dateTime:{startDate:v.PlainDateTime.from({...E,hour:9,minute:0}),endDate:v.PlainDateTime.from({...E,hour:11,minute:0})}},{uuid:"9ebca7e9-f44a-4cc9-8961-73539f17d5d6",count:2,kind:"checkout",dateTime:{startDate:v.PlainDateTime.from({...E,hour:10,minute:0}),endDate:v.PlainDateTime.from({...E,hour:12,minute:0})}},{uuid:"804c379d-c747-4d7c-9f0c-a53f8548216e",count:2,kind:"checkout",dateTime:{startDate:v.PlainDateTime.from({...E,hour:11,minute:0}),endDate:v.PlainDateTime.from({...E,hour:13,minute:0})}},{uuid:"bfec6f59-14eb-45b9-a21c-d33ee2205b64",count:2,kind:"checkout",dateTime:{startDate:v.PlainDateTime.from({...E,hour:12,minute:0}),endDate:v.PlainDateTime.from({...E,hour:14,minute:0})}},{uuid:"8db23dfd-616e-4f1d-9a07-deb6e519d35a",count:2,kind:"checkout",dateTime:{startDate:v.PlainDateTime.from({...E,hour:13,minute:0}),endDate:v.PlainDateTime.from({...E,hour:15,minute:0})}},{uuid:"477a1c27-b660-4221-9be0-de34de910f4b",count:2,kind:"checkout",dateTime:{startDate:v.PlainDateTime.from({...E,hour:14,minute:0}),endDate:v.PlainDateTime.from({...E,hour:16,minute:0})}},{uuid:"516de07b-bc06-45b5-94f6-be5de186d4d5b",count:2,kind:"checkout",dateTime:{startDate:v.PlainDateTime.from({...E,hour:15,minute:0}),endDate:v.PlainDateTime.from({...E,hour:17,minute:0})}},{uuid:"490c799f-ced5-461e-a483-ad6a90df221b",count:2,kind:"checkout",dateTime:{startDate:v.PlainDateTime.from({...E,hour:16,minute:0}),endDate:v.PlainDateTime.from({...E,hour:18,minute:0})}},{uuid:"c9f79536-225a-41ee-93e6-ef1741b511f7",count:2,kind:"checkout",dateTime:{startDate:v.PlainDateTime.from({...E,hour:17,minute:0}),endDate:v.PlainDateTime.from({...E,hour:19,minute:0})}},{uuid:"c6c3f0f7-04c6-4819-95e6-aa8476e4392c",count:2,kind:"checkout",dateTime:{startDate:v.PlainDateTime.from({...E,hour:18,minute:0}),endDate:v.PlainDateTime.from({...E,hour:20,minute:0})}},{uuid:"9748b1e6-1712-449b-8dda-eb44f172071e",count:2,kind:"checkout",dateTime:{startDate:v.PlainDateTime.from({...E,hour:19,minute:0}),endDate:v.PlainDateTime.from({...E,hour:21,minute:0})}},{uuid:"04f724ea-4a78-4363-ba0a-75a71ab22598",count:2,kind:"checkout",dateTime:{startDate:v.PlainDateTime.from({...E,hour:20,minute:0}),endDate:v.PlainDateTime.from({...E,hour:22,minute:0})}},{uuid:"62d5af53-5e3e-4d59-b574-261e33b0a872",count:2,kind:"checkout",dateTime:{startDate:v.PlainDateTime.from({...E,hour:21,minute:0}),endDate:v.PlainDateTime.from({...E,hour:23,minute:0})}},{uuid:"98fef052-02ba-4a33-ba2a-13ccad6834c7",count:2,kind:"checkout",dateTime:{startDate:v.PlainDateTime.from({...E,hour:22,minute:0}),endDate:v.PlainDateTime.from({...A,hour:0,minute:0})}},{uuid:"e4700acc-7192-4063-b03d-cb4009cbe6f2",count:2,kind:"checkout",dateTime:{startDate:v.PlainDateTime.from({...E,hour:23,minute:0}),endDate:v.PlainDateTime.from({...A,hour:0,minute:0})}},{uuid:"d30340e1-e49f-44aa-bf1b-d90839b0f1aa",count:2,kind:"checkout",dateTime:{startDate:v.PlainDateTime.from({...A,hour:10,minute:0}),endDate:v.PlainDateTime.from({...A,hour:11,minute:0})}},{uuid:"e1a9b252-628c-4c01-b8e1-e1964b51e646",count:2,kind:"checkout",dateTime:{startDate:v.PlainDateTime.from({...A,hour:10,minute:0}),endDate:v.PlainDateTime.from({...A,hour:12,minute:0})}},{uuid:"873a1308-57bc-46bc-bdfc-a82213364c77",count:2,kind:"checkout",dateTime:{startDate:v.PlainDateTime.from({...A,hour:11,minute:0}),endDate:v.PlainDateTime.from({...A,hour:13,minute:0})}},{uuid:"2e9864a9-0208-4e56-b232-dcd258e31545",count:2,kind:"checkout",dateTime:{startDate:v.PlainDateTime.from({...A,hour:12,minute:0}),endDate:v.PlainDateTime.from({...A,hour:14,minute:0})}},{uuid:"caef5fea-8458-4b65-b699-9c4e5ee6589d",count:2,kind:"checkout",dateTime:{startDate:v.PlainDateTime.from({...A,hour:13,minute:0}),endDate:v.PlainDateTime.from({...A,hour:15,minute:0})}},{uuid:"0da24180-0269-4206-adf7-4b9faeefa091",count:2,kind:"checkout",dateTime:{startDate:v.PlainDateTime.from({...A,hour:14,minute:0}),endDate:v.PlainDateTime.from({...A,hour:16,minute:0})}},{uuid:"6c0430dd-9968-456d-bf68-d893040f73fa",count:2,kind:"checkout",dateTime:{startDate:v.PlainDateTime.from({...A,hour:15,minute:0}),endDate:v.PlainDateTime.from({...A,hour:17,minute:0})}},{uuid:"40eaef18-d6a0-46e8-b3e5-a98be09cef57",count:2,kind:"checkout",dateTime:{startDate:v.PlainDateTime.from({...A,hour:16,minute:0}),endDate:v.PlainDateTime.from({...A,hour:18,minute:0})}},{uuid:"3c6468ad-fdb8-432d-92ce-a52fae471206",count:2,kind:"checkout",dateTime:{startDate:v.PlainDateTime.from({...A,hour:17,minute:0}),endDate:v.PlainDateTime.from({...A,hour:19,minute:0})}},{uuid:"b9da7047-c359-49fa-b558-53207ac5255a",count:2,kind:"flohmarkt",dateTime:{startDate:v.PlainDateTime.from({...A,hour:17,minute:0}),endDate:v.PlainDateTime.from({...A,hour:19,minute:0})}},{uuid:"c0e1d54c-0832-4147-9054-082208dab2f2",count:4,kind:"breakdown",dateTime:{startDate:v.PlainDateTime.from({...A,hour:17,minute:0}),endDate:v.PlainDateTime.from({...A,hour:20,minute:0})}}],ei=pe.map(e=>e.uuid),Dt=Object.entries(Object.groupBy(ei,e=>e)).reduce((e,[n,t])=>[...e,{uuid:n,count:t?.length??0}],[]).filter(({count:e})=>e!==1);if(Dt.length>0)throw Error(`duplicate uuids found:  ${Dt.map(({uuid:e})=>e).join(", ")}`);function ti(e){return pe.find(n=>n.uuid===e)??null}const He={FRIDAY:{open:{from:16,to:22},breaks:[{from:16,to:22}]},SATURDAY:{open:{from:9,to:24},breaks:[{from:9,to:10}]},SUNDAY:{open:{from:10,to:20},breaks:[{from:18,to:20}]}};var ni=f("<span>");function lt(e){const n=()=>{const t=["chip"];return t.push(e.kind??"gray"),e.inverted&&t.push("inverted"),e.size==="small"&&t.push("small"),t.join(" ")};return(()=>{var t=h(ni);return d(t,()=>e.children),B(r=>{var i=n(),l=e.title;return i!==r.e&&ge(t,r.e=i),l!==r.t&&ve(t,"title",r.t=l),r},{e:void 0,t:void 0}),t})()}const ri=Te(O({})),ii=Jt(j(),xe()),ai=O({programEntries:ri,reservations:ii});async function li(){const e=await bn();if(e.kind==="FAILURE")return console.error("Unexpected error. Maybe network, maybe server error."),{kind:"FAILURE"};const n=ai.safeParse(e.data);return n.success?{kind:"SUCCESS",data:n.data}:{kind:"FAILURE"}}var si=f("<div style=display:flex;flex-wrap:wrap;gap:1rem;justify-content:space-between><h5 style=margin:0>Filter"),oi=f("<div style=display:flex;flex-wrap:wrap;gap:0.5rem><!$><!/><!$><!/><!$><!/><!$><!/>");function Mt(e){const n=e.exclude??[];return a(R,{get children(){return[h(si),(()=>{var t=h(oi),r=t.firstChild,[i,l]=g(r.nextSibling),s=i.nextSibling,[o,u]=g(s.nextSibling),c=o.nextSibling,[m,S]=g(c.nextSibling),_=m.nextSibling,[$,y]=g(_.nextSibling);return d(t,a(re,{label:"Alle Tage",get kind(){return e.dayFilter()===null?"success":"gray"},onClick:()=>e.setDayFilter(null)}),i,l),d(t,a(T,{get when(){return!n.includes("FRIDAY")},get children(){return a(re,{label:"Freitag",get kind(){return e.dayFilter()==="FRIDAY"?"success":"gray"},onClick:()=>e.setDayFilter("FRIDAY")})}}),o,u),d(t,a(T,{get when(){return!n.includes("SATURDAY")},get children(){return a(re,{label:"Samstag",get kind(){return e.dayFilter()==="SATURDAY"?"success":"gray"},onClick:()=>e.setDayFilter("SATURDAY")})}}),m,S),d(t,a(T,{get when(){return!n.includes("SUNDAY")},get children(){return a(re,{label:"Sonntag",get kind(){return e.dayFilter()==="SUNDAY"?"success":"gray"},onClick:()=>e.setDayFilter("SUNDAY")})}}),$,y),t})()]}})}var ui=f("<p>Beim Kiosk und der Essensausgabe können wir immer ein paar helfende Hände gebrauchen. Wenn du bereit bist zu helfen, klicke in der jeweiligen Stunde auf das Handsymbol <!$><!/>."),Ie=f("<br>"),ci=f("<h4>Zur Anmeldung für Erklärbären"),di=f("<div class=dynamic-columns><p>Eines der Hauptziele der Luzerner Spieltage ist es, dass die Besucher/-innen noch nicht gespielte Spiele ausprobieren können. Dazu unterstützen uns jedes Jahr Freiwillige und erklären die ihnen bekannten Spiele aus der Spiele-Bibliothek. Diese Erklärbären sind durch ihr rotes T-Shirt erkennbar.</p><!$><!/>"),mi=f("<p>Plan konnte nicht geladen werden."),hi=f("<div><!$><!/><!$><!/><h5></h5><p class=duration><em><!$><!/> / <!$><!/>"),gi=f("<div><!$><!/><!$><!/><h5></h5><p class=duration><span>von <!$><!/>&nbsp;bis <!$><!/>&nbsp;Uhr | </span><em><!$><!/>&nbsp;/&nbsp;<!$><!/>");function fi(e){const[n,t]=oe(null);return[(()=>{var r=h(ui),i=r.firstChild,l=i.nextSibling,[s,o]=g(l.nextSibling);return s.nextSibling,d(r,a(q,{icon:"hand-heart"}),s,o),r})(),h(Ie),a(Fe,{level:3,title:"Erklärbären"}),h(Ie),(()=>{var r=h(di),i=r.firstChild,l=i.nextSibling,[s,o]=g(l.nextSibling);return d(r,a(N,{get href(){return e.link("/erklaerbaer")},class:"button-link",style:"margin-block-end: 1rem; padding: 0;",get children(){return a(De,{icon:"forward",type:"success",get children(){return h(ci)}})}}),s,o),r})(),h(Ie),a(Mt,{dayFilter:n,setDayFilter:t}),h(Ie),a(Me,{get fallback(){return a(R,{get children(){return P.loading.program}})},get children(){return a(T,{get when(){return e.publicResource()},get fallback(){return a(R,{type:"danger",get children(){return P.error.help}})},children:r=>a(T,{get when(){return r().kind==="SUCCESS"},get fallback(){return a(R,{type:"danger",get children(){return h(mi)}})},get children(){return a($i,{get myHelpReservations(){return e.store.helping},get allReservations(){return r().data.reservations},get isEditable(){return e.isEditable},get link(){return e.link},get dayFilter(){return n()}})}})})}})]}function $i(e){const n=()=>Object.keys(e.allReservations),t=()=>({FRIDAY:et({day:"FRIDAY",entries:pe,alreadyReservedUuids:n(),myReservations:e.myHelpReservations,link:e.link}),SATURDAY:et({day:"SATURDAY",entries:pe,alreadyReservedUuids:n(),myReservations:e.myHelpReservations,link:e.link}),SUNDAY:et({day:"SUNDAY",entries:pe,alreadyReservedUuids:n(),myReservations:e.myHelpReservations,link:e.link})});return a(jt,{get programEntries(){return t()},openingHours:He,conflictsAllowed:!0,columns:4,get dayFilter(){return e.dayFilter}})}function et(e){const n=Ht(),t=[],r=bi(e.alreadyReservedUuids);return Object.groupBy(e.entries,l=>Ue(l.dateTime.startDate)??"empty")[e.day]?.forEach(l=>{const s=()=>l.count-(r[l.uuid]??0),o=()=>e.myReservations.filter(m=>"helpEntryUuid"in m&&m.helpEntryUuid===l.uuid).length>0,u=()=>{const m=["box-simple","timeview-entry"];return o()&&m.push("success"),m.join(" ")},c={startTime:v.PlainTime.from({hour:l.dateTime.startDate.hour,minute:l.dateTime.startDate.minute}),endTime:l.dateTime.startDate.day!==l.dateTime.endDate.day?v.PlainTime.from({hour:l.dateTime.endDate.hour+24,minute:l.dateTime.endDate.minute}):v.PlainTime.from({hour:l.dateTime.endDate.hour,minute:l.dateTime.endDate.minute})};s()===0?t.push({range:c,component:()=>(()=>{var m=h(hi),S=m.firstChild,[_,$]=g(S.nextSibling),y=_.nextSibling,[b,k]=g(y.nextSibling),D=b.nextSibling,p=D.nextSibling,U=p.firstChild,F=U.firstChild,[I,Y]=g(F.nextSibling),Z=I.nextSibling,M=Z.nextSibling,[Q,J]=g(M.nextSibling);return m.$$click=()=>n(e.link(`/helfen/${l.uuid}`)),d(m,a(lt,{title:"Helfer:innen gesucht",get inverted(){return o()},size:"small",children:"HL"}),_,$),d(m,a(T,{get when(){return o()},get children(){return a(Ee,{icon:"hand-heart",kind:"ghost",onClick:()=>n(e.link(`/helfen/${l.uuid}`)),title:"Helfen"})}}),b,k),d(D,()=>be[l.kind].title),d(U,s,I,Y),d(U,()=>l.count,Q,J),B(K=>{var W=u(),ce=be[l.kind].title;return W!==K.e&&ge(m,K.e=W),ce!==K.t&&ve(D,"title",K.t=ce),K},{e:void 0,t:void 0}),Ne(),m})()}):t.push({range:c,component:()=>(()=>{var m=h(gi),S=m.firstChild,[_,$]=g(S.nextSibling),y=_.nextSibling,[b,k]=g(y.nextSibling),D=b.nextSibling,p=D.nextSibling,U=p.firstChild,F=U.firstChild,I=F.nextSibling,[Y,Z]=g(I.nextSibling),M=Y.nextSibling,Q=M.nextSibling,[J,K]=g(Q.nextSibling);J.nextSibling;var W=U.nextSibling,ce=W.firstChild,[x,w]=g(ce.nextSibling),H=x.nextSibling,X=H.nextSibling,[fe,ee]=g(X.nextSibling);return m.$$click=()=>n(e.link(`/helfen/${l.uuid}`)),d(m,a(lt,{title:"Helfer:innen gesucht",get inverted(){return o()},size:"small",children:"HL"}),_,$),d(m,a(Ee,{icon:"hand-heart",kind:"ghost",onClick:()=>n(e.link(`/helfen/${l.uuid}`)),title:"Helfen"}),b,k),d(D,()=>be[l.kind].title),d(U,()=>c.startTime.hour,Y,Z),d(U,()=>c.endTime.hour,J,K),d(W,()=>l.count-s(),x,w),d(W,()=>l.count,fe,ee),B(L=>{var te=u(),C=be[l.kind].title;return te!==L.e&&ge(m,L.e=te),C!==L.t&&ve(D,"title",L.t=C),L},{e:void 0,t:void 0}),Ne(),m})()})}),t}function bi(e){const n=Object.groupBy(e,r=>r),t={};for(const r of e)t[r]=n[r]?.length??0;return t}dt(["click"]);var Si=f("<dialog closedby=any><!$><!/><!$><!/><!$><!/>"),_i=f("<h4>");function vi(e=!1){return{open:e}}function ki(e){let n;const[t,r]=V(e.store);on(()=>{t.open?n.showModal():n.close()});function i(){r({open:!1}),e.onClose?.()}const l=()=>{const s=[];return e.type!==void 0&&s.push(e.type),e.size!==void 0&&s.push(e.size),e.onClose!==void 0&&s.push("dialog-with-close"),s};return(()=>{var s=h(Si),o=s.firstChild,[u,c]=g(o.nextSibling),m=u.nextSibling,[S,_]=g(m.nextSibling),$=S.nextSibling,[y,b]=g($.nextSibling);s.addEventListener("close",i);var k=n;return typeof k=="function"?un(k,s):n=s,d(s,a(T,{get when(){return e.onClose},get children(){return a(Ee,{onClick:i,icon:"circle-xmark",kind:"gray"})}}),u,c),d(s,a(T,{get when(){return e.title},children:D=>(()=>{var p=h(_i);return d(p,D),p})()}),S,_),d(s,()=>e.children,y,b),B(()=>ge(s,l().join(" "))),s})()}var yi=f("<p>");function tt(e){const[n,t]=V(e.store),r=e.showErrors==="ALWAYS",i=()=>r||n.isDirty?e.errors??[]:[];return[a(qt,{get label(){return e.label},get name(){return e.name},get value(){return n.value},onValueUpdate:l=>{t("value",l),e.onUpdate?.()},onBlur:()=>t("isDirty",!0),get type(){return e.type},get required(){return e.required},get isHoneypot(){return e.isHoneypot},get disabled(){return e.disabled}}),a(T,{get when(){return i().length>0},get children(){return a(R,{type:"danger",get children(){return a(he,{get each(){return i()},children:l=>(()=>{var s=h(yi);return d(s,l),s})()})}})}})]}j().transform(e=>({value:e,isDirty:!1}));function nt(e){return{value:e,isDirty:!1}}xe().transform(e=>({value:e,isDirty:!1}));var Di=f("<label class=input-checkbox><input type=checkbox><div><!$><!/><!$><!/>"),pi=f("<div class=checkbox-description>");function xi(e){return(()=>{var n=h(Di),t=n.firstChild,r=t.nextSibling,i=r.firstChild,[l,s]=g(i.nextSibling),o=l.nextSibling,[u,c]=g(o.nextSibling);return t.addEventListener("change",m=>e.onValueUpdate(m.target.checked)),d(r,()=>e.label,l,s),d(r,a(T,{get when(){return e.description},children:m=>(()=>{var S=h(pi);return d(S,m),S})()}),u,c),B(m=>{var S=e.name,_=e.disabled===!0;return S!==m.e&&ve(t,"name",m.e=S),_!==m.t&&Se(t,"disabled",m.t=_),m},{e:void 0,t:void 0}),B(()=>Se(t,"value",e.value)),B(()=>Se(t,"checked",e.checked)),n})()}var Ei=f("<div><!$><!/><br><!$><!/><br><!$><!/>"),wi=f("<h5>"),Ai=f("<p class=duration>von <!$><!/> bis <!$><!/> Uhr <em><small>(<!$><!/>)"),Ti=f("<div>");function Ri(e){const[n,t]=oe(null),r=Ui(e.save,e.publicState,e.link),i=Pi(r),l=Fi(r);return(()=>{var s=h(Ei),o=s.firstChild,[u,c]=g(o.nextSibling),m=u.nextSibling,S=m.nextSibling,[_,$]=g(S.nextSibling),y=_.nextSibling,b=y.nextSibling,[k,D]=g(b.nextSibling);return d(s,a(Fe,{level:3,title:"Mein Programm"}),u,c),d(s,a(Mt,{dayFilter:n,setDayFilter:t,exclude:i}),_,$),d(s,a(jt,{get dayFilter(){return n()},programEntries:r,openingHours:l,conflictsAllowed:!1,columns:1,exclude:i}),k,D),s})()}function Ui(e,n,t){const{helping:r}=e,i={FRIDAY:[],SATURDAY:[],SUNDAY:[]},l=r.map(o=>{if(o.kind==="ERKLAERBAER"){const c={startDate:v.PlainDateTime.from({...yt[o.slot.day],hour:o.slot.from,minute:0}),endDate:v.PlainDateTime.from({...yt[o.slot.day],hour:o.slot.to,minute:0})};return{...o,meta:{dateTime:c}}}const u=pe.find(c=>c.uuid===o.helpEntryUuid);return se(u!==void 0,`Help UUID is invalid: '${o.helpEntryUuid}'`),{...o,meta:u}}),s=Object.groupBy(l,o=>{const{startDate:u,endDate:c}=o.meta.dateTime;return`${u.year}-${u.month}-${u.day}-${u.hour}-${u.minute}--${c.year}-${c.month}-${c.day}-${c.hour}-${c.minute}`});return Object.values(s).forEach(o=>{if(o===void 0)return;const u=o[0];if(u===void 0)return;let c=!0;const m=o.map(b=>b.kind==="ERKLAERBAER"?["Erklärbär","ME"]:b.kind==="SELF"?[be[b.meta.kind].title,"ME"]:(c=!1,[be[b.meta.kind].title,b.name])),S=c?m.map(([b])=>b).join(", "):m.map(([b,k])=>k==="ME"?b:`${b} (${k})`).join("; "),_=Ue(u.meta.dateTime.startDate);se(_!==null,`Date '${JSON.stringify(u.meta.dateTime.startDate)}' is not a valid event date.`);const $={startTime:v.PlainTime.from({...u.meta.dateTime.startDate}),endTime:v.PlainTime.from({...u.meta.dateTime.endDate})},y=u.kind==="ERKLAERBAER"?"/erklaerbaer":`/helfen/${u.helpEntryUuid}`;i[_].push({range:$,component:()=>a(Ci,{title:S,range:$,kind:"help",path:y,link:t})})}),l.forEach(o=>{switch(o.kind){case"SELF":{const u=Ue(o.meta.dateTime.startDate);se(u!==null,`Date '${JSON.stringify(o.meta.dateTime.startDate)}' is not a valid event date.`);break}case"FRIEND":{const u=Ue(o.meta.dateTime.startDate);se(u!==null,`Date '${JSON.stringify(o.meta.dateTime.startDate)}' is not a valid event date.`);break}}}),i}function Ci(e){const n={"master-draft":{label:"SL",help:"Spielleitung",link:{icon:"pencil",label:"Spielrunde bearbeiten"}},master:{label:"SL",help:"Spielleitung",link:{icon:"pencil",label:"Spielrunde bearbeiten"}},play:{label:"TN",help:"Teilnehmer:in",link:{icon:"link",label:"Zur Spielrunde"}},help:{label:"HL",help:"Helfen",link:{icon:"link",label:"Zum Eintrag"}}}[e.kind],t=()=>{const r=["timeview-entry","box-simple"];return e.kind==="master-draft"&&r.push("gray"),e.kind==="master"&&r.push("special"),e.kind==="play"&&r.push("danger"),r.join(" ")};return(()=>{var r=h(Ti);return d(r,a(N,{get href(){return e.link(e.path)},class:"button-link",style:"display: contents;",get children(){return[a(lt,{get title(){return n.help},get inverted(){return e.kind!=="help"},size:"small",get children(){return n.label}}),a(Ee,{get icon(){return n.link.icon},kind:"ghost",get title(){return n.link.label}}),(()=>{var i=h(wi);return d(i,()=>e.title),B(()=>ve(i,"title",e.title)),i})(),(()=>{var i=h(Ai),l=i.firstChild,s=l.nextSibling,[o,u]=g(s.nextSibling),c=o.nextSibling,m=c.nextSibling,[S,_]=g(m.nextSibling),$=S.nextSibling,y=$.nextSibling,b=y.firstChild,k=b.firstChild,D=k.nextSibling,[p,U]=g(D.nextSibling);return p.nextSibling,d(i,()=>Be(e.range.startTime),o,u),d(i,()=>Be(e.range.endTime),S,_),d(b,()=>pn(e.range.startTime,e.range.endTime),p,U),i})()]}})),B(()=>ge(r,t())),r})()}function Pi(e){const n=[];return e.FRIDAY.length===0&&n.push("FRIDAY"),e.SATURDAY.length===0&&n.push("SATURDAY"),e.SUNDAY.length===0&&n.push("SUNDAY"),n.length===3?["FRIDAY"]:n}function Fi(e){const n=zt;e.FRIDAY.length>0&&(n.FRIDAY=He.FRIDAY);let t=!1;e.SATURDAY.forEach(i=>{i.range.startTime.hour<n.SATURDAY.open.from&&(t=!0),i.range.endTime.hour>n.SATURDAY.open.to&&(t=!0)}),t&&(n.SATURDAY=He.SATURDAY);let r=!1;return e.SUNDAY.forEach(i=>{i.range.startTime.hour<n.SUNDAY.open.from&&(r=!0),i.range.endTime.hour>n.SUNDAY.open.to&&(r=!0)}),r&&(n.SUNDAY=He.SUNDAY),n}var Li=f("<div style=display:grid;gap:1rem><!$><!/><!$><!/><!$><!/>"),Ii=f("<div>"),Yi=f("<div style=display:grid;gap:1rem><h3>Meine Kontaktdaten</h3><p><strong>Name:</strong> <!$><!/></p><p><strong>E-Mail:</strong> <!$><!/></p><p><strong>Handynummer:</strong> <!$><!/></p><!$><!/>"),Hi=f("<form novalidate><!$><!/><!$><!/><!$><!/><!$><!/>");function Ni(e){const[n,t]=V(e.store);return(()=>{var r=h(Li),i=r.firstChild,[l,s]=g(i.nextSibling),o=l.nextSibling,[u,c]=g(o.nextSibling),m=u.nextSibling,[S,_]=g(m.nextSibling);return d(r,a(Oi,{get store(){return e.store.contact},get isEditable(){return e.isEditable}}),l,s),d(r,a(xi,{label:"Schickt mir bitte E-Mails, wenn neue Programmpunkte veröffentlicht werden.",get checked(){return n.config.wantsUpdates},name:"wantsUpdates",value:"wantsUpdates",onValueUpdate:$=>{t("config","wantsUpdates",$)}}),u,c),d(r,a(Me,{get fallback(){return a(R,{get children(){return P.loading.program}})},get children(){return a(T,{get when(){return e.publicResource()},get fallback(){return a(R,{type:"danger",get children(){return P.error.help}})},children:$=>a(T,{get when(){return $().kind==="SUCCESS"},get fallback(){return a(R,{type:"danger",get children(){return P.loading.program}})},get children(){return a(Ri,{get save(){return e.store},get publicState(){return $().data},get link(){return e.link}})}})})}}),S,_),r})()}function Oi(e){const[n,t]=V(e.store),[r,i]=V(vi());return a(R,{get children(){return[a(T,{get when(){return r.open},get children(){return a(Bi,{dialogStore:r,get currentState(){return e.store},updateCurrentState:t})}}),(()=>{var l=h(Yi),s=l.firstChild,o=s.nextSibling,u=o.firstChild,c=u.nextSibling,m=c.nextSibling,[S,_]=g(m.nextSibling),$=o.nextSibling,y=$.firstChild,b=y.nextSibling,k=b.nextSibling,[D,p]=g(k.nextSibling),U=$.nextSibling,F=U.firstChild,I=F.nextSibling,Y=I.nextSibling,[Z,M]=g(Y.nextSibling),Q=U.nextSibling,[J,K]=g(Q.nextSibling);return d(o,()=>e.store.name,S,_),d($,()=>e.store.email,D,p),d(U,()=>e.store.mobile,Z,M),d(l,a(T,{get when(){return e.isEditable},get children(){var W=h(Ii);return d(W,a(le,{icon:"pencil",label:"Kontaktdaten editieren",onClick:()=>i("open",!0)})),W}}),J,K),l})()]}})}function Bi(e){const[n]=mr(),[t]=V({name:nt(e.currentState.name),email:nt(e.currentState.email),mobile:nt(e.currentState.mobile)}),[r,i]=V({kind:"IDLE",isDuplicate:!1}),l=z(()=>{const u={name:[],email:[]};return t.name.value.trim().length===0&&u.name.push(P.mandatoryField),t.email.value.trim().length===0?u.email.push(P.mandatoryField):t.email.value.includes("@")||u.email.push(P.invalidEmail),r.kind==="IDLE"&&r.isDuplicate&&u.email.push("Diese E-Mail wird bereits verwendet."),{...u,hasErrors:u.name.length+u.email.length>0}}),[s,o]=V(e.dialogStore);return a(ki,{get store(){return e.dialogStore},title:"Kontaktdaten editieren",onClose:()=>{},size:"medium",get children(){var u=h(Hi),c=u.firstChild,[m,S]=g(c.nextSibling),_=m.nextSibling,[$,y]=g(_.nextSibling),b=$.nextSibling,[k,D]=g(b.nextSibling),p=k.nextSibling,[U,F]=g(p.nextSibling);return d(u,a(tt,{get store(){return t.name},label:"Name",name:"name",showErrors:"ON_BLUR",get errors(){return l().name}}),m,S),d(u,a(tt,{get store(){return t.email},label:"E-Mail",name:"email",showErrors:"ALWAYS",get errors(){return l().email},onUpdate:()=>i({kind:"IDLE",isDuplicate:!1})}),$,y),d(u,a(tt,{get store(){return t.mobile},label:"Handynummer",name:"mobile"}),k,D),d(u,a(re,{label:"Speichern",get disabled(){return l().hasErrors||r.kind==="CHECKING"},onClick:async()=>{if(!l().hasErrors){i({kind:"CHECKING"});const I=n.secret,Y=await fetch(ze(`/lst26/check-email?email=${t.email.value}&secret=${I}`));if(!Y.ok){i({kind:"IDLE",isDuplicate:!0});return}const Z=await Y.json(),M=ji.safeParse(Z);if(!M.success){i({kind:"IDLE",isDuplicate:!0});return}if(M.data.kind==="FAILURE"){i({kind:"IDLE",isDuplicate:!0});return}i({kind:"IDLE",isDuplicate:!1}),e.updateCurrentState({name:t.name.value,email:t.email.value,mobile:t.mobile.value}),o("open",!1)}}}),U,F),u}})}const ji=st([O({kind:ue("SUCCESS")}),O({kind:ue("FAILURE")})]);var zi=f("<div class=tooltip-wrapper><div class=tooltip></div><!$><!/>");function Ae(e){return(()=>{var n=h(zi),t=n.firstChild,r=t.nextSibling,[i,l]=g(r.nextSibling);return d(t,()=>e.tooltip),d(n,()=>e.children,i,l),n})()}var Mi=f("<div class=quickmenu-wrapper><div class=quickmenu><!$><!/><!$><!/><!$><!/><!$><!/>"),Ki=f('<div class="quickmenu extended"><!$><!/><!$><!/><!$><!/><!$><!/>'),Wi=f("<div style=margin-block-start:1rem;display:flex;gap:0.5rem;align-items:center><!$><!/><em>Zuletzt gespeichert um: <!$><!/> Uhr"),Vi=f("<div style=margin-block-start:1rem;display:flex;gap:0.5rem;align-items:center><!$><!/><em>Am Speichern..."),Zi=f("<div style=margin-block-start:1rem;display:flex;gap:0.5rem;align-items:center><!$><!/><em>Speichern war nicht möglich!");function Ji(e){return(()=>{var n=h(Mi),t=n.firstChild,r=t.firstChild,[i,l]=g(r.nextSibling),s=i.nextSibling,[o,u]=g(s.nextSibling),c=o.nextSibling,[m,S]=g(c.nextSibling),_=m.nextSibling,[$,y]=g(_.nextSibling);return d(t,a(Ae,{tooltip:"Zur Übersicht",get children(){return a(N,{get href(){return e.link(e.parentPath)},class:"button-link",get children(){return a(re,{get label(){return a(q,{icon:"backward"})}})}})}}),i,l),d(t,a(T,{get when(){return e.roles.includes("admin")},get children(){return[a(Ae,{tooltip:"Zum Programm",get children(){return a(N,{get href(){return e.link("/programm")},class:"button-link",get children(){return a(re,{get label(){return a(q,{icon:"dice-d20"})}})}})}}),a(Ae,{tooltip:"Zu deinen Programmpunkten",get children(){return a(N,{get href(){return e.link("/erstellen")},class:"button-link",get children(){return a(re,{get label(){return a(q,{icon:"grid-2-plus"})}})}})}})]}}),o,u),d(t,a(Ae,{tooltip:"Zum Helferplan",get children(){return a(N,{get href(){return e.link("/helfen")},class:"button-link",get children(){return a(re,{get label(){return a(q,{icon:"hand-heart"})}})}})}}),m,S),d(t,a(Ae,{tooltip:"Zur Zusammenfassung",get children(){return a(N,{get href(){return e.link("/zusammenfassung")},class:"button-link",get children(){return a(re,{get label(){return a(q,{icon:"list"})}})}})}}),$,y),n})()}function qi(e){return[a(R,{type:"gray",get children(){var n=h(Ki),t=n.firstChild,[r,i]=g(t.nextSibling),l=r.nextSibling,[s,o]=g(l.nextSibling),u=s.nextSibling,[c,m]=g(u.nextSibling),S=c.nextSibling,[_,$]=g(S.nextSibling);return d(n,a(N,{get href(){return e.link(e.parentPath)},class:"button-link",get children(){return a(le,{icon:"backward",label:"Zur Übersicht"})}}),r,i),d(n,a(T,{get when(){return e.roles.includes("admin")},get children(){return[a(N,{get href(){return e.link("/programm")},class:"button-link",get children(){return a(le,{icon:"dice-d20",label:"Zum Programm"})}}),a(N,{get href(){return e.link("/erstellen")},class:"button-link",get children(){return a(le,{icon:"grid-2-plus",label:"Zu deinen Programmpunkten"})}})]}}),s,o),d(n,a(N,{get href(){return e.link("/helfen")},class:"button-link",get children(){return a(le,{icon:"hand-heart",label:"Zum Helferplan"})}}),c,m),d(n,a(N,{get href(){return e.link("/zusammenfassung")},class:"button-link",get children(){return a(le,{icon:"list",label:"Zur Zusammenfassung"})}}),_,$),n}}),a(Gi,{get saveState(){return e.saveState},get lastSaved(){return e.lastSaved}})]}function Gi(e){return a(Ce,{get children(){return[a(G,{get when(){return e.saveState==="IDLE"},get children(){var n=h(Wi),t=n.firstChild,[r,i]=g(t.nextSibling),l=r.nextSibling,s=l.firstChild,o=s.nextSibling,[u,c]=g(o.nextSibling);return u.nextSibling,d(n,a(q,{icon:"circle-check"}),r,i),d(l,()=>xt(e.lastSaved),u,c),n}}),a(G,{get when(){return e.saveState==="SAVING"},get children(){var n=h(Vi),t=n.firstChild,[r,i]=g(t.nextSibling);return r.nextSibling,d(n,a(q,{icon:"floppy-disk-circle-arrow-right"}),r,i),n}}),a(G,{get when(){return e.saveState==="ERROR"},get children(){var n=h(Zi),t=n.firstChild,[r,i]=g(t.nextSibling);return r.nextSibling,d(n,a(q,{icon:"triangle-exclamation"}),r,i),n}})]}})}var Qi=f("<div class=page><!$><!/><div class=page-content><!$><!/><!$><!/></div><!$><!/>"),Xi=f("<h2>"),ea=f("<br>"),ta=f("<div class=extended-wrapper style=margin-block-start:1rem>");function de(e){return(()=>{var n=h(Qi),t=n.firstChild,[r,i]=g(t.nextSibling),l=r.nextSibling,s=l.firstChild,[o,u]=g(s.nextSibling),c=o.nextSibling,[m,S]=g(c.nextSibling),_=l.nextSibling,[$,y]=g(_.nextSibling);return d(n,(()=>{var b=ie(()=>e.showQuickmenu!==!1);return()=>b()?a(Ji,{get roles(){return e.roles},get link(){return e.link},get saveState(){return e.saveState},get lastSaved(){return e.lastSaved},get parentPath(){return e.parentPath??"/"}}):null})(),r,i),d(l,(()=>{var b=ie(()=>e.title===void 0);return()=>b()?null:[(()=>{var k=h(Xi);return d(k,()=>e.title),k})(),h(ea)]})(),o,u),d(l,()=>e.children,m,S),d(n,(()=>{var b=ie(()=>e.showQuickmenu!==!1);return()=>b()?(()=>{var k=h(ta);return d(k,a(qi,{get roles(){return e.roles},get link(){return e.link},get saveState(){return e.saveState},get lastSaved(){return e.lastSaved},get parentPath(){return e.parentPath??"/"}})),k})():null})(),$,y),n})()}var na=f('<form class=input-button style="display:grid;gap:0rem;grid-template-columns:1fr max-content"><input type=text style=border-color:var(--clr-special-9)><!$><!/>');function pt(e){const[n,t]=oe("");return(()=>{var r=h(na),i=r.firstChild,l=i.nextSibling,[s,o]=g(l.nextSibling);return r.addEventListener("submit",u=>{u.preventDefault();const c=n();c.trim().length>0&&e.addFriend(c)}),Se(r,"noValidate",!0),i.$$input=u=>t(u.target.value),d(r,a(le,{icon:"arrow-right",type:"submit",label:"Begleitperson anmelden",kind:"special"}),s,o),B(()=>Se(i,"value",n())),Ne(),r})()}dt(["input"]);var ra=f("<p>Details konnten nicht geladen werden."),ia=f("<div style=display:flex;gap:1rem;flex-wrap:wrap;justify-content:space-between><h3></h3><!$><!/>"),aa=f("<div class=game-dialog><ul role=list style=display:grid;gap:0.5rem><li><strong style=color:var(--clr-accent-1)>Tag, Zeit:</strong> <br><!$><!/>, <!$><!/> - <!$><!/> Uhr</li><li><strong style=color:var(--clr-accent-1)>Beschreibung:</strong> <br><!$><!/></li></ul><div class=reservations><h5 style=margin-block-start:0>Plätze reservieren</h5><div class=reservation-table>"),la=f("<div class=count>"),sa=f("<div class=reservation-table-entry><p>Reserviert für mich </p><!$><!/>"),oa=f('<div class=reservation-table-entry><p>Reserviert für "<!$><!/>"</p><!$><!/>'),ua=f('<div style="display:grid;gap:1rem;grid-template-columns:max-content 1fr"><!$><!/><!$><!/>');function ca(e){const[n,t]=V(e.store),r=dr().uuid??"no-uuid-found",i=ti(r);return a(Me,{get fallback(){return a(R,{get children(){return P.loading.program}})},get children(){return a(T,{get when(){return e.publicResource()},get fallback(){return a(R,{type:"danger",get children(){return P.error.help}})},children:l=>a(T,{get when(){return l().kind==="SUCCESS"},get fallback(){return a(R,{type:"danger",get children(){return P.loading.program}})},get children(){return a(T,{when:i,get fallback(){return a(R,{type:"danger",get children(){return h(ra)}})},children:s=>a(da,{get entry(){return s()},get myHelpReservations(){return e.store.helping},get allReservations(){return l().data.reservations},get isEditable(){return e.isEditable},addReservation:o=>t("helping",n.helping.length,{...o,uuid:crypto.randomUUID()}),removeReservation:o=>{t("helping",n.helping.filter(u=>u.uuid!==o))},get link(){return e.link}})})}})})}})}function da(e){const{dateTime:n,kind:t}=e.entry,r=be[t],i=Ue(n.startDate);se(i!==null,`Date '${JSON.stringify(n.startDate)}' is not a valid event date.`);const l=()=>e.myHelpReservations.filter(c=>"helpEntryUuid"in c&&c.helpEntryUuid===e.entry.uuid),s=(e.allReservations[e.entry.uuid]??0)-l().length,o=()=>Ut(e.entry.count).map(c=>{const m=l()[c];return m!==void 0?m:e.entry.count-s<=c?{kind:"RESERVED_OTHER"}:{kind:"FREE"}}),u=()=>l().find(c=>c.kind==="SELF")!==void 0;return[(()=>{var c=h(ia),m=c.firstChild,S=m.nextSibling,[_,$]=g(S.nextSibling);return d(m,()=>r.title),d(c,a(N,{get href(){return e.link("/helfen")},class:"button-link",get children(){return a(le,{icon:"backward",label:"Zurück zur Helfer-Übersicht"})}}),_,$),c})(),(()=>{var c=h(aa),m=c.firstChild,S=m.firstChild,_=S.firstChild,$=_.nextSibling,y=$.nextSibling,b=y.nextSibling,[k,D]=g(b.nextSibling),p=k.nextSibling,U=p.nextSibling,[F,I]=g(U.nextSibling),Y=F.nextSibling,Z=Y.nextSibling,[M,Q]=g(Z.nextSibling);M.nextSibling;var J=S.nextSibling,K=J.firstChild,W=K.nextSibling,ce=W.nextSibling,x=ce.nextSibling,[w,H]=g(x.nextSibling),X=m.nextSibling,fe=X.firstChild,ee=fe.nextSibling;return d(S,()=>P.days[i],k,D),d(S,()=>Be(n.startDate.toPlainTime(),{minutes:!1}),F,I),d(S,()=>Be(n.endDate.toPlainTime(),{minutes:!1}),M,Q),d(J,()=>r.description,w,H),d(ee,a(he,{get each(){return o()},children:(L,te)=>[(()=>{var C=h(la);return d(C,()=>te()+1),C})(),a(Ce,{get children(){return[a(G,{get when(){return L.kind==="RESERVED_OTHER"},get children(){return a(R,{children:"Bereits reserviert"})}}),a(G,{get when(){return!e.isEditable},get children(){return a(R,{children:"Freier Platz"})}}),a(G,{get when(){return L.kind==="SELF"},get children(){return a(ft,{type:"success",get children(){var C=h(sa),ne=C.firstChild,ke=ne.nextSibling,[we,ye]=g(ke.nextSibling);return d(C,a(Ee,{icon:"trash",onClick:()=>e.removeReservation(L.kind==="SELF"?L.uuid:"should not happen")}),we,ye),C}})}}),a(G,{get when(){return L.kind==="FRIEND"},get children(){return a(ft,{type:"success",get children(){var C=h(oa),ne=C.firstChild,ke=ne.firstChild,we=ke.nextSibling,[ye,Ke]=g(we.nextSibling);ye.nextSibling;var We=ne.nextSibling,[Ve,Kt]=g(We.nextSibling);return d(ne,(()=>{var Wt=ie(()=>L.kind==="FRIEND");return()=>Wt()?L.name:"[Fehler beim Laden]"})(),ye,Ke),d(C,a(Ee,{icon:"trash",onClick:()=>e.removeReservation(L.kind==="FRIEND"?L.uuid:"should not happen")}),Ve,Kt),C}})}}),a(G,{get when(){return L.kind==="FREE"},get children(){return a(T,{get when(){return u()},get fallback(){return(()=>{var C=h(ua),ne=C.firstChild,[ke,we]=g(ne.nextSibling),ye=ke.nextSibling,[Ke,We]=g(ye.nextSibling);return d(C,a(le,{icon:"person-to-portal",label:"Mich anmelden",kind:"success",onClick:()=>e.addReservation({kind:"SELF",helpEntryUuid:e.entry.uuid,uuid:crypto.randomUUID()})}),ke,we),d(C,a(pt,{addFriend:Ve=>e.addReservation({kind:"FRIEND",helpEntryUuid:e.entry.uuid,name:Ve,uuid:crypto.randomUUID()})}),Ke,We),C})()},get children(){return a(pt,{addFriend:C=>e.addReservation({kind:"FRIEND",helpEntryUuid:e.entry.uuid,name:C,uuid:crypto.randomUUID()})})}})}})]}})]})),c})()]}var ma=f("<ul role=list>"),ha=f("<li>"),ga=f("<label class=input-radio><input type=radio><!$><!/>");function fa(e){const n=e.layout??"vertical";return(()=>{var t=h(ma);return ge(t,`radio-list ${n}`),d(t,a(he,{get each(){return e.items},children:r=>(()=>{var i=h(ha);return d(i,a($a,{get label(){return r.label},get name(){return`${r.value}-${e.name}`},get value(){return r.value},get checked(){return r.checked},onValueUpdate:()=>e.onValueUpdate(r.value)})),i})()})),t})()}function $a(e){return(()=>{var n=h(ga),t=n.firstChild,r=t.nextSibling,[i,l]=g(r.nextSibling);return cn(t,"change",e.onValueUpdate),d(n,()=>e.label,i,l),B(()=>ve(t,"name",e.name)),B(()=>Se(t,"value",e.value)),B(()=>Se(t,"checked",e.checked)),n})()}var ba=f("<p>Eines der Hauptziele der Luzerner Spieltage ist es, dass die Besucher/-innen noch nicht gespielte Spiele ausprobieren können. Dazu unterstützen uns jedes Jahr Freiwillige und erklären die ihnen bekannten Spiele aus der Spiele-Bibliothek. Diese Erklärbären sind durch ihr rotes T-Shirt erkennbar."),gt=f("<br>"),Sa=f("<div class=dynamic-columns><div></div><div><!$><!/><ul><li>Sie müssen nicht alle Spiele der Spiele-Bibliothek kennen!</li><li>Sie erklären Spiele während der eingeplanten Zeit<ul><li>Grundsätzlich spielen die Erklärbären nicht mit</li><li>Sobald die Spieler/-innen die Regeln verstanden haben (z.B. nach den ersten paar Runden) verlassen sie den Tisch</li><li>Sie stehen weiterhin für Fragen zur Verfügung und kommen allenfalls periodisch zum Tisch zurück</li></ul></li><li>Sie bringen Spiele für die Spiele-Bibliothek mit welche sie erklären können<ul><li>Diese Spiele sollen ein breites Spektrum, von einfach bis komplex, abdecken</li><li>Eine Liste der mitgebrachten Spiele (Spiele-Bibliothek) wird vor dem Event von allen Erklärbären zusammen erstellt</li><li>Vor dem Event notieren die Erklärbären, was sie aus der Spiele-Bibliothek erklären können - (Mitbringen eigener Spiele ist nicht Pflicht, falls genügend Spiele aus der Liste erklärt werden können)</li></ul></li><li>Sie erarbeiten gemeinsam vor dem Event eine Empfehlungsliste aus ca.&nbsp;6&nbsp;Spielen<ul><li>Alle Erklärbären sollen die Regeln dieser Spiele vor dem Event lesen"),_a=f("<h3>"),va=f("<div style=display:grid;gap:1rem><!$><!/><!$><!/>"),ka=f("<p>Bitte nimm mit uns <!$><!/> auf, damit wir uns kurz mit dir absprechen und dir diesen Bereich freischalten können."),ya=f("<em>Noch keine Einsätze eingetragen"),Da=f("<h4>Tag"),pa=f("<h4>Uhrzeit"),xa=f('<div style="display:grid;grid-template-columns:repeat(2, 1fr);gap:1rem"><!$><!/><!$><!/>'),Ea=f("<h5>Warnungen"),wa=f("<ul>"),Aa=f("<li>");function Ta(e){return[h(ba),h(gt),(()=>{var n=h(Sa),t=n.firstChild,r=t.nextSibling,i=r.firstChild,[l,s]=g(i.nextSibling);return l.nextSibling,d(t,a(Ra,{get store(){return e.store},get roles(){return e.roles},get isEditable(){return e.isEditable}})),d(r,a(Fe,{level:3,title:"Was machen die Erklärbären"}),l,s),n})()]}function Ra(e){const[n,t]=V(e.store.helping);function r(){return n.filter(i=>i.kind==="ERKLAERBAER")}return[a(Fe,{level:3,title:"Meine Einsätze"}),h(gt),a(Ce,{get fallback(){return a(R,{get children(){var i=h(ka),l=i.firstChild,s=l.nextSibling,[o,u]=g(s.nextSibling);return o.nextSibling,d(i,a(ae,{href:"/kontakt",children:"Kontakt"}),o,u),i}})},get children(){return a(G,{get when(){return e.roles.includes("erklaerbaer")},get children(){var i=h(va),l=i.firstChild,[s,o]=g(l.nextSibling),u=s.nextSibling,[c,m]=g(u.nextSibling);return d(i,a(he,{get each(){return r()},get fallback(){return h(ya)},children:S=>a(Ua,{job:S,updateJob:_=>{t(n.map($=>$.uuid===S.uuid?_:$))},removeJob:()=>{t(n.filter(_=>_.uuid!==S.uuid))},get isEditable(){return e.isEditable}})}),s,o),d(i,a(T,{get when(){return e.isEditable},get children(){return a(De,{icon:"grid-2-plus",type:"success",onClick:()=>{t(n.length,{kind:"ERKLAERBAER",uuid:crypto.randomUUID(),slot:{day:"SATURDAY",from:10,to:18}})},get children(){var S=h(_a);return d(S,()=>P.createNewEntry),S}})}}),c,m),i}})}})]}function Ua(e){function n(){const t=[],{day:r,from:i,to:l}=e.job.slot;i>=l&&t.push("Das Ende muss grösser sein als der Start.");const s=zt[r],{from:o,to:u}=s.open;return o>i&&t.push(`Die Spieltage öffnen am ${P.days[r]} erst um ${o} Uhr.`),u<l&&t.push(`Die Spieltage schliessen am ${P.days[r]} um ${u} Uhr.`),t}return a(R,{get onClose(){return ie(()=>!!e.isEditable)()?e.removeJob:void 0},get children(){return[h(Da),a(fa,{get items(){return[{label:P.days.SATURDAY,checked:e.job.slot.day==="SATURDAY",value:"SATURDAY"},{label:P.days.SUNDAY,checked:e.job.slot.day==="SUNDAY",value:"SUNDAY"}]},onValueUpdate:t=>{e.updateJob({...e.job,slot:{...e.job.slot,day:t}})},get name(){return`day-entry-${e.job.uuid}`},layout:"horizontal",get disabled(){return!e.isEditable}}),h(gt),h(pa),(()=>{var t=h(xa),r=t.firstChild,[i,l]=g(r.nextSibling),s=i.nextSibling,[o,u]=g(s.nextSibling);return d(t,a($t,{label:"Start",name:"from",get value(){return e.job.slot.from},onValueUpdate:c=>e.updateJob({...e.job,slot:{...e.job.slot,from:c}}),get disabled(){return!e.isEditable}}),i,l),d(t,a($t,{label:"Ende",name:"to",get value(){return e.job.slot.to},onValueUpdate:c=>e.updateJob({...e.job,slot:{...e.job.slot,to:c}}),get disabled(){return!e.isEditable}}),o,u),t})(),a(T,{get when(){return n().length>0},get children(){return[h(Ea),(()=>{var t=h(wa);return d(t,a(he,{get each(){return n()},children:r=>(()=>{var i=h(Aa);return d(i,r),i})()})),t})()]}})]}})}function Ca(){return a(R,{children:"Inhalt folgt."})}function Pa(){return a(R,{children:"Inhalt folgt."})}function Fa(e){const[n]=rt(li),[t,r]=V({meta:{saveState:"IDLE",lastSaved:new Date,roles:e.initState.roles},save:e.initState.data}),i=crypto.randomUUID(),[l,s]=oe(!1);rt(()=>JSON.stringify(t.save),async()=>{if(!l()){s(!0);return}if(e.initState.status!=="published"){Rt("Diese Anmeldung wurde deaktiviert und kann nicht editiert werden.",{kind:"danger",uuid:i});return}const u=mn(t.save);try{const c=await Fn(t.meta,u,e.secret);c.kind==="FAILURE"?console.error(c):r("meta","lastSaved",c.data)}catch(c){console.error(c),r("meta","saveState","ERROR")}});function o(u){return`${u}?secret=${e.secret}`}return a(Tr,{children:[{path:"/",component:()=>a(de,{title:"Wo möchtest du starten?",get roles(){return t.meta.roles},link:o,get saveState(){return t.meta.saveState},get lastSaved(){return t.meta.lastSaved},get children(){return a(jr,{get roles(){return t.meta.roles},link:o})}})},{path:"/programm",component:()=>a(de,{title:"Programm",get roles(){return t.meta.roles},link:o,get saveState(){return t.meta.saveState},get lastSaved(){return t.meta.lastSaved},get children(){return a(Ca,{})}})},{path:"/erstellen",component:()=>a(de,{title:"Programmpunkte erstellen und editieren",get roles(){return t.meta.roles},link:o,get saveState(){return t.meta.saveState},get lastSaved(){return t.meta.lastSaved},get children(){return a(Pa,{})}})},{path:"/helfen",component:()=>a(de,{title:"Helfen",get roles(){return t.meta.roles},link:o,get saveState(){return t.meta.saveState},get lastSaved(){return t.meta.lastSaved},showQuickmenu:!0,get children(){return a(fi,{get store(){return t.save},publicResource:n,get isEditable(){return e.initState.status==="published"},link:o,get roles(){return t.meta.roles}})}})},{path:"/helfen/:uuid",component:()=>a(de,{link:o,get roles(){return t.meta.roles},get saveState(){return t.meta.saveState},get lastSaved(){return t.meta.lastSaved},showQuickmenu:!0,parentPath:"/helfen",get children(){return a(ca,{get store(){return t.save},publicResource:n,link:o,get isEditable(){return e.initState.status==="published"}})}})},{path:"/erklaerbaer",component:()=>a(de,{title:"Helfen: Erklärbären",get roles(){return t.meta.roles},link:o,get saveState(){return t.meta.saveState},get lastSaved(){return t.meta.lastSaved},showQuickmenu:!0,parentPath:"/helfen",get children(){return a(Ta,{get store(){return t.save},get roles(){return t.meta.roles},get isEditable(){return e.initState.status==="published"}})}})},{path:"/zusammenfassung",component:()=>a(de,{title:"Zusammenfassung",get roles(){return t.meta.roles},link:o,get saveState(){return t.meta.saveState},get lastSaved(){return t.meta.lastSaved},showQuickmenu:!0,get children(){return a(Ni,{get store(){return t.save},publicResource:n,link:o,get isEditable(){return e.initState.status==="published"}})}})},{path:"*",component:()=>a(de,{title:"Seite nicht gefunden",get roles(){return t.meta.roles},link:o,get saveState(){return t.meta.saveState},get lastSaved(){return t.meta.lastSaved},showQuickmenu:!0,get children(){return a(R,{type:"danger",get children(){return P.error.siteNotFound}})}})}]})}function La(){return a(R,{get children(){return P.loading.registration}})}function ja(){const n=URL.parse(location.toString().replace("#/",""))?.searchParams.get("secret")??"no-secret-found",[t]=rt(()=>Cn(n));return a(dn,{fallback:r=>(console.error(r),a(R,{type:"danger",get children(){return P.error.general}})),get children(){return a(Me,{get fallback(){return a(La,{})},get children(){return a(Ce,{get children(){return a(G,{get when(){return t()},children:r=>{const{kind:i,value:l}=Gt(r());return i==="FAILURE"?l.reason==="SECRET_INVALID"?a(R,{type:"danger",get children(){return P.error.secretError}}):(console.error(l),a(R,{type:"danger",get children(){return P.error.ourMistake}})):a(Fa,{get initState(){return l.data},secret:n})}})}})}})}})}export{ja as MeineAnmeldungWrapper};
