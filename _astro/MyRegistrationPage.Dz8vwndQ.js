import{e as _e,d as Ut,f as st,c as j,B as D,g as Re,h as de,I as Lt,i as ne,b as be,S as Qe,u as It}from"./utils.Ccl4PtrC.js";import{g as $,t as v,r as ot,h as H,j as ct,k as Me,l as Ke,n as ut,e as J,b as W,p as je,q as Ft,w as Pt,x as Ht,y as Tt,c as s,z as Nt,A as Se,S as I,B as Ot,C as dt,D as Ae,E as gt,m as Je,G as Yt,H as Bt,I as ht,i as d,a as S,M,F as ge,f as ke,J as re,K as Ce,s as zt,L as pe,N as We,O as Mt,u as Kt,d as Xe,P as jt}from"./web.BpEG9c8f.js";import{c as Y,u as Wt}from"./store.BbwQxdRW.js";import{e as qe,o as q,n as Oe,s as P,u as ft,l as ie,a as mt}from"./types.BB3bk5F8.js";import"./Textarea.W3kUKnzk.js";const[ce,ve]=Y([]);function bt(e,t){if(t?.uuid!==void 0&&ce.find(c=>c.uuid===t.uuid)!==void 0)return Ye(t.uuid,e,t);const n=t?.uuid??crypto.randomUUID(),r=t?.duration??5e3,i=t?.kind??"gray",l=t?.dismissable??!0,a=setTimeout(()=>{ve(ce.filter(c=>c.uuid!==n))},r);return ve(ce.length,{uuid:n,kind:i,message:e,duration:r,dismissable:l,cleanup:()=>clearTimeout(a)}),n}function Ye(e,t,n){const r=ce.find(o=>o.uuid===e);if(r===void 0)return e;r.cleanup();const i=n.duration??r.duration,l=n.kind??r.kind,a=n?.dismissable??r.dismissable,c=setTimeout(()=>{ve(ce.filter(o=>o.uuid!==e))},i);return ve(o=>o.uuid===e,{uuid:e,kind:l,message:t,duration:i,dismissable:a,cleanup:()=>clearTimeout(c)}),e}const qt=qe(["SATURDAY","SUNDAY"]);q({uuid:P().uuid(),day:qt,from:Oe(),to:Oe()}).refine(e=>e.from<e.to,{message:"A TimeSlot can't end before it starts."});q({name:P(),label:P(),description:P()});const Vt=qe(["draft","published","archived"]);async function Zt(e){const t=new URL(_e("/lst26/load"));t.searchParams.append("secret",e);const n=await fetch(t);if(!n.ok)return{kind:"FAILURE"};const r=await n.json();return typeof r=="object"&&r!==null?{kind:"SUCCESS",data:r}:(console.error("`last_save` not found on ",r),{kind:"FAILURE"})}async function Gt(e,t){try{const n=await fetch(_e("/lst26/save"),{method:"POST",body:JSON.stringify({secret:t,save:e}),headers:{"Content-Type":"application/json"}});return n.ok?{kind:"SUCCESS",data:t}:(console.error(await n.text()),{kind:"FAILURE"})}catch(n){return console.error(n),{kind:"FAILURE"}}}async function Qt(e){try{const t=new URL(_e("/lst26/help"));t.searchParams.append("secret",e);const n=await fetch(t,{headers:{"Content-Type":"application/json"}});return n.ok?{kind:"SUCCESS",data:await n.json()}:(console.error(await n.text()),{kind:"FAILURE"})}catch(t){return console.error(t),{kind:"FAILURE"}}}const Jt=q({name:P(),email:P(),mobile:P()}),Xt=ft([q({kind:ie("SELF"),helpEntryUuid:P().uuid(),uuid:P().uuid()}),q({kind:ie("FRIEND"),helpEntryUuid:P().uuid(),name:P(),uuid:P().uuid()})]),en=q({version:ie(3),contact:Jt,helping:mt(Xt)}),tn=q({kind:ie("SUCCESS"),status:Vt,data:en});async function nn(e){if(e.length!==36&&e.length!==4)return{kind:"FAILURE",reason:"SECRET_INVALID"};const t=await Zt(e);if(t.kind==="FAILURE")return console.error("Unexpected error. Maybe network, maybe server error."),{kind:"FAILURE",reason:"GENERAL"};const n=tn.safeParse(t.data);return n.success?{kind:"SUCCESS",data:n.data}:(console.error(n.error),{kind:"FAILURE",reason:"PARSE_ERROR"})}const De=crypto.randomUUID();async function rn(e,t,n){const[r,i]=Y(e);i("saveState","SAVING"),bt("Am Speichern...",{uuid:De,dismissable:!1});const l=new Date;try{if((await Gt(t,n)).kind==="FAILURE")throw Error("")}catch(a){return i("saveState","ERROR"),console.error(a),Ye(De,"Speichern war nicht möglich!",{kind:"danger",duration:1e4,dismissable:!0}),{kind:"FAILURE"}}return Ye(De,`Zuletzt gespeichert um: ${st(l)} Uhr`,{kind:"success",dismissable:!0}),i("saveState","IDLE"),{kind:"SUCCESS",data:l}}const an=Ut(rn,1e3);var et=v("<br>"),ln=v("<strong>Donnerstag, 21. August 2025"),sn=v("<p>Deine Anmeldung wird geladen..."),on=v("<p>Das Programm wird geladen..."),cn=v("<p>Leider ist ein unerwarteter Fehler passiert. Versuche deine Anmeldung erneut zu laden. Wiederholt sich dieser Fehler, bitte kontaktiere uns sobald als möglich über das <a href=/kontakt>Kontaktformular</a>, da dies nicht passieren sollte."),un=v("<p>Wir konnten leider keine Anmeldung finden. Wenn du bereits eine Anmeldung begonnen hast, solltest du den korrekten Link per E-Mail erhalten haben.<br><br> Falls du noch keine Anmeldung begonnen hast, kannst du <a href=/anmeldung>hier</a> deine persönliche Anmeldung beginnen. <br><br>Für generelle Fragen oder Probleme, schreibe uns doch bitte über unser <a href=/kontatk>Kontaktformular</a>."),dn=v("<p>Wir konnten leider keine Spielrunde unter diesem Link finden.<br><br>Vermutlich liegt es an uns. Bitte kontaktiere uns sobald als möglich über das "),gn=v("<p>Leider ist ein unerwarteter Fehler passiert. Vermutlich liegt es an uns. Bitte kontaktiere uns sobald als möglich über das <a href=/kontakt>Kontaktformular</a>."),hn=v("<p>Leider ist ein unerwarteter Fehler passiert beim Laden des Programmes. Vermutlich liegt es an uns. Bitte kontaktiere uns sobald als möglich über das <a href=/kontakt>Kontaktformular</a>."),fn=v("<p>Leider ist ein unerwarteter Fehler passiert beim Laden von Daten. Vermutlich liegt es an uns. Bitte kontaktiere uns sobald als möglich über das <a href=/kontakt>Kontaktformular</a>.");$(et),$(et),$(ln);const mn={registration:$(sn),program:$(on)},bn={general:$(cn),secretError:$(un),gameroundUuidError:$(dn),ourMistake:$(gn),program:$(hn),help:$(fn)},$n="Die Eingabe scheint keine gültige E-Mail-Adresse zu sein.",Sn="Dies ist ein Pflichtfeld.",vn={FRIDAY:"Freitag",SATURDAY:"Samstag",SUNDAY:"Sonntag"},T={loading:mn,error:bn,invalidEmail:$n,mandatoryField:Sn,days:vn};function $t(){let e=new Set;function t(i){return e.add(i),()=>e.delete(i)}let n=!1;function r(i,l){if(n)return!(n=!1);const a={to:i,options:l,defaultPrevented:!1,preventDefault:()=>a.defaultPrevented=!0};for(const c of e)c.listener({...a,from:c.location,retry:o=>{o&&(n=!0),c.navigate(i,{...l,resolve:!1})}});return!a.defaultPrevented}return{subscribe:t,confirm:r}}let Be;function Ve(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),Be=window.history.state._depth}Ve();function _n(e){return{...e,_depth:window.history.state&&window.history.state._depth}}function kn(e,t){let n=!1;return()=>{const r=Be;Ve();const i=r==null?null:Be-r;if(n){n=!1;return}i&&t(i)?(n=!0,window.history.go(-i)):e()}}const pn=/^(?:[a-z0-9]+:)?\/\//i,yn=/^\/+|(\/)\/+$/g,St="http://sr";function X(e,t=!1){const n=e.replace(yn,"$1");return n?t||/^[?#]/.test(n)?n:"/"+n:""}function $e(e,t,n){if(pn.test(t))return;const r=X(e),i=n&&X(n);let l="";return!i||t.startsWith("/")?l=r:i.toLowerCase().indexOf(r.toLowerCase())!==0?l=r+i:l=i,(l||"/")+X(t,!l)}function En(e,t){if(e==null)throw new Error(t);return e}function wn(e,t){return X(e).replace(/\/*(\*.*)?$/g,"")+X(t)}function vt(e){const t={};return e.searchParams.forEach((n,r)=>{r in t?Array.isArray(t[r])?t[r].push(n):t[r]=[t[r],n]:t[r]=n}),t}function xn(e,t,n){const[r,i]=e.split("/*",2),l=r.split("/").filter(Boolean),a=l.length;return c=>{const o=c.split("/").filter(Boolean),u=o.length-a;if(u<0||u>0&&i===void 0&&!t)return null;const h={path:a?"":"/",params:{}},m=k=>n===void 0?void 0:n[k];for(let k=0;k<a;k++){const f=l[k],_=f[0]===":",g=_?o[k]:o[k].toLowerCase(),b=_?f.slice(1):f.toLowerCase();if(_&&Ue(g,m(b)))h.params[b]=g;else if(_||!Ue(g,b))return null;h.path+=`/${g}`}if(i){const k=u?o.slice(-u).join("/"):"";if(Ue(k,m(i)))h.params[i]=k;else return null}return h}}function Ue(e,t){const n=r=>r===e;return t===void 0?!0:typeof t=="string"?n(t):typeof t=="function"?t(e):Array.isArray(t)?t.some(n):t instanceof RegExp?t.test(e):!1}function Rn(e){const[t,n]=e.pattern.split("/*",2),r=t.split("/").filter(Boolean);return r.reduce((i,l)=>i+(l.startsWith(":")?2:3),r.length-(n===void 0?0:1))}function _t(e){const t=new Map,n=ct();return new Proxy({},{get(r,i){return t.has(i)||ot(n,()=>t.set(i,H(()=>e()[i]))),t.get(i)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())},has(r,i){return i in e()}})}function An(e,t){const n=new URLSearchParams(e);Object.entries(t).forEach(([i,l])=>{l==null||l===""||l instanceof Array&&!l.length?n.delete(i):l instanceof Array?(n.delete(i),l.forEach(a=>{n.append(i,String(a))})):n.set(i,String(l))});const r=n.toString();return r?`?${r}`:""}function kt(e){let t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];let n=e.slice(0,t.index),r=e.slice(t.index+t[0].length);const i=[n,n+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(r);)i.push(n+=t[1]),r=r.slice(t[0].length);return kt(r).reduce((l,a)=>[...l,...i.map(c=>c+a)],[])}const Cn=100,pt=ut(),Ze=ut(),he=()=>En(Ke(pt),"<A> and 'use' router primitives can be only used inside a Route."),Dn=()=>Ke(Ze)||he().base,Un=e=>{const t=Dn();return H(()=>t.resolvePath(e()))},Ln=e=>{const t=he();return H(()=>{const n=e();return n!==void 0?t.renderPath(n):n})},yt=()=>he().navigatorFactory(),Et=()=>he().location,In=()=>he().params,Ge=()=>{const e=Et(),t=yt(),n=(r,i)=>{const l=Me(()=>An(e.search,r)+e.hash);t(l,{scroll:!1,resolve:!1,...i})};return[e.query,n]};function Fn(e,t=""){const{component:n,preload:r,load:i,children:l,info:a}=e,c=!l||Array.isArray(l)&&!l.length,o={key:e,component:n,preload:r||i,info:a};return wt(e.path).reduce((u,h)=>{for(const m of kt(h)){const k=wn(t,m);let f=c?k:k.split("/*",1)[0];f=f.split("/").map(_=>_.startsWith(":")||_.startsWith("*")?_:encodeURIComponent(_)).join("/"),u.push({...o,originalPath:h,pattern:f,matcher:xn(f,!c,e.matchFilters)})}return u},[])}function Pn(e,t=0){return{routes:e,score:Rn(e[e.length-1])*1e4-t,matcher(n){const r=[];for(let i=e.length-1;i>=0;i--){const l=e[i],a=l.matcher(n);if(!a)return null;r.unshift({...a,route:l})}return r}}}function wt(e){return Array.isArray(e)?e:[e]}function xt(e,t="",n=[],r=[]){const i=wt(e);for(let l=0,a=i.length;l<a;l++){const c=i[l];if(c&&typeof c=="object"){c.hasOwnProperty("path")||(c.path="");const o=Fn(c,t);for(const u of o){n.push(u);const h=Array.isArray(c.children)&&c.children.length===0;if(c.children&&!h)xt(c.children,u.pattern,n,r);else{const m=Pn([...n],r.length);r.push(m)}n.pop()}}}return n.length?r:r.sort((l,a)=>a.score-l.score)}function Le(e,t){for(let n=0,r=e.length;n<r;n++){const i=e[n].matcher(t);if(i)return i}return[]}function Hn(e,t,n){const r=new URL(St),i=H(h=>{const m=e();try{return new URL(m,r)}catch{return console.error(`Invalid path ${m}`),h}},r,{equals:(h,m)=>h.href===m.href}),l=H(()=>i().pathname),a=H(()=>i().search,!0),c=H(()=>i().hash),o=()=>"",u=je(a,()=>vt(i()));return{get pathname(){return l()},get search(){return a()},get hash(){return c()},get state(){return t()},get key(){return o()},query:n?n(u):_t(u)}}let Q;function Tn(){return Q}function Nn(e,t,n,r={}){const{signal:[i,l],utils:a={}}=e,c=a.parsePath||(E=>E),o=a.renderPath||(E=>E),u=a.beforeLeave||$t(),h=$e("",r.base||"");if(h===void 0)throw new Error(`${h} is not a valid base path`);h&&!i().value&&l({value:h,replace:!0,scroll:!1});const[m,k]=J(!1);let f;const _=(E,w)=>{w.value===g()&&w.state===p()||(f===void 0&&k(!0),Q=E,f=w,Pt(()=>{f===w&&(b(f.value),y(f.state),Tt(),U[1](L=>L.filter(V=>V.pending)))}).finally(()=>{f===w&&Ht(()=>{Q=void 0,E==="navigate"&&ee(f),k(!1),f=void 0})}))},[g,b]=J(i().value),[p,y]=J(i().state),R=Hn(g,p,a.queryWrapper),A=[],U=J([]),F=H(()=>typeof r.transformUrl=="function"?Le(t(),r.transformUrl(R.pathname)):Le(t(),R.pathname)),O=()=>{const E=F(),w={};for(let L=0;L<E.length;L++)Object.assign(w,E[L].params);return w},B=a.paramsWrapper?a.paramsWrapper(O,t):_t(O),z={pattern:h,path:()=>h,outlet:()=>null,resolvePath(E){return $e(h,E)}};return W(je(i,E=>_("native",E),{defer:!0})),{base:z,location:R,params:B,isRouting:m,renderPath:o,parsePath:c,navigatorFactory:ae,matches:F,beforeLeave:u,preloadRoute:ye,singleFlight:r.singleFlight===void 0?!0:r.singleFlight,submissions:U};function G(E,w,L){Me(()=>{if(typeof w=="number"){w&&(a.go?a.go(w):console.warn("Router integration does not support relative routing"));return}const V=!w||w[0]==="?",{replace:le,resolve:C,scroll:se,state:x}={replace:!1,resolve:!V,scroll:!0,...L},N=C?E.resolvePath(w):$e(V&&R.pathname||"",w);if(N===void 0)throw new Error(`Path '${w}' is not a routable path`);if(A.length>=Cn)throw new Error("Too many redirects");const K=g();(N!==K||x!==p())&&(Ft||u.confirm(N,L)&&(A.push({value:K,replace:le,scroll:se,state:p()}),_("navigate",{value:N,state:x})))})}function ae(E){return E=E||Ke(Ze)||z,(w,L)=>G(E,w,L)}function ee(E){const w=A[0];w&&(l({...E,replace:w.replace,scroll:w.scroll}),A.length=0)}function ye(E,w){const L=Le(t(),E.pathname),V=Q;Q="preload";for(let le in L){const{route:C,params:se}=L[le];C.component&&C.component.preload&&C.component.preload();const{preload:x}=C;w&&x&&ot(n(),()=>x({params:se,location:{pathname:E.pathname,search:E.search,hash:E.hash,query:vt(E),state:null,key:""},intent:"preload"}))}Q=V}}function On(e,t,n,r){const{base:i,location:l,params:a}=e,{pattern:c,component:o,preload:u}=r().route,h=H(()=>r().path);o&&o.preload&&o.preload();const m=u?u({params:a,location:l,intent:Q||"initial"}):void 0;return{parent:t,pattern:c,path:h,outlet:()=>o?s(o,{params:a,location:l,data:m,get children(){return n()}}):n(),resolvePath(f){return $e(i.path(),f,h())}}}const Yn=e=>t=>{const{base:n}=t,r=Nt(()=>t.children),i=H(()=>xt(r(),t.base||""));let l;const a=Nn(e,i,()=>l,{base:n,singleFlight:t.singleFlight,transformUrl:t.transformUrl});return e.create&&e.create(a),s(pt.Provider,{value:a,get children(){return s(Bn,{routerState:a,get root(){return t.root},get preload(){return t.rootPreload||t.rootLoad},get children(){return[Se(()=>(l=ct())&&null),s(zn,{routerState:a,get branches(){return i()}})]}})}})};function Bn(e){const t=e.routerState.location,n=e.routerState.params,r=H(()=>e.preload&&Me(()=>{e.preload({params:n,location:t,intent:Tn()||"initial"})}));return s(I,{get when(){return e.root},keyed:!0,get fallback(){return e.children},children:i=>s(i,{params:n,location:t,get data(){return r()},get children(){return e.children}})})}function zn(e){const t=[];let n;const r=H(je(e.routerState.matches,(i,l,a)=>{let c=l&&i.length===l.length;const o=[];for(let u=0,h=i.length;u<h;u++){const m=l&&l[u],k=i[u];a&&m&&k.route.key===m.route.key?o[u]=a[u]:(c=!1,t[u]&&t[u](),Ot(f=>{t[u]=f,o[u]=On(e.routerState,o[u-1]||e.routerState.base,tt(()=>r()[u+1]),()=>{const _=e.routerState.matches();return _[u]??_[0]})}))}return t.splice(i.length).forEach(u=>u()),a&&c?a:(n=o[0],o)}));return tt(()=>r()&&n)()}const tt=e=>()=>s(I,{get when(){return e()},keyed:!0,children:t=>s(Ze.Provider,{value:t,get children(){return t.outlet()}})});function Mn([e,t],n,r){return[e,r?i=>t(r(i)):t]}function Kn(e){let t=!1;const n=i=>typeof i=="string"?{value:i}:i,r=Mn(J(n(e.get()),{equals:(i,l)=>i.value===l.value&&i.state===l.state}),void 0,i=>(!t&&e.set(i),Ae.registry&&!Ae.done&&(Ae.done=!0),i));return e.init&&dt(e.init((i=e.get())=>{t=!0,r[1](n(i)),t=!1})),Yn({signal:r,create:e.create,utils:e.utils})}function jn(e,t,n){return e.addEventListener(t,n),()=>e.removeEventListener(t,n)}function Wn(e,t){const n=e&&document.getElementById(e);n?n.scrollIntoView():t&&window.scrollTo(0,0)}const qn=new Map;function Vn(e=!0,t=!1,n="/_server",r){return i=>{const l=i.base.path(),a=i.navigatorFactory(i.base);let c,o;function u(g){return g.namespaceURI==="http://www.w3.org/2000/svg"}function h(g){if(g.defaultPrevented||g.button!==0||g.metaKey||g.altKey||g.ctrlKey||g.shiftKey)return;const b=g.composedPath().find(F=>F instanceof Node&&F.nodeName.toUpperCase()==="A");if(!b||t&&!b.hasAttribute("link"))return;const p=u(b),y=p?b.href.baseVal:b.href;if((p?b.target.baseVal:b.target)||!y&&!b.hasAttribute("state"))return;const A=(b.getAttribute("rel")||"").split(/\s+/);if(b.hasAttribute("download")||A&&A.includes("external"))return;const U=p?new URL(y,document.baseURI):new URL(y);if(!(U.origin!==window.location.origin||l&&U.pathname&&!U.pathname.toLowerCase().startsWith(l.toLowerCase())))return[b,U]}function m(g){const b=h(g);if(!b)return;const[p,y]=b,R=i.parsePath(y.pathname+y.search+y.hash),A=p.getAttribute("state");g.preventDefault(),a(R,{resolve:!1,replace:p.hasAttribute("replace"),scroll:!p.hasAttribute("noscroll"),state:A?JSON.parse(A):void 0})}function k(g){const b=h(g);if(!b)return;const[p,y]=b;i.preloadRoute(y,p.getAttribute("preload")!=="false")}function f(g){clearTimeout(c);const b=h(g);if(!b)return o=null;const[p,y]=b;o!==p&&(c=setTimeout(()=>{i.preloadRoute(y,p.getAttribute("preload")!=="false"),o=p},20))}function _(g){if(g.defaultPrevented)return;let b=g.submitter&&g.submitter.hasAttribute("formaction")?g.submitter.getAttribute("formaction"):g.target.getAttribute("action");if(!b)return;if(!b.startsWith("https://action/")){const y=new URL(b,St);if(b=i.parsePath(y.pathname+y.search),!b.startsWith(n))return}if(g.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const p=qn.get(b);if(p){g.preventDefault();const y=new FormData(g.target,g.submitter);p.call({r:i,f:g.target},g.target.enctype==="multipart/form-data"?y:new URLSearchParams(y))}}gt(["click","submit"]),document.addEventListener("click",m),e&&(document.addEventListener("mousemove",f,{passive:!0}),document.addEventListener("focusin",k,{passive:!0}),document.addEventListener("touchstart",k,{passive:!0})),document.addEventListener("submit",_),dt(()=>{document.removeEventListener("click",m),e&&(document.removeEventListener("mousemove",f),document.removeEventListener("focusin",k),document.removeEventListener("touchstart",k)),document.removeEventListener("submit",_)})}}function Zn(e){const t=e.replace(/^.*?#/,"");if(!t.startsWith("/")){const[,n="/"]=window.location.hash.split("#",2);return`${n}#${t}`}return t}function Gn(e){const t=()=>window.location.hash.slice(1),n=$t();return Kn({get:t,set({value:r,replace:i,scroll:l,state:a}){i?window.history.replaceState(_n(a),"","#"+r):window.history.pushState(a,"","#"+r);const c=r.indexOf("#"),o=c>=0?r.slice(c+1):"";Wn(o,l),Ve()},init:r=>jn(window,"hashchange",kn(r,i=>!n.confirm(i&&i<0?i:t()))),create:Vn(e.preload,e.explicitLinks,e.actionBase),utils:{go:r=>window.history.go(r),renderPath:r=>`#${r}`,parsePath:Zn,beforeLeave:n}})(e)}var Qn=v("<a>");function Z(e){e=Je({inactiveClass:"inactive",activeClass:"active"},e);const[,t]=Yt(e,["href","state","class","activeClass","inactiveClass","end"]),n=Un(()=>e.href),r=Ln(n),i=Et(),l=H(()=>{const a=n();if(a===void 0)return[!1,!1];const c=X(a.split(/[?#]/,1)[0]).toLowerCase(),o=decodeURI(X(i.pathname).toLowerCase());return[e.end?c===o:o.startsWith(c+"/")||o===c,c===o]});return(()=>{var a=$(Qn);return Bt(a,Je(t,{get href(){return r()||e.href},get state(){return JSON.stringify(e.state)},get classList(){return{...e.class&&{[e.class]:!0},[e.inactiveClass]:!l()[0],[e.activeClass]:l()[0],...t.classList}},link:"",get"aria-current"(){return l()[1]?"page":void 0}}),!1),ht(),a})()}var Jn=v("<div class=grid><!$><!/><div>"),Xn=v("<div class=boxLink>");function nt(e){const t=e.type??"special";return(()=>{var n=$(Xn);return d(n,s(D,{type:t,get children(){var r=$(Jn),i=r.firstChild,[l,a]=S(i.nextSibling),c=l.nextSibling;return d(r,s(j,{get icon(){return e.icon}}),l,a),d(c,()=>e.children),r}})),n})()}var er=v("<h3>Helfen"),tr=v("<p>Beim Kiosk und der Essensausgabe können wir immer ein paar helfende Hände gebrauchen."),nr=v("<h3>Zusammenfassung"),rr=v("<p>Erhalte einen Überblick über dein gesamtes Programm."),ir=v("<div><!$><!/><br><!$><!/>");function Ie(e){return(()=>{var t=$(ir),n=t.firstChild,[r,i]=S(n.nextSibling),l=r.nextSibling,a=l.nextSibling,[c,o]=S(a.nextSibling);return d(t,s(Z,{get href(){return e.link("/helfen")},class:"button-link",get children(){return s(nt,{icon:"hand-heart",get children(){return[$(er),$(tr)]}})}}),r,i),d(t,s(Z,{get href(){return e.link("/zusammenfassung")},class:"button-link",get children(){return s(nt,{icon:"list",get children(){return[$(nr),$(rr)]}})}}),c,o),t})()}qe(["FRIDAY","SATURDAY","SUNDAY"]);function fe(e,t){const{from:n,to:r}=t;return n<e&&e<r}function ar(e,t){const{from:n,to:r}=e,{from:i,to:l}=t;return fe(n,t)||fe(r,t)||fe(i,e)||fe(l,e)||n===i&&r===l}function lr(e,t=!1){const{from:n,to:r}=e;if(n>r)return[];const i=r-n;return Rt(t?i+1:i,n)}function Rt(e,t=0){return[...Array(e)].map((n,r)=>r+t)}var sr=v("<div class=dynamic-columns style=gap:1rem;--min-width:30rem><!$><!/><!$><!/><!$><!/>"),or=v("<div><h4 style=margin-block-end:1.5rem></h4><!$><!/>"),cr=v("<p>Konflikte gefunden! Bitte stelle sicher, dass du nicht zeitlich überlappende Spielrunden eingetragen hast:"),ur=v('<div style="display:grid;grid-template-columns:1fr max-content 1fr;gap:1rem;margin-block:0.5rem"><!$><!/><span style=color:var(--clr-warning-10);align-self:center;font-size:2rem></span><!$><!/>'),dr=v("<div><!$><!/><div class=entries></div><div class=after-hour><div class=annotation>"),gr=v("<div><div class=annotation></div><div class=background>"),hr=v("<div class=entry>");function fr(e){return(()=>{var t=$(sr),n=t.firstChild,[r,i]=S(n.nextSibling),l=r.nextSibling,[a,c]=S(l.nextSibling),o=a.nextSibling,[u,h]=S(o.nextSibling);return d(t,s(I,{get when(){return e.openingHours.FRIDAY.open.from!==e.openingHours.FRIDAY.open.to},get children(){return s(Fe,{get programEntries(){return e.programEntries.FRIDAY},get openingHoursOfDay(){return e.openingHours.FRIDAY},get openingHours(){return e.openingHours},day:"FRIDAY",get conflictsAllowed(){return e.conflictsAllowed??!1}})}}),r,i),d(t,s(Fe,{get programEntries(){return e.programEntries.SATURDAY},get openingHoursOfDay(){return e.openingHours.SATURDAY},get openingHours(){return e.openingHours},day:"SATURDAY",get conflictsAllowed(){return e.conflictsAllowed??!1}}),a,c),d(t,s(Fe,{get programEntries(){return e.programEntries.SUNDAY},get openingHoursOfDay(){return e.openingHours.SUNDAY},get openingHours(){return e.openingHours},day:"SUNDAY",get conflictsAllowed(){return e.conflictsAllowed??!1}}),u,h),t})()}function Fe(e){const t=e.conflictsAllowed?[]:br(e.programEntries);return(()=>{var n=$(or),r=n.firstChild,i=r.nextSibling,[l,a]=S(i.nextSibling);return d(r,()=>T.days[e.day]),d(n,s(ke,{get fallback(){return[s(D,{type:"danger",get children(){return $(cr)}}),s(ge,{each:t,children:([c,o])=>(()=>{var u=$(ur),h=u.firstChild,[m,k]=S(h.nextSibling),f=m.nextSibling,_=f.nextSibling,[g,b]=S(_.nextSibling);return d(u,()=>c.component(),m,k),d(f,s(j,{icon:"triangle-exclamation"})),d(u,()=>o.component(),g,b),u})()})]},get children(){return s(M,{get when(){return t.length===0},get children(){return s(mr,{get programEntries(){return e.programEntries},get openingHoursOfDay(){return e.openingHoursOfDay},get openingHours(){return e.openingHours},get day(){return e.day},get conflictsAllowed(){return e.conflictsAllowed}})}})}}),l,a),n})()}function mr(e){const t=lr(e.openingHoursOfDay.open),n=e.openingHoursOfDay.breaks.map(({from:a})=>a),r=(t[0]??0)-1,i=t.at(-1)??0,l=()=>{const a=["timetable"];return e.conflictsAllowed&&a.push("two-columns"),a.join(" ")};return(()=>{var a=$(dr),c=a.firstChild,[o,u]=S(c.nextSibling),h=o.nextSibling,m=h.nextSibling,k=m.firstChild;return d(a,s(ge,{each:t,children:f=>{const _=n.includes(f);return(()=>{var g=$(gr),b=g.firstChild;return re(g,`hour ${_?"break":""}`),d(b,f),W(p=>Ce(g,rt({from:f,to:f},r,e.day,e.openingHours),p)),g})()}}),o,u),d(h,s(ge,{get each(){return e.programEntries},children:f=>(()=>{var _=$(hr);return d(_,()=>f.component()),W(g=>Ce(_,rt(f.range,r,e.day,e.openingHours),g)),_})()})),d(k,i+1),W(f=>{var _=l(),g=`grid-row: 1 / ${i-r+1};`;return _!==f.e&&re(a,f.e=_),f.t=Ce(h,g,f.t),f},{e:void 0,t:void 0}),a})()}function rt(e,t,n,r){const{from:i,to:l}=e,a=i-t,c=l-t,o=r[n].open.to;return Re(a>0,`Entry can't start at ${i}.`),Re(c>0,`Entry can't end at ${l}.`),Re(l<=o,`Entry can't end at ${l}.`),`grid-row: ${a} / ${c};`}function br(e){const t=[];return e.forEach((n,r)=>{e.slice(r+1).forEach(i=>{ar(n.range,i.range)&&t.push([n,i])})}),t}const ze={kitchen:{title:"Küche",description:"Mahlzeit vorbereiten, unterstützen beim Kochen und Abwaschen."},service:{title:"Essensausgabe",description:""},cleaning:{title:"Reinigung",description:"Unterstützen beim Küche aufräumen und putzen."},kiosk:{title:"Kiosk",description:"Am Kiosk Getränke (inkl. Kaffee) und Snacks verkaufen."}},ue={FRIDAY:{},SATURDAY:{10:[{uuid:"90178258-734d-4c7d-9df0-891f6d46a5dc",count:1,kind:"kiosk"},{uuid:"9ebca7e9-f44a-4cc9-8961-73539f17d5d6",count:1,kind:"kitchen"}],11:[{uuid:"690037d9-bd4f-407c-b202-d0dd71d775d2",count:1,kind:"kiosk"},{uuid:"804c379d-c747-4d7c-9f0c-a53f8548216e",count:1,kind:"kitchen"}],12:[{uuid:"bfec6f59-14eb-45b9-a21c-d33ee2205b64",count:1,kind:"kiosk"},{uuid:"97507994-efa1-4e38-9191-3034f77005ad",count:2,kind:"kitchen"}],13:[{uuid:"8db23dfd-616e-4f1d-9a07-deb6e519d35a",count:2,kind:"service"}],14:[{uuid:"a155bb61-d1a6-4f3f-8da3-46eb57030a96",count:1,kind:"kiosk"},{uuid:"9faf0a19-45be-4968-9eb0-a9f48e94a616",count:1,kind:"cleaning"}],15:[{uuid:"30c6d6ea-3d65-4040-9dde-abb5f4b58e35",count:1,kind:"kiosk"}],16:[{uuid:"f70d01f6-cba3-4e3a-be3e-7cdea2cbdb4b",count:1,kind:"kiosk"},{uuid:"210e67fe-541e-48bc-a515-d0f5cac12c0b",count:1,kind:"kitchen"}],17:[{uuid:"8cdc6efb-d0ff-4a8e-8130-700d2284d2e1",count:1,kind:"kiosk"},{uuid:"40ad7820-f4cd-4c8b-914a-203f4cc7b00a",count:2,kind:"kitchen"}],18:[{uuid:"d4eac28b-130b-4a8e-ad5f-8aee57c2d4d8",count:2,kind:"service"}],19:[{uuid:"6fd5ef92-5bb3-4f1a-8673-e81596e53894",count:1,kind:"kiosk"},{uuid:"6333be4b-93d9-40c4-8167-dca4f9bb87e1",count:1,kind:"cleaning"}],20:[{uuid:"037c19be-79b5-4f94-967d-ffdf9e8c4cd0",count:1,kind:"kiosk"}],21:[{uuid:"ce9d82b2-7633-4741-ae58-c96872ffd6bd",count:1,kind:"kiosk"}]},SUNDAY:{10:[{uuid:"ff91d0b8-8bf3-4390-be69-3097d94b7ff0",count:1,kind:"kiosk"}],11:[{uuid:"f19c658b-5ad3-4c6a-b344-a2e6756385d9",count:1,kind:"kiosk"},{uuid:"ca76897c-844d-4be4-9f5f-8e22e04ee0af",count:1,kind:"kitchen"}],12:[{uuid:"21d3be63-10a6-4165-8203-b4d202d78718",count:1,kind:"kiosk"},{uuid:"90dfe7c7-1742-4bbf-8f83-cdf6b149af2e",count:2,kind:"kitchen"}],13:[{uuid:"9d189005-d51b-4fa8-81f1-22e5110fe684",count:2,kind:"service"}],14:[{uuid:"01fef159-e93c-4066-9a79-85ba7333dd02",count:1,kind:"kiosk"},{uuid:"1196df90-15a5-4c2b-b30e-722c868ebead",count:1,kind:"cleaning"}],15:[{uuid:"aef187b1-97f8-4607-844c-79c1404a3796",count:1,kind:"kiosk"}],16:[{uuid:"cd1077c1-8fea-42de-a769-32b255f89070",count:1,kind:"kiosk"}],17:[{uuid:"1231cecf-7aeb-45e7-b0dc-af8641ecdd94",count:1,kind:"kiosk"}]}};function $r(e){return it("SATURDAY",ue.SATURDAY).concat(it("SUNDAY",ue.SUNDAY)).find(n=>n.entry.uuid===e)??null}function it(e,t){const n=[];return Object.entries(t).forEach(([r,i])=>{const l=Number(r);i.forEach(a=>{n.push({dateTime:{day:e,from:l,to:l+1},entry:a})})}),n}const Sr={FRIDAY:{open:{from:16,to:24},breaks:[]},SATURDAY:{open:{from:9,to:24},breaks:[{from:13,to:14},{from:18,to:19}]},SUNDAY:{open:{from:10,to:18},breaks:[{from:13,to:14}]}};var vr=v("<span>");function at(e){const t=()=>{const n=["chip"];return n.push(e.kind??"gray"),e.inverted&&n.push("inverted"),e.size==="small"&&n.push("small"),n.join(" ")};return(()=>{var n=$(vr);return d(n,()=>e.children),W(r=>{var i=t(),l=e.title;return i!==r.e&&re(n,r.e=i),l!==r.t&&zt(n,"title",r.t=l),r},{e:void 0,t:void 0}),n})()}const _r=mt(P().uuid());async function At(e){const t=await Qt(e);if(t.kind==="FAILURE")return console.error("Unexpected error. Maybe network, maybe server error."),{kind:"FAILURE"};const n=_r.safeParse(t.data);return n.success?{kind:"SUCCESS",data:n.data}:{kind:"FAILURE"}}var kr=v("<p>Beim Kiosk und der Essensausgabe können wir immer ein paar helfende Hände gebrauchen. Wenn du bereit bist zu helfen, klicke in der jeweiligen Stunde auf das Handsymbol <!$><!/>."),pr=v("<br>"),yr=v("<p>Plan konnte nicht geladen werden."),Er=v("<div><!$><!/><!$><!/><h5></h5><p class=duration><em>alle Helfer:innen gefunden"),wr=v("<div><!$><!/><!$><!/><h5></h5><p class=duration><!$><!/> <!$><!/> gesucht");function xr(e){const[t]=Ge(),[n]=pe(()=>At(String(t.secret)));return[(()=>{var r=$(kr),i=r.firstChild,l=i.nextSibling,[a,c]=S(l.nextSibling);return a.nextSibling,d(r,s(j,{icon:"hand-heart"}),a,c),r})(),$(pr),s(We,{get fallback(){return s(D,{get children(){return T.loading.program}})},get children(){return s(I,{get when(){return n()},get fallback(){return s(D,{type:"danger",get children(){return T.error.help}})},children:r=>s(I,{get when(){return r().kind==="SUCCESS"},get fallback(){return s(D,{type:"danger",get children(){return $(yr)}})},get children(){return s(Rr,{get helpReservations(){return e.store.helping},get externalHelpReservations(){return r().data},get isEditable(){return e.isEditable},get link(){return e.link}})}})})}})]}function Rr(e){const t=()=>{const r=[];return e.helpReservations.forEach(i=>{r.push(i.helpEntryUuid)}),e.externalHelpReservations.forEach(i=>{r.push(i)}),r},n=()=>({FRIDAY:Pe({constants:ue.FRIDAY,alreadyReservedUuids:t(),myReservations:e.helpReservations,link:e.link}),SATURDAY:Pe({constants:ue.SATURDAY,alreadyReservedUuids:t(),myReservations:e.helpReservations,link:e.link}),SUNDAY:Pe({constants:ue.SUNDAY,alreadyReservedUuids:t(),myReservations:e.helpReservations,link:e.link})});return s(fr,{get programEntries(){return n()},openingHours:Sr,conflictsAllowed:!0})}function Pe(e){const t=yt(),n=[],r=Ar(e.alreadyReservedUuids);return Object.entries(e.constants).forEach(([i,l])=>{l.forEach(a=>{const c={from:Number(i),to:Number(i)+1},o=()=>a.count-(r[a.uuid]??0),u=()=>e.myReservations.filter(m=>m.helpEntryUuid===a.uuid).length>0,h=()=>{const m=["box-simple","timeview-entry"];return u()&&m.push("success"),m.join(" ")};o()===0?n.push({range:c,component:()=>(()=>{var m=$(Er),k=m.firstChild,[f,_]=S(k.nextSibling),g=f.nextSibling,[b,p]=S(g.nextSibling),y=b.nextSibling;return d(m,s(at,{title:"Helfer:innen gesucht",get inverted(){return u()},size:"small",children:"HL"}),f,_),d(m,s(I,{get when(){return u()},get children(){return s(de,{icon:"hand-heart",kind:"ghost",onClick:()=>t(e.link(`/helfen/${a.uuid}`)),title:"Helfen"})}}),b,p),d(y,()=>ze[a.kind].title),W(()=>re(m,h())),m})()}):n.push({range:c,component:()=>(()=>{var m=$(wr),k=m.firstChild,[f,_]=S(k.nextSibling),g=f.nextSibling,[b,p]=S(g.nextSibling),y=b.nextSibling,R=y.nextSibling,A=R.firstChild,[U,F]=S(A.nextSibling),O=U.nextSibling,B=O.nextSibling,[z,G]=S(B.nextSibling);return z.nextSibling,d(m,s(at,{title:"Helfer:innen gesucht",get inverted(){return u()},size:"small",children:"HL"}),f,_),d(m,s(de,{icon:"hand-heart",kind:"ghost",onClick:()=>t(e.link(`/helfen/${a.uuid}`)),title:"Helfen"}),b,p),d(y,()=>ze[a.kind].title),d(R,o,U,F),d(R,()=>o()===1?"Helfer:in":"Helfer:innen",z,G),W(()=>re(m,h())),m})()})})}),n}function Ar(e){const t=Object.groupBy(e,r=>r),n={};for(const r of e)n[r]=t[r]?.length??0;return n}var Cr=v("<dialog closedby=any><!$><!/><!$><!/><!$><!/>"),Dr=v("<h4>");function Ur(e=!1){return{open:e}}function Lr(e){let t;const[n,r]=Y(e.store);Mt(()=>{n.open?t.showModal():t.close()});function i(){r({open:!1}),e.onClose?.()}const l=()=>{const a=[];return e.type!==void 0&&a.push(e.type),e.size!==void 0&&a.push(e.size),e.onClose!==void 0&&a.push("dialog-with-close"),a};return(()=>{var a=$(Cr),c=a.firstChild,[o,u]=S(c.nextSibling),h=o.nextSibling,[m,k]=S(h.nextSibling),f=m.nextSibling,[_,g]=S(f.nextSibling);a.addEventListener("close",i);var b=t;return typeof b=="function"?Kt(b,a):t=a,d(a,s(I,{get when(){return e.onClose},get children(){return s(de,{onClick:i,icon:"circle-xmark",kind:"gray"})}}),o,u),d(a,s(I,{get when(){return e.title},children:p=>(()=>{var y=$(Dr);return d(y,p),y})()}),m,k),d(a,()=>e.children,_,g),W(()=>re(a,l().join(" "))),a})()}var Ir=v("<p>");function He(e){const[t,n]=Y(e.store),r=e.showErrors==="ALWAYS",i=()=>r||t.isDirty?e.errors??[]:[];return[s(Lt,{get label(){return e.label},get name(){return e.name},get value(){return t.value},onValueUpdate:l=>{n("value",l),e.onUpdate?.()},onBlur:()=>n("isDirty",!0),get type(){return e.type},get required(){return e.required},get isHoneypot(){return e.isHoneypot},get disabled(){return e.disabled}}),s(I,{get when(){return i().length>0},get children(){return s(D,{type:"danger",get children(){return s(ge,{get each(){return i()},children:l=>(()=>{var a=$(Ir);return d(a,l),a})()})}})}})]}P().transform(e=>({value:e,isDirty:!1}));function Te(e){return{value:e,isDirty:!1}}Oe().transform(e=>({value:e,isDirty:!1}));var Fr=v("<div>"),Pr=v("<div style=display:grid;gap:1rem><h3>Meine Kontaktdaten</h3><p><strong>Name:</strong> <!$><!/></p><p><strong>E-Mail:</strong> <!$><!/></p><p><strong>Handynummer:</strong> <!$><!/></p><!$><!/>"),Hr=v("<form novalidate><!$><!/><!$><!/><!$><!/><!$><!/>");function Tr(e){return s(Nr,{get store(){return e.store.contact},get isEditable(){return e.isEditable}})}function Nr(e){const[t,n]=Y(e.store),[r,i]=Y(Ur());return s(D,{get children(){return[s(I,{get when(){return r.open},get children(){return s(Or,{dialogStore:r,get currentState(){return e.store},updateCurrentState:n})}}),(()=>{var l=$(Pr),a=l.firstChild,c=a.nextSibling,o=c.firstChild,u=o.nextSibling,h=u.nextSibling,[m,k]=S(h.nextSibling),f=c.nextSibling,_=f.firstChild,g=_.nextSibling,b=g.nextSibling,[p,y]=S(b.nextSibling),R=f.nextSibling,A=R.firstChild,U=A.nextSibling,F=U.nextSibling,[O,B]=S(F.nextSibling),z=R.nextSibling,[G,ae]=S(z.nextSibling);return d(c,()=>e.store.name,m,k),d(f,()=>e.store.email,p,y),d(R,()=>e.store.mobile,O,B),d(l,s(I,{get when(){return e.isEditable},get children(){var ee=$(Fr);return d(ee,s(ne,{icon:"pencil",label:"Kontaktdaten editieren",onClick:()=>i("open",!0)})),ee}}),G,ae),l})()]}})}function Or(e){const[t]=Ge(),[n]=Y({name:Te(e.currentState.name),email:Te(e.currentState.email),mobile:Te(e.currentState.mobile)}),[r,i]=Y({kind:"IDLE",isDuplicate:!1}),l=H(()=>{const o={name:[],email:[]};return n.name.value.trim().length===0&&o.name.push(T.mandatoryField),n.email.value.trim().length===0?o.email.push(T.mandatoryField):n.email.value.includes("@")||o.email.push(T.invalidEmail),r.kind==="IDLE"&&r.isDuplicate&&o.email.push("Diese E-Mail wird bereits verwendet."),{...o,hasErrors:o.name.length+o.email.length>0}}),[a,c]=Y(e.dialogStore);return s(Lr,{get store(){return e.dialogStore},title:"Kontaktdaten editieren",onClose:()=>{},size:"medium",get children(){var o=$(Hr),u=o.firstChild,[h,m]=S(u.nextSibling),k=h.nextSibling,[f,_]=S(k.nextSibling),g=f.nextSibling,[b,p]=S(g.nextSibling),y=b.nextSibling,[R,A]=S(y.nextSibling);return d(o,s(He,{get store(){return n.name},label:"Name",name:"name",showErrors:"ON_BLUR",get errors(){return l().name}}),h,m),d(o,s(He,{get store(){return n.email},label:"E-Mail",name:"email",showErrors:"ALWAYS",get errors(){return l().email},onUpdate:()=>i({kind:"IDLE",isDuplicate:!1})}),f,_),d(o,s(He,{get store(){return n.mobile},label:"Handynummer",name:"mobile"}),b,p),d(o,s(be,{label:"Speichern",get disabled(){return l().hasErrors||r.kind==="CHECKING"},onClick:async()=>{if(!l().hasErrors){i({kind:"CHECKING"});const U=t.secret,F=await fetch(_e(`/lst26/check-email?email=${n.email.value}&secret=${U}`));if(!F.ok){i({kind:"IDLE",isDuplicate:!0});return}const O=await F.json(),B=Yr.safeParse(O);if(!B.success){i({kind:"IDLE",isDuplicate:!0});return}if(B.data.kind==="FAILURE"){i({kind:"IDLE",isDuplicate:!0});return}i({kind:"IDLE",isDuplicate:!1}),e.updateCurrentState({name:n.name.value,email:n.email.value,mobile:n.mobile.value}),c("open",!1)}}}),R,A),o}})}const Yr=ft([q({kind:ie("SUCCESS")}),q({kind:ie("FAILURE")})]);var Br=v("<div class=tooltip-wrapper><div class=tooltip></div><!$><!/>");function Ne(e){return(()=>{var t=$(Br),n=t.firstChild,r=n.nextSibling,[i,l]=S(r.nextSibling);return d(n,()=>e.tooltip),d(t,()=>e.children,i,l),t})()}var zr=v("<div class=quickmenu-wrapper><div class=quickmenu><!$><!/><!$><!/><!$><!/>"),Mr=v('<div class="quickmenu extended"><!$><!/><!$><!/><!$><!/>'),Kr=v("<div style=margin-block-start:1rem;display:flex;gap:0.5rem;align-items:center><!$><!/><em>Zuletzt gespeichert um: <!$><!/> Uhr"),jr=v("<div style=margin-block-start:1rem;display:flex;gap:0.5rem;align-items:center><!$><!/><em>Am Speichern..."),Wr=v("<div style=margin-block-start:1rem;display:flex;gap:0.5rem;align-items:center><!$><!/><em>Speichern war nicht möglich!");function qr(e){return(()=>{var t=$(zr),n=t.firstChild,r=n.firstChild,[i,l]=S(r.nextSibling),a=i.nextSibling,[c,o]=S(a.nextSibling),u=c.nextSibling,[h,m]=S(u.nextSibling);return d(n,s(Ne,{tooltip:"Zur Übersicht",get children(){return s(Z,{get href(){return e.link("/")},class:"button-link",get children(){return s(be,{get label(){return s(j,{icon:"backward"})}})}})}}),i,l),d(n,s(Ne,{tooltip:"Zum Helferplan",get children(){return s(Z,{get href(){return e.link("/helfen")},class:"button-link",get children(){return s(be,{get label(){return s(j,{icon:"hand-heart"})}})}})}}),c,o),d(n,s(Ne,{tooltip:"Zur Zusammenfassung",get children(){return s(Z,{get href(){return e.link("/zusammenfassung")},class:"button-link",get children(){return s(be,{get label(){return s(j,{icon:"list"})}})}})}}),h,m),t})()}function Vr(e){return[s(D,{type:"gray",get children(){var t=$(Mr),n=t.firstChild,[r,i]=S(n.nextSibling),l=r.nextSibling,[a,c]=S(l.nextSibling),o=a.nextSibling,[u,h]=S(o.nextSibling);return d(t,s(Z,{get href(){return e.link("/")},class:"button-link",get children(){return s(ne,{icon:"backward",label:"Zur Übersicht"})}}),r,i),d(t,s(Z,{get href(){return e.link("/helfen")},class:"button-link",get children(){return s(ne,{icon:"hand-heart",label:"Zum Helferplan"})}}),a,c),d(t,s(Z,{get href(){return e.link("/zusammenfassung")},class:"button-link",get children(){return s(ne,{icon:"list",label:"Zur Zusammenfassung"})}}),u,h),t}}),s(Zr,{get saveState(){return e.saveState},get lastSaved(){return e.lastSaved}})]}function Zr(e){return s(ke,{get children(){return[s(M,{get when(){return e.saveState==="IDLE"},get children(){var t=$(Kr),n=t.firstChild,[r,i]=S(n.nextSibling),l=r.nextSibling,a=l.firstChild,c=a.nextSibling,[o,u]=S(c.nextSibling);return o.nextSibling,d(t,s(j,{icon:"circle-check"}),r,i),d(l,()=>st(e.lastSaved),o,u),t}}),s(M,{get when(){return e.saveState==="SAVING"},get children(){var t=$(jr),n=t.firstChild,[r,i]=S(n.nextSibling);return r.nextSibling,d(t,s(j,{icon:"floppy-disk-circle-arrow-right"}),r,i),t}}),s(M,{get when(){return e.saveState==="ERROR"},get children(){var t=$(Wr),n=t.firstChild,[r,i]=S(n.nextSibling);return r.nextSibling,d(t,s(j,{icon:"triangle-exclamation"}),r,i),t}})]}})}var Gr=v("<div class=page><!$><!/><div class=page-content><h2></h2><br><!$><!/></div><!$><!/>"),Qr=v("<div class=extended-wrapper style=margin-block-start:1rem>");function me(e){return(()=>{var t=$(Gr),n=t.firstChild,[r,i]=S(n.nextSibling),l=r.nextSibling,a=l.firstChild,c=a.nextSibling,o=c.nextSibling,[u,h]=S(o.nextSibling),m=l.nextSibling,[k,f]=S(m.nextSibling);return d(t,(()=>{var _=Se(()=>e.showQuickmenu!==!1);return()=>_()?s(qr,{get link(){return e.link},get saveState(){return e.saveState},get lastSaved(){return e.lastSaved}}):null})(),r,i),d(a,()=>e.title),d(l,()=>e.children,u,h),d(t,(()=>{var _=Se(()=>e.showQuickmenu!==!1);return()=>_()?(()=>{var g=$(Qr);return d(g,s(Vr,{get link(){return e.link},get saveState(){return e.saveState},get lastSaved(){return e.lastSaved}})),g})():null})(),k,f),t})()}var Jr=v('<form class=input-button style="display:grid;gap:0rem;grid-template-columns:1fr max-content"><input type=text style=border-color:var(--clr-special-9)><!$><!/>');function lt(e){const[t,n]=J("");return(()=>{var r=$(Jr),i=r.firstChild,l=i.nextSibling,[a,c]=S(l.nextSibling);return r.addEventListener("submit",o=>{o.preventDefault();const u=t();u.trim().length>0&&e.addFriend(u)}),Xe(r,"noValidate",!0),i.$$input=o=>n(o.target.value),d(r,s(ne,{icon:"arrow-right",type:"submit",label:"Begleitperson anmelden",kind:"special"}),a,c),W(()=>Xe(i,"value",t())),ht(),r})()}gt(["input"]);var Xr=v("<p>Plan konnte nicht geladen werden."),ei=v("<div class=game-dialog><ul role=list style=display:grid;gap:0.5rem><li><strong style=color:var(--clr-accent-1)>Tag, Zeit:</strong> <br><!$><!/>, <!$><!/> - <!$><!/> Uhr</li><li><strong style=color:var(--clr-accent-1)>Beschreibung:</strong> <br><!$><!/></li></ul><div class=reservations><h5 style=margin-block-start:0>Plätze reservieren</h5><div class=reservation-table>"),ti=v("<div class=count>"),ni=v("<div class=reservation-table-entry><p>Reserviert für mich </p><!$><!/>"),ri=v('<div class=reservation-table-entry><p>Reserviert für "<!$><!/>"</p><!$><!/>'),ii=v('<div style="display:grid;gap:1rem;grid-template-columns:max-content 1fr"><!$><!/><!$><!/>');function ai(e){const[t,n]=Y(e.store),r=In().uuid??"no-uuid-found",i=$r(r),[l]=Ge(),[a]=pe(()=>At(String(l.secret)));return s(We,{get fallback(){return s(D,{get children(){return T.loading.program}})},get children(){return s(I,{get when(){return a()},get fallback(){return s(D,{type:"danger",get children(){return T.error.help}})},children:c=>s(I,{get when(){return c().kind==="SUCCESS"},get fallback(){return s(D,{type:"danger",get children(){return $(Xr)}})},get children(){return s(I,{when:i,children:o=>s(li,{get entry(){return o()},get helpReservations(){return e.store.helping},get externalHelpReservations(){return c().data},get isEditable(){return e.isEditable},addReservation:u=>n("helping",t.helping.length,{...u,uuid:crypto.randomUUID()}),removeReservation:u=>{n("helping",t.helping.filter(h=>h.uuid!==u))}})})}})})}})}function li(e){const{dateTime:t,entry:n}=e.entry,r=ze[n.kind],i=()=>e.helpReservations.filter(o=>o.helpEntryUuid===n.uuid),l=e.externalHelpReservations.filter(o=>o===n.uuid).length,a=()=>Rt(n.count).map(o=>{const u=i()[o];return u!==void 0?u:n.count-l<=o?{kind:"RESERVED_OTHER"}:{kind:"FREE"}}),c=()=>i().find(o=>o.kind==="SELF")!==void 0;return(()=>{var o=$(ei),u=o.firstChild,h=u.firstChild,m=h.firstChild,k=m.nextSibling,f=k.nextSibling,_=f.nextSibling,[g,b]=S(_.nextSibling),p=g.nextSibling,y=p.nextSibling,[R,A]=S(y.nextSibling),U=R.nextSibling,F=U.nextSibling,[O,B]=S(F.nextSibling);O.nextSibling;var z=h.nextSibling,G=z.firstChild,ae=G.nextSibling,ee=ae.nextSibling,ye=ee.nextSibling,[E,w]=S(ye.nextSibling),L=u.nextSibling,V=L.firstChild,le=V.nextSibling;return d(h,()=>T.days[t.day],g,b),d(h,()=>t.from,R,A),d(h,()=>t.to,O,B),d(z,()=>r.description,E,w),d(le,s(ge,{get each(){return a()},children:(C,se)=>[(()=>{var x=$(ti);return d(x,()=>se()+1),x})(),s(ke,{get children(){return[s(M,{get when(){return C.kind==="RESERVED_OTHER"},get children(){return s(D,{children:"Bereits reserviert"})}}),s(M,{get when(){return!e.isEditable},get children(){return s(D,{children:"Freier Platz"})}}),s(M,{get when(){return C.kind==="SELF"},get children(){return s(Qe,{type:"success",get children(){var x=$(ni),N=x.firstChild,K=N.nextSibling,[oe,te]=S(K.nextSibling);return d(x,s(de,{icon:"trash",onClick:()=>e.removeReservation(C.kind==="SELF"?C.uuid:"should not happen")}),oe,te),x}})}}),s(M,{get when(){return C.kind==="FRIEND"},get children(){return s(Qe,{type:"success",get children(){var x=$(ri),N=x.firstChild,K=N.firstChild,oe=K.nextSibling,[te,Ee]=S(oe.nextSibling);te.nextSibling;var we=N.nextSibling,[xe,Ct]=S(we.nextSibling);return d(N,(()=>{var Dt=Se(()=>C.kind==="FRIEND");return()=>Dt()?C.name:"[Fehler beim Laden]"})(),te,Ee),d(x,s(de,{icon:"trash",onClick:()=>e.removeReservation(C.kind==="FRIEND"?C.uuid:"should not happen")}),xe,Ct),x}})}}),s(M,{get when(){return C.kind==="FREE"},get children(){return s(I,{get when(){return c()},get fallback(){return(()=>{var x=$(ii),N=x.firstChild,[K,oe]=S(N.nextSibling),te=K.nextSibling,[Ee,we]=S(te.nextSibling);return d(x,s(ne,{icon:"person-to-portal",label:"Mich anmelden",kind:"success",onClick:()=>e.addReservation({kind:"SELF",helpEntryUuid:n.uuid,uuid:crypto.randomUUID()})}),K,oe),d(x,s(lt,{addFriend:xe=>e.addReservation({kind:"FRIEND",helpEntryUuid:n.uuid,name:xe,uuid:crypto.randomUUID()})}),Ee,we),x})()},get children(){return s(lt,{addFriend:x=>e.addReservation({kind:"FRIEND",helpEntryUuid:n.uuid,name:x,uuid:crypto.randomUUID()})})}})}})]}})]})),o})()}function si(e){const[t,n]=Y({meta:{saveState:"IDLE",lastSaved:new Date},save:e.initState.data}),r=crypto.randomUUID(),[i,l]=J(!1);pe(()=>JSON.stringify(t.save),async()=>{if(!i()){l(!0);return}if(e.initState.status!=="published"){bt("Diese Anmeldung wurde deaktiviert und kann nicht editiert werden.",{kind:"danger",uuid:r});return}const c=Wt(t.save);try{const o=await an(t.meta,c,e.secret);o.kind==="FAILURE"?console.error(o):n("meta","lastSaved",o.data)}catch(o){console.error(o),n("meta","saveState","ERROR")}});function a(c){return`${c}?secret=${e.secret}`}return s(Gn,{children:[{path:"/",component:()=>s(me,{title:"Wo möchtest du starten?",link:a,get saveState(){return t.meta.saveState},get lastSaved(){return t.meta.lastSaved},get children(){return s(Ie,{link:a})}})},{path:"/runden",component:()=>s(Ie,{link:a})},{path:"/erstellen",component:()=>s(Ie,{link:a})},{path:"/helfen",component:()=>s(me,{title:"Helfen",link:a,get saveState(){return t.meta.saveState},get lastSaved(){return t.meta.lastSaved},showQuickmenu:!0,get children(){return s(xr,{get store(){return t.save},get isEditable(){return e.initState.status==="published"},link:a})}})},{path:"/helfen/:uuid",component:()=>s(me,{title:"Helfen",link:a,get saveState(){return t.meta.saveState},get lastSaved(){return t.meta.lastSaved},showQuickmenu:!0,get children(){return s(ai,{get store(){return t.save},get isEditable(){return e.initState.status==="published"}})}})},{path:"/zusammenfassung",component:()=>s(me,{title:"Zusammenfassung",link:a,get saveState(){return t.meta.saveState},get lastSaved(){return t.meta.lastSaved},showQuickmenu:!0,get children(){return s(Tr,{get store(){return t.save},get isEditable(){return e.initState.status==="published"}})}})}]})}function oi(){return s(D,{get children(){return T.loading.registration}})}function mi(){const t=URL.parse(location.toString().replace("#/",""))?.searchParams.get("secret")??"no-secret-found",[n]=pe(()=>nn(t));return s(jt,{fallback:r=>(console.error(r),s(D,{type:"danger",get children(){return T.error.general}})),get children(){return s(We,{get fallback(){return s(oi,{})},get children(){return s(ke,{get children(){return s(M,{get when(){return n()},children:r=>{const{kind:i,value:l}=It(r());return i==="FAILURE"?l.reason==="SECRET_INVALID"?s(D,{type:"danger",get children(){return T.error.secretError}}):(console.error(l),s(D,{type:"danger",get children(){return T.error.ourMistake}})):s(si,{get initState(){return l.data},secret:t})}})}})}})}})}export{mi as MeineAnmeldungWrapper};
